/*
BUILT_AT: 2022年11月10日 07:29
*/

!(function (t) {
  function e(e) {
    for (
      var i, r, a = e[0], c = e[1], l = e[2], d = 0, p = [];
      d < a.length;
      d++
    )
      (r = a[d]),
        Object.prototype.hasOwnProperty.call(s, r) && s[r] && p.push(s[r][0]),
        (s[r] = 0);
    for (i in c) Object.prototype.hasOwnProperty.call(c, i) && (t[i] = c[i]);
    for (u && u(e); p.length; ) p.shift()();
    return o.push.apply(o, l || []), n();
  }
  function n() {
    for (var t, e = 0; e < o.length; e++) {
      for (var n = o[e], i = !0, a = 1; a < n.length; a++) {
        var c = n[a];
        0 !== s[c] && (i = !1);
      }
      i && (o.splice(e--, 1), (t = r((r.s = n[0]))));
    }
    return t;
  }
  var i = {},
    s = { 0: 0 },
    o = [];
  function r(e) {
    if (i[e]) return i[e].exports;
    var n = (i[e] = { i: e, l: !1, exports: {} });
    return t[e].call(n.exports, n, n.exports, r), (n.l = !0), n.exports;
  }
  (r.m = t),
    (r.c = i),
    (r.d = function (t, e, n) {
      r.o(t, e) || Object.defineProperty(t, e, { enumerable: !0, get: n });
    }),
    (r.r = function (t) {
      "undefined" != typeof Symbol &&
        Symbol.toStringTag &&
        Object.defineProperty(t, Symbol.toStringTag, { value: "Module" }),
        Object.defineProperty(t, "__esModule", { value: !0 });
    }),
    (r.t = function (t, e) {
      if ((1 & e && (t = r(t)), 8 & e)) return t;
      if (4 & e && "object" == typeof t && t && t.__esModule) return t;
      var n = Object.create(null);
      if (
        (r.r(n),
        Object.defineProperty(n, "default", { enumerable: !0, value: t }),
        2 & e && "string" != typeof t)
      )
        for (var i in t)
          r.d(
            n,
            i,
            function (e) {
              return t[e];
            }.bind(null, i)
          );
      return n;
    }),
    (r.n = function (t) {
      var e =
        t && t.__esModule
          ? function () {
              return t.default;
            }
          : function () {
              return t;
            };
      return r.d(e, "a", e), e;
    }),
    (r.o = function (t, e) {
      return Object.prototype.hasOwnProperty.call(t, e);
    }),
    (r.p = "//s1.hdslb.com/bfs/static/blive/blfe-message-web/");
  var a = (("undefined" != typeof self ? self : this).webpackJsonp =
      ("undefined" != typeof self ? self : this).webpackJsonp || []),
    c = a.push.bind(a);
  (a.push = e), (a = a.slice());
  for (var l = 0; l < a.length; l++) e(a[l]);
  var u = c;
  o.push([492, 1]), n();
})([
  ,
  ,
  ,
  function (t, e, n) {
    "use strict";
    n.d(e, "a", function () {
      return G;
    });
    n(4), n(11);
    var i = n(67),
      s = n(95),
      o = n.n(s).a.create({ timeout: "undefined" == typeof window ? 1e3 : 0 });
    n(5), n(10), n(31), n(32), n(18), n(26), n(24);
    function r(t) {
      return (r =
        "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
          ? function (t) {
              return typeof t;
            }
          : function (t) {
              return t &&
                "function" == typeof Symbol &&
                t.constructor === Symbol &&
                t !== Symbol.prototype
                ? "symbol"
                : typeof t;
            })(t);
    }
    function a(t, e) {
      if (!(t instanceof e))
        throw new TypeError("Cannot call a class as a function");
    }
    var c = function t() {
        var e =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 0,
          n =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "",
          i =
            arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {},
          s =
            arguments.length > 3 && void 0 !== arguments[3]
              ? arguments[3]
              : "对不起，服务器开小差了~ (ಥ﹏ಥ)",
          o =
            arguments.length > 4 && void 0 !== arguments[4]
              ? arguments[4]
              : "error",
          c =
            arguments.length > 5 && void 0 !== arguments[5]
              ? arguments[5]
              : -8888,
          l =
            arguments.length > 6 && void 0 !== arguments[6] ? arguments[6] : {};
        if ((a(this, t), "object" === r(s))) {
          var u = "对不起，服务器开小差了~ (ಥ﹏ಥ)";
          s.response
            ? (u = ""
                .concat(s.response.statusText, " ")
                .concat(s.response.status))
            : "ECONNABORTED" === s.code &&
              (u = "接口超时，稍后再试试吧~ (ಥ﹏ಥ)"),
            (this.msg = u);
        } else this.msg = s;
        (this.type = o),
          (this.code = c),
          (this.data = l),
          (this.url = n),
          (this.payload = i),
          (this.cost = e);
      },
      l = n(16),
      u = Object(l.c)(),
      d = "IE 9" === u || "IE Legacy" === u,
      p = d || "IE 10" === u || "IE 11" === u;
    n(2), n(9), n(37);
    var m = {};
    var f = {},
      h = function () {
        var t = Math.random();
        return (f[t] = Date.now()), t;
      },
      g = function (t) {
        if (!t) return 0;
        if (f[t]) {
          var e = Date.now() - f[t];
          return delete f[t], e;
        }
        return 0;
      };
    n(45), n(27);
    var v = function (t, e) {
        var n = new RegExp("[?&]".concat(e, "=([^&#]+)"));
        return (t.match(n) || [])[1] || "";
      },
      b = (n(47), n(13)),
      y = n(96),
      _ = n.n(y);
    function w(t) {
      if (!t) return t;
      var e = t;
      if (!("undefined" != typeof FormData && e instanceof FormData)) {
        var n = {};
        if ("undefined" != typeof window) {
          var i = v(window.location.href, "lang");
          if (i) {
            var s = "iphone";
            (/Android/i.test(navigator.userAgent) ||
              /Linux/i.test(navigator.userAgent)) &&
              (s = "android"),
              (n.lang = i),
              (n.mobi_app = "".concat(s, "_i"));
          }
        }
        (t = e = Object.assign(n, e)), p && (t._ = new Date().getTime());
      }
      return t;
    }
    n(57);
    function C(t, e) {
      if ("string" == typeof t) {
        var n = t
          .replace(/("\w*":)\s*(\d{16}\d*)/g, '$1"$2"')
          .replace(/(\\"\w*\\":)\s*(\d{16}\d*)/g, '$1\\"$2\\"')
          .replace(
            /("\w*":)\s*(\[\s*(\d{16}\d*)\s*(,\s*(\d{16}\d*)\s*)*])/g,
            function (t, e, n) {
              return "".concat(e).concat(
                n
                  .trim()
                  .replace(/\[\s*/, '["')
                  .replace(/\s*]\s*/, '"]')
                  .replace(/\s*,\s*/g, '","')
              );
            }
          )
          .replace(
            /(\\"\w*\\":)\s*(\[\s*(\d{16}\d*)\s*(,\s*(\d{16}\d*)\s*)*])/g,
            function (t, e, n) {
              return "".concat(e).concat(
                n
                  .trim()
                  .replace(/\[\s*/, '[\\"')
                  .replace(/\s*]/, '\\"]')
                  .replace(/\s*,\s*/g, '\\",\\"')
              );
            }
          );
        if (e)
          try {
            t = JSON.parse(n);
          } catch (t) {}
        else t = n;
      }
      return t;
    }
    function x(t) {
      return C(t, !1);
    }
    var k = function (t) {
        return C(t, !0);
      },
      S = n(304),
      I = n.n(S);
    function j(t, e, n, i, s, o) {
      var r = o ? t : t.data;
      return new Promise(function (t, o) {
        var a,
          l,
          u = function () {
            return 0 === r[a];
          };
        e.indexOf(b.a.SPACE) >= 0
          ? ((a = "status"),
            (l = "result"),
            (u = function () {
              return !0 === r[a];
            }))
          : e.indexOf(b.a.BANGUMI) >= 0
          ? ((a = "code"), (l = "result"))
          : e.indexOf(b.a.PASSPORT) >= 0
          ? ((a = "code"), (l = "access_info"))
          : ((a = "code"), (l = "data")),
          void 0 === r || void 0 === r[a]
            ? o(new c(s, e, n))
            : u()
            ? t(new c(s, e, n, "请求成功", "success", 0, i ? r : r[l]))
            : o(
                new c(
                  s,
                  e,
                  n,
                  r.message ||
                    r.msg ||
                    "电波无法到达~ ".concat(r.message || r.msg || r.code),
                  "caution",
                  r[a],
                  r[l]
                )
              );
      });
    }
    n(361), n(362);
    function O(t, e, n) {
      return (O = L()
        ? Reflect.construct
        : function (t, e, n) {
            var i = [null];
            i.push.apply(i, e);
            var s = new (Function.bind.apply(t, i))();
            return n && P(s, n.prototype), s;
          }).apply(null, arguments);
    }
    function L() {
      if ("undefined" == typeof Reflect || !Reflect.construct) return !1;
      if (Reflect.construct.sham) return !1;
      if ("function" == typeof Proxy) return !0;
      try {
        return (
          Boolean.prototype.valueOf.call(
            Reflect.construct(Boolean, [], function () {})
          ),
          !0
        );
      } catch (t) {
        return !1;
      }
    }
    function P(t, e) {
      return (P =
        Object.setPrototypeOf ||
        function (t, e) {
          return (t.__proto__ = e), t;
        })(t, e);
    }
    function A(t, e, n) {
      for (
        var i = arguments.length, s = new Array(i > 3 ? i - 3 : 0), o = 3;
        o < i;
        o++
      )
        s[o - 3] = arguments[o];
      return Promise.reject(O(c, [t, e, n].concat(s)));
    }
    n(8), n(15);
    function E(t, e) {
      for (var n = 0; n < e.length; n++) {
        var i = e[n];
        (i.enumerable = i.enumerable || !1),
          (i.configurable = !0),
          "value" in i && (i.writable = !0),
          Object.defineProperty(t, i.key, i);
      }
    }
    var T = (function () {
        function t() {
          !(function (t, e) {
            if (!(t instanceof e))
              throw new TypeError("Cannot call a class as a function");
          })(this, t),
            (this.store = {});
          var e = {},
            n = {};
          if ("undefined" != typeof window && window.localStorage)
            try {
              e = JSON.parse(window.localStorage.getItem("bpapi_cache")) || e;
            } catch (t) {}
          var i = new Date().getTime();
          Object.keys(e).forEach(function (t) {
            var s = e[t];
            s && i - s.ts < s.ttl && i - s.ts < 36e4 && (n[t] = s);
          }),
            (n.uniqueKey = e.uniqueKey),
            (this.store = n),
            this.setLocalCache();
        }
        var e, n, i;
        return (
          (e = t),
          (n = [
            {
              key: "set",
              value: function (t, e, n, i, s) {
                var o = this;
                return (
                  (!s || this.store.uniqueKey !== s || "0" === s) &&
                    n > 0 &&
                    (this.clearCache(), (this.store = {})),
                  s && ((this.uniqueKey = s), (this.store.uniqueKey = s)),
                  new Promise(function (r, a) {
                    try {
                      var c = {};
                      (c.response = e),
                        (c.ttl = n > 0 ? n : 0),
                        (c.ts = new Date().getTime()),
                        (o.store[t] = c),
                        i && n > 0 && s && "0" !== s && o.setLocalCache(),
                        r({ status: "success" });
                    } catch (t) {
                      a({ status: "failed", data: t });
                    }
                  })
                );
              },
            },
            {
              key: "get",
              value: function (t, e, n) {
                var i = this;
                return (
                  (!n || this.store.uniqueKey !== n || "0" === n) &&
                    e > 0 &&
                    (this.clearCache(), (this.store = {})),
                  n && ((this.uniqueKey = n), (this.store.uniqueKey = n)),
                  new Promise(function (n, s) {
                    try {
                      var o = i.store[t],
                        r = new Date().getTime();
                      o && r - o.ts < (e > 0 ? e : 0) && r - o.ts < 36e4
                        ? n({ status: "success", data: o.response })
                        : s({ status: "failed", data: o });
                    } catch (t) {
                      s({ status: "failed", data: t });
                    }
                  })
                );
              },
            },
            {
              key: "clearCache",
              value: function () {
                "undefined" != typeof window &&
                  window.localStorage &&
                  window.localStorage.removeItem("bpapi_cache");
              },
            },
            {
              key: "setLocalCache",
              value: function () {
                this.uniqueKey && (this.store.uniqueKey = this.uniqueKey),
                  "undefined" != typeof window &&
                    window.localStorage &&
                    this.uniqueKey &&
                    window.localStorage.setItem(
                      "bpapi_cache",
                      JSON.stringify(this.store)
                    );
              },
            },
          ]) && E(e.prototype, n),
          i && E(e, i),
          t
        );
      })(),
      M = (function () {
        return new T();
      })(),
      B = (n(33), "undefined" == typeof window);
    var D = function () {
        var t =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
          e =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
        if ("undefined" != typeof FormData && t instanceof FormData) {
          for (var n in e)
            e.hasOwnProperty(n) &&
              (FormData.prototype.set ? t.set(n, e[n]) : t.append(n, e[n]));
          return t;
        }
        return Object.assign(t, e);
      },
      N = function (t) {
        return new Promise(function (e) {
          if (t.addPlatInfo)
            if (i.inBiliApp) {
              t.data = D(
                t.data,
                (function () {
                  if ("undefined" == typeof navigator) return {};
                  var t = navigator.userAgent;
                  return {
                    build: t.match(/BiliApp\/([^ ]*)/)
                      ? t.match(/BiliApp\/([^ ]*)/)[1]
                      : 10,
                    mobi_app: t.match(/mobi_app\/([^ ]*)/)[1],
                  };
                })()
              );
              try {
                i.biliBridge.callNative({
                  method: "global.getContainerInfo",
                  callback: function (n) {
                    (t.data = D(t.data, {
                      build: n.build,
                      mobi_app: n.mobi_app,
                    })),
                      e(t);
                  },
                });
              } catch (n) {
                e(t);
              }
            } else (t.data = D(t.data, { build: 0, mobi_app: "web" })), e(t);
          else e(t);
        });
      },
      R =
        "undefined" != typeof window && window.BiliAjax
          ? window.BiliAjax.default
          : I.a,
      $ = new R({
        transformResponse: x,
        oldAppUseAxios: !0,
        newAppUseV2: !0,
        transformHeaders: function () {
          return { "Content-Type": "application/json" };
        },
        qsConfig: { jsonStringify: !0 },
      }),
      U = new R({ transformResponse: x, oldAppUseAxios: !0 }),
      V = function (t) {
        if ("undefined" != typeof FormData && t.data instanceof FormData)
          return o(w(t));
        var e = Object.assign({}, t);
        switch ((delete e.data, delete e.url, t.method.toLowerCase())) {
          case "get":
            return (t.ajaxVersion2 ? $ : U).get(t.url, w(t.data), e);
          case "post":
            return (t.ajaxVersion2 ? $ : U).post(t.url, w(t.data), e);
          default:
            return o(w(t));
        }
      };
    function z(t) {
      var e = t.useBridgeProxy,
        n = t.urlWithCSRF,
        i = h(),
        s = 0,
        r = t.url + JSON.stringify(t.data || "");
      return M.get(r, t.ttl, String(t.cache_key || ""))
        .then(function (n) {
          return (s = g(i)), j(n.data, t.url, t.data, t.needOriginal, s, e);
        })
        .catch(function () {
          return N(t)
            .then(function (t) {
              var i = e ? V : o,
                s = (function (t) {
                  var e = "";
                  if (B) return e;
                  var n = document.cookie;
                  if (!n) return e;
                  for (
                    var i = n.split(";"),
                      s = new RegExp("^".concat(t, "=")),
                      o = 0;
                    o < i.length;
                    o++
                  ) {
                    var r = i[o].trim();
                    if (s.test(r)) {
                      e = r.split("=")[1];
                      break;
                    }
                  }
                  return e;
                })("bili_jct");
              return (
                n &&
                  (t.url =
                    t.url.indexOf("?") > 0 && s
                      ? "".concat(t.url, "&csrf=").concat(s)
                      : "".concat(t.url, "?csrf=").concat(s)),
                (function (t, e) {
                  var n = this,
                    i =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 0;
                  return function () {
                    if (m[t] && i > 0) return m[t];
                    setTimeout(function () {
                      m[t] = null;
                    }, i);
                    for (
                      var s = arguments.length, o = new Array(s), r = 0;
                      r < s;
                      r++
                    )
                      o[r] = arguments[r];
                    return (m[t] = e.apply(n, o)), m[t];
                  };
                })(
                  r,
                  i,
                  t.throttleInterval
                )(t)
              );
            })
            .then(
              function (n) {
                return M.set(
                  r,
                  n,
                  t.ttl,
                  t.localCache,
                  String(t.cache_key || "")
                ).then(function () {
                  return (s = g(i)), j(n, t.url, t.data, t.needOriginal, s, e);
                });
              },
              function () {
                s = g(i);
                for (
                  var e = arguments.length, n = new Array(e), o = 0;
                  o < e;
                  o++
                )
                  n[o] = arguments[o];
                return A.apply(void 0, [s, t.url, t.data].concat(n));
              }
            );
        });
    }
    var H = n(305),
      F = n.n(H);
    i.inBiliApp &&
      (Object(i.initEnv)(),
      i.biliBridge.callNative({
        method: "global.import",
        data: { namespace: "net" },
      })),
      o.interceptors.request.use(function (t) {
        if (!t) return t;
        var e = t.method,
          n = t.url,
          i = t.data;
        t.withCredentials = !0;
        var s = i || {},
          o = "string" == typeof e && "post" === e.toLowerCase();
        if (o) {
          var r = l.a.getItem("bili_jct") || "";
          (s.csrf_token = r), (s.csrf = r);
        }
        if (!("undefined" != typeof FormData && s instanceof FormData)) {
          var a = {};
          if ("undefined" != typeof window) {
            var c = v(window.location.href, "lang");
            if (c) {
              var u = "iphone";
              (/Android/i.test(navigator.userAgent) ||
                /Linux/i.test(navigator.userAgent)) &&
                (u = "android"),
                (a.lang = c),
                (a.mobi_app = "".concat(u, "_i"));
            }
          }
          (s = Object.assign(a, s)),
            o
              ? (t.data = Object(y.stringify)(s))
              : ((t.params = s),
                p && (t.params._ = new Date().getTime()),
                delete t.data),
            "undefined" == typeof window &&
              /^\/\//.test(n) &&
              (t.url = "http:".concat(n));
        }
        return t;
      });
    var G = function (t) {
      "undefined" == typeof window ||
        window.Promise ||
        console.warn(
          "No window.Promise. @bplus-common/components.bpapi need a promise polyfill."
        );
      var e = (t.method || "get").toLowerCase(),
        n =
          d &&
          !(function (t) {
            if ("undefined" == typeof window) return !1;
            var e = t
              .replace(/^(https?:)?(\/\/)?/, "")
              .match(window.location.hostname);
            return e && 0 === e.index;
          })(t.url),
        i = "jsonp" === e;
      return !i && n
        ? A(t.url, t.data, "少年啊，你的浏览器太老了辣", "caution", -8889)
        : ((t.method = e),
          (t.transformResponse = t.transformResponse || [k]),
          i
            ? (function (t) {
                var e = h(),
                  n = 0,
                  i = t.url,
                  s = /^(http:|https:)?\/\/api\.(live)|(vc)/.test(i),
                  o = t.data && "[object Object]" === t.data.toString();
                t.jsonpCallback || !o || "type" in t.data || "jsonp" in t.data
                  ? t.jsonpCallback ||
                    o ||
                    (t.data = { type: "jsonp", jsonp: "jsonp" })
                  : ((t.data.type = "jsonp"), (t.data.jsonp = "jsonp"));
                var r = t.data || {},
                  a = {},
                  c = "zh_CN";
                if (
                  "undefined" != typeof window &&
                  (c = v(window.location.href, "lang"))
                ) {
                  a.lang = c;
                  var l = "iphone";
                  (/Android/i.test(navigator.userAgent) ||
                    /Linux/i.test(navigator.userAgent)) &&
                    (l = "android"),
                    "zh_CN" !== c && (a.mobi_app = "".concat(l, "_i"));
                }
                r = Object.assign(a, r);
                var u = (t.data && t.jsonpCallback) || (s ? "_cb" : "callback"),
                  d = _.a.stringify(r),
                  p = d.length > 0 ? "".concat(i, "?").concat(d) : "".concat(i),
                  m = i + JSON.stringify(t.data || "");
                return M.get(m, t.ttl, String(t.cache_key || ""))
                  .then(function (s) {
                    return (
                      (n = g(e)),
                      j({ data: s.data }, i, t.data, t.needOriginal, n)
                    );
                  })
                  .catch(function () {
                    return F()(p, { jsonpCallback: u }).then(
                      function (s) {
                        return s.ok
                          ? s.json().then(
                              function (s) {
                                return M.set(
                                  m,
                                  s,
                                  t.ttl,
                                  t.localCache,
                                  String(t.cache_key || "")
                                ).then(function () {
                                  return (
                                    (n = g(e)),
                                    j({ data: s }, i, t.data, t.needOriginal, n)
                                  );
                                });
                              },
                              function () {
                                n = g(e);
                                for (
                                  var i = arguments.length,
                                    s = new Array(i),
                                    o = 0;
                                  o < i;
                                  o++
                                )
                                  s[o] = arguments[o];
                                return A.apply(
                                  void 0,
                                  [n, t.url, t.data].concat(s)
                                );
                              }
                            )
                          : A((n = g(e)), t.url, t.data);
                      },
                      function () {
                        n = g(e);
                        for (
                          var i = arguments.length, s = new Array(i), o = 0;
                          o < i;
                          o++
                        )
                          s[o] = arguments[o];
                        return A.apply(void 0, [n, t.url, t.data].concat(s));
                      }
                    );
                  });
              })(t)
            : z(t));
    };
  },
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  function (t, e, n) {
    "use strict";
    n.d(e, "a", function () {
      return i;
    });
    var i = {
      API_LIVE: "//api.live.bilibili.com",
      API_VC: "//api.vc.bilibili.com",
      API_MAIN: "//api.bilibili.com",
      API_VC_CO: "//api.vc.bilibili.co",
      API_MAIN_CO: "//api.bilibili.co",
      MAIN: "//www.bilibili.com",
      SPACE: "//space.bilibili.com",
      PASSPORT: "//passport.bilibili.com",
      BANGUMI: "//bangumi.bilibili.com",
      DATA: "//data.bilibili.com",
      T: "//t.bilibili.com",
      H: "//h.bilibili.com",
      VC: "//vc.bilibili.com",
      APP: "//app.bilibili.com",
      MESSAGE: "//message.bilibili.com",
      LINK: "//link.bilibili.com",
      M: "//m.bilibili.com",
      LIVE: "//live.bilibili.com",
    };
  },
  ,
  ,
  function (t, e, n) {
    "use strict";
    n.d(e, "a", function () {
      return i;
    }),
      n.d(e, "b", function () {
        return s;
      }),
      n.d(e, "c", function () {
        return a;
      }),
      n.d(e, "d", function () {
        return c;
      }),
      n.d(e, "e", function () {
        return l;
      });
    n(2), n(9), n(45), n(27), n(19), n(33);
    var i = {
      getItem: function (t) {
        return (
          decodeURIComponent(
            document.cookie.replace(
              new RegExp(
                "(?:(?:^|.*;)\\s*" +
                  encodeURIComponent(t).replace(/[\-\.\+\*]/g, "\\$&") +
                  "\\s*\\=\\s*([^;]*).*$)|^.*$"
              ),
              "$1"
            )
          ) || null
        );
      },
      setItem: function (t, e, n, i, s, o) {
        if (!t || /^(?:expires|max\-age|path|domain|secure)$/i.test(t))
          return !1;
        var r = "";
        if (n)
          switch (n.constructor) {
            case Number:
              r =
                n === 1 / 0
                  ? "; expires=Fri, 31 Dec 9999 23:59:59 GMT"
                  : "; max-age=" + n;
              break;
            case String:
              r = "; expires=" + n;
              break;
            case Date:
              r = "; expires=" + n.toUTCString();
          }
        return (
          (document.cookie =
            encodeURIComponent(t) +
            "=" +
            encodeURIComponent(e) +
            r +
            (s ? "; domain=" + s : "") +
            (i ? "; path=" + i : "") +
            (o ? "; secure" : "")),
          !0
        );
      },
      removeItem: function (t, e, n) {
        return (
          !(!t || !this.hasItem(t)) &&
          ((document.cookie =
            encodeURIComponent(t) +
            "=; expires=Thu, 01 Jan 1970 00:00:00 GMT" +
            (n ? "; domain=" + n : "") +
            (e ? "; path=" + e : "")),
          !0)
        );
      },
      hasItem: function (t) {
        return new RegExp(
          "(?:^|;\\s*)" +
            encodeURIComponent(t).replace(/[\-\.\+\*]/g, "\\$&") +
            "\\s*\\="
        ).test(document.cookie);
      },
      keys: function () {
        for (
          var t = document.cookie
              .replace(
                /((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,
                ""
              )
              .split(/\s*(?:\=[^;]*)?;\s*/),
            e = 0;
          e < t.length;
          e++
        )
          t[e] = decodeURIComponent(t[e]);
        return t;
      },
    };
    n(37);
    var s = (function () {
        try {
          if (
            "undefined" != typeof navigator &&
            /Firefox\/(\d+)/i.test(navigator.userAgent)
          )
            return navigator.userAgent.match(/Firefox\/(\d+)/i)[1] >= 65;
          var t = document.createElement("canvas");
          return (
            !(!t.getContext || !t.getContext("2d")) &&
            0 === t.toDataURL("image/webp").indexOf("data:image/webp")
          );
        } catch (t) {
          return !1;
        }
      })(),
      o = "undefined" != typeof window ? window.navigator.userAgent : "",
      r = {
        myBrowser: "unknown",
        behaviors: [
          function () {
            return !!o.match(/Maxthon\/[4]/) && "Maxthon 4";
          },
          function () {
            return !!o.match(/TheWorld/) && "TheWorld";
          },
          function () {
            return !!o.match(/Firefox\/\d.*/) && "Firefox";
          },
          function () {
            return (
              !(
                !o.match(/AppleWebKit\/\d.*.Chrome\/\d.*.Safari\/\d/) ||
                "Google Inc." !== window.navigator.vendor ||
                !window.chrome
              ) && "Chrome"
            );
          },
          function () {
            return !!o.match(/Opera.\d.*.Presto\/\d/) && "Opera Presto";
          },
          function () {
            return !!o.match(/OPR\/\d{2}/) && "Opera Modern";
          },
          function () {
            return !!o.match(/MSIE [6-8].+/) && "IE Legacy";
          },
          function () {
            return (
              !(
                !o.match(/MSIE [9].+/) ||
                "function" != typeof window.ScriptEngine ||
                "JScript" !== window.ScriptEngine()
              ) && "IE 9"
            );
          },
          function () {
            return (
              !(
                !o.match(/MSIE [10].+/) ||
                "function" != typeof window.ScriptEngine ||
                "JScript" !== window.ScriptEngine()
              ) && "IE 10"
            );
          },
          function () {
            return (
              !(
                !o.match(/Trident\/[7].*.rv:11/) ||
                "function" != typeof window.ScriptEngine ||
                "JScript" !== window.ScriptEngine()
              ) && "IE 11"
            );
          },
          function () {
            return (
              !(
                !o.match(/Edge\/\d+\.\d+/) ||
                "function" != typeof window.StyleMedia
              ) && "Edge"
            );
          },
          function () {
            return (
              !(
                !o.match(/AppleWebKit\/\d.*.Mobile.*Safari\/\d+/) ||
                "Apple Computer, Inc." !== window.navigator.vendor
              ) && "SafariMobile"
            );
          },
          function () {
            return (
              !(
                !o.match(/AppleWebKit\/\d.*.Safari\/\d+/) ||
                "Apple Computer, Inc." !== window.navigator.vendor
              ) && "Safari"
            );
          },
        ],
      };
    var a = function () {
        return "undefined" == typeof window
          ? ""
          : (r.behaviors.some(function (t) {
              var e = t();
              return (r.myBrowser = e || "unknown"), e;
            }),
            r.myBrowser);
      },
      c = function (t) {
        if ("string" != typeof t) return "";
        var e;
        try {
          e = JSON.parse(t);
        } catch (t) {
          e = "";
        }
        return e;
      },
      l =
        (n(329),
        n(8),
        n(12),
        function (t) {
          var e =
            arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
          if (!t) return {};
          var n = {},
            i = "";
          if (e) {
            var s = t.href || "",
              o = s.match(/\?[^#/]*/g);
            o && (i = o[o.length - 1]);
          } else i = t.search;
          if (~i.indexOf("?")) {
            var r = i.split("?")[1] || "",
              a = r.split("&");
            a.forEach(function (t) {
              if (t) {
                var e = t.indexOf("=");
                if (e > 0) {
                  var i = t.substring(0, e),
                    s = t.substring(e + 1);
                  n[i] = s;
                }
              }
            });
          }
          var c = t.pathname.split(/\//g).filter(function (t) {
            return "" !== t;
          });
          return { params: n, path: c };
        });
  },
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  function (t, e, n) {
    "use strict";
    n.d(e, "d", function () {
      return i.a;
    }),
      n.d(e, "c", function () {
        return c;
      }),
      n.d(e, "b", function () {
        return u.a;
      }),
      n.d(e, "a", function () {
        return o;
      });
    var i = n(242),
      s =
        (n(38),
        n(8),
        n(20),
        n(5),
        n(2),
        n(9),
        n(47),
        n(45),
        n(27),
        n(23),
        n(15),
        n(10),
        n(12),
        n(21),
        n(22),
        n(61));
    function o() {
      var t =
          arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
        e = {},
        n = [];
      return (
        (n = n.concat(t.free || []).concat(t.vip || [])).forEach(function (t) {
          t.emojis.forEach(function (n) {
            e[n.name] = {
              url: n.url.replace(/^http:\/\//, "//"),
              size: t.size,
            };
          });
        }),
        e
      );
    }
    var r = {
        哼: "嫌弃",
        色: "喜欢",
        泪: "大哭",
        黑线: "无语",
        怒: "生气",
        哈哈: "大笑",
        吃惊: "惊讶",
        允悲: "捂脸",
        骷髅: "灵魂出窍",
        挖鼻: "抠鼻",
        good: "点赞",
      },
      a = {
        色: "喜欢",
        流泪: "大哭",
        发怒: "生气",
        骷髅: "灵魂出窍",
        傲慢: "傲娇",
        惊恐: "吓",
        强: "点赞",
        便便: "屎",
      };
    var c = function () {
      var t =
          arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "",
        e = new RegExp(/\[([^([.*?\])]+)\]/g),
        n =
          window.bp_emoji_data_v3 && window.bp_emoji_data_v3.mapping
            ? window.bp_emoji_data_v3.mapping
            : {};
      return t.replace(e, function (t) {
        var e = t.slice(1, t.length - 1);
        return (e = n[e] || r[e] || a[e] || e), "[".concat(e, "]");
      });
    };
    var l = {};
    s.a.allEmojiDataNew.map(function (t) {
      t.purl &&
        "" !== t.purl &&
        t.emojis &&
        t.emojis.length &&
        t.emojis &&
        t.emojis.length > 0 &&
        t.emojis.forEach(function (t) {
          l[t.name] = t.url;
        });
    });
    var u = n(108);
  },
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  function (t, e, n) {
    "use strict";
    n.d(e, "b", function () {
      return s;
    }),
      n.d(e, "a", function () {
        return o;
      });
    n(8);
    var i = { kaomojis: [], dynamicEmojis: [], mainEmojis: [] };
    function s() {
      var t =
        arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : [];
      (i.mainEmojis = window.bp_emoji_data_v3
        ? window.bp_emoji_data_v3.vip
        : []),
        (i.dynamicEmojis = window.bp_emoji_data_v3
          ? window.bp_emoji_data_v3.free
          : []);
      var e = [];
      return (
        t.forEach(function (t) {
          i[t].forEach(function (t) {
            e.push(t);
          });
        }),
        e
      );
    }
    var o = { allEmojiDataNew: [], allEmojiDataOld: [] };
  },
  ,
  ,
  ,
  ,
  function (t, e) {
    t.exports =
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIcAAACHCAYAAAA850oKAAAAAXNSR0IArs4c6QAACSlJREFUeAHtnFtsFFUYx1toiw1CpYiCEqURokhK6SUaIZE7ohArCokRlQdN9MUnH8REjYlEXzTB8AAmJsaEEAFFLlGMQBTRkChsL1K5FGMRVAxQAgi0tFB/X8O0y3am7NLd7tnZ/yTTM/Od6/zOf851tjk5OkRABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABERABEQglkBurCEM9w0NDQUtLS3zc3Nzb+PcUV5e3pjs56qpqRnT3t7+yIABA04XFxdvLikpaUl2HulOb0C6C5CK/C9evLi0o6PjiytXrqzk3BeJRB5PZj6kN+vy5cu/IbxV5LO2ubn5nWSm70paoRSHtRgeYCqvAIF8zpte7dn64pLObNLbQhqFXjrk0ZWfZwuDG0px0NS/T+Ucj6qgfN709Xv27HkiypbwJfHnkM5mIt4UFbk5Pz//3aj70FyGUhyMMZqooemc1wiE+3V79+5dgJvwQbxHiLSJM1oYpwYOHDizrKzsYMIJZkCEUA5IPe51dXX3trW1fcf9KM+G20a383RlZeWGKFuvlwhjLgE20n0Migp4ihZqZkVFRV2ULVSXoWw5vBqyNzovL28aYvjbs+Hm2yCSQeVTUbbAS8I9imesME6S5owwC8OAhFoc9oCTJk06RNM/PUYgeQwqP2MMscjCBB0MPh9DSF9Gtxikc4LwM2h56oPihcWecd0KFVoK/CVUUhXunZz5cVZGEZV8S0zYy6RzLMbWdUv4O7iJTf8scU53BerlgvgthD2Ku4su6FNamiO9BHfOK2PE0djYOPTMmTMfQPBF5yjGV6A2BPIeLdayqqqqtviipDdURoijvr5+GAPLbbyBlenFlZTcbcazKBME4vyYA0HkXrp0aUNIhGHqqqarWZEUmaU4EefFwTTyFRhMSzGHfk0eob9kK639mukNZJZ3A3H6LYptoLFP8vp1MjzEm9h8nTD97o0AbDB7V1DGjD3exm9bkL8LdqfF0dra+iSQRvqBQhC2+LSQKeVhP38XbKyRPIQI1lGW0bHlQTyTGUvdN3HixAOxfq7cO92tAHBOAKiLiKPaZWFYuZm67maG8mzAM+Sw5T8lyM8Fu9PiANCDAZC+ypQ1A8q5k2do8HsOWpUyP7srNqfFQcvh26UAb78rAOMsR1B5b40zflqCOS0Ouo5hflRoqi/52V218RytfmXDPtTP7orNaXHQcmTEIl0fKtNp/k4Xrg/QFTUJBLJOHKydjKRFGpgoOzb8or8JSTR6RoZ3ep2jr0T52KeEz/oqEEO5naRXzqLaKFYnJ3Ft6yRxHQjqZr5mP4ZATjNOqCFSDW6ETwFqWKdo5PpKXAllWKBQiMNaAhaUxiOEThF4QmCzrsivPvCvwB63ONjbKSOOtbLDcWfhzsLNYSqaw0LXeZb4La1OwTBYruGb0oYJEyZk1KCZ8vc4QiEOKudrnixowazHQ1Ox1op80sMjwEB4E5Pvgd9gPCbb6QkGke6+avONkynGsIw5fk0QeGBl+6XTmzj8wmOrD7BnlDkULQfEI3FQP0cYa/4jNP32ZidyrCXwKcYW1m3ZeKX4OpHjKc91kki/dyjFQSWeoBJt4BjhusbGAXxLepjrjhtBzh7ON8Szs/NgnHE34w3rmipMMLgmGvtksfPAJnF4MNLtUnmHmIG8SQXV2gwCIfyVyjJd3dc5Qh4bvXwQzAhPMEOGDEm0m/OSccoNRcvBm2pTyWXpJItg7Kv0b6+e6SxK0vIOy4A0aUCUUDcBiaObha5iCEgcMUB0201A4uhmoasYAlknDmYVL9TW1tr085oD2wOstO5k/6THR8HYZ3Dar+yz6sgqcZgomG5+zLebPyIS+zll57F///7hLHmvZSr8MIY1CKTrJ5CEW4htO+dW+9VdZ4Qs+ROKqWy8dcViWBNh/+EchUh2IIK3mAYfvHDhwjKEMQa7HVOwbUAUHxJmKudr2Oyjo8jYsWP/swDZcmRVy8H2um25z+W0NQlrBZYjiq2clVy3Y+9cBeV+PqKw35S8wWmtyIHCwsJ5+Nt6StYcWSUOq1VWU+sLCgrsl/prqGzbVm/n/JlWZSZ+9r84FnPuw8+W2s/hLmcLvoot+Oj/EoRX+I+s6la86iwtLf2X68W0EEuampryov9NJD9wXoPfGj4UGkxLY7+PyarWwmNkrtPisLeXI2UfGZO+tRp29jj4r0DnexiTb3BaeE53Kwij2a8+GA8M8rM7bIv+J3NdxeT5znTdOHjhtDjg5dvP88bf7yDL3ooUVN6TvUVKt5/r4gj6KGce09B70g0vnvyZEtv3puP9wiLyWj+7KzbXxWFb4D0OYA8C7BYEYrMOZw+EMZMucHVQAfn25KcgPxfsKRvsJePhbKUSEfyBGLq+svJJ9yhhTvvY020aRblHBBWCMv/A1HlqkL8LdqfFYYB4+17m7VvpAqxklQFhdLCuMoP/tPx9stJMRTqudys5APyIB/ftXlIBpD/SpEVZ4bowjIPz4rC3rKioaBFu0OC0P+ozaXnwHGvpTl5NWoIpTMh5cdizjxs37iz/pno2lyuA6/TCUS911UJXspRvTRfzDL4Lb73ETYuX82OOWCp8VzGWZvl5AFfhjsbtXOXluoSwPRab8LdNtqSvJ5Cf/Xbl9tjykZ/t1/xudsK0cv8n7i427lZn2v5MxokjtjK8e0Rj/6t0gXfvuVTOczTjgdNJL1yiLj+FqOYbkK6fJnjxyW87+Vkrl/FHRnQr8VBGGKt8wh3DvsXH3mcTwtiGEA77JBSamVVoxMFuqs1oFlBhv+Aep3/fxPV07CnZvyDdC6Q/i3zWW35cRxDiM7QaG3wEI5MIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIiIAIpJPA/+0R7s0ypFpmAAAAAElFTkSuQmCC";
  },
  ,
  function (t, e) {
    t.exports =
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABHCAMAAAB4UkqjAAAAh1BMVEUAAADd3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0UCIZXAAAALHRSTlMAoJDx4OYL/DcGF+6+JNi4ycSIT2k6LPeWfRzTVPXPszEQrV0hpo12cEZAZFpRNIQAAAJVSURBVFjD7dbZcpswGIbhHwwSi81q8Ib33fnu//oatRIpmliDhQ/aaZ+TKInnjVgkhb4RJMhP9Fzo8PiD+vEA+JPnqS0+1dRHBJhibAzh2HNeekxP9Z8XBSMZM6SmRBYx65QeM6XsY3rKPqanLGMWqeDmOh0b/Io9+YHi3gKtdExgLznSlyjFMGnUphIMlcgY22C4DSPBxTu4IrXDe+yI6IDWbPSqGVoHoohDyip6XZVB4hFN1TgPyUaYQ5rSWQ0nZGcC6UyJukKypa4yIXX3HLLlqCdHX++HLRfS/9bbWvvHLSLNR3N6tRXdFwdxejekiYF4fDnWYa/WqSm2PqRCSy0hrbP5RxAaW8141N17tVbZ+S1fFYbWFF2+1lqg62BoBdAsqWOLroWhxTh+M8vmWuuaxp1WaWjRSn43yl35sHTLUjxiaWlqnYE4LZoJme3v13MibqepFZRL6otV5V+/Hv+xVvi+FsvZG1qh/LQ7uFXnF/HlwcEfYlDktW2r5EARUiXWc1xRWAC8tGwxsdJ9dcRnYrddMdtrjDZyAy3kXrSJ7O89u8zEZAIKxBRnFzbonWD3ZkfCrrmzP+6979nicjAnW3NZ4OS1R6GtVBa8drTek539up3NAgMvcv51WNZQitCiFBZQaqIMSrx1XrWNoWTy/w1r+hk+xjuMSVjGGC6WZ3S1xlDriqTKxzB+Ra3I4bDHne62drqmied57QR9z0D94dHnOEmvJ/pWAMm4ovL2TTcJ5cRyMlHrbkdG5c/5r82fYqt+K/iR89m2JrP9PEZyI80PsPxVT0P3FAEAAAAASUVORK5CYII=";
  },
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  function (t, e, n) {
    "use strict";
    (function (t) {
      n.d(e, "a", function () {
        return c;
      });
      n(8), n(4), n(11);
      var i = n(3),
        s = n(13),
        o = "undefined" == typeof window ? t : window,
        r = function (t) {
          var e =
              arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
            n = { free: [], mapping: [], vip: [] };
          return (
            t.forEach(function (t, i) {
              var s = [];
              t.emote &&
                t.emote.forEach(function (t) {
                  s.push({
                    id: t.id,
                    name: t.text,
                    url: (e && t.gif_url) || t.url,
                    gif_url: t.gif_url || "",
                    type: t.type,
                  });
                }),
                n.free.push({
                  emojis: s,
                  pid: t.id,
                  pname: t.text,
                  purl: t.url,
                  type: t.type,
                  size: t.meta.size,
                });
            }),
            n
          );
        };
      function a(t) {
        var e = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        return Object(i.a)({
          method: "get",
          url: "".concat(s.a.API_MAIN, "/x/emote/user/panel/web"),
          data: { business: "reply" },
          throttleInterval: 5e3,
          localCache: !0,
          ttl: 9e5,
          cache_key: "emoji_big",
        })
          .then(function (n) {
            var i = r(n.data.packages || [], e);
            o.localStorage &&
              o.localStorage.setItem("bp_emoji_data_v3", JSON.stringify(i)),
              (o.bp_emoji_data_v3 = i),
              t && t(i);
          })
          .catch(function (e) {
            o.bp_emoji_data_v3 || (o.bp_emoji_data_v3 = {}), t && t({});
          });
      }
      function c() {
        var t = arguments.length > 0 && void 0 !== arguments[0] && arguments[0];
        return new Promise(function (e) {
          var n = o.localStorage
            ? o.localStorage.getItem("bp_emoji_data_v3")
            : "{}";
          n
            ? ((o.bp_emoji_data_v3 = JSON.parse(n)),
              a(void 0, t),
              e(o.bp_emoji_data_v3))
            : a(e, t);
        });
      }
    }.call(this, n(72)));
  },
  ,
  function (t, e) {
    t.exports =
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQBAMAAAB8P++eAAAAGFBMVEUAAACbm5ucnJybm5uioqKampqdnZ2bm5smdd9FAAAACHRSTlMAMxMkBisMHUGvwZcAAAI6SURBVEjH5ZZNc5swEIYpxuTaLSZcsdy6V8uuJ1fHxek1asLk6nQy9BrHbfn7lWRgJehuk8kx78HjRc+g1X5oCd68onWyQSuWdxsC3AFco3UJsCBACZChpQA+ECBo5a1xpo2EAW9b454BpbMWKaC33uHeZmf6MDFoTXDndBMQmuLeZufzgNIItITRZ/Sip604rkroKb25eProJ+8TkPq+8Zyj5AfpK7D6EmBwWSXOYXkthh6W5arRulSOlxjc9ELMH/qZKCoxs4snM6SCi6v7zsUJgTVZf7T/3lEvxDq6bpsDjHdMTb1v350GjIxnLZhwoGoLbvofUOpAvgw8AGQceECQbDf/RdIBY9FWlDDZQNd8MJp1lbKDdEmCW2lbDxsyR9CN08wtqYM1/jRxRhD7a+LV6NLNnLKru6bsmzOEqivuSwNiLg+93ox/nzyxIDigNJX8K3D0U/0DtE5l+15xS70yAEewRAQvkHwABsWAsw/7ICUKjDo3Yx4cm8Sc5SbijzyYmPSZjKoFC450P0ag6RByBJ0U4r2w0LCGxtjBbq7PseWyK5lCVsks4MF70NYUR5hbZtIFYzNeQjtj6Faw2tb56YcAGU39LuTblehr+krJnge+/jZD8NkXaVcde5oLu6t5TH8U+Msj4I4dyW5oxF7nDxsRh4Zsx30txLyqHoriqqp+CFEf1wqMMixhXrd4Ll7O5cvIr1ZOqRPkbxyXe+E/KgK7Qw7Hvahr841QljcrrfpJzIvgbesvU3h9j3HYce0AAAAASUVORK5CYII=";
  },
  function (t, e) {
    t.exports =
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAABHCAMAAAB4UkqjAAAAh1BMVEUAAADd3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d0UCIZXAAAALHRSTlMAoJDx4OYL/DcGF+6+JNi4ycSIT2k6LPeWfRzTVPXPszEQrV0hpo12cEZAZFpRNIQAAAJVSURBVFjD7dbZcpswGIbhHwwSi81q8Ib33fnu//oatRIpmliDhQ/aaZ+TKInnjVgkhb4RJMhP9Fzo8PiD+vEA+JPnqS0+1dRHBJhibAzh2HNeekxP9Z8XBSMZM6SmRBYx65QeM6XsY3rKPqanLGMWqeDmOh0b/Io9+YHi3gKtdExgLznSlyjFMGnUphIMlcgY22C4DSPBxTu4IrXDe+yI6IDWbPSqGVoHoohDyip6XZVB4hFN1TgPyUaYQ5rSWQ0nZGcC6UyJukKypa4yIXX3HLLlqCdHX++HLRfS/9bbWvvHLSLNR3N6tRXdFwdxejekiYF4fDnWYa/WqSm2PqRCSy0hrbP5RxAaW8141N17tVbZ+S1fFYbWFF2+1lqg62BoBdAsqWOLroWhxTh+M8vmWuuaxp1WaWjRSn43yl35sHTLUjxiaWlqnYE4LZoJme3v13MibqepFZRL6otV5V+/Hv+xVvi+FsvZG1qh/LQ7uFXnF/HlwcEfYlDktW2r5EARUiXWc1xRWAC8tGwxsdJ9dcRnYrddMdtrjDZyAy3kXrSJ7O89u8zEZAIKxBRnFzbonWD3ZkfCrrmzP+6979nicjAnW3NZ4OS1R6GtVBa8drTek539up3NAgMvcv51WNZQitCiFBZQaqIMSrx1XrWNoWTy/w1r+hk+xjuMSVjGGC6WZ3S1xlDriqTKxzB+Ra3I4bDHne62drqmied57QR9z0D94dHnOEmvJ/pWAMm4ovL2TTcJ5cRyMlHrbkdG5c/5r82fYqt+K/iR89m2JrP9PEZyI80PsPxVT0P3FAEAAAAASUVORK5CYII=";
  },
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  ,
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {
    "use strict";
    (function (t) {
      n(38),
        n(8),
        n(20),
        n(5),
        n(2),
        n(9),
        n(47),
        n(45),
        n(27),
        n(15),
        n(10),
        n(12),
        n(21),
        n(22);
      var i = n(61),
        s = n(50);
      function o(t, e) {
        var n = Object.keys(t);
        if (Object.getOwnPropertySymbols) {
          var i = Object.getOwnPropertySymbols(t);
          e &&
            (i = i.filter(function (e) {
              return Object.getOwnPropertyDescriptor(t, e).enumerable;
            })),
            n.push.apply(n, i);
        }
        return n;
      }
      function r(t) {
        for (var e = 1; e < arguments.length; e++) {
          var n = null != arguments[e] ? arguments[e] : {};
          e % 2
            ? o(Object(n), !0).forEach(function (e) {
                a(t, e, n[e]);
              })
            : Object.getOwnPropertyDescriptors
            ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
            : o(Object(n)).forEach(function (e) {
                Object.defineProperty(
                  t,
                  e,
                  Object.getOwnPropertyDescriptor(n, e)
                );
              });
        }
        return t;
      }
      function a(t, e, n) {
        return (
          e in t
            ? Object.defineProperty(t, e, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0,
              })
            : (t[e] = n),
          t
        );
      }
      var c = "undefined" == typeof window ? t : window,
        l = {},
        u = {};
      function d(t) {
        var e =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "",
          n = arguments.length > 2 ? arguments[2] : void 0;
        return '<img src="'
          .concat(e.replace(/^http:\/\//, "//"), '" alt="')
          .concat(
            t,
            '" style="margin: -1px 1px 0 1px;display: inline-block; width: '
          )
          .concat(n.width, "px; height: ")
          .concat(n.height, "px; vertical-align: ")
          .concat(n.verticalAlign || "baseline", ';">');
      }
      i.a.allEmojiDataNew.map(function (t) {
        t.purl &&
          "" !== t.purl &&
          t.emojis &&
          t.emojis.length &&
          t.emojis &&
          t.emojis.length > 0 &&
          t.emojis.forEach(function (t) {
            u[t.name] = t.url;
          });
      }),
        i.a.allEmojiDataOld.map(function (t) {
          t.purl &&
            "" !== t.purl &&
            t.emojis &&
            t.emojis.length &&
            t.emojis &&
            t.emojis.length > 0 &&
            t.emojis.forEach(function (t) {
              l[t.name] = t.url;
            });
        }),
        (e.a = function (t) {
          var e =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : {},
            n = arguments.length > 2 ? arguments[2] : void 0,
            i = {};
          (i = n || c.bp_emoji_data_v3 || {}),
            (u = r(r({}, u), Object(s.a)(i)));
          var o = { width: 22, height: 22 };
          e = Object.assign(o, e);
          var a,
            p = new RegExp(/\[[^([.*\])]+\]/g);
          return (
            (a = e.emojiType && 1 === e.emojiType ? u : l),
            t.replace(p, function (t) {
              return a[t] ? d(t, a[t].url, e) : u[t] ? d(t, u[t].url, e) : t;
            })
          );
        });
    }.call(this, n(72)));
  },
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  ,
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  function (t, e, n) {},
  ,
  ,
  function (t, e, n) {
    "use strict";
    (function (t) {
      n(38),
        n(8),
        n(20),
        n(2),
        n(9),
        n(5),
        n(47),
        n(45),
        n(27),
        n(142),
        n(15),
        n(10),
        n(12),
        n(21),
        n(22);
      var i = n(7),
        s = n.n(i),
        o = n(61),
        r = n(50),
        a = n(307);
      function c(t, e) {
        var n = Object.keys(t);
        if (Object.getOwnPropertySymbols) {
          var i = Object.getOwnPropertySymbols(t);
          e &&
            (i = i.filter(function (e) {
              return Object.getOwnPropertyDescriptor(t, e).enumerable;
            })),
            n.push.apply(n, i);
        }
        return n;
      }
      function l(t) {
        for (var e = 1; e < arguments.length; e++) {
          var n = null != arguments[e] ? arguments[e] : {};
          e % 2
            ? c(Object(n), !0).forEach(function (e) {
                u(t, e, n[e]);
              })
            : Object.getOwnPropertyDescriptors
            ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
            : c(Object(n)).forEach(function (e) {
                Object.defineProperty(
                  t,
                  e,
                  Object.getOwnPropertyDescriptor(n, e)
                );
              });
        }
        return t;
      }
      function u(t, e, n) {
        return (
          e in t
            ? Object.defineProperty(t, e, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0,
              })
            : (t[e] = n),
          t
        );
      }
      var d = "undefined" == typeof window ? t : window,
        p = {},
        m = {};
      o.a.allEmojiDataNew.map(function (t) {
        t.purl &&
          "" !== t.purl &&
          t.emojis &&
          t.emojis.length &&
          t.emojis &&
          t.emojis.length > 0 &&
          t.emojis.forEach(function (t) {
            m[t.name] = t.url;
          });
      }),
        o.a.allEmojiDataOld.map(function (t) {
          t.purl &&
            "" !== t.purl &&
            t.emojis &&
            t.emojis.length &&
            t.emojis &&
            t.emojis.length > 0 &&
            t.emojis.forEach(function (t) {
              p[t.name] = t.url;
            });
        }),
        (e.a = s.a.component("renderJSX", {
          methods: {
            generateImageTag: function (t) {
              var e =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : "",
                n = arguments.length > 2 ? arguments[2] : void 0,
                i = this.$createElement,
                s = /\[(?:[^[\]]+)]/g.test(e)
                  ? a.a
                  : e.replace(/^http:\/\//, "//");
              return i("img", {
                attrs: { src: s, contenteditable: "false", alt: t },
                style: "margin: -1px 1px 0 1px;display: inline-block; width: "
                  .concat(n.width, "px; height: ")
                  .concat(n.height, "px; vertical-align: ")
                  .concat(n.verticalAlign || "baseline", ";"),
              });
            },
            renderEmoji: function (t) {
              var e =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : {},
                n = arguments.length > 2 ? arguments[2] : void 0,
                i =
                  arguments.length > 3 &&
                  void 0 !== arguments[3] &&
                  arguments[3],
                s = [],
                o = {};
              (o = n || d.bp_emoji_data_v3 || {}),
                (m = l(l({}, m), Object(r.a)(o)));
              var a = { width: 22, height: 22 };
              e = Object.assign(a, e);
              var c,
                u = new RegExp(/\[[^([.*?\])]+\]/g);
              c = e.emojiType && 1 === e.emojiType ? m : p;
              var f = !0,
                h = 0;
              do {
                var g = u.exec(t);
                if (g) {
                  if (g.index === h) s.push(this.pushItemCb(g, s, c, e, i));
                  else {
                    var v = t.substring(h, g.index);
                    v && s.push(v), s.push(this.pushItemCb(g, s, c, e, i));
                  }
                  h = u.lastIndex;
                } else {
                  var b = t.substring(h);
                  b && s.push(b), (f = !1);
                }
              } while (f);
              return s;
            },
            pushItemCb: function (t, e, n, i) {
              var s =
                  arguments.length > 4 &&
                  void 0 !== arguments[4] &&
                  arguments[4],
                o = t[0] || "";
              if (s) {
                var r = {
                  width: m[o] && m[o].size > 1 ? 42 : 22,
                  height: m[o] && m[o].size > 1 ? 42 : 22,
                };
                i = l(l({}, i), r);
              }
              e.push(
                n[o]
                  ? this.generateImageTag(o, n[o].url, i)
                  : m[o]
                  ? this.generateImageTag(o, m[o].url, i)
                  : o
              );
            },
          },
        }));
    }.call(this, n(72)));
  },
  function (t, e, n) {
    "use strict";
    e.a =
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQBAMAAAB8P++eAAAAGFBMVEUAAACbm5ucnJybm5uioqKampqdnZ2bm5smdd9FAAAACHRSTlMAMxMkBisMHUGvwZcAAAI6SURBVEjH5ZZNc5swEIYpxuTaLSZcsdy6V8uuJ1fHxek1asLk6nQy9BrHbfn7lWRgJehuk8kx78HjRc+g1X5oCd68onWyQSuWdxsC3AFco3UJsCBACZChpQA+ECBo5a1xpo2EAW9b454BpbMWKaC33uHeZmf6MDFoTXDndBMQmuLeZufzgNIItITRZ/Sip604rkroKb25eProJ+8TkPq+8Zyj5AfpK7D6EmBwWSXOYXkthh6W5arRulSOlxjc9ELMH/qZKCoxs4snM6SCi6v7zsUJgTVZf7T/3lEvxDq6bpsDjHdMTb1v350GjIxnLZhwoGoLbvofUOpAvgw8AGQceECQbDf/RdIBY9FWlDDZQNd8MJp1lbKDdEmCW2lbDxsyR9CN08wtqYM1/jRxRhD7a+LV6NLNnLKru6bsmzOEqivuSwNiLg+93ox/nzyxIDigNJX8K3D0U/0DtE5l+15xS70yAEewRAQvkHwABsWAsw/7ICUKjDo3Yx4cm8Sc5SbijzyYmPSZjKoFC450P0ag6RByBJ0U4r2w0LCGxtjBbq7PseWyK5lCVsks4MF70NYUR5hbZtIFYzNeQjtj6Faw2tb56YcAGU39LuTblehr+krJnge+/jZD8NkXaVcde5oLu6t5TH8U+Msj4I4dyW5oxF7nDxsRh4Zsx30txLyqHoriqqp+CFEf1wqMMixhXrd4Ll7O5cvIr1ZOqRPkbxyXe+E/KgK7Qw7Hvahr841QljcrrfpJzIvgbesvU3h9j3HYce0AAAAASUVORK5CYII=";
  },
  ,
  function (t, e) {
    t.exports =
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAABLhJREFUWAnNWd1rXEUU/83u3aS2mlZta41im2KsKZoWYhE/XsQHFSGClH2oRcE333ySohghUjGP/gMFRfOwD4XmRRSkoFYotSpV0g/RkJamxZRWa1qS7mbH35mbu5m9O/dr76bmwN07c86ZM787H2fOnFXIQXq08jhUbRha7wRULzR6aU4eoRkoPtB8q0lob0KNlH/1Rdl/VdYmBhxqbxLAKwTWl6m9whQ/6AjgHcoKOjVQ/XHlIdyqfcjR209whUwAW5XrHOXP0eW9rw6Uz7eKWzmJQHWl0oXT1VEafpsgu1tN5OLMs/UnGCiNqHL5VpylWKD6o8omVGuHOc3PxhnJL1Pfo+S9qt4tz0bZigSqD44PYlFPcB1ujWrcUb7CNIpqWL2375TLrhOoAVnDMY7kna5GK8dTc/DwjAtsC1Az3bXqids2kuGvlpH1SnvCy6Bp95qNI2vydk13GKTUpW9iMFgseRNQnKH7WfGNY/UeWeTmFU9jUWPqjZ9cqJ6lbI0l/z+L8+gu7Qj8rNdAIs48CWSB3zXUD2zqoWrjGxsm0hU0MHsdOPk7UGc5mtaYAwZ4Q1RMb+ZY1NVfWG9eCmEjex4BnhsMc9urH6UXOnEuqS1PsNJuOW6XgMnZnQBSTJqRTLKdUp7OFvEZbAE4BhipqN3pdhlPa8vHVjDOPWsU5Oo34B3nfvz2t6CW/01sgtHDohoW59URurkA/HCam6QO7NoOrF/bEbOCkWugPtAZa7TyHUeyWgMWCVTKHaP6AN0TI/M8IzpzFbh4BbjE99mLy9Amz3MfLAKbNwD33wP03bcsy1xSvR4xBleHzM1xg+Hk+NFof3iOwOUReutl4K47/HLWX2Lk1OcAuo6H2ItDyd2K720XpG/dAE3uKE7jsW3AUzHLfFcfIAdFTpIR5U0xJ23fEm2g/4FoWXrJTMG/0qZv4dS8+q+TbZjXb0bL0kp47eau5707L8mmEtrGnf00l0GRE3VsEvjzMjAfe2fz2yX+agFaEA+dqBqrMPQw0E/ncW/Pstpe3gevMErq6YDTZwKDn15kQiAnlfi9NsjA3EYC76IsLzHL4kkIpUe/mKI/5fZMoKhpvECH/9VJnkh08DYVi777enCjzfXLUbbCmsyuWGGepFlS0M9/AHNL6zGFeqSK2PiJtlKRj83EWqkDZzHcXfKD58HkCXDiODUFSNC8UHWKQ8xG4GyAilCPjn/KlM3rIcXo6tbNwAs8lTasi9axJX/f8JfH9F82N76s1GdqZJ+5iojD94kJK+aXGKelJOnw0Nf+dSIuShSZXDlENwtIOjZJogVoGiMqDI7qGEf1nUCY+r3lbuClJ3hVWd/cZPYf4MsfgcvXmvnpamPqg9cOBKrNQE3mrvYNIWdPiskN9clH+ezwbUukf/xMdGQVIHC+mTQb8J63M3xNQKVN7pROYWk1SZTfDqVJ6Yhdk/NhVo2luXb6MdeQdkFKn5LRc6QflzeThcpk05hVY8AybbFXtmhG0p3Jk45bpt5Gs5oSuc4RDcCaKeCiZn0sk+sKDCS/5ZgbMxvHMd1289gRtRVX/Z8NNlgpr/q/b8KADWiT5xcPIbmBmD/EJOYt6glXyttl18X7D6fJjmVRz8zAAAAAAElFTkSuQmCC";
  },
  function (t, e) {
    t.exports =
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAAXNSR0IArs4c6QAABsBJREFUWAnFWVtPVFcU/taZEZgCgniDUVCsCkjBXlOtExsTTR+aQOKDD43RlP4B+wP0QX4Bf4CkjQ99aEggMX1pGtuibW1tVAhUvAAjDspdRBlgZlbX2sORGeZy5kClKzmzz9ln7299Z621174MYR3CzA14tdiE5y8OYXbej7kFPyIRP5gBi0LweEMoyg9hs68PW4u7KD+/Z63qyG1HQ252vgXBsWZ+PF6N6RfAwhIQjWWG8lhA/iZQWfEgKnd0Ym95OxW5I50zUSFYhfHZVvQHz3JwzEJ4ESDpbsmlpZOolWNySUkFeTFU7biChv0XqcwXdOqq7x01CME8LCxext+PLvD9kXwsRgC1UC7kMjFQ0uIBytsUxsHdbThSc4mI5MszS1aiQnI7nkx08G//BDAzJwQ9OXxaZmUpb4QvolFQaXE3AodPU0XxeEqb5YqMRIVkI/qGu/jmwB7EJP4sseKbEsEnyzOMo7VNVFt5N52atEQNydsPr/OtB0U5x2A6dDd1GrsxzOHjA8eoYV8K2RQzGXffHeqKk1xnLLohKjHPFhXh5kAX3x/dvrprElEhmYfBsQ6+Je5WV6e192qI//BZ9DFZe/BrT4fhkgCdRBQv5lv5974ANMg3mqRNSskyB/Ddtct2lZav6cjLKvx05x4/Gi2AV0b3/ywUjYVRW1lDgfqgUlmx6OPxVh565kxyOQeaaVJzqdsrsX8WY7DHKsDASKvdxFhUrNmAq3/e5qdTlknm9tvVpc4seV5g705QeZlMi3LvVhYiED3A0DOYyUNntgwiVo2hYtu79PmHPXFNo1MtPDbtTLLYB/rkEFC+JQN0btVUvROoLgff6IOMi/g0nKarWNWisckWefV13PUPQs1ZFxU6uLwW6EgtUCGW1AXIei/BMXiCawZvGqKmKsLNWlq8wI08OlWd3eVCbNc2wL8ViEQzQbqrVxzFU1yd+TIIe6iav/+l0cLkTBNehuODIkNjU72jNLmNvWrSBYqT6ICzFzJ6b4veK2420Taz800Wpp7XZXW7DaKDSEesipIcGgNfuwMMyqAwdRkIK0GxHvcNg3+WmXFK1q/2ukHxFNdJYlznlVWR36mdvk+wg4kpfvDEkOSRSdBucV/9nmXriHLNDvoxUmBkAtwzCDybkVG+BC4tAm0vkTZxrYqrzRzE78X8kt/12lLQqaEavCRxNj4Dyb+ApBzaVwHUVQElbwHTc+DeIWBY05C000nkwG7Q29Im224gPWMh+iosRNO/zVirFtu5BXTyPbHqU3FrELpe5X4pn0xI+pLMEJoE5iT1mDgsAb2zF6iUtYZaWvu7ESIhKgvXVY7NDUJHqlqpRqwkrud7I8B9CYfZV/FLUQoLxMKVoAO7gIK8uCXdkjRsCF5YslMEDppntz9mOhTr+PJB7+83Mxb3DksYTEvqkTypViwtjFvQvbsT2YS8KJTt7AQLUbf+T8CxCW+RgRKQmWtetj8+saC6fX0E40o4JkR9eaHXaSdB95pubbeKhQ2mnc7WBJbUKWSJa/qTqjI9GBI5Wj1ngoJnf1wmvVrP1Gdh2+bOrNOnaShxqIMkR57ZdCa9UzzFdfowr9VlyXKth4p8g1kby0zCI7KTnV+Ix12StjU+aPwKnsG1Z6o0UNJqkL481ROf98rLOrMGvea+5y/Btx/Fodazn1IrLhMzeIJrcmsakqYqEuvUMk70oL+dPNbypJahh4JLruTuXmBydu2jWbOA9Dc4mnuzWzMmubpdGen3GeGrf3zDo9PnHONVFcmBF0okP2rpVvRATa2opcPKi2L8LX312XlVsUI0NFWFH24OsGVJbnEQDX5zObRL91o1anzqlUXkLCos/q6hc6dkXrZdLzfkLwvK9qAtp4WxKlGXqUXcXtrPgaThH4m22SSTiJqXJw5fpEJfd065zXR4Mz/E6MbmykuJ6PJ5K2KO/k58cFpKWeWu1G/kHbHoLio4TWfqk44hk4gqIXP091FdkwSyrNs2kqLoZpqDh5rozPGU48cUooZsgxz96akax8SyG8NW3D0sJI/R+ZOyX0mVrEPPnKpd7+3gaCyQNSmn4rqqMTFp3J1qSRsoK1FtZE7VOrovY2rughwIyMLTsYuN7VgKUlhmxDYcrbxE9ckxubpzzlr5r4dV6B9sRXjprJ5grIcwMccQ5SsoKbpIZwLB1aTSPedM1O7MN/ob8OhpiywomplQbUIiFytLrMuJsi5+OuHztdPZT3tszFxK10QTQfnHW43yl04TwhE5G4jqH2GyUbSWt9+sWxy55I8xy+pHQX4XfXE87UBJxMx0/y/80603f9l+ZgAAAABJRU5ErkJggg==";
  },
  function (t, e) {
    t.exports =
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8rAziDFwMmgzGCdmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsgszXOb+YwZIp7KHzp//HRjZASmehTAlZJanAyk/wBxWnJBUQkDA2MKkK1cXlIAYncA2SJFQEcB2XNA7HQIewOInQRhHwGrCQlyBrJvANkCyRmJQDMYXwDZOklI4ulIbKi9IMDj4urjoxBgZGJo6UHAuaSDktSKEhDtnF9QWZSZnlGi4AgMpVQFz7xkPR0FIwMjQwYGUJhDVH++AQ5LRjEOhFjKUwYG41ygoAZCLEuAgWH3NwYGwa0IMfWHQG/NZWA4EFCQWJQIdwDjN5biNGMjCJt7OwMD67T//z+HMzCwazIw/L3+///v7f///13GwMB8C6j3GwAcEGAanFDBOwAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAYKADAAQAAAABAAAAYAAAAACK+310AAAJRElEQVR4Ae1dTWzcRBR+492kUlpgAVWoSCWbC1yQSI5tgG4EV2hucGv6x7WtxL0JV5DaXmlLtzc4NYUrKCnQ9pitBAcEUrb0gET5SVFbqenuDO+N14nXa3vH3hl7NuuREtvjmffefN/Mmx/bswwsDWJloQLl8jQwPg2OMwnAqiBEFUBUQLAKMKh0mS5gA5jAP9bEtBuYrgmc3wXhNKDVarC5OsbZF5gtJknAS848lEqHAHhNAq7XuAaSQn83YJOvIiFNveLTScuVAAn6mLOANfwwCKilK0LKXAxWQfCreZORCwHihxM1KMHZzEGP4oqxZWjxq+zty8tRSUzFZ0bAVm1npVPoBqqmCjSYXOo/2kts9ov6YHLUc2dCgLh18hRwsdjTcarbmXHK7IgwSoB0NQ67Ym+N78ereSKMEIDupgrjpXM4kpnvV8ThuC/qsImuycDISTsB4vZHR6DNzw+Pu1GtAmZagzYCZCe7q0wjm9OqRRrKdAzOw5MWtYYNHfZrIcB1OWMrw+vrk0KJrWHz6ZwOl+QkVR1Mj+BPw1h5bXTAJwRwGD0+tiJunpwO4pH0eiACpL8fR/CD6zJJrRjK9HJdak1iMID9qQlwx/a8PoDunZGV87q4dSJ1v5eqD5DgC3F+ZyCoqRQMzrCDlxJjkpgA2eSQdU1m7ywxjrPADnx+NUmhEhEgO1zy+UWIQYDNsNmLjZgEXbeU+4DOUPNaV+7iIgQBsSKxCrkTFqXUAlBgBYddIzbUDINLNU7OE2ZUJmtqLYBmuNYuIauCkmU6HKJKzPrr7NsCxM1jCwAOrmgWITECCp1yLAEdvz9CSwyJIe6XYQM2W+SKmlEJ413QeKlwPVHIqcVXYNfYubikkS2gcD1xsCW8x2GOvXVpNSxXTAug2l8ELQjIp4LhkkIJcGu/rQ/Owwtid6yoRq0XhbogXGZdNzbsfPY1gP3vAezeD1CesAO31mOAR/cA7t8C+BP/zATqkKeCc4NyUJfR2j/1AcC+d4Mq87+mivAcVgz6m8CK0fzKhE0VfG6ygIK7FuxCXJAh30+13kbwg1C/jBWkihXFRGDsVFBsFwHi++PzRlzPrhfR7bwf1G3vNZFgxD1iX0BvBfpCtwsqwRHfPX2nL0yrybr3DcAf3wKQT1YJBNLegwDk2nSHvQfQlu90SwX5SibAqid4qwW4K3iG3uPZ/YqnL/q4jn733tfq4JMkIooIo3y6wx4Fm9PoxJeQ5eJmJ+8WATDu1NLI05aHRiBpg4mamtYWlXxuZyxTbhMgHDPuh9Q8+l3FLLvSPDRoswOHvcJKAqT7YVDzIrUf79/uL3LfO/3TRKUgf607/HNHt8RteT43JAkw7n7IV1MHGxdolEQkJBl9UFoa3k59GCc5+T2y9clfyfMlyTGOXwNh6IyC2KEkeVOlpY6SAIur6QSkbjCTGkv9iYlOvccO+hQL6m4LEExxnNgjJVnE+pf9W0IyiXpTU80nG7MJNVLD5JBovPxvNjo7WsjdkOuwKRD4mdR8X6E3W8878lNQX1wmp1RQGvfbErw5SNb24Ge4Dr7XmY37CRaOJlC/XgnGZn/9G9pAtuQREPuy/PiZha5KmzeJJl+0DPz6x8lGPzoso5HZz5+5+nXISyODiaoDDkymyastz2Mk4CcE4snf2kT2FUS68gZfGsmQAPrsP+8gSfg0GxIIfCKcWl7+YRL7AEsePUpgDJPggW96kqVMLKvgPMCCFuAZ7JFgonZuuTrDM1yvLEpHQQRA/i7IbyyRoNs/Wwm+LLQkwF98O85phHLnEz0PyOkhewNlkUwLA7UAe4Mcow/wVIrWdUiGxcFuAgi4tOtH2a7rpKaYCNhInTurjGnWaNLkyao823o2kADc5qsIOSHAkABB+6sVIRcEmGjSRKyZi/JCKTofeOAAh7sFFnkhIFsAa+alfuT1CoYuSEBj5IHICwDE3qFNTfPSP/J6EXvHfV+96IhzqAxyN193JizgRg4GjLhK2sUXPwCWKHCxKo/FvwwRwC2UMbgEtPlyhpoLVRJ5vioP9E/2AwJkBF0XwTACuG81O1Bvkha3Bbj6rruH4r9xBGjT8E7YJuBpq+5FFkfDCDiu+yEtWwQUbsgw6Nvir3vup4sAeV/A0na64swIAm3cBtkXtloAxbn7GRSTMh8+mk9FM/gbBV0ESG2CXdCsVY+4B7/okZOrFNHjYXoJcDvjjVztDFNOz3hVg4n3ilR1R6bD2h/ywxA9BLidMe9hKlJuVjf+wxag+g5pXm87x2LRW/spOYvKI24eX8fb1aj7ucbTfg4vzeLeDq+6ezv4jcnjQwu//tBzqv2Xp8JudX8p70/B2VEcpK74o6w5pzfdvE+JaBsE70t8+rLRmvc+/WiF135KEdkC6CZuW3MN/8/TeRHSIiDqWPuPRuXu6QO6EjpPz+C1fR1yl5E2X+CQ3mkvxVkYS4A7Y+NEQhFSISCW/LPeMBGxBFAGOXTiws65QViJrIkTF8KGnUHz+hIgM7Tai9gXNIOZi+soBBCrCcKsf1AiQM4NnPYciiv6g76YSr8/x2bqSljFjoKCutzfTBFrwfji2o8A7pQ7W2/4Y+LOlVqAJ8DdF59HDqm8dKN7ZEeTgE84JSKAMsiORRQjI8KiKwj8CZPZi/WuOIWLRC7IL0/8eOw0MOecP25kzwn8N5P/fgzhlZoAylzsLy0hRLeTvOZTTgoDEUAC3I6Z45IFq+Ll6ASBH7aw9lxSnx8EaGACSKC4vVAFXsKFO1bFyxEInaFm59WSQQqcuBMOUyan25vtGfzR5hGYMWMZJ9oz/ZYYwnAKi9PSAvyC3X6Bnd1xrUG6HCfVSMePT/BcOwGkQLqkdmkRGDsSVDic12IZVzXP6Kr1fgyMEOApGP7WgL4eH0xF/fqFV85BjkYJ8AwbOiLI3QBbSju298qtcsyEAM8Q+4nAGi+wk93N66qLaV7Z0h4zJcAzUm6TX6Ktki153ElvhuNbgSZdjVf24DEXAjwj3PmDUwPat9rk1smeQv9Rvo7Pr2dZ2/3qvfNcCfCMoOM2GayG/vcNJGTaf3/wc3Qv4KxCu30DnuHLWbmYfnZbQ0DQULGGPyD6sDwNjOMfqyJ4k+ifK3KLNYGbTLHATl9ynI4PjGjrBUbfPvO7mL6JrasBe1oNWwAPlvN/MigE4rwUFeMAAAAASUVORK5CYII=";
  },
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  function (t, e, n) {},
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  function (t, e) {},
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  ,
  function (t, e, n) {
    t.exports = n.p + "static/img/auth.fb6a43d9.png";
  },
  ,
  ,
  ,
  ,
  function (t, e, n) {
    "use strict";
    n(203);
  },
  function (t, e, n) {
    "use strict";
    n(204);
  },
  function (t, e, n) {
    "use strict";
    n(205);
  },
  function (t, e, n) {
    "use strict";
    n(206);
  },
  function (t, e, n) {
    "use strict";
    n(207);
  },
  function (t, e, n) {
    "use strict";
    n(208);
  },
  function (t, e, n) {
    "use strict";
    n(209);
  },
  function (t, e, n) {
    "use strict";
    n(210);
  },
  function (t, e, n) {
    "use strict";
    n(211);
  },
  function (t, e, n) {
    "use strict";
    n(212);
  },
  function (t, e, n) {
    "use strict";
    n(213);
  },
  function (t, e, n) {
    "use strict";
    n(214);
  },
  function (t, e, n) {
    "use strict";
    n(215);
  },
  function (t, e, n) {
    "use strict";
    n(216);
  },
  function (t, e, n) {
    "use strict";
    n(217);
  },
  ,
  ,
  ,
  function (t, e, n) {
    "use strict";
    n(218);
  },
  function (t, e, n) {
    t.exports = n.p + "static/img/nodata.4d721f9d.png";
  },
  function (t, e, n) {
    "use strict";
    n(219);
  },
  function (t, e, n) {
    "use strict";
    n(220);
  },
  function (t, e, n) {
    "use strict";
    n(221);
  },
  ,
  ,
  function (t, e, n) {
    "use strict";
    n(222);
  },
  function (t, e, n) {
    "use strict";
    n(223);
  },
  function (t, e, n) {
    "use strict";
    n(224);
  },
  function (t, e, n) {
    "use strict";
    n(225);
  },
  function (t, e, n) {
    "use strict";
    n(226);
  },
  function (t, e, n) {
    "use strict";
    n(227);
  },
  function (t, e, n) {
    "use strict";
    n(228);
  },
  function (t, e, n) {
    "use strict";
    n(229);
  },
  function (t, e, n) {
    "use strict";
    n(230);
  },
  function (t, e, n) {
    "use strict";
    n(231);
  },
  function (t, e, n) {
    "use strict";
    n(232);
  },
  function (t, e, n) {
    "use strict";
    n(233);
  },
  function (t, e, n) {
    "use strict";
    n(234);
  },
  function (t, e, n) {
    "use strict";
    n(235);
  },
  function (t, e, n) {
    "use strict";
    n(236);
  },
  ,
  function (t, e, n) {
    "use strict";
    n(238);
  },
  function (t, e, n) {},
  function (t, e, n) {
    "use strict";
    n(239);
  },
  function (t, e, n) {
    "use strict";
    n(240);
  },
  function (t, e, n) {
    "use strict";
    n(241);
  },
  ,
  function (t, e, n) {
    "use strict";
    n(243);
  },
  function (t, e, n) {
    "use strict";
    n(244);
  },
  function (t, e, n) {
    "use strict";
    n(245);
  },
  function (t, e, n) {
    "use strict";
    n(246);
  },
  function (t, e, n) {
    "use strict";
    n(247);
  },
  function (t, e, n) {
    "use strict";
    n(248);
  },
  function (t, e, n) {
    "use strict";
    n(249);
  },
  function (t, e, n) {
    "use strict";
    n(250);
  },
  function (t, e, n) {
    "use strict";
    n(251);
  },
  function (t, e, n) {
    "use strict";
    n(252);
  },
  function (t, e, n) {
    "use strict";
    n(253);
  },
  function (t, e, n) {
    "use strict";
    n(254);
  },
  function (t, e, n) {
    "use strict";
    n(255);
  },
  function (t, e, n) {
    "use strict";
    n(256);
  },
  function (t, e, n) {},
  function (t, e, n) {},
  ,
  ,
  function (t, e, n) {
    "use strict";
    n(257);
  },
  function (t, e, n) {
    "use strict";
    n(258);
  },
  ,
  ,
  ,
  ,
  function (t, e, n) {
    "use strict";
    n(260);
  },
  function (t, e, n) {
    "use strict";
    n(261);
  },
  function (t, e, n) {
    "use strict";
    n(262);
  },
  function (t, e, n) {
    "use strict";
    n(263);
  },
  function (t, e, n) {
    "use strict";
    n(264);
  },
  function (t, e, n) {
    "use strict";
    n(265);
  },
  function (t, e, n) {
    "use strict";
    n(266);
  },
  function (t, e, n) {
    "use strict";
    n(267);
  },
  function (t, e, n) {
    "use strict";
    n(268);
  },
  function (t, e, n) {
    "use strict";
    n(269);
  },
  function (t, e, n) {
    "use strict";
    n(270);
  },
  function (t, e, n) {
    "use strict";
    n(271);
  },
  function (t, e, n) {
    "use strict";
    n(272);
  },
  function (t, e, n) {
    "use strict";
    n(273);
  },
  function (t, e, n) {
    "use strict";
    n(274);
  },
  function (t, e, n) {
    "use strict";
    n(275);
  },
  function (t, e, n) {
    "use strict";
    n(276);
  },
  function (t, e, n) {
    "use strict";
    n(277);
  },
  function (t, e, n) {
    "use strict";
    n(278);
  },
  function (t, e, n) {
    "use strict";
    n(279);
  },
  function (t, e, n) {
    "use strict";
    n(280);
  },
  function (t, e, n) {
    "use strict";
    n(281);
  },
  function (t, e, n) {
    "use strict";
    n(282);
  },
  function (t, e, n) {
    "use strict";
    n(283);
  },
  function (t, e, n) {
    "use strict";
    n(284);
  },
  function (t, e, n) {
    t.exports = n.p + "static/img/backup.767caea9.png";
  },
  function (t, e, n) {
    "use strict";
    n(285);
  },
  function (t, e, n) {
    "use strict";
    n(286);
  },
  function (t, e, n) {
    "use strict";
    n(287);
  },
  function (t, e, n) {
    "use strict";
    n(288);
  },
  function (t, e, n) {
    "use strict";
    n(289);
  },
  function (t, e, n) {
    "use strict";
    n(290);
  },
  function (t, e, n) {
    "use strict";
    n(291);
  },
  function (t, e, n) {
    "use strict";
    n(292);
  },
  function (t, e, n) {
    "use strict";
    n(293);
  },
  function (t, e, n) {
    "use strict";
    n(294);
  },
  function (t, e, n) {
    "use strict";
    n(295);
  },
  function (t, e, n) {
    "use strict";
    n(296);
  },
  function (t, e, n) {
    "use strict";
    n(297);
  },
  function (t, e, n) {
    "use strict";
    n(298);
  },
  function (t, e, n) {
    "use strict";
    n(299);
  },
  function (t, e, n) {
    "use strict";
    n(300);
  },
  function (t, e, n) {
    "use strict";
    n(301);
  },
  function (t, e, n) {
    "use strict";
    n(302);
  },
  function (t, e, n) {
    "use strict";
    n(303);
  },
  function (t, e, n) {},
  function (t, e, n) {
    "use strict";
    n.r(e);
    n(112), n(145), n(97), n(18);
    var i = n(109),
      s = n.n(i),
      o = n(7),
      r = n.n(o),
      a = (n(5), n(320), {}),
      c = null,
      l = null;
    function u(t, e, n, i, s) {
      var o =
        arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0;
      if ((t !== l && (c = null), "" !== e)) {
        var r = String(new Date().getTime());
        "boolean" == typeof n && (n = "info");
        var u = document.createDocumentFragment(),
          m = document.createElement("div");
        if (
          "success" !== (n = n || "info") &&
          "caution" !== n &&
          "error" !== n &&
          "info" !== n
        )
          throw new Error(
            "".concat(
              "[Bplus Message]",
              " 在使用 Link Toast 时必须指定正确的类型: success || caution || error || info"
            )
          );
        if (
          ((m.innerHTML = '<span class="toast-text">'.concat(e, "</span>")),
          (m.className = "link-toast "
            .concat(n, " ")
            .concat(i ? "fixed" : "", " ")
            .concat(s ? "mobile" : "")),
          !s)
        ) {
          if (!t || (!t.className && !t.attributes))
            throw new Error(
              "".concat("[Bplus Message]", " 传入 element 不是有效节点.")
            );
          var f = t.getBoundingClientRect(),
            h = f.left,
            g = f.top,
            v = f.width,
            b = f.height,
            y =
              (document.documentElement &&
                document.documentElement.scrollLeft) ||
              document.body.scrollLeft;
          m.style.left = h + v + y + "px";
          var _ =
            (document.documentElement && document.documentElement.scrollTop) ||
            document.body.scrollTop;
          m.style.top = g + b + _ + "px";
        }
        setTimeout(function () {
          p(r, m);
        }, o || (s ? 2e3 : 4e3)),
          m.addEventListener("click", function () {
            p(r, m);
          }),
          d(c, s),
          u.appendChild(m),
          document.body.appendChild(u);
        var w = document.body.offsetWidth,
          C = m.getBoundingClientRect().left,
          x = m.offsetWidth;
        w - x - C < 0 && (m.style.left = w - x - 10 + y + "px"),
          (a[r] = { instance: m, lastHash: c, top: 0 }),
          (c = r),
          (l = t);
      }
    }
    function d(t, e) {
      if (t && a[t]) {
        var n = a[t],
          i = n.top - 50;
        e && ((i = 0), p(t, n.instance)),
          (n.instance.style.transform = "translateY(" + i + "px)"),
          (n.top = n.top - 50),
          d(n.lastHash, e);
      }
    }
    function p(t, e) {
      (e.className += " out-fade"),
        setTimeout(function () {
          e && e.parentNode && e.parentNode.removeChild(e), (a[t] = null);
        }, 350);
    }
    var m = function () {
      return {
        install: function (t) {
          t.prototype.linkMsg || (t.prototype.linkMsg = u);
        },
      };
    };
    n(47),
      n(8),
      n(15),
      n(4),
      n(11),
      n(23),
      n(2),
      n(33),
      n(27),
      n(10),
      n(31),
      n(32),
      n(26),
      n(24);
    function f(t) {
      return (f =
        "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
          ? function (t) {
              return typeof t;
            }
          : function (t) {
              return t &&
                "function" == typeof Symbol &&
                t.constructor === Symbol &&
                t !== Symbol.prototype
                ? "symbol"
                : typeof t;
            })(t);
    }
    var h = { pv: {}, click: {}, default: {} };
    function g() {
      var t =
        arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
      Object.keys(h).forEach(function (e) {
        h[e] = Object.assign({}, t[e]);
      });
    }
    function v(t) {
      !(function t(e, n, i) {
        var s = (function (t) {
          return (
            !!t &&
            (t instanceof Promise
              ? "promise"
              : "function" == typeof t
              ? "function"
              : "string" == typeof t
              ? "string"
              : "[object Object]" === String(t)
              ? "object"
              : void 0)
          );
        })(n);
        if (!s) return;
        if ("object" === s) {
          var o = Object.assign({}, h.default, h[e], { e: i }, n);
          return void (function (t, e) {
            var n = {
              logId: e.logId,
              sendStatus: e.sendStatus || "double",
              spmId: e.spmId,
              sendUrl: e.sendUrl,
            };
            if (
              (void 0 !== e.data &&
                null !== e.data &&
                "{}" !== JSON.stringify(e.data) &&
                (n.msg = {
                  value: e.data,
                  _rdm: Math.random().toString().split(".")[1].slice(0, 5),
                }),
              e.event)
            ) {
              var i = e.spmId + ".selfDef." + e.event;
              (n.spm_id = i),
                "object" === f(n.msg)
                  ? (n.msg.event = e.event)
                  : (n.msg = {
                      event: e.event,
                      _rdm: Math.random().toString().split(".")[1].slice(0, 5),
                    });
            }
            "click" === t
              ? window.__bp_statisObserver.sendClickEvent(n, e.e)
              : "pv" === t && window.__bp_statisObserver.sendPV(n);
          })(e, o);
        }
        if ("string" === s) {
          var r = {};
          return (r.event = n), void t(e, r, i);
        }
        if ("function" === s) {
          var a = n();
          return void t(e, a, i);
        }
        if ("promise" === s)
          return void n.then(function (n) {
            t(e, n, i);
          });
      })(t.type, t.data, t.e);
    }
    var b = [];
    function y() {
      if (Object.assign)
        return !!(
          window.__bp_statisObserver &&
          window.__bp_statisObserver.sendClickEvent &&
          window.__bp_statisObserver.sendPV
        );
      console.error(
        "No Object.assign. component.statistics needs Object.assign polyfill."
      );
    }
    function _() {
      y() &&
        b.forEach(function () {
          v(b.shift());
        });
    }
    function w(t) {
      b.push(t),
        setTimeout(function () {
          _();
        }, 1e3);
    }
    function C(t) {
      if (void 0 === window.__bp_statisObserver) {
        window.__bp_statisObserverConfig = Object.assign(
          {
            loadPV: !0,
            loadEvent: !0,
            loadPerform: !1,
            loadSpecial: !1,
            loadBaidu: !1,
          },
          window.__bp_statisObserverConfig
        );
        var e = document.createElement("script");
        (e.onload = function () {
          _(), t && t();
        }),
          (e.src =
            "//s1.hdslb.com/bfs/seed/bplus-common/statistics-js/log-reporter.js"),
          document.getElementsByTagName("body")[0].appendChild(e);
      } else t && t();
    }
    function x() {
      var t =
          arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
        e = arguments.length > 1 ? arguments[1] : void 0,
        n = Object.assign({}, { data: t }, { type: "click" }, { e: e });
      if (!y()) return w(n), void C();
      v(n);
    }
    function k() {
      var t =
          arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
        e = Object.assign({}, { data: t }, { type: "pv" });
      if (!y()) return w(e), void C();
      v(e);
    }
    var S = { click: x, event: x, pv: k, setDefault: g },
      I = {
        install: function (t, e) {
          g(e),
            (t.prototype.$bpreport = S),
            t.directive("bpreport", {
              bind: function (t, e) {
                "click" === e.arg &&
                  t.addEventListener("click", function (t) {
                    x(e.value, t);
                  });
              },
              inserted: function (t, e) {
                "pv" === e.arg && k(e.value);
              },
            });
        },
      },
      j = n(16),
      O = (n(20), n(9), n(144)),
      L = n(14),
      P = (n(12), n(21), n(22), n(331), n(3));
    function A(t) {
      return (A =
        "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
          ? function (t) {
              return typeof t;
            }
          : function (t) {
              return t &&
                "function" == typeof Symbol &&
                t.constructor === Symbol &&
                t !== Symbol.prototype
                ? "symbol"
                : typeof t;
            })(t);
    }
    var E = function (t) {
      var e =
        arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : [];
      t.addPlatInfo = !0;
      var n = t.url;
      return new Promise(function (i, s) {
        Object(P.a)(t).then(
          function (t) {
            i(t.data);
          },
          function (t) {
            var o = t.code;
            if ("all" === e || e.indexOf(o) > -1) i(t);
            else {
              if (-8888 === o) {
                var a = t.msg;
                "object" === A(a) &&
                  (a = a.response
                    ? ""
                        .concat(a.response.statusText, " ")
                        .concat(a.response.status)
                    : "电波无法到达"),
                  r.a.prototype.linkMsg(
                    document.getElementById("console-error"),
                    "网络错误：".concat(n.replace(/^\/\//, ""), " ").concat(a),
                    "error",
                    !0
                  );
              }
              s(t);
            }
          }
        );
      });
    };
    function T() {
      var t =
          arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
        e = t.type,
        n = t.id;
      return E({
        method: "post",
        url: "//api.bilibili.com/x/msgfeed/del",
        data: { tp: e, id: n },
      });
    }
    var M = {};
    function B(t) {
      var e = t.pageNum,
        n = void 0 === e ? 1 : e,
        i = t.mid;
      return i && M[i.toString()]
        ? Promise.resolve(M[i.toString()])
        : E({
            method: "get",
            url: "//message.bilibili.com/api/msg/query.room.list.do",
            data: { page_no: n, mid: i },
          }).then(function (t) {
            return i && (M[i.toString()] = t), t;
          });
    }
    n(46),
      n(181),
      n(183),
      n(184),
      n(185),
      n(186),
      n(187),
      n(188),
      n(189),
      n(190),
      n(191),
      n(192),
      n(193),
      n(194),
      n(195),
      n(196),
      n(197),
      n(198);
    function D(t) {
      return (
        ("selectionStart" in t &&
          function () {
            var e = t.selectionEnd - t.selectionStart;
            return {
              start: parseInt(t.selectionStart),
              end: t.selectionEnd,
              length: e,
              text: t.value.substr(t.selectionStart, e),
            };
          }) ||
        function () {
          return null;
        }
      )();
    }
    n(76);
    function N(t) {
      return (
        (function (t) {
          if (Array.isArray(t)) return R(t);
        })(t) ||
        (function (t) {
          if (
            ("undefined" != typeof Symbol && null != t[Symbol.iterator]) ||
            null != t["@@iterator"]
          )
            return Array.from(t);
        })(t) ||
        (function (t, e) {
          if (!t) return;
          if ("string" == typeof t) return R(t, e);
          var n = Object.prototype.toString.call(t).slice(8, -1);
          "Object" === n && t.constructor && (n = t.constructor.name);
          if ("Map" === n || "Set" === n) return Array.from(t);
          if (
            "Arguments" === n ||
            /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
          )
            return R(t, e);
        })(t) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function R(t, e) {
      (null == e || e > t.length) && (e = t.length);
      for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
      return i;
    }
    function $(t, e) {
      return new Promise(function (n, i) {
        e && console.error(e), i(t);
      });
    }
    n(58);
    function U() {
      for (var t = arguments.length, e = new Array(t), n = 0; n < t; n++)
        e[n] = arguments[n];
      return function (t) {
        return e.reduce(function (t, e) {
          return t && t[e] ? t[e] : null;
        }, t);
      };
    }
    function V(t, e) {
      if (t.setSelectionRange) t.focus(), t.setSelectionRange(e, e);
      else if (t.createTextRange) {
        var n = t.createTextRange();
        n.collapse(!0),
          n.moveEnd("character", e),
          n.moveStart("character", e),
          n.select();
      }
    }
    n(37), n(59);
    var z = /\/bfs\//,
      H = function (t) {
        var e =
            arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
          n =
            arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0,
          i =
            arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : {},
          s = t;
        if (
          (!j.b &&
            /\.webp$/.test(t) &&
            (/@/.test(t) ? (s = t.replace(/\.webp$/, ".jpg")) : (s += "@.jpg")),
          ("undefined" != typeof window && window && window._bp_audit_mode) ||
            !t ||
            "string" != typeof t ||
            !/\.(jpg|png|gif)(@\w*)?$/.test(t) ||
            !z.test(t))
        )
          return encodeURI(s);
        var o = (t = t.replace(/(\.\w+)@\w*$/, function (t, e) {
            return e;
          })).match(/\.(jpg|png|gif)$/)[0],
          r =
            !1 === i.autoDpr || "undefined" == typeof window
              ? 1
              : parseInt(window.devicePixelRatio) || 1,
          a = Math.ceil(e),
          c = Math.ceil(n),
          l = a ? "".concat(a * r, "w") : "",
          u = c ? "".concat(c * r, "h") : "",
          d = F(i.p, "p"),
          p = F(i.e, "e"),
          m = F(i.c, "c"),
          f = i.others ? i.others : "",
          h = [l, u, d, p, m, f],
          g = h
            .filter(function (t) {
              return "" !== t;
            })
            .join("_"),
          v = j.b && !1 !== i.useWebp,
          b = v ? ".webp" : o,
          y = l || u || m || f || v;
        return encodeURI(
          y ? "".concat(t, "@").concat(g).concat(b) : "".concat(s)
        );
      };
    function F(t, e) {
      return "string" == typeof t
        ? t
        : "number" == typeof t
        ? "".concat(t).concat(e)
        : "";
    }
    var G = new r.a({}),
      Z = n(0),
      q = n.n(Z),
      K = n(65),
      W = n.n(K);
    var J = Object(j.c)(),
      Y = "IE 9" === J || "IE Legacy" === J,
      Q =
        (n(57),
        n(19),
        n(140),
        [
          { unit: "亿", val: 1e8 },
          { unit: "万", val: 1e4 },
        ]),
      X = function (t) {
        return (function (t, e) {
          if (!Array.isArray(t))
            return console.warn("[NumberFormat] 无法获取格式化列表.");
          var n;
          return (
            t.some(function (t) {
              if (e >= t.val)
                return (n = et(t.val, { fixing: 1, unit: t.unit })(e)), !0;
            }),
            n || "".concat(e)
          );
        })(Q, t);
      },
      tt = { fixing: 1, unit: "", base: null };
    function et() {
      var t =
          arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : 1e4,
        e = arguments.length > 1 ? arguments[1] : void 0;
      return function (n) {
        var i = parseInt(n, 10);
        if (((t = parseInt(t, 10)), isNaN(i) || isNaN(t)))
          return (
            "undefined" != typeof console &&
              console.warn(
                "[NumberFormat] 创建格式化函数时 threshold 与 传入数字必须为数字类型."
              ),
            n
          );
        var s = Object.assign({}, tt, e);
        return i < t
          ? i
          : Number((i / (s.base || t)).toFixed(s.fixing)) + "".concat(s.unit);
      };
    }
    var nt = {
        angry: [",,Ծ‸Ծ,,", "(╯‵□′)╯︵┻━┻"],
        happy: [
          "=‿=✧",
          "●ω●",
          "(/ ▽ \\)",
          "(=・ω・=)",
          "(●'◡'●)ﾉ♥",
          "<(▰˘◡˘▰)>",
          "(⁄ ⁄•⁄ω⁄•⁄ ⁄)",
          "(ง,,• ᴗ •,,)ง ✧",
          ">ㅂ<ﾉ ☆",
        ],
        shock: ["Σ( ° △ °|||)︴", "┌( ಠ_ಠ)┘", "(ﾟДﾟ≡ﾟдﾟ)!?", "∑(っ °Д °;)っ"],
        sad: ["＞︿＜", "＞△＜", "●︿●", "(´；ω；`)"],
        helpless: [
          "◐▽◑",
          "ʅ（´◔౪◔）ʃ",
          "_(:3 」∠)_",
          "_(┐「ε:)_",
          "(°▽°)ﾉ",
          "←◡←",
          "_(•̀ᴗ•́ 」∠ ❀)_",
          "_φ(･ω･` )",
        ],
      },
      it = {};
    for (var st in nt)
      !(function (t) {
        it[t] = function () {
          return ot(t);
        };
      })(st);
    var ot = function (t) {
        return nt[t][Math.floor(Math.random() * nt[t].length)];
      },
      rt = it;
    function at(t) {
      return (at =
        "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
          ? function (t) {
              return typeof t;
            }
          : function (t) {
              return t &&
                "function" == typeof Symbol &&
                t.constructor === Symbol &&
                t !== Symbol.prototype
                ? "symbol"
                : typeof t;
            })(t);
    }
    var ct = function () {
        return Object(P.a)({
          method: "get",
          url: "//api.vc.bilibili.com/dynamic_mix/v1/dynamic_mix/bvid_onoff",
          cache_key: "bpShowBvConfig",
          ttl: 4e3,
          localCache: !0,
          throttleInterval: 4e3,
          timeout: 5e3,
        }).then(function (t) {
          var e = !0 === t.data.show_bv || "true" === t.data.show_bv;
          dt() !== e &&
            ("object" ===
              ("undefined" == typeof window ? "undefined" : at(window)) &&
              (window.__BILI_CONFIG__ ||
                (window.__BILI_CONFIG__ = { show_bv: e }),
              (window.__BILI_CONFIG__.show_bv = e),
              localStorage.setItem("bili_config_show_bv", e)),
            G.$emit("ShowBvConfigUpdated"));
        });
      },
      lt = function () {
        var t = !1;
        return (
          "object" !==
            ("undefined" == typeof window ? "undefined" : at(window)) ||
            (window.__BILI_CONFIG__ && void 0 !== window.__BILI_CONFIG__.show_bv
              ? ((t = window.__BILI_CONFIG__.show_bv),
                localStorage.setItem("bili_config_show_bv", t))
              : (t = "true" === localStorage.getItem("bili_config_show_bv"))),
          t
        );
      },
      ut = !0,
      dt = function () {
        return (
          "undefined" != typeof window &&
          (ut ? ((ut = !1), (t = lt()), ct()) : (t = lt()), t)
        );
        var t;
      },
      pt = function (t, e) {
        return dt() && e
          ? "//www.bilibili.com/video/".concat(e)
          : "//www.bilibili.com/video/av".concat(t);
      },
      mt = n(13),
      ft = function (t) {
        return Object(P.a)({
          method: "get",
          url: "".concat(mt.a.API_VC, "/x/im/anti_disturb/get_disturb"),
          data: { scene: t },
        });
      },
      ht = function (t) {
        var e = t.id,
          n = t.isOpen;
        return Object(P.a)({
          method: "post",
          url: "".concat(mt.a.API_VC, "/x/im/anti_disturb/set_disturb"),
          data: { selected_id: e, is_open: n },
        });
      },
      gt = (n(45), "undefined" == typeof window),
      vt = function (t) {
        var e = "";
        if (gt) return e;
        var n = document.cookie;
        if (!n) return e;
        for (
          var i = n.split(";"), s = new RegExp("^".concat(t, "=")), o = 0;
          o < i.length;
          o++
        ) {
          var r = i[o].trim();
          if (s.test(r)) {
            e = r.split("=")[1];
            break;
          }
        }
        return e;
      },
      bt = function (t, e, n, i) {
        var s = "";
        return (
          i && /\.gif/.test(t) && (s = "@1s"),
          { srcUrl: H(t, e, n, { c: 1 }) + s, oriUrl: H(t) }
        );
      };
    var yt = function (t) {
      var e = window.localStorage.getItem("im_deviceid_".concat(t));
      if (!t || !e) {
        var n = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(
          /[xy]/g,
          function (t) {
            var e = (16 * Math.random()) | 0;
            return ("x" === t ? e : (3 & e) | 8).toString(16).toUpperCase();
          }
        );
        return (
          (function (t, e) {
            Object.keys(localStorage).forEach(function (t) {
              t.match(/^im_deviceid_/) && window.localStorage.removeItem(t);
            }),
              window.localStorage.setItem("im_deviceid_".concat(e), t);
          })(n, t),
          n
        );
      }
      return e;
    };
    function _t(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function wt(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? _t(Object(n), !0).forEach(function (e) {
              Ct(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : _t(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function Ct(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var xt,
      kt = {
        getSysSetting: function (t) {
          var e = t.commit,
            n = t.state;
          return Promise.all([
            E({
              method: "get",
              urlWithCSRF: !0,
              url: "//api.vc.bilibili.com/link_setting/v1/link_setting/get_sys_setting",
            }),
          ])
            .then(function (t) {
              e("SET_SYS_SETTING", wt(wt({}, n.sysSetting), t[0]));
            })
            .catch(function (t) {
              console.error(t), e("SET_SYS_SETTING", wt({}, n.sysSetting));
            });
        },
        setDeviceId: function (t, e) {
          (0, t.commit)("SET_DEVICE_ID", e.deviceId);
        },
        setUid: function (t, e) {
          var n = t.commit,
            i = e.uid;
          n("SET_UID", parseInt(i, 10) || null);
        },
        setUname: function (t, e) {
          (0, t.commit)("SET_UNAME", e);
        },
        setFace: function (t, e) {
          (0, t.commit)("SET_FACE", e);
        },
        setTitle: function (t, e) {
          (0, t.commit)("SET_TITLE", e);
        },
        setCurrentPage: function (t, e) {
          (0, t.commit)("SET_CURRENT_PAGE", e);
        },
        setListLoadingNum: function (t, e) {
          (0, t.commit)("SET_LIST_LOADING_NUM", e);
        },
        getRoomList: function (t) {
          var e = t.commit,
            n =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : {};
          return (
            n.pageNum > 1 && e("SET_LIST_LOADING_MORE", !0),
            B({ pageNum: n.pageNum }).then(
              function (t) {
                return (
                  e("SET_ROOM_LIST", { data: t, notCover: n.pageNum > 1 }),
                  n.pageNum > 1 && e("SET_LIST_LOADING_MORE", !1),
                  t
                );
              },
              function (t) {
                return (
                  console.error("queryRoomList error:", t),
                  n.pageNum > 1 && e("SET_LIST_LOADING_MORE", !1),
                  $(t)
                );
              }
            )
          );
        },
        closeArchive: function (t, e) {
          var n = t.commit,
            i = e.rid;
          return (function (t) {
            var e = t.rid;
            return E({
              method: "post",
              url: "//message.bilibili.com/api/msg/disable.room.do",
              data: { rid: e },
            });
          })({ rid: i }).then(
            function (t) {
              return n("DEL_ROOM", { rid: i }), t;
            },
            function (t) {
              return console.error("disableDialog error:", t), $(t);
            }
          );
        },
        setBlackList: function (t, e) {
          (0, t.commit)("SET_BLACKLIST", e);
        },
        getBlackList: function (t) {
          var e = t.commit;
          return E({
            method: "get",
            url: "//api.bilibili.com/x/relation/blacks",
            data: { cross_domain: !0 },
          }).then(
            function (t) {
              return e("SET_BLACKLIST", t.list), t;
            },
            function (t) {
              return console.error("getBlackList error:", t), $(t);
            }
          );
        },
      };
    n(54);
    function St(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var It =
      (St((xt = {}), "SET_SYS_SETTING", function (t, e) {
        (t.sysSetting = e), (t.sysSettingFetched = !0);
      }),
      St(xt, "SET_DEVICE_ID", function (t, e) {
        e && (t.deviceId = e);
      }),
      St(xt, "SET_UID", function (t, e) {
        var n = parseInt(e, 10) || null;
        t.uid = n;
      }),
      St(xt, "SET_UNAME", function (t, e) {
        t.uname = e || "";
      }),
      St(xt, "SET_FACE", function (t, e) {
        t.face = e || "";
      }),
      St(xt, "SET_TITLE", function (t, e) {
        e && (t.title = e);
      }),
      St(xt, "SET_CURRENT_PAGE", function (t, e) {
        e && (t.currentPage = e);
      }),
      St(xt, "SET_NOTIFY_COUNT", function (t, e) {
        var n = e.data,
          i = n.at_me,
          s = n.notify_me,
          o = n.praise_me,
          r = n.reply_me;
        (t.notifyCount.atMe = i),
          (t.notifyCount.notifyMe = s),
          (t.notifyCount.praiseMe = o),
          (t.notifyCount.replyMe = r);
      }),
      St(xt, "SET_IM_NOTIFY_COUNT", function (t, e) {
        t.notifyCount.chatMe = e > 0 ? e : 0;
      }),
      St(xt, "SET_REPLYME_LIST", function (t, e) {
        var n = e.data,
          i = e.notCover;
        t.replymeList = i ? t.replymeList.concat(n) : n;
      }),
      St(xt, "SET_PRAISEME_LIST", function (t, e) {
        var n = e.data,
          i = e.notCover;
        t.praisemeList = i ? t.praisemeList.concat(n) : n;
      }),
      St(xt, "SET_SYSNOTIFY_LIST", function (t, e) {
        var n = e.data,
          i = e.notCover;
        t.sysnotifyList = i ? t.sysnotifyList.concat(n) : n;
      }),
      St(xt, "SET_ATME_LIST", function (t, e) {
        var n = e.data,
          i = e.notCover;
        t.atmeList = i ? t.atmeList.concat(n) : n;
      }),
      St(xt, "SET_LIST_LOADING_NUM", function (t, e) {
        e
          ? (t.listLoadingNum += 1)
          : t.listLoadingNum > 0 && (t.listLoadingNum -= 1);
      }),
      St(xt, "SET_LIST_LOADING_MORE", function (t, e) {
        t.listLoadingMore = !!e;
      }),
      St(xt, "SET_ROOM_LIST", function (t, e) {
        var n,
          i,
          s,
          o = e.data,
          r = e.notCover;
        t.roomList = r
          ? ((n = t.roomList),
            (i = o),
            (s = N(n)),
            i.forEach(function (t) {
              var e = s.findIndex(function (e) {
                return e.rid === t.rid;
              });
              e > -1 ? Object.assign(s[e], t) : t.rid && s.push(t);
            }),
            s)
          : o;
      }),
      St(xt, "SET_LOCALACK", function (t, e) {
        t.localAck = e;
      }),
      St(xt, "SET_BLACKLIST", function (t, e) {
        var n = {};
        "string" == typeof e || "number" == typeof e
          ? (n[e] = !0)
          : e instanceof Array
          ? e.forEach(function (t) {
              n[t.mid] = !0;
            })
          : e instanceof Object && (n = e),
          Object.keys(n).forEach(function (e) {
            r.a.set(t.blackListObj, e, n[e]);
          }),
          r.a.set(t.blackListObj, "inited", !0);
      }),
      St(xt, "SET_GROUP_MEMBER_LIST", function (t, e) {
        var n = e.key,
          i = e.memberList;
        r.a.set(t.memberListCache, n, i);
      }),
      St(xt, "SET_SERVER_SEQNO", function (t, e) {
        var n = e.num;
        t.serverSeqno = n;
      }),
      St(xt, "SET_CLIENT_SEQNO", function (t, e) {
        var n = e.num;
        t.clientSeqno = n;
      }),
      St(xt, "DEL_ROOM", function (t, e) {
        var n = e.rid;
        t.roomList = t.roomList.filter(function (t) {
          return t.rid !== n;
        });
      }),
      St(xt, "SET_CURRENT_RID", function (t, e) {
        var n = e.rid;
        null === n
          ? (t.currentRid = null)
          : n &&
            "string" == typeof n &&
            (t.currentRid = n.replace(/mid|rid|group|fans/, ""));
      }),
      St(xt, "DEL_A_NOTIFY", function (t, e) {
        var n = e.id,
          i = e.type,
          s = [];
        1 === i ? (s = t.replymeList) : 2 === i && (s = t.atmeList);
        var o = s.findIndex(function (t) {
          return t.id === n;
        });
        s.splice(o, 1);
      }),
      xt);
    function jt() {
      return E({
        method: "get",
        url: "//api.vc.bilibili.com/link_group/v1/member/my_groups",
      });
    }
    var Ot = function (t) {
        return E({
          method: "post",
          urlWithCSRF: !0,
          url: "//api.vc.bilibili.com/x/im/auto_reply/set_reply_text",
          data: t,
        });
      },
      Lt = {
        SET_GROUPS_JOINED: "SET_GROUPS_JOINED",
        SET_DND_LIST: "SET_DND_LIST",
      };
    function Pt(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    var At,
      Et = {
        setGroupsJoined: function (t) {
          return ((e = q.a.mark(function e() {
            var n, i, s;
            return q.a.wrap(function (e) {
              for (;;)
                switch ((e.prev = e.next)) {
                  case 0:
                    if (
                      ((n = t.state), (i = t.commit), n.groupsJoined.length)
                    ) {
                      e.next = 9;
                      break;
                    }
                    return (e.next = 4), jt();
                  case 4:
                    return (
                      (s = e.sent),
                      i(Lt.SET_GROUPS_JOINED, { groupsObjArr: s.list }),
                      e.abrupt("return", s)
                    );
                  case 9:
                    return e.abrupt("return", {});
                  case 10:
                  case "end":
                    return e.stop();
                }
            }, e);
          })),
          function () {
            var t = this,
              n = arguments;
            return new Promise(function (i, s) {
              var o = e.apply(t, n);
              function r(t) {
                Pt(o, i, s, r, a, "next", t);
              }
              function a(t) {
                Pt(o, i, s, r, a, "throw", t);
              }
              r(void 0);
            });
          })();
          var e;
        },
      };
    n(64), n(141);
    function Tt(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var Mt,
      Bt = {
        state: {
          groupsJoinedList: [],
          groupsJoined: [],
          dndList: { user: [], group: [] },
          dndListStatus: { user: {}, group: {} },
        },
        getters: {
          groupsJoinedList: function (t) {
            return t.groupsJoinedList;
          },
          groupsJoined: function (t) {
            return t.groupsJoined;
          },
        },
        mutations:
          (Tt((At = {}), Lt.SET_GROUPS_JOINED, function (t, e) {
            var n = e.groupsObjArr;
            t.groupsJoinedList = n;
            var i = [];
            Array.isArray(n) &&
              n.forEach(function (t) {
                i.push(t.group_id);
              }),
              i.length || i.push(0),
              (t.groupsJoined = i);
          }),
          Tt(At, Lt.SET_DND_LIST, function (t, e) {
            e &&
              e.uid_settings instanceof Array &&
              e.uid_settings.forEach(function (e) {
                "number" == typeof e
                  ? (t.dndListStatus.user[e] = new Date().getTime())
                  : (t.dndListStatus.user[e.id] = new Date().getTime()),
                  e.setting > 0 &&
                    !t.dndList.user.includes(e.id) &&
                    t.dndList.user.push(e.id);
              }),
              e &&
                e.group_settings instanceof Array &&
                e.group_settings.forEach(function (e) {
                  "number" == typeof e
                    ? (t.dndListStatus.group[e] = new Date().getTime())
                    : (t.dndListStatus.group[e.id] = new Date().getTime()),
                    e.setting > 0 &&
                      !t.dndList.group.includes(e.id) &&
                      t.dndList.group.push(e.id);
                });
          }),
          At),
        actions: Et,
      };
    function Dt(t) {
      return E({
        method: "post",
        url: "//api.vc.bilibili.com/link_setting/v1/link_setting/set",
        data: t,
      });
    }
    function Nt(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function Rt(t) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (i, s) {
          var o = t.apply(e, n);
          function r(t) {
            Nt(o, i, s, r, a, "next", t);
          }
          function a(t) {
            Nt(o, i, s, r, a, "throw", t);
          }
          r(void 0);
        });
      };
    }
    function $t(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function Ut(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? $t(Object(n), !0).forEach(function (e) {
              Vt(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : $t(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function Vt(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var zt = "SET_NOTIFY_TYPE",
      Ht = {
        state: {
          fetchNotifyConfigPromise: null,
          notifyConfig: {
            set_like: 0,
            set_comment: 0,
            set_at: 0,
            show_unfollowed_msg: 0,
            is_group_fold: 0,
            should_receive_group: 1,
            receive_unfollow_msg: 1,
            followed_reply: 0,
            keys_reply: 0,
            recv_reply: 0,
            recommend_followed_reply: 0,
          },
        },
        getters: {
          fetchNotifyConfigPromise: function (t) {
            return t.fetchNotifyConfigPromise;
          },
          notifyConfig: function (t) {
            return t.notifyConfig;
          },
        },
        mutations:
          (Vt((Mt = {}), zt, function (t, e) {
            var n = e.options,
              i = e.uid;
            void 0 !== n.msg_notify &&
              localStorage.setItem("im_notify_type_".concat(i), n.msg_notify),
              (t.notifyConfig = Ut(Ut({}, t.notifyConfig), n));
          }),
          Vt(Mt, "setFetchNotifyConfigPromise", function (t, e) {
            t.fetchNotifyConfigPromise = e;
          }),
          Mt),
        actions: {
          setNotifyConfig: function (t, e) {
            return Rt(
              q.a.mark(function n() {
                var i, s, o, r, a;
                return q.a.wrap(function (n) {
                  for (;;)
                    switch ((n.prev = n.next)) {
                      case 0:
                        return (
                          (i = t.commit),
                          (s = t.rootState),
                          (o = e.name),
                          (r = e.num),
                          (a = Vt({}, o, r)),
                          i(zt, { options: a, uid: s.uid }),
                          n.abrupt("return", Dt(a))
                        );
                      case 5:
                      case "end":
                        return n.stop();
                    }
                }, n);
              })
            )();
          },
          getNotifyConfig: function (t) {
            return Rt(
              q.a.mark(function e() {
                var n, i, s;
                return q.a.wrap(function (e) {
                  for (;;)
                    switch ((e.prev = e.next)) {
                      case 0:
                        (n = t.commit),
                          t.dispatch,
                          t.state,
                          (i = t.rootState),
                          (s = E({
                            method: "post",
                            url: "//api.vc.bilibili.com/link_setting/v1/link_setting/get",
                            data: { msg_notify: 1, show_unfollowed_msg: 1 },
                          }).then(function (t) {
                            0 === t.msg_notify && (t.msg_notify = 1),
                              n(zt, { options: t, uid: i.uid });
                          })),
                          n("setFetchNotifyConfigPromise", s);
                      case 3:
                      case "end":
                        return e.stop();
                    }
                }, e);
              })
            )();
          },
        },
      };
    r.a.use(L.a);
    var Ft,
      Gt,
      Zt,
      qt,
      Kt,
      Wt,
      Jt,
      Yt,
      Qt,
      Xt,
      te,
      ee,
      ne,
      ie,
      se,
      oe,
      re = new L.a.Store({
        modules: { whisper: Bt, msgConfig: Ht },
        state: {
          deviceId: "",
          uid: null,
          uname: "",
          face: "",
          title: "",
          currentPage: "index",
          notifyCount: {
            atMe: 0,
            chatMe: 0,
            notifyMe: 0,
            praiseMe: 0,
            replyMe: 0,
          },
          sysSetting: {},
          sysSettingFetched: !1,
          replymeList: [],
          praisemeList: [],
          sysnotifyList: [],
          atmeList: [],
          listLoadingNum: 0,
          listLoadingMore: !1,
          roomList: [],
          roomIdList: {},
          localAck: 0,
          clientSeqno: 0,
          serverSeqno: 0,
          memberListCache: {},
          blackListObj: {},
          currentRid: null,
          reportTypeList: [
            { type: 1, name: "色情低俗" },
            { type: 2, name: "政治敏感" },
            { type: 3, name: "违法有害" },
            { type: 4, name: "广告骚扰" },
            { type: 5, name: "人身攻击" },
            { type: 6, name: "诈骗" },
            { type: 0, name: "其他问题" },
          ],
        },
        actions: kt,
        mutations: It,
        getters: {
          title: function (t) {
            return t.title;
          },
          currentPage: function (t) {
            return t.currentPage;
          },
          replymeList: function (t) {
            return t.replymeList;
          },
          praisemeList: function (t) {
            return t.praisemeList;
          },
          sysnotifyList: function (t) {
            return t.sysnotifyList;
          },
          atmeList: function (t) {
            return t.atmeList;
          },
          listLoadingNum: function (t) {
            return t.listLoadingNum;
          },
          listLoadingMore: function (t) {
            return t.listLoadingMore;
          },
          roomList: function (t) {
            return t.roomList;
          },
          reportTypeList: function (t) {
            return t.reportTypeList;
          },
          notifyCount: function (t) {
            return t.notifyCount;
          },
          uid: function (t) {
            return t.uid;
          },
          uname: function (t) {
            return t.uname;
          },
          face: function (t) {
            return t.face;
          },
          blackListObj: function (t) {
            return t.blackListObj;
          },
          deviceId: function (t) {
            return t.deviceId;
          },
          sysSetting: function (t) {
            return t.sysSetting;
          },
        },
      }),
      ae = n(60),
      ce = (n(201), new r.a()),
      le = n(81),
      ue = n.n(le),
      de = (n(202), n(35));
    function pe(t, e) {
      return (
        e || (e = t.slice(0)),
        Object.freeze(
          Object.defineProperties(t, { raw: { value: Object.freeze(e) } })
        )
      );
    }
    var me,
      fe = {
        add: {
          viewBox: "0 0 40 40",
          shape:
            '<path d="M22.9,17.1V2.8a2.9,2.9,0,0,0-5.8,0V17.1H2.8a2.9,2.9,0,0,0,0,5.8H17.1V37.2A2.82,2.82,0,0,0,20,40a2.88,2.88,0,0,0,2.9-2.8V22.9H37.2A2.82,2.82,0,0,0,40,20a2.88,2.88,0,0,0-2.8-2.9Z"/>',
        },
        plus: {
          viewBox: "0 0 16 16",
          shape:
            '<path fill-rule="evenodd" clip-rule="evenodd" d="M7.99862 2.00012C8.27476 2.00012 8.49862 2.22398 8.49862 2.50012V7.49996H13.5C13.7761 7.49996 14 7.72382 14 7.99996C14 8.2761 13.7761 8.49996 13.5 8.49996H8.49862V13.5001C8.49862 13.7763 8.27476 14.0001 7.99862 14.0001C7.72247 14.0001 7.49862 13.7763 7.49862 13.5001V8.49996H2.5C2.22386 8.49996 2 8.2761 2 7.99996C2 7.72382 2.22386 7.49996 2.5 7.49996H7.49862V2.50012C7.49862 2.22398 7.72247 2.00012 7.99862 2.00012Z" fill="white"/>',
        },
        "arrow-left": {
          viewBox: "0 0 20 20",
          shape:
            '<g transform="translate(0,-277)"><path d="m 6.1595699,286.54933 8.6409671,8.11208 c 0.26595,0.24967 0.26595,0.65166 0,0.90134 -0.265949,0.24967 -0.694158,0.24967 -0.960108,0 l -8.6409667,-8.11208 c -0.2659497,-0.24967 -0.2659497,-0.65167 0,-0.90134 0.2659497,-0.24967 0.6941577,-0.24967 0.9601076,0 z m -0.9601076,0 8.6409667,-8.11208 c 0.26595,-0.24967 0.694159,-0.24967 0.960108,0 0.26595,0.24968 0.26595,0.65168 0,0.90134 l -8.6409671,8.11208 c -0.2659499,0.24967 -0.6941579,0.24967 -0.9601076,0 -0.2659497,-0.24967 -0.2659497,-0.65167 0,-0.90134 z"/></g>',
        },
        "arrow-right": {
          viewBox: "0 0 20 20",
          shape:
            '<g transform="translate(0,-277)"><path d="m 13.84043,286.54933 -8.6409675,8.11208 c -0.26595,0.24967 -0.26595,0.65166 0,0.90134 0.265949,0.24967 0.694158,0.24967 0.960108,0 l 8.6409665,-8.11208 c 0.26595,-0.24967 0.26595,-0.65167 0,-0.90134 -0.265949,-0.24967 -0.694157,-0.24967 -0.960107,0 z m 0.960107,0 -8.6409665,-8.11208 c -0.26595,-0.24967 -0.694159,-0.24967 -0.960108,0 -0.26595,0.24968 -0.26595,0.65168 0,0.90134 l 8.6409675,8.11208 c 0.26595,0.24967 0.694158,0.24967 0.960107,0 0.26595,-0.24967 0.26595,-0.65167 0,-0.90134 z"/></g>',
        },
        "bell-empty": {
          shape:
            '\n      <path d="M2.49999639,12.5 C3.16666305,12.5 3.49999639,11.8333333 3.49999639,10.5 L3.49999639,7.5 C3.49999639,5.01471863 5.51471501,3 7.99999639,3 C10.4852778,3 12.4999964,5.01471863 12.4999964,7.5 L12.4999964,10.5 C12.4999964,11.8333333 12.8333263,12.5 13.4999861,12.5" stroke-linecap="round" stroke-linejoin="round"></path>\n      <path d="M7.00022411,3 L7.00022411,2 C7.00022411,1.44771525 7.44793936,1 8.00022411,1 C8.55250886,1 9.00022411,1.44771525 9.00022411,2 L9.00022411,3" stroke-linecap="round" stroke-linejoin="round"></path>\n      <path d="M5.9999938,13 C5.9999938,14.1045695 6.89542338,15 7.9999938,15 C9.1045601,15 9.9999938,14.1045695 9.9999938,13" stroke-linecap="round" stroke-linejoin="round"></path>\n      <line x1="2.49999742" y1="12.5" x2="13.4999861" y2="12.5" stroke-linecap="round" stroke-linejoin="round"></line>\n      <line  class="path-2" x1="2.49999639" y1="3.5" x2="13.5002241" y2="14.5" stroke-linecap="round" stroke-linejoin="round"></line>\n    ',
          style: function (t) {
            return "active" === (t.type || "default")
              ? Object(de.a)(
                  Ft ||
                    (Ft = pe([
                      "\n        stroke: currentColor;\n        fill: none;\n        .path-2 {\n          opacity: 0;\n          fill: none;\n\n        }",
                    ]))
                )
              : Object(de.a)(
                  Gt ||
                    (Gt = pe([
                      "\n        stroke: currentColor;\n        fill: none;\n        .path-2 {\n          stroke: currentColor;\n          fill: none;\n        }",
                    ]))
                );
          },
        },
        "bell-full": {
          viewBox: "0 0 16 16",
          shape:
            '<path d="M8.92463374,1.78708136 C10.326202,2.03214939 11.5270583,2.86089597 12.2674576,4.01357591 L2.65785937,13.293457 L1.43819541,13.293457 C1.30779891,13.293457 1.18256131,13.2425165 1.08918684,13.1514976 C0.891446521,12.9587454 0.887402774,12.6421888 1.08015488,12.4444485 L3.05749512,10.4159368 L3.05749512,6.7121582 C3.05749512,4.26953696 4.80902697,2.2360079 7.12463379,1.79902792 L7.12463379,0.887304664 C7.12463379,0.390248402 7.5275775,-0.0126953125 8.02463377,-0.0126953125 C8.52169003,-0.0126953125 8.92463374,0.390248402 8.92463374,0.887304664 L8.92463374,1.78708136 Z M12.8759223,5.37221736 C12.9942553,5.79866279 13.0574951,6.24802527 13.0574951,6.7121582 L13.0574951,10.7198864 L14.5493504,12.4689868 C14.6265333,12.5594786 14.6689308,12.6745202 14.6689308,12.793457 C14.6689308,13.0695994 14.4450732,13.293457 14.1689308,13.293457 L4.6732385,13.293457 L12.8759223,5.37221736 Z M6,14 L10,14 C10,15.1045695 9.1045695,16 8,16 C6.8954305,16 6,15.1045695 6,14 Z"></path>',
        },
        close: {
          viewBox: "0 0 40 40",
          shape:
            '<path d="M13.4,9.4L4.9,0.8C3.8-0.3,2-0.3,0.8,0.8c-1.1,1.1-1.1,2.9,0,4.1l8.5,8.5 c1.1,1.1,2.9,1.1,4.1,0C14.6,12.3,14.6,10.5,13.4,9.4z M39.1,35.1l-8.6-8.5c-1.1-1.1-2.9-1.1-4,0s-1.1,3,0,4.1l8.6,8.5 c1.1,1.1,2.9,1.1,4,0C40.3,38.1,40.3,36.3,39.1,35.1z M35.1,0.8L0.8,35.2c-1.1,1.1-1.1,2.9,0,4s2.9,1.1,4,0L39.2,4.9 c1.1-1.1,1.1-2.9,0-4C38.1-0.3,36.3-0.3,35.1,0.8z"/>',
        },
        "close-circle": {
          viewBox: "0 0 10 10",
          shape:
            '<path d="M 5,1 A 3.9998191,4.0002721 0 0 0 1,4.999547 3.9998191,4.0002721 0 0 0 5,9 3.9998191,4.0002721 0 0 0 9,4.999547 3.9998191,4.0002721 0 0 0 5,1 Z M 2.6572333,2.450017 a 0.21966575,0.21969062 0 0 1 0.1684401,0.0643 L 5,4.688889 7.1743264,2.514317 a 0.21966575,0.21969062 0 0 1 0.3106183,0.310654 l -2.174327,2.174572 2.174327,2.175478 A 0.21966575,0.21969062 0 0 1 7.1743264,7.485675 L 5,5.310196 2.8256734,7.485675 A 0.2199608,0.21998571 0 0 1 2.5141498,7.175021 L 4.6893818,4.999543 2.5141498,2.824971 A 0.21966575,0.21969062 0 0 1 2.6572333,2.450012 Z"/>',
        },
        collection: {
          viewBox: "0 0 40 40",
          shape:
            '\n      <path\n        class="content"\n        d="M20,33.8,11.2,37c-1.9.7-3.3-.4-3.2-2.4l.5-9.2L2.5,18c-1.3-1.5-.7-3.2,1.2-3.7l9.2-2.4L18,4c1.1-1.7,2.8-1.7,3.9,0L27,12l9.2,2.4c1.9.5,2.5,2.2,1.2,3.7l-6,7.4.5,9.2c.1,2-1.3,3.1-3.2,2.4Z"\n        />\n      <path\n        class="content-star"\n        d="M23.6,33.1l-6.4,2.3c-1.9.7-3.3-.4-3.2-2.4l.4-6.6-4.3-5.3c-1.3-1.6-.7-3.2,1.2-3.7l6.6-1.7,3.7-5.8c1.1-1.7,2.9-1.7,3.9,0l3.7,5.8,6.6,1.7c1.9.5,2.5,2.2,1.2,3.7l-4.3,5.3.4,6.6c.1,2-1.3,3.1-3.2,2.4Z"\n        />\n      <path\n        class="border"\n        d="M19.4,32.1a2.44,2.44,0,0,1,1.2,0l8.8,3.2c.7.2.8.1.8-.6l-.5-9.2a2,2,0,0,1,.4-1.3l6-7.4c.4-.5.4-.6-.3-.8l-9.2-2.4a2.1,2.1,0,0,1-1.1-.8l-5.1-8c-.4-.6-.5-.6-.9,0l-5.1,8a1.55,1.55,0,0,1-1.1.8L4.1,16c-.6.2-.7.3-.3.8l6,7.4a2,2,0,0,1,.4,1.3l-.5,9.2c0,.7.1.8.8.6Zm-7.6,6.7a4,4,0,0,1-5.6-4.2l.5-8.5L1.1,19.3a3.93,3.93,0,0,1,2.2-6.6l8.5-2.2L16.5,3a4,4,0,0,1,7,0l4.8,7.4,8.5,2.2A3.94,3.94,0,0,1,39,19.2L33.4,26l.5,8.5a4,4,0,0,1-5.6,4.2l-8.2-3Z"\n        />\n      <path\n        class="highlight"\n        d="M 32.572266 0.9375 A 1.78 1.78 0 0 0 30.900391 2.3007812 L 29.699219 7.0996094 A 1.71 1.71 0 0 0 31 9.3007812 A 1.78 1.78 0 0 0 33.199219 8 L 34.400391 3.1992188 A 1.71 1.71 0 0 0 33.099609 1 A 1.78 1.78 0 0 0 32.572266 0.9375 z M 38.146484 4.6601562 A 1.7902514 1.7902514 0 0 0 36.699219 5.4003906 L 34.900391 7.8007812 A 1.7902514 1.7902514 0 0 0 37.800781 9.9003906 L 39.599609 7.5 A 1.7902514 1.7902514 0 0 0 38.146484 4.6601562 z M 19.882812 13.996094 A 2 2 0 0 0 19.800781 14 C 15.600781 14.6 12.700781 17.4 12.300781 21.5 A 1.811077 1.811077 0 1 0 15.900391 21.900391 C 16.100391 19.500391 17.700781 17.999609 20.300781 17.599609 A 1.81 1.81 0 0 0 21.900391 15.599609 A 2 2 0 0 0 19.882812 13.996094 z "\n        />\n    ',
          style: function (t) {
            return "active" === (t.type || "default")
              ? Object(de.a)(
                  Zt ||
                    (Zt = pe([
                      "\n            .content {\n              fill: #fff;\n            }\n            .content-star {\n              fill: #ffd876;\n            }\n            .border,\n            .highlight {\n              fill: #db8b20;\n            }\n          ",
                    ]))
                )
              : Object(de.a)(
                  qt ||
                    (qt = pe([
                      "\n            .border {\n              fill: #999;\n            }\n            .content,\n            .content-star,\n            .highlight {\n              fill: none;\n            }\n          ",
                    ]))
                );
          },
        },
        comment: {
          viewBox: "0 0 40 40",
          shape:
            '<path d="M14.46,3.33H25.58c7.64,0,13.9,6,13.9,13.33S33.22,30,25.58,30h-.76l-7.28,6.67-2-6.67H14.46C6.81,30,.56,24,.56,16.67S6.81,3.33,14.46,3.33ZM36.7,16.67A10.91,10.91,0,0,0,25.58,6H14.46A10.91,10.91,0,0,0,3.34,16.67,10.91,10.91,0,0,0,14.46,27.33h3.19l.58,1.93.72,2.42,4-3.62.81-.74h1.88A10.91,10.91,0,0,0,36.7,16.67Z"/>',
          style: function (t) {
            var e = t.type || "default";
            return Object(de.a)(
              Kt || (Kt = pe(["\n        fill: ", ";\n      "])),
              { active: "#fb7299", disabled: "#dadada", default: "#999" }[e]
            );
          },
        },
        "danmu-a": {
          viewBox: "0 0 40 40",
          shape:
            '<path d="M32.86,2.84A7.08,7.08,0,0,1,40,10V30a7.08,7.08,0,0,1-7.14,7.15H7.14A7.08,7.08,0,0,1,0,30V10A7.08,7.08,0,0,1,7.14,2.84ZM37.14,30V10A4.21,4.21,0,0,0,32.86,5.7H7.14A4.21,4.21,0,0,0,2.86,10V30A4.21,4.21,0,0,0,7.14,34.3H32.86A4.21,4.21,0,0,0,37.14,30ZM7.86,17.14V14.28h2.86v2.86Zm2.86,8.58V22.86h2.86v2.86Zm5.71,0V22.86H32.14v2.86Zm-2.86-8.58V14.28H30.71v2.86Z"/>',
        },
        dianzan: {
          viewBox: "0 0 40 40",
          shape:
            '\n      <title>点赞</title>\n      <path\n        class="fill"\n        d="m 35.140937,15.170116 h -12.92 l 0.28,-2.92 0.42,-5.1400001 a 1.28,1.28 0 0 0 -1,-1.53 1.12,1.12 0 0 0 -1.25,0.42 l -6.36,8.1700001 -0.83,1.11 h -8.34 a 2,2 0 0 0 -0.83,0.28 2.29,2.29 0 0 0 -1.25,2.08 v 14.88 a 2,2 0 0 0 0.42,1.25 2,2 0 0 0 2.08,1.11 h 23.33 a 2.36,2.36 0 0 0 1.39,-0.41 3.6,3.6 0 0 0 2.08,-2.78 l 4.44,-14.59 2.5,0.56 -2.5,-0.56 a 2.4,2.4 0 0 0 -0.14,-1.39 2.91,2.91 0 0 0 -1.52,-0.54 l 0.28,-2.5 z"\n        />\n      <path\n        class="border"\n        d="M 21.402578,2.9572256 A 3.91,3.91 0 0 0 18.609609,4.1701163 L 11.810781,12.66035 H 5.5607807 a 8.43,8.43 0 0 0 -2.5,0.689454 4.91,4.91 0 0 0 -2.49999999,4.310546 v 14.859375 a 5.66,5.66 0 0 0 0.68945299,2.5 4.52,4.52 0 0 0 4.310547,2.361329 H 28.859609 a 6.37,6.37 0 0 0 6,-4.861329 l 4.451172,-14.71875 A 4.38,4.38 0 0 0 38.750234,14.330272 4.14,4.14 0 0 0 35.420156,12.66035 H 25.000234 l 0.25,-5.5605462 a 3.91,3.91 0 0 0 -1.25,-3.1894531 3.91,3.91 0 0 0 -2.597656,-0.9531251 z m 0.1875,2.5703126 a 1.12,1.12 0 0 1 0.330078,0.052734 1.28,1.28 0 0 1 1,1.5292969 l -0.419922,5.1406259 -0.279297,2.919921 h 12.919922 a 2.91,2.91 0 0 1 1.519531,0.539062 2.4,2.4 0 0 1 0.140625,1.390626 l -4.441406,14.589843 a 3.6,3.6 0 0 1 -2.080078,2.78125 2.36,2.36 0 0 1 -1.388672,0.410157 H 5.5607807 a 2,2 0 0 1 -2.080078,-1.111329 2,2 0 0 1 -0.419922,-1.25 V 17.640819 a 2.29,2.29 0 0 1 1.25,-2.080078 2,2 0 0 1 0.830078,-0.28125 h 5.8398443 v 19.580078 h 2.5 V 15.279491 l 0.830078,-1.109375 6.359375,-8.1699216 a 1.12,1.12 0 0 1 0.919922,-0.4726562 z"\n        />\n    ',
          style: function (t) {
            var e = t.type || "default";
            return Object(de.a)(
              Wt ||
                (Wt = pe([
                  "\n        .fill {\n          fill: ",
                  ";\n        }\n        .border {\n          fill: ",
                  ";\n        }\n      ",
                ])),
              "active-fill" === e ? "#ffd9e5" : "none",
              {
                active: "#fb7299",
                "active-fill": "#fb7299",
                disabled: "#dadada",
                default: "#999",
              }[e]
            );
          },
        },
        emoji: {
          viewBox: "0 0 24 24",
          shape:
            '<path d="M2.4,9.1v7.7a4.4,4.4,0,0,0,4.39,4.4H17.21a4.4,4.4,0,0,0,4.39-4.4V9.1a4.4,4.4,0,0,0-4.39-4.4H6.79A4.4,4.4,0,0,0,2.4,9.1Zm13.51,2.18,2.54-1.93a.59.59,0,0,0,.11-.84.6.6,0,0,0-.84-.12l-3.2,2.43a.6.6,0,0,0-.11.84.57.57,0,0,0,.16.15L17.7,14a.6.6,0,0,0,.83-.15.61.61,0,0,0-.15-.84Zm-7.82,0L5.62,13a.61.61,0,0,0-.15.84A.6.6,0,0,0,6.3,14l3.13-2.17a.57.57,0,0,0,.16-.15.6.6,0,0,0-.11-.84L6.28,8.39a.6.6,0,0,0-.84.12.59.59,0,0,0,.11.84ZM16.56,3.5h.65A5.6,5.6,0,0,1,22.8,9.1v7.7a5.6,5.6,0,0,1-5.59,5.6H6.79A5.6,5.6,0,0,1,1.2,16.8V9.1A5.6,5.6,0,0,1,6.79,3.5h.65l-1.06-2A.7.7,0,1,1,7.62.83L9,3.5h6L16.38.86a.7.7,0,0,1,1.24.66ZM12,18.5a3.52,3.52,0,0,0,3.34-2.45A.82.82,0,0,0,14.58,15H9.42a.81.81,0,0,0-.76,1.06A3.48,3.48,0,0,0,12,18.5Z"/>',
        },
        "emoji-face": {
          viewBox: "0 0 16 16",
          shape:
            '\n      <path d="M8,0.5 C12.1321656,0.5 15.5,3.86783439 15.5,8 C15.5,12.1321656 12.1321656,15.5 8,15.5 C3.86783439,15.5 0.5,12.1321656 0.5,8 C0.5,3.86783439 3.86783439,0.5 8,0.5 Z M8,1.42966262 C4.37937394,1.42966262 1.42966262,4.37937394 1.42966262,8 C1.42966262,11.6206261 4.37937394,14.5703374 8,14.5703374 C11.6206261,14.5703374 14.5703374,11.6206261 14.5703374,8 C14.5703374,4.37937394 11.6206261,1.42966262 8,1.42966262 Z M10.6512739,9.80334395 C10.7468153,9.62420382 10.9737261,9.5406051 11.1528662,9.6361465 C11.3320064,9.7316879 11.4156051,9.95859873 11.3200637,10.1377389 C11.2006369,10.3765924 10.9617834,10.6871019 10.5676752,11.0095541 C9.91082803,11.5230892 9.06289809,11.8335987 8,11.8335987 C6.93710191,11.8335987 6.08917197,11.5230892 5.43232484,11.0095541 C5.03821656,10.6871019 4.79936306,10.3765924 4.67993631,10.1377389 C4.5843949,9.94665605 4.65605096,9.7316879 4.84713376,9.6361465 C5.03821656,9.5406051 5.25318471,9.62420382 5.34872611,9.80334395 C5.36066879,9.83917197 5.40843949,9.89888535 5.46815287,9.98248408 C5.57563694,10.1257962 5.71894904,10.281051 5.89808917,10.4243631 C6.42356688,10.8423567 7.10429936,11.0931529 8,11.0931529 C8.89570064,11.0931529 9.5883758,10.8423567 10.1019108,10.4243631 C10.2691083,10.281051 10.4243631,10.1377389 10.5318471,9.98248408 C10.6035032,9.89888535 10.6393312,9.8272293 10.6512739,9.80334395 Z M10.9097208,5.12181529 C11.4789094,5.12181529 11.9422024,5.58510831 11.9422024,6.15429687 C11.9422024,6.72348544 11.4789094,7.18677846 10.9097208,7.18677846 C10.3405323,7.18677846 9.87723925,6.72348544 9.87723925,6.15429687 C9.87723925,5.58510831 10.3405323,5.12181529 10.9097208,5.12181529 Z M4.90255523,5.12181529 C5.4717438,5.12181529 5.93503682,5.58510831 5.93503682,6.15429687 C5.93503682,6.72348544 5.4717438,7.18677846 4.90255523,7.18677846 C4.33336667,7.18677846 3.87007365,6.72348544 3.87007365,6.15429687 C3.87007365,5.58510831 4.33336667,5.12181529 4.90255523,5.12181529 Z" fill-rule="nonzero"></path>\n    ',
        },
        error: {
          viewBox: "0 0 40 40",
          shape:
            '\n      <path class="content" d="M20,37.33A17.33,17.33,0,1,0,2.67,20,17.33,17.33,0,0,0,20,37.33Z"/>\n      <path class="border" d="M20,40A20,20,0,1,1,40,20,20,20,0,0,1,20,40Zm0-2.67A17.33,17.33,0,1,0,2.67,20,17.33,17.33,0,0,0,20,37.33Z"/>\n      <path class="mark" d="M17.33,10.68a2.67,2.67,0,1,1,5.33,0V21.32a2.67,2.67,0,1,1-5.33,0ZM20,32a2.67,2.67,0,1,1,2.67-2.67A2.67,2.67,0,0,1,20,32Z"/>\n    ',
          style: function () {
            return Object(de.a)(
              Jt ||
                (Jt = pe([
                  "\n      .mark {\n        fill: #ea5c82;\n      }\n      .border {\n        fill: #ff94b1;\n      }\n      .content {\n        fill: #fff;\n      }\n    ",
                ]))
            );
          },
        },
        "gantan-01": {
          viewBox: "0 0 40 40",
          shape:
            '\n      <path d="M20,27.12A2.85,2.85,0,1,0,22.85,30,2.84,2.84,0,0,0,20,27.12Z"/>\n      <path d="M35.73,15.68C32.1,9.16,25.82,1.54,20,1.49S7.91,9,4.27,15.53C2.71,18.32-2.13,27.83,1.08,33c2.57,4.1,11.4,5.56,19,5.56h.41C27.81,38.46,36.54,37,39,32.93,42.06,27.88,37.27,18.45,35.73,15.68Zm.35,15.48c-1.16,1.91-6.91,3.88-15.65,3.94-8.14,0-15-1.61-16.46-4s-.05-8,3.29-13.95c3.92-7,9.39-12.29,12.74-12.29h0c3.32,0,8.79,5.37,12.72,12.43C36,23.27,37.41,28.95,36.07,31.15Z"/>\n      <path d="M20,10a2.84,2.84,0,0,0-2.85,2.85v8.55a2.85,2.85,0,0,0,5.7,0V12.88A2.84,2.84,0,0,0,20,10Z"/>\n    ',
        },
        good: {
          viewBox: "0 0 40 40",
          shape:
            '\n      <path\n        class="highlight"\n        d="M35.1,13.8c-1.3-.3-4.7-.3-9.6-.5,0-1,.3-2.1.3-3.6,0-4.2-3.1-7.8-5.7-7.8a3.5,3.5,0,0,0-3.4,3.4A9.2,9.2,0,0,1,12,13.6a3,3,0,0,0-1,.5h0a3.2,3.2,0,0,0-2.3-.8H5.2a3.5,3.5,0,0,0-3.4,3.4V34.9a3.5,3.5,0,0,0,3.4,3.4H8.6a3.35,3.35,0,0,0,3.1-2.1H12a28.53,28.53,0,0,0,4.7,1,21.11,21.11,0,0,0,6.8,1h6.2a4.86,4.86,0,0,0,4.2-2.1,5.21,5.21,0,0,0,.5-1.3,2.54,2.54,0,0,0,0-2.1,4.27,4.27,0,0,0,1.8-2.9,4.1,4.1,0,0,0,0-3.1,4.58,4.58,0,0,0,1.6-3.1,3,3,0,0,0-.5-2.6,4.9,4.9,0,0,0,1-2.6v-.8a4.3,4.3,0,0,0-3.2-3.8Z"\n        />\n      <path\n        class="content"\n        d="M35.5,17.4c-1.1-.2-4-.2-8.2-.4,0-.9.2-1.8.2-3.1,0-3.5-2.6-6.6-4.9-6.6a3,3,0,0,0-2.9,2.9,7.89,7.89,0,0,1-4,7.1,3.92,3.92,0,0,0-.9.4h0a2.82,2.82,0,0,0-2-.7H9.9A3,3,0,0,0,7,19.9V35.4a3,3,0,0,0,2.9,2.9H13a2.8,2.8,0,0,0,2.6-1.8h.2c.7.2,1.5.4,4,.9a19.06,19.06,0,0,0,5.7.9h5.3a4,4,0,0,0,3.5-1.8,7,7,0,0,0,.4-1.1,2.74,2.74,0,0,0,0-1.8,3.82,3.82,0,0,0,1.5-2.4,3.79,3.79,0,0,0,0-2.6A3.41,3.41,0,0,0,37.5,26a2.78,2.78,0,0,0-.4-2.2,4.31,4.31,0,0,0,.9-2.2V21a3.24,3.24,0,0,0-2.5-3.6Z"\n        />\n      <path\n        class="border"\n        d="M12.7,34.4c.8.2,1.9.5,4.2.9.2,0,.3.1.5.2a21.62,21.62,0,0,0,5.9.8h6.2A2.84,2.84,0,0,0,32,35.2a4.33,4.33,0,0,0,.4-1.1l.1-.2a3.2,3.2,0,0,0-.1-.7,1.77,1.77,0,0,1,.8-2.1,1.34,1.34,0,0,0,.6-.7c.1-.3.2-.5.5-1.3a3.07,3.07,0,0,0,0-1.9,1.76,1.76,0,0,1,.7-2.1c.3-.2.6-.8.8-2a1.19,1.19,0,0,0-.3-1.1,1.82,1.82,0,0,1,0-2c.6-.9.7-1.2.7-1.6v-.8a2.32,2.32,0,0,0-1.7-2.1c-.5-.1-1.4-.1-3.1-.2-.4,0-2.3-.1-2.8-.1-1.2,0-2.3-.1-3.4-.2a1.77,1.77,0,0,1-1.7-1.8,15.26,15.26,0,0,1,.1-1.8,12.13,12.13,0,0,0,.1-1.8c0-3-2.3-6-3.9-6a1.64,1.64,0,0,0-1.6,1.6,10.77,10.77,0,0,1-5.6,9.9h-.1V34.4ZM9.1,36.3V15.1H5.2a1.64,1.64,0,0,0-1.6,1.6V34.9a1.64,1.64,0,0,0,1.6,1.6H8.6A.76.76,0,0,1,9.1,36.3ZM14.8,5.2A5.29,5.29,0,0,1,20,0c3.9,0,7.5,4.7,7.5,9.6a12.1,12.1,0,0,1-.1,1.9,7.57,7.57,0,0,1,1.5.1c.5,0,2.4.1,2.8.1,2,.1,3,.2,3.7.3A5.93,5.93,0,0,1,40,17.7v.8a4.69,4.69,0,0,1-.8,2.7,3.89,3.89,0,0,1,.2,2.8,8.07,8.07,0,0,1-1.3,3.4,5.44,5.44,0,0,1-.3,3.1c-.2.6-.4,1.1-.6,1.7a6,6,0,0,1-.9,1.3,3.4,3.4,0,0,1-.3,2,7.74,7.74,0,0,1-.7,1.6,6.47,6.47,0,0,1-5.7,3H23.4A26.77,26.77,0,0,1,16.1,39c-1.6-.3-2.7-.5-3.6-.7a5.37,5.37,0,0,1-4,1.8H5.2A5.45,5.45,0,0,1,0,34.8V16.6a5.29,5.29,0,0,1,5.2-5.2H8.6a6,6,0,0,1,2.4.5,1,1,0,0,1,.3-.1A7.33,7.33,0,0,0,14.8,5.2ZM6.9,32.7a1.8,1.8,0,1,1,1.8-1.8A1.79,1.79,0,0,1,6.9,32.7Z"\n        />\n      <path\n        class="heart"\n        d="M33.1,8.3a15.23,15.23,0,0,1-1.7-3.2,3.81,3.81,0,0,1-.1-3.6c.5-.9,1.7-2,3-1.3A4.16,4.16,0,0,1,36,2.7a4.34,4.34,0,0,1,3-.1,2.3,2.3,0,0,1,.7,3.2,4.31,4.31,0,0,1-3,2A12.17,12.17,0,0,1,33.1,8.3Z"\n        />\n    ',
          style: function (t) {
            return "active" === t.type
              ? Object(de.a)(
                  Yt ||
                    (Yt = pe([
                      "\n            .highlight {\n              fill: #fff;\n            }\n            .content {\n              fill: #ffd876;\n            }\n            .border,\n            .heart {\n              fill: #db8b20;\n            }\n          ",
                    ]))
                )
              : Object(de.a)(
                  Qt ||
                    (Qt = pe([
                      "\n            .highlight,\n            .content,\n            .heart {\n              fill: none;\n            }\n            .border {\n              fill: #999;\n            }\n          ",
                    ]))
                );
          },
        },
        "group-dynamic": {
          viewBox: "0 0 40 40",
          shape:
            '<path d="M22.83,20,38.42,4.41a2,2,0,1,0-2.83-2.83h0L20,17.17,4.41,1.58A2,2,0,0,0,1.58,4.41L17.17,20,1.58,35.59a2,2,0,0,0,2.83,2.83L20,22.83,35.59,38.42a2,2,0,1,0,2.83-2.83Z"/>',
        },
        "info-circle": {
          viewBox: "0 0 14 14",
          shape:
            '<path d="M7,14 C3.13400675,14 0,10.8659932 0,7 C0,3.13400675 3.13400675,0 7,0 C10.8659932,0 14,3.13400675 14,7 C14,10.8659932 10.8659932,14 7,14 Z M6.25,4.25 C6.25,4.66421356 6.58578644,5 7,5 C7.41421356,5 7.75,4.66421356 7.75,4.25 C7.75,3.83578644 7.41421356,3.5 7,3.5 C6.58578644,3.5 6.25,3.83578644 6.25,4.25 Z M7.375,6 L6.625,6 C6.55625,6 6.5,6.05625 6.5,6.125 L6.5,10.375 C6.5,10.44375 6.55625,10.5 6.625,10.5 L7.375,10.5 C7.44375,10.5 7.5,10.44375 7.5,10.375 L7.5,6.125 C7.5,6.05625 7.44375,6 7.375,6 Z"/>',
        },
        information_warning: {
          viewBox: "0 0 16 16",
          shape:
            '<path d="M8,0 C3.6,0 0,3.6 0,8 C0,12.4 3.6,16 8,16 C12.4,16 16,12.4 16,8 C16,3.6 12.4,0 8,0 Z M8,12.2857143 C7.54285714,12.2857143 7.14285714,11.8857143 7.14285714,11.4285714 C7.14285714,10.9714286 7.54285714,10.5714286 8,10.5714286 C8.45714286,10.5714286 8.85714286,10.9714286 8.85714286,11.4285714 C8.85714286,11.8857143 8.45714286,12.2857143 8,12.2857143 Z M8.74285714,8.97142857 C8.74285714,9.54285714 8.51428571,10 8,10 C7.48571429,10 7.25714286,9.54285714 7.25714286,8.97142857 L6.97142857,4.74285714 C6.97142857,4.17142857 7.42857143,3.71428571 7.94285714,3.71428571 C8.45714286,3.71428571 8.97142857,4.17142857 8.97142857,4.74285714 L8.74285714,8.97142857 Z"/>',
        },
        "jinz-01": {
          viewBox: "0 0 40 40",
          shape:
            '<path d="M20,0A20,20,0,1,0,40,20,20,20,0,0,0,20,0Zm0,3.43A16.49,16.49,0,0,1,30.43,7.14L7.14,30.43A16.56,16.56,0,0,1,20,3.43Zm0,33.14A16.49,16.49,0,0,1,9.57,32.86L32.86,9.57A16.56,16.56,0,0,1,20,36.57Z"/>',
        },
        "left-r-dynamic": {
          viewBox: "0 0 40 40",
          shape:
            '<path d="M30.25,9.9a14.43,14.43,0,0,1,0,20.2,13.93,13.93,0,0,1-19.91,0,2.79,2.79,0,0,0-4,0,2.89,2.89,0,0,0,0,4,19.51,19.51,0,0,0,27.87,0,20.21,20.21,0,0,0,0-28.28,19.5,19.5,0,0,0-26.84-1L5.6,3.07c-1.1-1.12-2.33-.78-2.74.75L.1,14.22c-.41,1.53.5,2.44,2,2l10.24-2.8c1.51-.41,1.84-1.66.74-2.78l-1.7-1.73A13.93,13.93,0,0,1,30.25,9.9Z" />',
        },
        "right-r-dynamic": {
          viewBox: "0 0 40 40",
          shape:
            '<path d="M9.75,9.9a14.43,14.43,0,0,0,0,20.2,13.93,13.93,0,0,0,19.91,0,2.79,2.79,0,0,1,4,0,2.89,2.89,0,0,1,0,4,19.51,19.51,0,0,1-27.87,0,20.21,20.21,0,0,1,0-28.28,19.5,19.5,0,0,1,26.84-1L34.4,3.07c1.1-1.12,2.33-.78,2.74.75l2.76,10.4c.41,1.53-.5,2.44-2,2l-10.24-2.8c-1.51-.41-1.84-1.66-.74-2.78l1.7-1.73A13.93,13.93,0,0,0,9.75,9.9Z" />',
        },
        link: {
          viewBox: "0 0 13 15",
          shape:
            '<path d="M6.096 7.404a.6.6 0 1 1-.849.849 3.1 3.1 0 0 1 0-4.384L7.37 1.747a3.1 3.1 0 0 1 4.384 4.384l-1.85 1.85a.6.6 0 0 1-.849-.848l1.85-1.85a1.9 1.9 0 1 0-2.687-2.687L6.096 4.717a1.9 1.9 0 0 0 0 2.687zm.808.192a.6.6 0 1 1 .849-.849 3.1 3.1 0 0 1 0 4.384L5.63 13.253a3.1 3.1 0 0 1-4.384-4.384l1.85-1.85a.6.6 0 1 1 .849.848l-1.85 1.85a1.9 1.9 0 0 0 2.687 2.687l2.121-2.121a1.9 1.9 0 0 0 0-2.687z" />',
        },
        lottery: {
          viewBox: "0 0 17 16",
          shape:
            '\n      <path d="M14.6,7.9H2.4c-1,0-1.8-0.8-1.8-1.8s0.8-1.8,1.8-1.8h12.2c1,0,1.8,0.8,1.8,1.8S15.6,7.9,14.6,7.9z M2.4,5.3 C2,5.3,1.6,5.7,1.6,6.1S2,6.9,2.4,6.9h12.2c0.4,0,0.8-0.4,0.8-0.8S15,5.3,14.6,5.3H2.4z"/>\n      <path d="M13.5,15.7H3.5C2.7,15.7,2,15,2,14.2V7.1H15v7.2C15,15,14.3,15.7,13.5,15.7z M3,8.1v6.2c0,0.2,0.2,0.4,0.4,0.4h10.1 c0.2,0,0.4-0.2,0.4-0.4V8.1H3z"/>\n      <rect x="8.1" y="4.2" width="1" height="11.5"/>\n      <path d="M8.9,5.2H6.3C5,5.2,3.8,4.1,3.8,2.7S5,0.2,6.3,0.2s2.5,1.1,2.5,2.5V5.2z M6.3,1.2c-0.8,0-1.5,0.7-1.5,1.5 s0.7,1.5,1.5,1.5h1.5V2.7C7.9,1.8,7.2,1.2,6.3,1.2z"/>\n      <path d="M10.6,5.2H8.1V2.7c0-1.4,1.1-2.5,2.5-2.5s2.5,1.1,2.5,2.5S12,5.2,10.6,5.2z M9.1,4.2h1.5c0.8,0,1.5-0.7,1.5-1.5 s-0.7-1.5-1.5-1.5S9.1,1.8,9.1,2.7V4.2z"/>\n    ',
        },
        "more-1": {
          viewBox: "0 0 40 40",
          shape:
            '<path d="M20,8.89a4.44,4.44,0,1,1,4.44-4.44A4.44,4.44,0,0,1,20,8.89Zm0,15.56A4.44,4.44,0,1,1,24.44,20,4.44,4.44,0,0,1,20,24.44ZM20,40a4.44,4.44,0,1,1,4.44-4.44A4.44,4.44,0,0,1,20,40Z"/>',
        },
        pic: {
          viewBox: "0 0 24 24",
          shape:
            '<path d="M7.1,9.5A1.7,1.7,0,1,0,5.4,7.8,1.7,1.7,0,0,0,7.1,9.5Zm14.25,5.37V5.5A2.35,2.35,0,0,0,19,3.15H5A2.35,2.35,0,0,0,2.65,5.5v12a5.07,5.07,0,0,1,3.4-2,6.32,6.32,0,0,1,4.77,1.32c1.43-2.32,3.24-3.64,5.43-3.9A5.92,5.92,0,0,1,21.35,14.87Zm0,1.85c-1.46-2-3.09-2.82-5-2.59s-3.57,1.52-4.88,3.92a.59.59,0,0,1-.93.15A5.28,5.28,0,0,0,6.2,16.71a4.4,4.4,0,0,0-3.36,2.72A2.34,2.34,0,0,0,5,20.85H19a2.35,2.35,0,0,0,2.34-2.35ZM1.35,5.5A3.65,3.65,0,0,1,5,1.85H19A3.64,3.64,0,0,1,22.65,5.5v13A3.65,3.65,0,0,1,19,22.15H5A3.64,3.64,0,0,1,1.35,18.5Z"/>',
        },
        "play-a": {
          viewBox: "0 0 40 40",
          shape:
            '\n      <path d="M32.9,2.9H7.1C3.2,2.8,0,6,0,9.9c0,0,0,0.1,0,0.1v20c0,3.9,3.1,7.1,7,7.1c0,0,0.1,0,0.1,0h25.7 c3.9,0,7.1-3.1,7.1-7c0,0,0-0.1,0-0.1V10c0-3.9-3.1-7.1-7-7.2C33,2.8,32.9,2.8,32.9,2.9z M37.2,30c0,2.3-1.8,4.2-4.1,4.3 c-0.1,0-0.1,0-0.2,0H7.1c-2.3,0-4.2-1.8-4.3-4.1c0-0.1,0-0.1,0-0.2V10C2.8,7.7,4.6,5.8,7,5.7c0.1,0,0.1,0,0.2,0h25.7 c2.3,0,4.2,1.8,4.3,4.1c0,0.1,0,0.1,0,0.2V30z"/>\n      <path d="M27.7,18.7l-11.4-5c-0.7-0.3-1.5,0-1.9,0.7c-0.1,0.2-0.1,0.4-0.1,0.6v10c0,0.8,0.6,1.4,1.4,1.4 c0.2,0,0.4,0,0.6-0.1l11.4-5c0.7-0.3,1-1.1,0.7-1.8C28.3,19.1,28,18.9,27.7,18.7z"/>\n    ',
        },
        radio: {
          viewBox: "0 0 40 40",
          shape:
            '\n      <path class="content" d="M20,0h0A20,20,0,0,1,40,20h0A20,20,0,0,1,20,40h0A20,20,0,0,1,0,20H0A20,20,0,0,1,20,0Z"/>\n      <path class="border" d="M2.5,20A17.5,17.5,0,1,0,20,2.5,17.51,17.51,0,0,0,2.5,20ZM0,20A20,20,0,1,1,20,40,20,20,0,0,1,0,20Z"/>\n      <path class="dot" d="M20,10h0A10,10,0,0,1,30,20h0A10,10,0,0,1,20,30h0A10,10,0,0,1,10,20h0A10,10,0,0,1,20,10Z"/>\n    ',
          style: function (t) {
            return "selected" === t.type
              ? Object(de.a)(
                  Xt ||
                    (Xt = pe([
                      "\n            .border,\n            .dot {\n              fill: #23ade5;\n            }\n            .content {\n              fill: none;\n            }\n          ",
                    ]))
                )
              : Object(de.a)(
                  te ||
                    (te = pe([
                      "\n            .border {\n              fill: #d0d7dd;\n            }\n            .content {\n              fill: #e3e8ec;\n              fill-opacity: 0.3;\n            }\n            .dot {\n              fill: none;\n            }\n          ",
                    ]))
                );
          },
        },
        renzheng: {
          viewBox: "0 0 40 40",
          shape:
            '\n      <path class="border" d="M20,39.17A19.17,19.17,0,1,1,39.17,20,19.19,19.19,0,0,1,20,39.17Z"/>\n      <path class="content" d="M20,3.33A16.67,16.67,0,1,0,36.67,20,16.67,16.67,0,0,0,20,3.33ZM16.55,32.77l1.68-11.08-9.48-.1,14-14.36L21.16,18.37l10.09.14Z"/>\n      ',
          style: function (t) {
            var e = t.type || "default";
            return Object(de.a)(
              ee ||
                (ee = pe([
                  "\n        .border {\n          fill: #fff;\n        }\n        .content {\n          fill: ",
                  ";\n        }\n      ",
                ])),
              { yellow: "#ffba51", blue: "#4ac7ff", default: "#4ac7ff" }[e]
            );
          },
        },
        reply: {
          viewBox: "0 0 40 40",
          shape:
            '<path d="M14.46,3.33H25.58c7.64,0,13.9,6,13.9,13.33S33.22,30,25.58,30h-.76l-7.28,6.67-2-6.67H14.46C6.81,30,.56,24,.56,16.67S6.81,3.33,14.46,3.33ZM36.7,16.67A10.91,10.91,0,0,0,25.58,6H14.46A10.91,10.91,0,0,0,3.34,16.67,10.91,10.91,0,0,0,14.46,27.33h3.19l.58,1.93.72,2.42,4-3.62.81-.74h1.88A10.91,10.91,0,0,0,36.7,16.67Z"/>',
        },
        routine_processing: {
          viewBox: "0 0 15 15",
          shape:
            '\n      <path d="M7.5,15C3.4,15,0,11.6,0,7.5C0,3.4,3.4,0,7.5,0C11.6,0,15,3.4,15,7.5C15,11.6,11.6,15,7.5,15z"/>\n\t\t\t<path d="M11.6,7.1C11.6,7.1,11.6,7.1,11.6,7.1c0.1,0.1,0.2,0.2,0.2,0.4c0,0.1-0.1,0.2-0.1,0.3c0,0,0,0,0,0 c0,0-3.5,3-3.5,3c-0.2,0.2-0.5,0.2-0.7,0c-0.2-0.2-0.2-0.5,0-0.7L9.9,8H3.7C3.5,8,3.2,7.8,3.2,7.5C3.2,7.2,3.5,7,3.7,7h6.2 L7.4,4.8c-0.2-0.2-0.2-0.5,0-0.7C7.6,4,7.9,4,8.1,4.1L11.6,7.1z"/>\n      ',
        },
        search: {
          viewBox: "0 0 60 60",
          shape:
            '\n      <path d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23\n        s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92\n        c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17\n        s-17-7.626-17-17S14.61,6,23.984,6z"/>\n    ',
        },
        "sq-dynamic": {
          viewBox: "0 0 40 40",
          shape:
            '\n      <path d="M20,35A15,15,0,1,0,5,20,15,15,0,0,0,20,35Zm0,5A20,20,0,1,1,40,20,20,20,0,0,1,20,40Z"/>\n      <path d="M16.67,16.67h6.67A3.33,3.33,0,0,1,26.67,20h0a3.33,3.33,0,0,1-3.33,3.33H16.67A3.33,3.33,0,0,1,13.33,20h0A3.33,3.33,0,0,1,16.67,16.67Z"/>\n      ',
        },
        "ss-dynamic": {
          viewBox: "0 0 40 40",
          shape:
            '<path d="M36.24,40a3.73,3.73,0,0,1-2.65-1.1L27,32.27A17.63,17.63,0,1,1,32.27,27l6.62,6.63A3.76,3.76,0,0,1,36.25,40Zm-.64-3.11h0ZM17.53,4.67a12.86,12.86,0,1,0,6.91,23.67l2.37-1.52,1.53-2.38A12.82,12.82,0,0,0,17.53,4.67Z"/>',
        },
        star: {
          viewBox: "0 0 15 15",
          shape:
            '<path d="M 13.59873,5.1964432 11.001512,4.825412 C 10.352207,4.6398964 9.7956593,4.2688651 9.5173863,3.6195605 L 8.4042926,1.2078575 c -0.3710312,-0.83482022 -1.4841249,-0.83482022 -1.855156,0 L 5.4360429,3.6195605 C 5.1577694,4.2688651 4.6012227,4.6398964 3.951918,4.825412 L 1.3546995,5.1964432 C 0.61263702,5.289201 0.2416058,6.3095368 0.79815263,6.8660836 l 1.94791387,1.947914 c 0.463789,0.463789 0.6493046,1.1130935 0.5565469,1.7623984 l -0.4637891,2.782733 c -0.1855156,0.834821 0.7420624,1.484126 1.4841249,1.020337 l 2.2261874,-1.205852 c 0.5565467,-0.371032 1.2986092,-0.371032 1.9479139,0 l 2.2261875,1.205852 c 0.742062,0.37103 1.576883,-0.185516 1.484124,-1.020337 l -0.463788,-2.782733 c -0.09276,-0.6493049 0.09276,-1.2986094 0.556547,-1.7623984 l 1.947914,-1.947914 C 14.711823,6.3095368 14.340796,5.289201 13.59873,5.1964432"/>',
          style: function (t) {
            return "empty" === t.type
              ? Object(de.a)(
                  ne ||
                    (ne = pe([
                      "\n            fill: none;\n            stroke: #cccccc;\n          ",
                    ]))
                )
              : Object(de.a)(
                  ie ||
                    (ie = pe([
                      "\n            stroke: #ffa726;\n            fill: #ffa726;\n          ",
                    ]))
                );
          },
        },
        timer: {
          viewBox: "0 0 19.4 21.7",
          shape:
            '<path\n        d="M 7.3359375 -0.001953125 A 0.65 0.65 0 0 0 6.6992188 0.55078125 L 6.6992188 0.75 A 0.65 0.65 0 0 0 7.4003906 1.3007812 L 9.0507812 1.3007812 L 9.0507812 2.3300781 A 9.7 9.7 0 0 0 9.6992188 21.699219 A 9.7 9.7 0 0 0 19.400391 12 A 9.7 9.7 0 0 0 10.580078 2.3515625 L 10.580078 1.3007812 L 12 1.3007812 A 0.65 0.65 0 0 0 12.699219 0.75 L 12.699219 0.55078125 A 0.65 0.65 0 0 0 12 0 L 7.4003906 0 A 0.65 0.65 0 0 0 7.3359375 -0.001953125 z M 9.6992188 3.6992188 A 8.32 8.32 0 0 1 18 12 A 8.3 8.3 0 1 1 9.6992188 3.6992188 z M 9.6992188 6.1796875 A 0.65 0.65 0 0 0 9.0507812 6.8300781 L 9.0507812 12.089844 A 0.66 0.66 0 0 0 9 12.330078 L 9 12.560547 A 0.66 0.66 0 0 0 9.6992188 13.210938 L 14.050781 13.210938 A 0.59 0.59 0 0 0 14.619141 12.560547 L 14.650391 12.330078 A 0.66 0.66 0 0 0 14 11.679688 L 10.580078 11.679688 L 10.580078 6.8203125 A 0.65 0.65 0 0 0 9.9199219 6.1796875 L 9.6992188 6.1796875 z "\n      />',
        },
        top: {
          viewBox: "0 0 13 13",
          shape:
            '\n      <path d="M1.39285714,0.464285714 L11.6071429,0.464285714 C11.8635608,0.464285714 12.0714286,0.672153509 12.0714286,0.928571429 C12.0714286,1.18498935 11.8635608,1.39285714 11.6071429,1.39285714 L1.39285714,1.39285714 C1.13643922,1.39285714 0.928571429,1.18498935 0.928571429,0.928571429 C0.928571429,0.672153509 1.13643922,0.464285714 1.39285714,0.464285714 Z M6.96428571,3.71428571 L6.96428571,12.5357143 C6.96428571,12.7921322 6.75641792,13 6.5,13 C6.24358208,13 6.03571429,12.7921322 6.03571429,12.5357143 L6.03571429,3.71428571 C6.03571429,3.45786779 6.24358208,3.25 6.5,3.25 C6.75641792,3.25 6.96428571,3.45786779 6.96428571,3.71428571 Z"/>\n      <path d="M6.54124471,4.12719916 L0.885448102,9.78299577 C0.704133252,9.96431062 0.410163797,9.96431062 0.228848948,9.78299577 C0.047534098,9.60168092 0.047534098,9.30771147 0.228848948,9.12639662 L6.13824133,3.21700423 C6.24796441,3.10728116 6.39894263,3.06395724 6.54124471,3.08703248 C6.6835468,3.06395724 6.83452502,3.10728116 6.94424809,3.21700423 L12.8536405,9.12639662 C13.0349553,9.30771147 13.0349553,9.60168092 12.8536405,9.78299577 C12.6723256,9.96431062 12.3783562,9.96431062 12.1970413,9.78299577 L6.54124471,4.12719916 Z"/>\n      ',
        },
        topic: {
          viewBox: "0 0 24 24",
          shape:
            '<path d="M14.2236009,16.5726304 L7.75711178,16.5726304 L6.55053795,22.2491139 C6.49312472,22.5192219 6.2276163,22.6916451 5.9575083,22.6342319 L5.4684345,22.530276 C5.1983265,22.4728628 5.02590332,22.2073544 5.08331655,21.9372464 L6.22360089,16.5726304 L1.5,16.5726304 C1.22385763,16.5726304 1,16.3487727 1,16.0726304 L1,15.5726304 C1,15.296488 1.22385763,15.0726304 1.5,15.0726304 L6.54243573,15.0726304 L7.92405338,8.57263036 L3.5,8.57263036 C3.22385763,8.57263036 3,8.34877274 3,8.07263036 L3,7.57263036 C3,7.29648799 3.22385763,7.07263036 3.5,7.07263036 L8.24288822,7.07263036 L9.44946205,1.39614679 C9.50687528,1.12603879 9.7723837,0.953615605 10.0424917,1.01102883 L10.5315655,1.11498468 C10.8016735,1.17239791 10.9740967,1.43790632 10.9166835,1.70801432 L9.77639911,7.07263036 L16.2428882,7.07263036 L17.4494621,1.39614679 C17.5068753,1.12603879 17.7723837,0.953615605 18.0424917,1.01102883 L18.5315655,1.11498468 C18.8016735,1.17239791 18.9740967,1.43790632 18.9166835,1.70801432 L17.7763991,7.07263036 L22.5,7.07263036 C22.7761424,7.07263036 23,7.29648799 23,7.57263036 L23,8.07263036 C23,8.34877274 22.7761424,8.57263036 22.5,8.57263036 L17.4575643,8.57263036 L16.0759466,15.0726304 L20.5,15.0726304 C20.7761424,15.0726304 21,15.296488 21,15.5726304 L21,16.0726304 C21,16.3487727 20.7761424,16.5726304 20.5,16.5726304 L15.7571118,16.5726304 L14.5505379,22.2491139 C14.4931247,22.5192219 14.2276163,22.6916451 13.9575083,22.6342319 L13.4684345,22.530276 C13.1983265,22.4728628 13.0259033,22.2073544 13.0833165,21.9372464 L14.2236009,16.5726304 Z M14.5424357,15.0726304 L15.9240534,8.57263036 L9.45756427,8.57263036 L8.07594662,15.0726304 L14.5424357,15.0726304 Z"/>',
        },
        "topic-add": {
          viewBox: "0 0 13 13",
          shape:
            '<path d="M6,6V.5a.5.5,0,0,1,1,0V6h5.5a.5.5,0,0,1,0,1H7v5.5a.5.5,0,0,1-1,0V7H.5a.5.5,0,0,1,0-1Z"/>',
        },
        "topic-cancel": {
          viewBox: "0 0 13 13",
          shape:
            '<path d="M7.17,6.5l4.69,4.69a.47.47,0,0,1-.67.67L6.5,7.17,1.81,11.86a.47.47,0,0,1-.67-.67L5.83,6.5,1.14,1.81a.47.47,0,0,1,.67-.67L6.5,5.83l4.69-4.69a.47.47,0,0,1,.67.67Z"/>',
        },
        trash: {
          viewBox: "0 0 16 16",
          shape:
            '<g fill-rule="nonzero">\n              <rect id="Rectangle" opacity="0" x="0" y="0" width="16" height="16"></rect>\n              <path d="M12.5146059,5.54590692 L12.5146059,12.5459069 C12.5146059,13.6504764 11.6191754,14.5459069 10.5146059,14.5459069 L5.51460589,14.5459069 C4.41003639,14.5459069 3.51460589,13.6504764 3.51460589,12.5459069 L3.51460589,5.54590692 L3.51460589,5.54590692" stroke-linecap="round" stroke-linejoin="round"></path>\n              <line x1="6" y1="1.85714286" x2="9.5" y2="1.85714286" id="Line" stroke-linecap="round" stroke-linejoin="round"></line>\n              <line x1="1.88309006" y1="3.6900534" x2="14.0338156" y2="3.6900534" stroke-linecap="round" stroke-linejoin="round"></line>\n              <line x1="5.71428571" y1="7.63739248" x2="5.71428571" y2="11.230495" stroke-linecap="round" stroke-linejoin="round"></line>\n              <line x1="8.01783774" y1="7.62825381" x2="8.01783774" y2="11.2213564" stroke-linecap="round" stroke-linejoin="round"></line>\n              <line x1="10.3396003" y1="7.63344062" x2="10.3396003" y2="11.2265432"  stroke-linecap="round" stroke-linejoin="round"></line>\n            </g>',
          style: function () {
            return Object(de.a)(
              se ||
                (se = pe([
                  "\n      stroke: currentColor;\n      fill: none;\n    ",
                ]))
            );
          },
        },
        transmit: {
          viewBox: "0 0 40 40",
          shape:
            '\n      <path d="M31.35,36.15H8.25A7.17,7.17,0,0,1,1,29.08V10.58A7.18,7.18,0,0,1,8.25,3.5h13v3h-13A4.17,4.17,0,0,0,4,10.58v18.5a4.17,4.17,0,0,0,4.25,4.08H31.35a4.17,4.17,0,0,0,4.25-4.07l0-8.89h3l0,8.9A7.17,7.17,0,0,1,31.35,36.15Z"/>\n      <path d="M15,23.64l-2.78-1.13.56-1.39C14.82,16.07,20.57,11,27.59,11h4L25.47,5l2.09-2.15L38.95,14H27.59c-5.63,0-10.4,4.27-12,8.3Z"/>\n    ',
        },
        "triangle-left": {
          viewBox: "0 0 40 40",
          shape:
            '<path d="M32.2,1.3c0-1.1-1.3-1.7-2.1-1L8.2,19.7c-0.6,0.5-0.6,1.5,0,2L30,39.7c0.8,0.7,2.1,0.1,2.1-1 L32.2,1.3L32.2,1.3z M29.7,35.9L11,20.5L29.7,4.2V35.9z"/>',
        },
        "triangle-right": {
          viewBox: "0 0 40 40",
          shape:
            '<path  d="M29.1,20.6L10.4,36V4.2L29.1,20.6z M7.8,1.3v37.4c0,1.1,1.3,1.7,2.1,1l21.9-18.1 c0.6-0.5,0.6-1.4,0-2L10,0.3C9.2-0.4,7.8,0.2,7.8,1.3z"/>',
        },
        up: {
          viewBox: "0 0 12 10",
          shape:
            '\n    <path d="M11.1428571,7.91666667 C11.1428571,8.625 10.5857143,9.16666667 9.85714286,9.16666667 L2.14285714,9.16666667 C1.41428571,9.16666667 0.857142857,8.625 0.857142857,7.91666667 L0.857142857,2.08333333 C0.857142857,1.375 1.41428571,0.833333333 2.14285714,0.833333333 L9.85714286,0.833333333 C10.5857143,0.833333333 11.1428571,1.375 11.1428571,2.08333333 L11.1428571,7.91666667 Z M9.85714286,0 L2.14285714,0 C0.942857143,0 0,0.916666667 0,2.08333333 L0,7.91666667 C0,9.08333333 0.942857143,10 2.14285714,10 L9.85714286,10 C11.0571429,10 12,9.08333333 12,7.91666667 L12,2.08333333 C12,0.916666667 11.0571429,0 9.85714286,0 L9.85714286,0 Z"></path>\n    <path d="M8.48000004,4.91666667 L7.2371429,4.91666667 L7.2371429,3.33333333 L8.48000004,3.33333333 C8.90857147,3.33333333 9.29428576,3.5 9.29428576,4.125 C9.29428576,4.70833333 8.86571433,4.91666667 8.48000004,4.91666667 L8.48000004,4.91666667 Z M8.52285719,2.58333333 L6.42285719,2.58333333 L6.42285719,7.5 L7.2371429,7.5 L7.2371429,5.58333333 L8.52285719,5.58333333 C9.89428576,5.58333333 10.1514286,4.70833333 10.1514286,4.08333333 C10.1514286,3.5 9.89428576,2.58333333 8.52285719,2.58333333 L8.52285719,2.58333333 Z M4.92285714,5.41666667 C4.92285714,6.08333333 4.88,6.83333333 3.80857142,6.83333333 C2.73714285,6.83333333 2.69428571,6.08333333 2.69428571,5.41666667 L2.69428571,2.58333333 L1.88,2.58333333 L1.88,5.75 C1.88,7 2.56571428,7.58333333 3.76571428,7.58333333 C4.96571428,7.58333333 5.73714285,6.95833333 5.73714285,5.70833333 L5.73714285,2.58333333 L4.92285714,2.58333333 L4.92285714,5.41666667 Z"></path>\n    ',
        },
        vote: {
          viewBox: "0 0 12 13",
          shape:
            '\n      <path d="M1.4,12C0.6,12,0,11.4,0,10.6V4.3c0-0.8,0.6-1.4,1.4-1.4s1.4,0.6,1.4,1.4v6.3C2.9,11.4,2.2,12,1.4,12z M1.4,4.1 c-0.1,0-0.2,0.1-0.2,0.2v6.3c0,0.3,0.5,0.3,0.5,0V4.3C1.7,4.2,1.6,4.1,1.4,4.1z"/>\n      <path d="M6,12c-0.8,0-1.4-0.6-1.4-1.4V1.4C4.6,0.6,5.2,0,6,0s1.4,0.6,1.4,1.4v9.1C7.4,11.4,6.8,12,6,12z M6,1.2 c-0.1,0-0.2,0.1-0.2,0.2v9.1c0,0.3,0.5,0.3,0.5,0V1.4C6.2,1.3,6.1,1.2,6,1.2z"/>\n      <path d="M10.6,12c-0.8,0-1.4-0.6-1.4-1.4V7.7c0-0.8,0.6-1.4,1.4-1.4c0.8,0,1.4,0.6,1.4,1.4v2.9C12,11.4,11.4,12,10.6,12z M10.6,7.5c-0.1,0-0.2,0.1-0.2,0.2v2.9c0,0.3,0.5,0.3,0.5,0V7.7C10.8,7.6,10.7,7.5,10.6,7.5z"/>\n      ',
        },
        "vote-create": {
          viewBox: "0 0 22 22",
          shape:
            '\n      <rect x="0.7" y="5.7020752" width="3.6" height="14.5979248" rx="1.8"></rect>\n      <rect x="8.7" y="0.702075195" width="3.6" height="19.6" rx="1.8"></rect>\n      <rect x="16.7" y="11.7020752" width="3.6" height="8.6" rx="1.8"></rect>\n      ',
          style: function () {
            return Object(de.a)(
              oe ||
                (oe = pe([
                  "\n      stroke: currentColor;\n      stroke-width: 1.4 !important;\n      fill: none;\n    ",
                ]))
            );
          },
        },
        before: {
          viewBox: "0 0 492 492",
          shape:
            '\n      <path d="M198.608,246.104L382.664,62.04c5.068-5.056,7.856-11.816,7.856-19.024c0-7.212-2.788-13.968-7.856-19.032l-16.128-16.12\n        C361.476,2.792,354.712,0,347.504,0s-13.964,2.792-19.028,7.864L109.328,227.008c-5.084,5.08-7.868,11.868-7.848,19.084\n        c-0.02,7.248,2.76,14.028,7.848,19.112l218.944,218.932c5.064,5.072,11.82,7.864,19.032,7.864c7.208,0,13.964-2.792,19.032-7.864\n        l16.124-16.12c10.492-10.492,10.492-27.572,0-38.06L198.608,246.104z"/>\n    ',
        },
        next: {
          viewBox: "0 0 492 492",
          shape:
            '\n      <path d="M382.678,226.804L163.73,7.86C158.666,2.792,151.906,0,144.698,0s-13.968,2.792-19.032,7.86l-16.124,16.12\n        c-10.492,10.504-10.492,27.576,0,38.064L293.398,245.9l-184.06,184.06c-5.064,5.068-7.86,11.824-7.86,19.028\n        c0,7.212,2.796,13.968,7.86,19.04l16.124,16.116c5.068,5.068,11.824,7.86,19.032,7.86s13.968-2.792,19.032-7.86L382.678,265\n        c5.076-5.084,7.864-11.872,7.848-19.088C390.542,238.668,387.754,231.884,382.678,226.804z"/>\n    ',
        },
        windmill: {
          viewBox: "0 0 24 24",
          shape:
            '\n      <path d="M12,1 C12.6032725,1 13.0923215,1.49015271 13.0923215,2.09478673 L13.0919415,7.34448672 C14.1405747,6.48008747 15.4863884,5.96064782 16.9538392,5.96064782 C20.299965,5.96064782 23.0136451,8.66144851 23.0136451,11.994424 C23.0136451,12.5976965 22.5234924,13.0867455 21.9188584,13.0867455 L21.9188584,13.0867455 L16.6490923,13.0860736 C17.5214136,14.1341909 18.0461608,15.4820004 18.0461608,16.9526066 C18.0461608,20.2931041 15.3385912,23 12,23 C11.3967275,23 10.9076785,22.5098473 10.9076785,21.9052133 L10.9076785,21.9052133 L10.9080585,16.6555133 C9.85942532,17.5199125 8.51361156,18.0393522 7.04616077,18.0393522 C3.70003499,18.0393522 0.986354862,15.3385515 0.986354862,12.005576 C0.986354862,11.4023035 1.47650758,10.9132545 2.08114159,10.9132545 L7.35090774,10.9139264 C6.47858642,9.86580905 5.95383923,8.51799956 5.95383923,7.04739336 C5.95383923,3.70689593 8.66140884,1 12,1 Z M13.0923215,13.2512833 L13.0923215,20.65393 C14.6933378,20.1831243 15.8615177,18.7037893 15.8615177,16.9526066 C15.8615177,15.2014239 14.6933378,13.7220889 13.0923215,13.2512833 L13.0923215,13.2512833 Z M10.7583198,13.0978976 L3.33400176,13.0978976 C3.80733493,14.6913696 5.28978206,15.8547091 7.04616077,15.8547091 C8.80253948,15.8547091 10.2849866,14.6913696 10.7583198,13.0978976 Z M16.9538392,8.14529092 C15.1974605,8.14529092 13.7150134,9.30863041 13.2416802,10.9021024 L13.2416802,10.9021024 L20.6659982,10.9021024 C20.1926651,9.30863041 18.7102179,8.14529092 16.9538392,8.14529092 Z M10.9076785,3.34607 C9.30666224,3.81687566 8.13848232,5.29621066 8.13848232,7.04739336 C8.13848232,8.79857607 9.30666224,10.2779111 10.9076785,10.7487167 L10.9076785,3.34607 Z" id="合并形状" fill-rule="nonzero"></path>\n    ',
        },
      };
    function he(t, e) {
      return (
        e || (e = t.slice(0)),
        Object.freeze(
          Object.defineProperties(t, { raw: { value: Object.freeze(e) } })
        )
      );
    }
    var ge =
        Object({ NODE_ENV: "production", BASE_URL: "/" }).HASH_SUFFIX || "0",
      ve = {
        name: "SVGIcon",
        props: {
          name: String,
          type: String,
          size: { type: String, default: "" },
          singleInstance: { type: Boolean, default: !1 },
          custom: Object,
        },
        computed: {
          id: function () {
            return "".concat(this.name, "-").concat(ge);
          },
          icon: function () {
            return this.custom ? this.custom : fe[this.name];
          },
        },
        created: function () {
          this.addDefs();
        },
        updated: function () {
          this.addDefs();
        },
        render: function () {
          var t = arguments[0],
            e = this.icon;
          if (!e) return t("svg", ue()([{}, this.$props]));
          var n = Object(de.a)(
              me ||
                (me = he([
                  "\n      fill: currentColor;\n      width: ",
                  ";\n      height: ",
                  ";\n    ",
                ])),
              this.size || "1em",
              this.size || "1em"
            ),
            i = e.style ? Object(de.b)(n, e.style(this.$props)) : n;
          return this.singleInstance
            ? t("svg", ue()([{ class: i }, this.$props]), [
                t("use", { attrs: { href: "#".concat(this.id) } }),
              ])
            : t(
                "svg",
                ue()([
                  { class: i },
                  this.$props,
                  {
                    attrs: { viewBox: e.viewBox },
                    domProps: { innerHTML: e.shape },
                  },
                ])
              );
        },
        methods: {
          addDefs: function () {
            if (this.singleInstance) {
              var t = document.getElementById(this.id);
              if (!t) {
                var e = document.getElementById("bp-svg-icons");
                e ||
                  (((e = document.createElementNS(
                    "http://www.w3.org/2000/svg",
                    "svg"
                  )).style.display = "none"),
                  e.setAttribute("aria-hidden", !0),
                  document.body.insertBefore(e, document.body.firstChild)),
                  ((t = document.createElementNS(
                    "http://www.w3.org/2000/svg",
                    "symbol"
                  )).id = this.id),
                  this.icon &&
                    this.icon.viewBox &&
                    t.setAttribute("viewBox", this.icon && this.icon.viewBox),
                  (t.innerHTML = this.icon.shape),
                  e.appendChild(t);
              }
            }
          },
        },
      };
    function be(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function ye(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? be(Object(n), !0).forEach(function (e) {
              _e(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : be(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function _e(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var we = {
        reply: "reply_me",
        at: "at_me",
        love: "praise_me",
        system: "notify_me",
        whisper: "message",
      },
      Ce = {
        components: { SVGIcon: ve },
        data: function () {
          return {
            notifyCounts: {
              at_me: 0,
              reply_me: 0,
              praise_me: 0,
              notify_me: 0,
              message: 0,
            },
            settingIcon: {
              viewBox: "2 3 16 15",
              shape:
                '<path d="M9.28219976,16.9928072 C9.00196705,16.9830213 8.62828086,16.9699719 8.35130844,16.8668237 C7.88746873,16.7570586 7.61700372,16.4670393 7.44318203,16.0868457 C7.27595707,15.5198389 7.00875552,15.1363662 6.55144084,14.8397489 C6.09417835,14.5432065 5.63033546,14.4335326 5.06659151,14.5073223 C4.68964249,14.5877082 4.22580215,14.4779613 3.95860061,14.0944886 C3.60124172,13.6144096 3.24712805,13.0408765 3.08316847,12.3803615 C2.90934424,12.0002409 3.01909171,11.5363823 3.30911036,11.2659356 C3.69910878,10.8118636 3.90228894,10.3513408 3.92186337,9.79080239 C3.94143589,9.23031872 3.77087767,8.75667164 3.41350053,8.27659204 C3.1430544,7.98655515 3.06593077,7.51618914 3.26585065,7.14902862 C3.56567348,6.59834978 3.86547872,6.04765205 4.25872173,5.50014418 C4.55202145,5.13626282 5.02238491,5.05921217 5.39281081,5.16562383 C5.95003165,5.27863158 6.42039765,5.20150795 6.89723266,4.93756668 C7.37412178,4.67364558 7.76085674,4.31302704 7.87379151,3.75580366 C8.07371138,3.38864313 8.3670111,3.02476177 8.83411428,3.04107337 C9.491296,2.97047349 10.0517797,2.99004602 10.7024357,3.1063166 C11.1695389,3.1226282 11.4367228,3.50608208 11.6104892,3.88629202 C11.7777871,4.45330134 12.044971,4.83675523 12.5022335,5.13329763 C12.9595684,5.42986082 13.4234087,5.53960766 13.9871552,5.46574495 C14.3640834,5.38543147 14.8278716,5.49510341 15.0951285,5.87855984 C15.4524295,6.35872812 15.8065249,6.93226056 15.9705606,7.59268687 C16.144327,7.9728968 16.0345801,8.43673714 15.7412798,8.80063675 C15.3545656,9.16118294 15.1514559,9.62178124 15.1318834,10.1822649 C15.1123089,10.7428033 15.2827967,11.2163749 15.6401524,11.696545 C15.9106174,11.9865643 15.9877404,12.4569486 15.7846156,12.917455 C15.4848079,13.4682257 15.1849296,14.0189209 14.7917446,14.5663395 C14.5016523,14.8368019 14.031341,14.9139275 13.6609359,14.8074435 C13.1970748,14.697769 12.6333491,14.7715593 12.1564417,15.0354798 C11.6796048,15.2994758 11.2896272,15.7534755 11.1798797,16.2173341 C11.0733957,16.5877392 10.6867331,16.9483785 10.2196299,16.9320669 C9.93611866,17.0156426 9.56245072,17.0025938 9.28219976,16.9928072 Z M9.5264564,12.7907616 C11.0220027,12.7907616 12.2372185,11.575637 12.2372185,9.9865255 C12.2372185,8.39748699 11.0220027,7.1823442 9.5264564,7.1823442 C8.03083705,7.1823442 6.81571251,8.39748699 6.81571251,9.9865255 C6.81571251,11.575637 8.03083705,12.7907616 9.5264564,12.7907616 Z"></path>',
            },
            autoReplyIcon: {
              viewBox: "-2 -3 16 16",
              shape:
                '<path d="M9.18421053,3.55271368e-15 C10.7393281,3.55271368e-15 12,1.26067189 12,2.81578947 L12,6.28947326 C12,7.84459084 10.7393281,9.10526273 9.18421053,9.10526273 L6.32478503,9.10526273 L3.04386935,10.7870542 C2.61391569,11.0074476 2.15242337,10.5503815 2.36866309,10.1183239 L2.87568817,9.10526273 L2.64425943,9.10012387 C1.1690181,9.01147572 0,7.7869939 0,6.28947326 L0,2.81578947 C0,1.26067189 1.26067189,3.55271368e-15 2.81578947,3.55271368e-15 L9.18421053,3.55271368e-15 Z M5.5,5.5 L2.5,5.5 C2.22385763,5.5 2,5.72385763 2,6 C2,6.27614237 2.22385763,6.5 2.5,6.5 L2.5,6.5 L5.5,6.5 C5.77614237,6.5 6,6.27614237 6,6 C6,5.72385763 5.77614237,5.5 5.5,5.5 L5.5,5.5 Z M9.5,2.5 L2.5,2.5 C2.22385763,2.5 2,2.72385763 2,3 C2,3.27614237 2.22385763,3.5 2.5,3.5 L2.5,3.5 L9.5,3.5 C9.77614237,3.5 10,3.27614237 10,3 C10,2.72385763 9.77614237,2.5 9.5,2.5 L9.5,2.5 Z"></path>',
            },
            timer: null,
          };
        },
        computed: ye(
          ye(
            {},
            Object(L.c)(["uid", "currentPage", "notifyConfig", "sysSetting"])
          ),
          {},
          {
            showAutoReply: function () {
              return 1 === this.sysSetting.is_auto_reply_available;
            },
            atMe: function () {
              return "at" === this.currentPage ? 0 : this.notifyCount.atMe;
            },
            notifyClass: function () {
              switch (this.notifyConfig.msg_notify) {
                case 1:
                  return ["notify-number"];
                case 2:
                  return ["notify-dot"];
                case 3:
                  return ["notify-none"];
                default:
                  return [];
              }
            },
          }
        ),
        watch: {
          currentPage: function (t) {
            "whisper" !== t &&
              ((this.notifyCounts[we[t]] = 0), this.updateNotifyCounts());
          },
        },
        mounted: function () {
          var t = this;
          (this.createdAt = Date.now()),
            this.getStorage(),
            window.addEventListener("storage", function (e) {
              if (e.key === "imNotifyCounts".concat(t.uid)) {
                var n = JSON.parse(e.newValue);
                Date.now() - t.createdAt < 15e3 &&
                  "whisper" !== t.currentPage &&
                  0 !== n[we[t.currentPage]] &&
                  ((n[we[t.currentPage]] = 0), t.updateNotifyCounts()),
                  (t.notifyCounts = n);
              }
            }),
            ce.$on("imNotifyCountsUpdate", function (e) {
              t.notifyCounts = e;
            });
        },
        beforeDestroy: function () {
          clearTimeout(this.timer);
        },
        methods: {
          getStorage: function () {
            var t = this,
              e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 0,
              n = JSON.parse(
                localStorage.getItem("imNotifyCounts".concat(this.uid))
              );
            if (n) {
              if (
                Object.values(n || {}).every(function (t) {
                  return 0 === t;
                }) &&
                -1 !== location.href.indexOf("from_workshop=1") &&
                e < 10
              )
                return void (this.timer = setTimeout(function () {
                  t.getStorage(e + 1);
                }, 500));
              "whisper" !== this.currentPage &&
                0 !== n[we[this.currentPage]] &&
                ((n[we[this.currentPage]] = 0), this.updateNotifyCounts()),
                (this.notifyCounts = n);
            }
            !Object.keys(n || {}).length &&
              e < 10 &&
              (this.timer = setTimeout(function () {
                t.getStorage(e + 1);
              }, 500));
          },
          get99num: function (t) {
            return 1 === this.notifyConfig.msg_notify
              ? t > 99
                ? "99+"
                : t
              : "";
          },
          updateNotifyCounts: function () {
            localStorage.setItem(
              "imNotifyCounts".concat(this.uid),
              JSON.stringify(this.notifyCounts)
            );
          },
          updateCurrent: function () {
            this.$set(this.notifyCounts, we[this.currentPage], 0),
              "whisper" === this.currentPage && ce.$emit("imUpdateCurrentTab");
          },
        },
      },
      xe = (n(375), n(1)),
      ke = Object(xe.a)(
        Ce,
        function () {
          var t = this,
            e = t.$createElement,
            n = t._self._c || e;
          return n("div", { staticClass: "side-bar" }, [
            t._m(0),
            n("ul", { staticClass: "list" }, [
              n(
                "li",
                {
                  staticClass: "item",
                  class: { active: "reply" === t.currentPage },
                },
                [
                  n(
                    "router-link",
                    {
                      attrs: { to: "/reply", title: "回复我的" },
                      nativeOn: {
                        click: function (e) {
                          return t.updateCurrent(e);
                        },
                      },
                    },
                    [
                      t._v("回复我的"),
                      t.notifyCounts.reply_me
                        ? n(
                            "span",
                            { staticClass: "notify", class: t.notifyClass },
                            [t._v(t._s(t.get99num(t.notifyCounts.reply_me)))]
                          )
                        : t._e(),
                    ]
                  ),
                ],
                1
              ),
              n(
                "li",
                {
                  staticClass: "item",
                  class: { active: "at" === t.currentPage },
                },
                [
                  n(
                    "router-link",
                    {
                      attrs: { to: "/at", title: "@我的" },
                      nativeOn: {
                        click: function (e) {
                          return t.updateCurrent(e);
                        },
                      },
                    },
                    [
                      t._v("@ 我的"),
                      t.notifyCounts.at_me
                        ? n(
                            "span",
                            { staticClass: "notify", class: t.notifyClass },
                            [t._v(t._s(t.get99num(t.notifyCounts.at_me)))]
                          )
                        : t._e(),
                    ]
                  ),
                ],
                1
              ),
              n(
                "li",
                {
                  staticClass: "item",
                  class: { active: "love" === t.currentPage },
                },
                [
                  n(
                    "router-link",
                    {
                      attrs: { to: "/love", title: "收到的赞" },
                      nativeOn: {
                        click: function (e) {
                          return t.updateCurrent(e);
                        },
                      },
                    },
                    [
                      t._v("收到的赞"),
                      t.notifyCounts.praise_me
                        ? n(
                            "span",
                            { staticClass: "notify", class: t.notifyClass },
                            [t._v(t._s(t.get99num(t.notifyCounts.praise_me)))]
                          )
                        : t._e(),
                    ]
                  ),
                ],
                1
              ),
              n(
                "li",
                {
                  staticClass: "item",
                  class: { active: "system" === t.currentPage },
                },
                [
                  n(
                    "router-link",
                    {
                      attrs: { to: "/system", title: "系统通知" },
                      nativeOn: {
                        click: function (e) {
                          return t.updateCurrent(e);
                        },
                      },
                    },
                    [
                      t._v("系统通知"),
                      t.notifyCounts.notify_me
                        ? n(
                            "span",
                            { staticClass: "notify", class: t.notifyClass },
                            [t._v(t._s(t.get99num(t.notifyCounts.notify_me)))]
                          )
                        : t._e(),
                    ]
                  ),
                ],
                1
              ),
              n(
                "li",
                {
                  staticClass: "item",
                  class: { active: "whisper" === t.currentPage },
                },
                [
                  n(
                    "router-link",
                    { attrs: { to: "/whisper", title: "我的消息" } },
                    [
                      t._v("我的消息"),
                      t.notifyCounts.message
                        ? n(
                            "span",
                            { staticClass: "notify", class: t.notifyClass },
                            [t._v(t._s(t.get99num(t.notifyCounts.message)))]
                          )
                        : t._e(),
                    ]
                  ),
                ],
                1
              ),
              n(
                "li",
                {
                  staticClass: "item",
                  class: { active: "archive" === t.currentPage },
                },
                [
                  n(
                    "router-link",
                    { attrs: { to: "/archive", title: "私信存档" } },
                    [t._v("私信存档")]
                  ),
                ],
                1
              ),
            ]),
            n("div", { staticClass: "divided-line" }),
            n(
              "div",
              {
                staticClass: "setting item",
                class: { active: "config" === t.currentPage },
              },
              [
                n(
                  "router-link",
                  { attrs: { to: "/config", title: "消息设置" } },
                  [
                    n("SVGIcon", {
                      staticClass: "setting-icon",
                      attrs: { custom: t.settingIcon },
                    }),
                    t._v("消息设置"),
                  ],
                  1
                ),
              ],
              1
            ),
            t.showAutoReply
              ? n(
                  "div",
                  {
                    staticClass: "setting item",
                    class: { active: "autoreply" === t.currentPage },
                  },
                  [
                    n(
                      "router-link",
                      { attrs: { to: "/autoreply", title: "自动回复" } },
                      [
                        n("SVGIcon", {
                          staticClass: "ar-icon",
                          attrs: { custom: t.autoReplyIcon },
                        }),
                        t._v("自动回复"),
                      ],
                      1
                    ),
                  ],
                  1
                )
              : t._e(),
          ]);
        },
        [
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e("div", { staticClass: "title" }, [
              e("div", { staticClass: "icon" }),
              e("div", [this._v("消息中心")]),
            ]);
          },
        ],
        !1,
        null,
        "09801ae7",
        null
      ).exports,
      Se = {
        methods: {
          onClick: function (t) {
            this.$emit("click", t);
          },
        },
      },
      Ie =
        (n(376),
        Object(xe.a)(
          Se,
          function () {
            var t = this.$createElement;
            return (this._self._c || t)(
              "div",
              { staticClass: "card", on: { click: this.onClick } },
              [this._t("default")],
              2
            );
          },
          [],
          !1,
          null,
          "fb77dc7a",
          null
        ).exports),
      je = {
        props: {
          backgroundColor: { type: String, default: "#fff" },
          enterAnimeClass: { type: String, default: "a-progress-tv-fade-in" },
          leaveAnimeClass: { type: String, default: "a-progress-tv-fade-out" },
          animeTiming: { type: Number, default: 0.2 },
          afterLeaved: {
            type: Function,
            default: function () {
              return function () {};
            },
          },
          text: { type: String, default: "" },
          fontColor: { type: String, default: "#333" },
        },
      },
      Oe =
        (n(377),
        {
          components: {
            Card: Ie,
            ProgressTv: Object(xe.a)(
              je,
              function () {
                var t = this,
                  e = t.$createElement,
                  n = t._self._c || e;
                return n(
                  "transition",
                  {
                    attrs: {
                      "enter-active-class": t.enterAnimeClass,
                      "leave-active-class": t.leaveAnimeClass,
                    },
                    on: { "after-leave": t.afterLeaved },
                  },
                  [
                    n(
                      "div",
                      {
                        staticClass: "link-progress-tv",
                        style: {
                          "background-color": t.backgroundColor,
                          "animation-duration": t.animeTiming + "s",
                          color: t.fontColor,
                        },
                        attrs: { role: "progress" },
                      },
                      [
                        n("div", {
                          staticClass: "text",
                          domProps: { textContent: t._s(t.text) },
                        }),
                      ]
                    ),
                  ]
                );
              },
              [],
              !1,
              null,
              "42e02e95",
              null
            ).exports,
          },
        }),
      Le =
        (n(378),
        Object(xe.a)(
          Oe,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e("card", [
              e("div", { staticClass: "loading" }, [e("progress-tv")], 1),
            ]);
          },
          [],
          !1,
          null,
          "17952cf4",
          null
        ).exports),
      Pe =
        (n(38),
        {
          name: "bl-button",
          props: {
            disabled: Boolean,
            type: { type: String, default: "primary" },
            size: { type: String, default: "size" },
          },
          methods: {
            handleClick: function (t) {
              this.$emit("click", t);
            },
          },
        }),
      Ae =
        (n(379),
        Object(xe.a)(
          Pe,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e(
              "button",
              {
                staticClass: "bl-button",
                class: [
                  this.type ? "bl-button--" + this.type : "",
                  this.size ? "bl-button--" + this.size : "",
                ],
                attrs: { disabled: this.disabled },
                on: { click: this.handleClick },
              },
              [e("span", { staticClass: "txt" }, [this._t("default")], 2)]
            );
          },
          [],
          !1,
          null,
          "65bda702",
          null
        ).exports),
      Ee = "undefined" != typeof window ? document.createElement("div") : null;
    function Te() {}
    var Me = {
        props: {
          button: {
            default: function () {
              return { confirm: "确定", cancel: "取消" };
            },
          },
          width: { type: Number, default: 500 },
          title: { type: String, default: "" },
          titleCenter: { type: Boolean, default: !1 },
          disabled: { type: Boolean, default: !1 },
          show: { type: Boolean, default: !1 },
          onConfirm: { type: Function, default: Te },
          onCancel: { type: Function, default: Te },
        },
        components: { BpBtn: Ae },
        computed: {
          buttons: function () {
            return {
              confirmBtn: this.$refs.confirmBtn
                ? this.$refs.confirmBtn.$el
                : Ee,
              cancelBtn: this.$refs.cancelBtn ? this.$refs.cancelBtn.$el : Ee,
              closeBtn: this.$refs.closeBtn,
            };
          },
        },
        methods: {
          onConfirmFunc: function (t) {
            this.onConfirm(t, this.buttons);
          },
          onCancelFunc: function (t) {
            this.onCancel(t, this.buttons);
          },
        },
      },
      Be =
        (n(380),
        Object(xe.a)(
          Me,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "transition",
              {
                attrs: {
                  name: "scale-out",
                  "leave-active-class": "a-scale-out",
                },
              },
              [
                n(
                  "div",
                  {
                    directives: [
                      {
                        name: "show",
                        rawName: "v-show",
                        value: t.show,
                        expression: "show",
                      },
                    ],
                    staticClass:
                      "bp-popup-panel p-relative a-move-in-top a-forwards",
                    style: { width: t.width + "px" || !1 },
                  },
                  [
                    n(
                      "div",
                      {
                        staticClass: "title-ctnr p-relative",
                        class: { "t-center": t.titleCenter },
                      },
                      [
                        n("h2", {
                          staticClass: "popup-title",
                          domProps: { textContent: t._s(t.title) },
                        }),
                      ]
                    ),
                    n(
                      "div",
                      { staticClass: "popup-content-ctnr" },
                      [
                        t._t("default"),
                        !1 !== t.button
                          ? n(
                              "div",
                              { staticClass: "popup-btn-ctnr t-center" },
                              [
                                !1 !== t.button.confirm
                                  ? n(
                                      "bp-btn",
                                      {
                                        ref: "confirmBtn",
                                        staticClass: "panel-btn",
                                        attrs: { disabled: t.disabled },
                                        nativeOn: {
                                          click: function (e) {
                                            return t.onConfirmFunc(e);
                                          },
                                        },
                                      },
                                      [t._v(t._s(t.button.confirm || "确定"))]
                                    )
                                  : t._e(),
                                !1 !== t.button.cancel
                                  ? n(
                                      "bp-btn",
                                      {
                                        ref: "cancelBtn",
                                        staticClass: "panel-btn",
                                        attrs: { type: "ghost" },
                                        nativeOn: {
                                          click: function (e) {
                                            return t.onCancelFunc(e);
                                          },
                                        },
                                      },
                                      [t._v(t._s(t.button.cancel || "取消"))]
                                    )
                                  : t._e(),
                              ],
                              1
                            )
                          : t._e(),
                      ],
                      2
                    ),
                    n(
                      "div",
                      {
                        ref: "closeBtn",
                        staticClass:
                          "close-btn p-absolute bg-center bg-no-repeat pointer t-center",
                        attrs: { role: "button", title: "关闭面板" },
                        on: { click: t.onCancelFunc },
                      },
                      [n("i", { staticClass: "bp-icon-font icon-close" })]
                    ),
                  ]
                ),
              ]
            );
          },
          [],
          !1,
          null,
          "3c863400",
          null
        ).exports),
      De = Be,
      Ne = {
        props: {
          show: null,
          title: String,
          hideButton: Boolean,
          disabled: null,
        },
        components: { BpPopup: De },
        methods: {
          onConfirm: function (t) {
            this.$emit("onConfirm", t);
          },
          onCancel: function (t) {
            this.$emit("onCancel", t);
          },
        },
      },
      Re =
        (n(381),
        n(382),
        Object(xe.a)(
          Ne,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n("transition", { attrs: { name: "im-popup-fade" } }, [
              n(
                "div",
                {
                  directives: [
                    {
                      name: "show",
                      rawName: "v-show",
                      value: t.show,
                      expression: "show",
                    },
                  ],
                  staticClass: "im-popup",
                },
                [
                  t.hideButton
                    ? t._e()
                    : n(
                        "bp-popup",
                        {
                          staticClass: "im-popup-shell",
                          attrs: {
                            show: t.show,
                            title: t.title,
                            onConfirm: t.onConfirm,
                            onCancel: t.onCancel,
                            disabled: t.disabled,
                          },
                        },
                        [
                          n(
                            "div",
                            { staticClass: "content" },
                            [t._t("default")],
                            2
                          ),
                        ]
                      ),
                  t.hideButton
                    ? n(
                        "bp-popup",
                        {
                          staticClass: "im-popup-shell hide-button",
                          staticStyle: {
                            width: "auto !important",
                            padding: "0",
                            margin: "0",
                          },
                          attrs: {
                            show: t.show,
                            title: t.title,
                            onConfirm: t.onConfirm,
                            onCancel: t.onCancel,
                            button: !1,
                          },
                        },
                        [
                          n("div", { staticClass: "split-line" }),
                          n(
                            "div",
                            {
                              staticClass: "content",
                              staticStyle: { padding: "0" },
                            },
                            [t._t("default")],
                            2
                          ),
                        ]
                      )
                    : t._e(),
                ],
                1
              ),
            ]);
          },
          [],
          !1,
          null,
          "23da1dea",
          null
        ).exports),
      $e = {
        props: ["size", "checked", "color", "maxNum", "checkNum", "square"],
        data: function () {
          return {};
        },
        computed: {
          checkboxStyle: function () {
            var t = this.color;
            return (
              this.disabled && (t = "#D0D0D0"),
              "width: "
                .concat(this.size, "px; height: ")
                .concat(this.size, "px; border-color: ")
                .concat(t, ";")
            );
          },
          disabled: function () {
            return (
              void 0 !== this.maxNum &&
              1 !== this.maxNum &&
              this.maxNum > 1 &&
              this.checkNum < this.maxNum
            );
          },
        },
        watch: {},
        components: {},
        beforeCreate: function () {},
        created: function () {},
        beforeMount: function () {},
        mounted: function () {},
        beforeDestroy: function () {},
        destroyed: function () {},
        methods: {
          onClick: function () {
            this.$emit("change");
          },
        },
      },
      Ue =
        (n(383),
        Object(xe.a)(
          $e,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e(
              "div",
              {
                staticClass: "checkbox",
                class: { checked: this.checked, square: this.square },
                style: this.checkboxStyle,
                on: { click: this.onClick },
              },
              [
                e("input", {
                  staticClass: "hidden",
                  attrs: { type: "checkbox" },
                }),
              ]
            );
          },
          [],
          !1,
          null,
          "fb1b32dc",
          null
        ).exports);
    function Ve(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function ze(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? Ve(Object(n), !0).forEach(function (e) {
              He(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : Ve(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function He(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var Fe = {
        props: ["show"],
        data: function () {
          return {
            loaded: !1,
            listShown: !1,
            currentTab: 0,
            groupsCanJoin: [],
            tempAddList: [],
            canCreateGroup: !1,
            ifShowCreateDialog: !1,
            agreementChecked: !1,
            notice: "",
            hasUnreadGroupNotice: !1,
          };
        },
        computed: ze(
          ze({}, Object(L.c)(["groupsJoinedList", "uname", "face", "uid"])),
          {},
          {
            currentList: function () {
              return 1 === this.currentTab
                ? this.groupsJoinedList || []
                : this.groupsCanJoin;
            },
            groupName: function () {
              return "".concat(this.uname, "的应援团");
            },
            groupAvatarStyle: function () {
              var t =
                this.face || "//static.hdslb.com/images/member/noface.gif";
              return {
                backgroundImage: "url(".concat(
                  bt(t, 80, 80).srcUrl.replace(/^http:/, ""),
                  ")"
                ),
              };
            },
            placeholder: function () {
              return "我是你们的爱抖露".concat(
                this.uname,
                "，加入我的应援团就是我的人了。民娜，你们愿意此生追随我么⁄(⁄ ⁄•⁄ω⁄•⁄ ⁄)⁄？！"
              );
            },
            tooMuch: function () {
              return this.notice.length > 128;
            },
            active: function () {
              return this.agreementChecked && !this.tooMuch;
            },
          }
        ),
        watch: {
          show: function (t) {
            t &&
              !this.loaded &&
              (this.fetchCanICreateGroup(),
              this.fetchCanJoinGroups(),
              this.getMyGroups(),
              (this.loaded = !0));
          },
        },
        components: { ImPopup: Re, checkbox: Ue },
        beforeCreate: function () {},
        created: function () {
          this.show &&
            !this.loaded &&
            (this.fetchCanICreateGroup(),
            this.fetchCanJoinGroups(),
            this.getMyGroups(),
            (this.loaded = !0));
        },
        beforeMount: function () {},
        mounted: function () {
          window.document.addEventListener("click", this.closeHelper, !1);
        },
        beforeDestroy: function () {
          window.document.removeEventListener("click", this.closeHelper, !1);
        },
        destroyed: function () {},
        methods: ze(
          ze({}, Object(L.b)(["setGroupsJoined"])),
          {},
          {
            fetchCanICreateGroup: function () {
              var t = this;
              E({
                method: "get",
                url: "//api.vc.bilibili.com/link_group/v1/member/show_create_group_icon",
              }).then(function (e) {
                t.canCreateGroup = e.show;
              });
            },
            fetchCanJoinGroups: function () {
              var t = this;
              E({
                method: "get",
                url: "//api.vc.bilibili.com/link_group/v1/member/joinable_groups",
              })
                .then(function (e) {
                  t.groupsCanJoin = e.list || [];
                  var n = JSON.parse(
                      window.localStorage[
                        "im_last_seen_group_ids_".concat(t.uid)
                      ] || "[]"
                    ),
                    i =
                      n.map(function (t) {
                        return t ? t.group_id : NaN;
                      }) || [],
                    s = !1;
                  t.groupsCanJoin.forEach(function (t) {
                    i.includes(t.group_id) || ((s = !0), n.push(t));
                  }),
                    (t.hasUnreadGroupNotice = s),
                    (window.localStorage[
                      "im_last_seen_group_ids_".concat(t.uid)
                    ] = JSON.stringify(n));
                })
                .catch(function () {});
            },
            toggleHelperShow: function () {
              (this.listShown = !this.listShown),
                (this.hasUnreadGroupNotice = !1);
            },
            closeHelper: function () {
              this.listShown = !1;
            },
            changeTab: function (t) {
              this.currentTab = t;
            },
            getMyGroups: function () {
              this.setGroupsJoined();
            },
            avatarStyle: function (t) {
              var e =
                t.group_cover || "//static.hdslb.com/images/member/noface.gif";
              return {
                backgroundImage: "url(".concat(
                  bt(e, 40, 40).srcUrl.replace(/^http:/, ""),
                  ")"
                ),
              };
            },
            inAddList: function (t) {
              return this.tempAddList.includes(t.group_id);
            },
            joinGroup: function (t) {
              var e,
                n,
                i = this;
              ((e = { groupId: t.group_id }),
              (n = e.groupId),
              E({
                method: "post",
                url: "//api.vc.bilibili.com/link_group/v1/group/join_group_without_agree",
                data: { group_id: n },
              })).then(
                function (e) {
                  i.tempAddList.push(t.group_id),
                    i.linkMsg(i.$refs.tabContent, "加入成功", "success", !0);
                  var n = e.group_id || (e.data && e.data.group_id);
                  i.$router.replace("/whisper/mygroups/fans".concat(n));
                },
                function (t) {
                  i.linkMsg(
                    i.$refs.tabContent,
                    "加入失败，".concat(t.msg),
                    "error",
                    !0
                  );
                }
              );
            },
            showCreateDialog: function () {
              var t = this;
              E({
                method: "post",
                url: "//api.vc.bilibili.com/link_group/v1/group/create_check",
                data: { poll: 0 },
              })
                .then(function (e) {
                  e.pass
                    ? (t.ifShowCreateDialog = !0)
                    : t.linkMsg(
                        t.$refs.createGroup,
                        "抱歉，您目前无法创建应援团",
                        "error",
                        !0
                      );
                })
                .catch(function (e) {
                  t.linkMsg(t.$refs.createGroup, e.msg, "error", !0);
                });
            },
            onCancel: function () {
              this.ifShowCreateDialog = !1;
            },
            createGroup: function () {
              var t,
                e,
                n,
                i,
                s,
                o = this;
              this.agreementChecked &&
                this.active &&
                ((t = {
                  name: this.groupName,
                  face: this.face,
                  notice: this.notice || this.placeholder,
                  uid: this.uid,
                }),
                (e = t.name),
                (n = t.face),
                (i = t.notice),
                (s = t.uid),
                E({
                  method: "post",
                  url: "//api.vc.bilibili.com/link_group/v1/group/create",
                  data: { name: e, type: 0, owner_uid: s, face: n, notice: i },
                })).then(
                  function (t) {
                    o.linkMsg(o.$refs.createButton, "创建成功", "success", !0),
                      (o.canCreateGroup = !1),
                      (o.ifShowCreateDialog = !1),
                      o.$router.replace(
                        "/whisper/mygroups/fans".concat(t.group_id)
                      ),
                      window.location.reload();
                  },
                  function (t) {
                    o.linkMsg(
                      o.$refs.createButton,
                      "创建失败，".concat(t.msg),
                      "error",
                      !0
                    );
                  }
                );
            },
            agree: function () {
              this.agreementChecked = !this.agreementChecked;
            },
            handleOpenSession: function (t) {
              if (1 === this.currentTab) {
                var e = "/whisper/mygroups/fans".concat(t.group_id);
                this.$route.path !== e && this.$router.push(e),
                  this.closeHelper();
              }
            },
          }
        ),
      },
      Ge =
        (n(384),
        n(385),
        n(386),
        Object(xe.a)(
          Fe,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return t.show
              ? n(
                  "div",
                  { staticClass: "group-helper" },
                  [
                    n("div", { staticClass: "button-box" }, [
                      t.canCreateGroup
                        ? n("div", { staticClass: "item" }, [
                            n(
                              "button",
                              {
                                ref: "createGroup",
                                staticClass: "create-btn",
                                class: { active: t.ifShowCreateDialog },
                                on: {
                                  click: function (e) {
                                    return (
                                      e.stopPropagation(), t.showCreateDialog(e)
                                    );
                                  },
                                },
                              },
                              [n("span", [t._v("创建应援团")])]
                            ),
                          ])
                        : t._e(),
                      n(
                        "div",
                        { staticClass: "item" },
                        [
                          n(
                            "button",
                            {
                              staticClass: "helper-btn",
                              class: {
                                active: t.listShown,
                                "new-badge": t.hasUnreadGroupNotice,
                              },
                              on: {
                                click: function (e) {
                                  return (
                                    e.stopPropagation(), t.toggleHelperShow(e)
                                  );
                                },
                              },
                            },
                            [n("span", [t._v("应援团助手")])]
                          ),
                          n("transition", { attrs: { name: "im-scale-in" } }, [
                            n(
                              "div",
                              {
                                directives: [
                                  {
                                    name: "show",
                                    rawName: "v-show",
                                    value: t.listShown,
                                    expression: "listShown",
                                  },
                                ],
                                staticClass: "group-helper-msg-list",
                                on: {
                                  click: function (t) {
                                    t.stopPropagation();
                                  },
                                },
                              },
                              [
                                n("div", { staticClass: "tab-list" }, [
                                  n(
                                    "div",
                                    {
                                      staticClass: "tab-item",
                                      class: { active: 0 === t.currentTab },
                                      on: {
                                        click: function (e) {
                                          return t.changeTab(0);
                                        },
                                      },
                                    },
                                    [t._v("可加入\n            ")]
                                  ),
                                  n(
                                    "div",
                                    {
                                      staticClass: "tab-item",
                                      class: { active: 1 === t.currentTab },
                                      on: {
                                        click: function (e) {
                                          return t.changeTab(1);
                                        },
                                      },
                                    },
                                    [t._v("已加入\n            ")]
                                  ),
                                ]),
                                t.currentList.length
                                  ? n(
                                      "div",
                                      {
                                        ref: "tabContent",
                                        staticClass: "tab-content",
                                      },
                                      t._l(t.currentList, function (e) {
                                        return n(
                                          "div",
                                          {
                                            key: e.group_id,
                                            staticClass: "group-item",
                                            class: {
                                              pointer: 1 === t.currentTab,
                                            },
                                            on: {
                                              click: function (n) {
                                                return t.handleOpenSession(e);
                                              },
                                            },
                                          },
                                          [
                                            n("div", {
                                              staticClass: "avatar",
                                              style: t.avatarStyle(e),
                                            }),
                                            n(
                                              "div",
                                              {
                                                staticClass: "name-box",
                                                style: {
                                                  "max-width":
                                                    1 === t.currentTab
                                                      ? "none"
                                                      : "195px",
                                                },
                                              },
                                              [
                                                n(
                                                  "div",
                                                  { staticClass: "name" },
                                                  [t._v(t._s(e.group_name))]
                                                ),
                                                1 === t.currentTab
                                                  ? n(
                                                      "div",
                                                      { staticClass: "status" },
                                                      [
                                                        t._v(
                                                          "您已加入应援团\n                "
                                                        ),
                                                      ]
                                                    )
                                                  : t._e(),
                                              ]
                                            ),
                                            0 === t.currentTab
                                              ? n(
                                                  "button",
                                                  {
                                                    staticClass: "operate-btn",
                                                    class: {
                                                      disable: t.inAddList(e),
                                                    },
                                                    on: {
                                                      click: function (n) {
                                                        return t.joinGroup(e);
                                                      },
                                                    },
                                                  },
                                                  [
                                                    t._v(
                                                      t._s(
                                                        t.inAddList(e)
                                                          ? "已加入"
                                                          : "加入"
                                                      ) + "\n              "
                                                    ),
                                                  ]
                                                )
                                              : t._e(),
                                          ]
                                        );
                                      }),
                                      0
                                    )
                                  : t._e(),
                                t.currentList.length
                                  ? t._e()
                                  : n("div", { staticClass: "tab-content" }, [
                                      n("div", { staticClass: "nothing" }, [
                                        t._v("暂无消息"),
                                      ]),
                                    ]),
                              ]
                            ),
                          ]),
                        ],
                        1
                      ),
                    ]),
                    n(
                      "im-popup",
                      {
                        staticClass: "group-helper-popup",
                        attrs: {
                          show: t.ifShowCreateDialog,
                          title: "创建应援团",
                          hideButton: !0,
                        },
                        on: { onCancel: t.onCancel },
                      },
                      [
                        n("div", { staticClass: "create-group-form" }, [
                          n("label", { staticClass: "form-row" }, [
                            n("div", { staticClass: "label-name" }, [
                              t._v("应援团头像："),
                            ]),
                            n("div", {
                              staticClass: "group-avatar",
                              style: t.groupAvatarStyle,
                            }),
                          ]),
                          n("label", { staticClass: "form-row" }, [
                            n("div", { staticClass: "label-name" }, [
                              t._v("应援团名称："),
                            ]),
                            n("div", { staticClass: "group-name" }, [
                              t._v(t._s(t.groupName)),
                            ]),
                          ]),
                          n("label", { staticClass: "form-row top" }, [
                            n("div", { staticClass: "label-name" }, [
                              t._v("应援团公告："),
                            ]),
                            n("div", { staticClass: "group-notice" }, [
                              n("textarea", {
                                directives: [
                                  {
                                    name: "model",
                                    rawName: "v-model",
                                    value: t.notice,
                                    expression: "notice",
                                  },
                                ],
                                attrs: {
                                  rows: "6",
                                  placeholder: "默认：" + t.placeholder,
                                },
                                domProps: { value: t.notice },
                                on: {
                                  input: function (e) {
                                    e.target.composing ||
                                      (t.notice = e.target.value);
                                  },
                                },
                              }),
                              t.tooMuch
                                ? n("div", { staticClass: "indicator" }, [
                                    t._v("已超过字数上限"),
                                  ])
                                : t._e(),
                              n(
                                "div",
                                {
                                  staticClass: "agreement",
                                  on: { click: t.agree },
                                },
                                [
                                  n("checkbox", {
                                    attrs: {
                                      size: 16,
                                      square: !0,
                                      checked: t.agreementChecked,
                                    },
                                  }),
                                  n("span", [
                                    t._v(
                                      "\n              我已阅读并同意\n              "
                                    ),
                                    n(
                                      "a",
                                      {
                                        attrs: {
                                          href: "https://www.bilibili.com/blackboard/help.html#%E5%BA%94%E6%8F%B4%E5%9B%A2",
                                          target: "_blank",
                                        },
                                        on: {
                                          click: function (t) {
                                            t.stopPropagation();
                                          },
                                        },
                                      },
                                      [t._v("应援团使用规范")]
                                    ),
                                  ]),
                                ],
                                1
                              ),
                            ]),
                          ]),
                          n("div", { staticClass: "popup-button-box" }, [
                            n(
                              "button",
                              {
                                ref: "createButton",
                                class: { disable: !t.active },
                                on: { click: t.createGroup },
                              },
                              [t._v("确认创建")]
                            ),
                          ]),
                        ]),
                      ]
                    ),
                  ],
                  1
                )
              : t._e();
          },
          [],
          !1,
          null,
          "d731158a",
          null
        ).exports),
      Ze = { props: { show: null }, components: { BpPopup: De } },
      qe =
        (n(387),
        Object(xe.a)(
          Ze,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e(
              "bp-popup",
              {
                staticClass: "not-support-popup",
                attrs: { show: this.show, button: !1 },
              },
              [
                e("p", { staticClass: "text" }, [
                  this._v(
                    "少年哟～ 你的浏览器太老了辣～ 赶快去换个 chrome 吧～"
                  ),
                ]),
              ]
            );
          },
          [],
          !1,
          null,
          "7b86a45f",
          null
        ).exports);
    function Ke(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function We(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function Je(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? We(Object(n), !0).forEach(function (e) {
              Ye(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : We(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function Ye(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var Qe = {
        data: function () {
          return {
            loginReady: !1,
            wsObject: null,
            notSupportPopupShow: !1,
            isIe: !1,
            scrollBar: null,
            updateCurrentTab: !1,
          };
        },
        computed: Je(
          Je(
            {},
            Object(L.c)([
              "title",
              "listLoadingNum",
              "listLoadingMore",
              "uid",
              "currentPage",
            ])
          ),
          {},
          {
            loading: function () {
              return !this.listLoadingMore && this.listLoadingNum > 0;
            },
            noClipData: function () {
              return ["whisper"].indexOf(this.currentPage) > -1
                ? "no-clip"
                : "";
            },
            showGroupHelper: function () {
              return ["whisper"].indexOf(this.currentPage) > -1;
            },
          }
        ),
        watch: {
          title: function () {
            this.loginReady &&
              ((this.$refs.spaceRightBottom.scrollTop = 0),
              this.updateScroll());
          },
          loginReady: function (t) {
            t && (this.initScroll(), this.getNotifyConfig());
          },
        },
        components: {
          SideBar: ke,
          Loading: Le,
          NotSupportPopup: qe,
          groupHelper: Ge,
        },
        mounted: function () {
          var t = this;
          this.initLogin(),
            (function () {
              var t, e, n;
              if (void 0 !== document.hidden)
                (t = "hidden"),
                  (n = "visibilitychange"),
                  (e = "visibilityState");
              else if (void 0 !== document.mozHidden)
                (t = "mozHidden"),
                  (n = "mozvisibilitychange"),
                  (e = "mozVisibilityState");
              else if (void 0 !== document.msHidden)
                (t = "msHidden"),
                  (n = "msvisibilitychange"),
                  (e = "msVisibilityState");
              else {
                if (void 0 === document.webkitHidden) return;
                (t = "webkitHidden"),
                  (n = "webkitvisibilitychange"),
                  (e = "webkitVisibilityState");
              }
              document.addEventListener(
                n,
                function () {
                  window._im_visiable = !(document[e] === t);
                },
                !1
              ),
                (window._im_visiable = !(document[e] === t));
            })(),
            ce.$on("imUpdateCurrentTab", function () {
              (t.updateCurrentTab = !0),
                t.$nextTick(function () {
                  t.updateCurrentTab = !1;
                });
            });
        },
        beforeDestroy: function () {
          this.$refs.spaceRightBottom.removeEventListener(
            "scroll",
            this.emitLoadMore,
            !1
          ),
            window.removeEventListener("focus", this.checkLoginStatus);
        },
        methods: Je(
          Je(
            {},
            Object(L.b)([
              "setUid",
              "setUname",
              "setFace",
              "getNotifyConfig",
              "setDeviceId",
            ])
          ),
          {},
          {
            initLogin: function () {
              var t = this,
                e = Object(j.c)();
              ["IE Legacy", "IE 9", "IE 10", "IE 11"].includes(e) &&
                (this.isIe = !0),
                ["IE Legacy", "IE 9"].includes(e)
                  ? (this.notSupportPopupShow = !0)
                  : W.a.get().then(function (e) {
                      var n;
                      (null == e || null === (n = e.data) || void 0 === n
                        ? void 0
                        : n.mid) &&
                        ((t.loginReady = !0),
                        window.addEventListener("focus", t.checkLoginStatus));
                    });
            },
            initScroll: function () {
              var t = this;
              this.$nextTick(function () {
                (t.scrollBar = new ae.a(t.$refs.spaceRightBottom, {
                  minScrollbarLength: 50,
                  maxScrollbarLength: 120,
                })),
                  t.$refs.spaceRightBottom.addEventListener(
                    "scroll",
                    t.emitLoadMore,
                    !1
                  );
              });
            },
            updateScroll: function () {
              var t = this;
              this.$nextTick(function () {
                t.scrollBar && t.scrollBar.update(t.$refs.spaceRightBottom);
              });
            },
            emitLoadMore: function () {
              var t = this.$refs.spaceRightBottom,
                e = t.scrollTop || t.pageYOffset || t.scrollTop;
              this.$refs.routerView.clientHeight - t.clientHeight - e < 200 &&
                ce.$emit("Index:LoadMore");
            },
            checkLoginStatus: function () {
              var t,
                e = this;
              return ((t = q.a.mark(function t() {
                var n;
                return q.a.wrap(function (t) {
                  for (;;)
                    switch ((t.prev = t.next)) {
                      case 0:
                        return (
                          (n = {}),
                          (t.next = 3),
                          W.a.get().then(function (t) {
                            n = null == t ? void 0 : t.data;
                          })
                        );
                      case 3:
                        ((e.uid && void 0 !== n.isLogin && !n.isLogin) ||
                          (e.uid && void 0 !== n.isLogin && e.uid !== n.mid)) &&
                          (window.location.replace(
                            window.location.href.replace(
                              /\/#\/whisper\/.*/,
                              "/#/whisper"
                            )
                          ),
                          window.location.reload());
                      case 4:
                      case "end":
                        return t.stop();
                    }
                }, t);
              })),
              function () {
                var e = this,
                  n = arguments;
                return new Promise(function (i, s) {
                  var o = t.apply(e, n);
                  function r(t) {
                    Ke(o, i, s, r, a, "next", t);
                  }
                  function a(t) {
                    Ke(o, i, s, r, a, "throw", t);
                  }
                  r(void 0);
                });
              })();
            },
          }
        ),
      },
      Xe =
        (n(388),
        n(389),
        Object(xe.a)(
          Qe,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              {
                class: { "is-ie": t.isIe },
                attrs: { id: "link-message-container" },
              },
              [
                n("transition", { attrs: { name: "im-init" } }, [
                  t.loginReady
                    ? n("div", { staticClass: "container" }, [
                        n(
                          "div",
                          { staticClass: "space-left" },
                          [n("side-bar", { ref: "sideBar" })],
                          1
                        ),
                        n("div", { staticClass: "space-right" }, [
                          n("div", { staticClass: "space-right-top" }, [
                            n(
                              "div",
                              { staticClass: "title" },
                              [
                                n(
                                  "div",
                                  [
                                    t._l(t.title, function (e, i) {
                                      return [
                                        i > 0
                                          ? n("span", {
                                              domProps: {
                                                textContent: t._s(" > "),
                                              },
                                            })
                                          : t._e(),
                                        e.link
                                          ? n("router-link", {
                                              attrs: { to: e.link },
                                              domProps: {
                                                textContent: t._s(e.name),
                                              },
                                            })
                                          : t._e(),
                                        e.link
                                          ? t._e()
                                          : n("span", {
                                              domProps: {
                                                textContent: t._s(e.name),
                                              },
                                            }),
                                      ];
                                    }),
                                  ],
                                  2
                                ),
                                n("group-helper", {
                                  attrs: { show: t.showGroupHelper },
                                }),
                              ],
                              1
                            ),
                          ]),
                          n(
                            "div",
                            {
                              ref: "spaceRightBottom",
                              staticClass: "space-right-bottom",
                              attrs: { "data-no-clip": t.noClipData },
                            },
                            [
                              n(
                                "div",
                                {
                                  directives: [
                                    {
                                      name: "show",
                                      rawName: "v-show",
                                      value: !t.loading,
                                      expression: "!loading",
                                    },
                                  ],
                                  ref: "routerView",
                                  staticClass: "router-view",
                                },
                                [
                                  n(
                                    "keep-alive",
                                    [
                                      t.$route.meta.keepAlive &&
                                      !t.updateCurrentTab
                                        ? n("router-view")
                                        : t._e(),
                                    ],
                                    1
                                  ),
                                  t.$route.meta.keepAlive || t.updateCurrentTab
                                    ? t._e()
                                    : n("router-view"),
                                ],
                                1
                              ),
                              n("loading", {
                                directives: [
                                  {
                                    name: "show",
                                    rawName: "v-show",
                                    value: t.loading,
                                    expression: "loading",
                                  },
                                ],
                              }),
                            ],
                            1
                          ),
                        ]),
                      ])
                    : t._e(),
                ]),
                n("not-support-popup", {
                  attrs: { show: t.notSupportPopupShow },
                }),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "1c9150a9",
          null
        ).exports);
    n(390);
    function tn() {
      var t =
          arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
        e = t.id,
        n = t.lastTime;
      return E({
        method: "get",
        url: "//api.bilibili.com/x/msgfeed/reply",
        data: { id: e, reply_time: n, platform: "web" },
      });
    }
    var en = { props: ["appear"] },
      nn =
        (n(393),
        Object(xe.a)(
          en,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e(
              "div",
              [
                this.appear
                  ? e(
                      "transition-group",
                      { attrs: { name: "im-fade-in", appear: "", tag: "div" } },
                      [this._t("default")],
                      2
                    )
                  : this._e(),
                this.appear
                  ? this._e()
                  : e(
                      "transition-group",
                      { attrs: { name: "im-fade-in", tag: "div" } },
                      [this._t("default")],
                      2
                    ),
              ],
              1
            );
          },
          [],
          !1,
          null,
          null,
          null
        ).exports),
      sn = {
        data: function () {
          return { imgUrl: n(394) };
        },
        components: { Card: Ie },
      },
      on =
        (n(395),
        Object(xe.a)(
          sn,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e("card", [
              e("div", { staticClass: "nothing" }, [
                e("img", {
                  staticClass: "nothing-img",
                  attrs: { src: this.imgUrl },
                }),
              ]),
            ]);
          },
          [],
          !1,
          null,
          "27cf29e0",
          null
        ).exports),
      rn = {
        props: {
          time: {
            type: [String, Object, Number],
            default: function () {
              return "刚刚";
            },
          },
          reverse: {
            type: Boolean,
            default: function () {
              return !1;
            },
          },
        },
        computed: {
          timeText: function () {
            var t,
              e = this.time;
            "string" == typeof e && e.match(/^\d+$/g) && (e = parseInt(e)),
              "number" == typeof e && e < 9466848e5 && (e *= 1e3);
            var n = new Date(e),
              i = new Date();
            if (n.getTime()) {
              var s = n.getFullYear(),
                o = n.getMonth() + 1,
                r = n.getDate(),
                a = this.num2String(n.getHours()),
                c = this.num2String(n.getMinutes()),
                l =
                  s === i.getFullYear() &&
                  o === i.getMonth() + 1 &&
                  r === i.getDate()
                    ? "今天"
                    : "".concat(s, "年").concat(o, "月").concat(r, "日"),
                u = "".concat(a, ":").concat(c);
              t = this.reverse
                ? "".concat(u, " ").concat(l)
                : "".concat(l, " ").concat(u);
            } else t = e;
            return t;
          },
        },
        methods: {
          num2String: function (t) {
            return t > 9 ? String(t) : "0".concat(t);
          },
        },
      },
      an =
        (n(396),
        Object(xe.a)(
          rn,
          function () {
            var t = this.$createElement;
            return (this._self._c || t)("span", { staticClass: "time" }, [
              this._v(this._s(this.timeText)),
            ]);
          },
          [],
          !1,
          null,
          "0bc25b4d",
          null
        ).exports),
      cn = function (t) {
        var e = t.path || (t.composedPath && t.composedPath());
        if (!e) {
          e = [];
          for (var n = t.target; n !== document; )
            e.unshift(n), (n = n.parentNode);
        }
        return e;
      },
      ln = {
        props: ["time", "userList", "desc", "likeItem"],
        data: function () {
          return {};
        },
        computed: {
          userListComputed: function () {
            return this.userList ? this.userList.slice(0, 2) : [];
          },
        },
        watch: {},
        components: { TimeSpan: an },
        beforeCreate: function () {},
        created: function () {},
        beforeMount: function () {},
        mounted: function () {},
        beforeDestroy: function () {},
        destroyed: function () {},
        methods: {
          getUserSpaceUrl: function (t) {
            return "//space.bilibili.com/".concat(t.mid);
          },
          getUserAvatarStyle: function (t) {
            var e = t.avatar || "//static.hdslb.com/images/member/noface.gif";
            return {
              "background-image": "url(".concat(
                bt(e, 46, 46).srcUrl.replace(/^http:/, ""),
                ")"
              ),
            };
          },
          toLikeDetail: function (t) {
            cn(t).some(function (t) {
              return "A" === t.nodeName || "BUTTON" === t.nodeName;
            }) ||
              (this.likeItem &&
                (this.$emit("to-like-detail"),
                this.onClick("toLikeDetail"),
                t.stopPropagation()));
          },
          onClick: function (t) {
            this.$emit("spm-click", { type: t });
          },
        },
      },
      un =
        (n(397),
        Object(xe.a)(
          ln,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n("div", { staticClass: "basic-list-item" }, [
              n(
                "div",
                {
                  staticClass: "left-box",
                  class: "count-" + t.userListComputed.length,
                },
                t._l(t.userListComputed, function (e) {
                  return n("a", {
                    key: e.mid,
                    staticClass: "avatar",
                    style: t.getUserAvatarStyle(e),
                    attrs: {
                      href: t.getUserSpaceUrl(e),
                      target: "_blank",
                      title: e.nickname,
                    },
                    on: {
                      click: function (e) {
                        return t.onClick("avatar");
                      },
                    },
                  });
                }),
                0
              ),
              n(
                "div",
                { staticClass: "center-box", on: { click: t.toLikeDetail } },
                [
                  n("div", { staticClass: "line-1" }, [
                    n(
                      "span",
                      { staticClass: "name-field" },
                      [
                        t._l(t.userListComputed, function (e, i) {
                          return [
                            n(
                              "a",
                              {
                                key: e.mid,
                                attrs: {
                                  href: t.getUserSpaceUrl(e),
                                  target: "_blank",
                                  title: e.nickname,
                                },
                                on: {
                                  click: function (e) {
                                    return t.onClick("uname");
                                  },
                                },
                              },
                              [t._v(t._s(e.nickname))]
                            ),
                            i !== t.userListComputed.length - 1
                              ? n("span", { key: i }, [t._v("、")])
                              : t._e(),
                          ];
                        }),
                      ],
                      2
                    ),
                    n(
                      "span",
                      {
                        staticClass: "desc-field",
                        class: { "like-item": Boolean(t.likeItem) },
                      },
                      [t._v("\n        " + t._s(t.desc) + "\n      ")]
                    ),
                  ]),
                  n("div", { staticClass: "line-2" }, [t._t("content")], 2),
                  n("div", { staticClass: "line-3" }, [
                    n(
                      "span",
                      { staticClass: "time-filed" },
                      [
                        n("time-span", {
                          staticClass: "time-span",
                          attrs: { time: t.time },
                        }),
                      ],
                      1
                    ),
                    n(
                      "div",
                      { staticClass: "action-field" },
                      [t._t("action")],
                      2
                    ),
                  ]),
                ]
              ),
              n("div", { staticClass: "right-box" }, [t._t("right")], 2),
            ]);
          },
          [],
          !1,
          null,
          "657577a0",
          null
        ).exports),
      dn =
        (n(398),
        n(142),
        function (t) {
          var e = t
              .replace(/\n\r?↵?|↵\n?\r?/g, "[br]")
              .replace(/[\s]/g, " ")
              .replace(/}#{/g, "} #{"),
            n = 0,
            i = [],
            s = 0,
            o = 0,
            r = /.+?(?=#{(.+?)}{"?(.+?)"?})|.+?$/g,
            a = /#{(.+?)}{"?(.+?)"?}/g,
            c = /^javascript:/i;
          do {
            if ((n += 1) > 20) {
              console.warn("tem2arr error:", e);
              break;
            }
            if (2 === o) {
              o = 1;
              var l = r.exec(e);
              if (!l || l.index !== s) continue;
              i.push({ text: l[0] }), (s = r.lastIndex);
            } else if (0 === o || 1 === o) {
              o = 2;
              var u = a.exec(e);
              if (u && u.index === s && !c.test(u[2]))
                i.push({ url: u[2], text: u[1] }), (s = a.lastIndex);
              else if (1 === o) break;
            }
            (r.lastIndex = s), (a.lastIndex = s);
          } while (s < e.length);
          return i.length < 1 && i.push({ text: e }), i;
        }),
      pn = function (t) {
        return t
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;")
          .replace(/'/g, "&#x27;")
          .replace(/\//g, "&#x2f;")
          .replace(/\n/g, "<br>");
      };
    function mn(t) {
      return (
        (function (t) {
          if (Array.isArray(t)) return gn(t);
        })(t) ||
        (function (t) {
          if (
            ("undefined" != typeof Symbol && null != t[Symbol.iterator]) ||
            null != t["@@iterator"]
          )
            return Array.from(t);
        })(t) ||
        hn(t) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function fn(t, e) {
      return (
        (function (t) {
          if (Array.isArray(t)) return t;
        })(t) ||
        (function (t, e) {
          var n =
            t &&
            (("undefined" != typeof Symbol && t[Symbol.iterator]) ||
              t["@@iterator"]);
          if (null == n) return;
          var i,
            s,
            o = [],
            r = !0,
            a = !1;
          try {
            for (
              n = n.call(t);
              !(r = (i = n.next()).done) &&
              (o.push(i.value), !e || o.length !== e);
              r = !0
            );
          } catch (t) {
            (a = !0), (s = t);
          } finally {
            try {
              r || null == n.return || n.return();
            } finally {
              if (a) throw s;
            }
          }
          return o;
        })(t, e) ||
        hn(t, e) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function hn(t, e) {
      if (t) {
        if ("string" == typeof t) return gn(t, e);
        var n = Object.prototype.toString.call(t).slice(8, -1);
        return (
          "Object" === n && t.constructor && (n = t.constructor.name),
          "Map" === n || "Set" === n
            ? Array.from(t)
            : "Arguments" === n ||
              /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
            ? gn(t, e)
            : void 0
        );
      }
    }
    function gn(t, e) {
      (null == e || e > t.length) && (e = t.length);
      for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
      return i;
    }
    var vn = {
        props: { text: String, transLink: Boolean },
        data: function () {
          return { triggerUpdate: !1 };
        },
        computed: {
          resArray: function () {
            return dn(this.text);
          },
        },
        mounted: function () {
          var t = this;
          G.$on("ShowBvConfigUpdated", function () {
            (t.triggerUpdate = !0),
              t.$nextTick(function () {
                t.triggerUpdate = !1;
              });
          });
        },
        methods: {
          escape: pn,
          getHtml: function (t) {
            return this.transLink
              ? this.transformLink(t)
              : pn(t).replace(/\[br]/g, "<br>");
          },
          transformLink: function (t) {
            var e;
            return (function (t, e) {
              var n = t.map(function (t) {
                return t.match instanceof RegExp
                  ? ((e = t.match),
                    (n = t.replace),
                    function (t) {
                      var i = t.match(e) || [],
                        s = t.split(e);
                      return [i.map(n), s];
                    })
                  : function (e) {
                      var n = fn(t.match(e), 2),
                        i = n[0],
                        s = n[1];
                      return [i.map(t.replace), s];
                    };
                var e, n;
              });
              return (function t(e) {
                return e.reduce(function (e, n) {
                  return e.concat(Array.isArray(n) ? t(n) : n);
                }, []);
              })(
                (function t(e, i) {
                  var s = n[e];
                  return s
                    ? i.map(function (n) {
                        for (
                          var i = fn(s(n), 2),
                            o = i[0],
                            r = i[1],
                            a = t(e + 1, r),
                            c = [],
                            l = 0;
                          l < o.length;
                          l++
                        )
                          c.push(a[l]), c.push(o[l]);
                        return c.push(a[o.length]), c;
                      })
                    : i;
                })(0, [e])
              );
            })(
              [
                {
                  match:
                    /(?:(?:(?:http:\/\/|https:\/\/)(?:[a-zA-Z0-9_.-]+\.)*(?:bilibili|biligame)\.com(?:\/[/.$*?~=#!%@&\-\w]*)?)|(?:(?:http:\/\/|https:\/\/)(?:[a-zA-Z0-9_.-]+\.)*(?:acg|b23)\.tv(?:\/[/.$*?~=#!%@&\-\w]*)?)|(?:(?:http:\/\/|https:\/\/)dl\.(?:hdslb)\.com(?:\/[/.$*?~=#!%@&\-\w]*)?))/g,
                  replace: function (t) {
                    return '\n            <a href="'.concat(
                      t,
                      '" target="_blank" class="im-dynamic-link">\n              <i class="bp-icon-font icon-link"></i> 网页链接\n            </a>\n          '
                    );
                  },
                },
                {
                  match: /\[br]/g,
                  replace: function () {
                    return "<br/>";
                  },
                },
              ].concat(
                mn(
                  dt()
                    ? [
                        {
                          match: /bv1[\d\w]{9}/gi,
                          replace: function (t) {
                            return '<a href="//www.bilibili.com/video/'
                              .concat(
                                t.slice(0, 2).toLowerCase().concat(t.slice(2)),
                                '" target="_blank" class="im-dynamic-link">'
                              )
                              .concat(t, "</a>");
                          },
                        },
                      ]
                    : []
                ),
                [
                  {
                    match: /av\d+/gi,
                    replace: function (t) {
                      return '<a href="//www.bilibili.com/video/'
                        .concat(
                          t.toLowerCase(),
                          '" target="_blank" class="im-dynamic-link">'
                        )
                        .concat(t, "</a>");
                    },
                  },
                  {
                    match: /vc\d+/gi,
                    replace: function (t) {
                      return '<a href="//vc.bilibili.com/video/'
                        .concat(
                          t.slice(2),
                          '" target="_blank" class="im-dynamic-link">'
                        )
                        .concat(t, "</a>");
                    },
                  },
                  {
                    match: /cv\d+/gi,
                    replace: function (t) {
                      return '<a href="//www.bilibili.com/read/'
                        .concat(
                          t.toLowerCase(),
                          '" target="_blank" class="im-dynamic-link">'
                        )
                        .concat(t, "</a>");
                    },
                  },
                  {
                    match: /#[^\n\r#@]{1,32}?#/g,
                    replace: function (t) {
                      return '<a href="//t.bilibili.com/topic/name/'
                        .concat(
                          encodeURIComponent(t.slice(1, t.length - 1).trim()),
                          '/feed" target="_blank" class="im-topic-link">#'
                        )
                        .concat(t.slice(1, t.length - 1).trim(), "#</a>");
                    },
                  },
                ]
              ),
              ((e = t),
              e
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/\n/g, "<br/>"))
            ).join("");
          },
          onClick: function (t) {
            this.$emit("click", t);
          },
        },
      },
      bn =
        (n(400),
        n(401),
        Object(xe.a)(
          vn,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "span",
              { staticClass: "text", on: { click: t.onClick } },
              [
                t._l(t.resArray, function (e, i) {
                  return [
                    e.url
                      ? [
                          n(
                            "a",
                            {
                              staticClass: "link",
                              attrs: {
                                href: e.url,
                                target: "_blank",
                                title: e.text,
                              },
                            },
                            [t._v(t._s(e.text))]
                          ),
                        ]
                      : t._e(),
                    t.triggerUpdate || e.url
                      ? t._e()
                      : n("span", {
                          domProps: { innerHTML: t._s(t.getHtml(e.text)) },
                        }),
                  ];
                }),
              ],
              2
            );
          },
          [],
          !1,
          null,
          "e5050176",
          null
        ).exports);
    function yn(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function _n(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? yn(Object(n), !0).forEach(function (e) {
              wn(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : yn(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function wn(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var Cn = {
        props: ["atList", "content"],
        data: function () {
          return {};
        },
        computed: {
          renderList: function () {
            var t = [{ type: "string", content: this.content }];
            return (
              this.atList
                .slice(0)
                .sort(function (t, e) {
                  return e.nickname.length - t.nickname.length;
                })
                .forEach(function (e) {
                  t = (function (t, e) {
                    var n = "@".concat(t.nickname),
                      i = [];
                    return (
                      e.forEach(function (s) {
                        if ("at" !== s.type) {
                          var o = s.content.split(n),
                            r = o.reduce(function (e, i, s) {
                              return (
                                e.push({ type: "string", content: i }),
                                s !== o.length - 1 &&
                                  e.push(
                                    _n(
                                      _n({}, t),
                                      {},
                                      { type: "at", content: n }
                                    )
                                  ),
                                e
                              );
                            }, []);
                          1 === e.length ? (i = r) : i.push(r);
                        } else i.push(s);
                      }),
                      i
                    );
                  })(e, t).flat(1 / 0);
                }),
              t
            );
          },
        },
        watch: {},
        components: { TextToHtml: bn },
        beforeCreate: function () {},
        created: function () {},
        beforeMount: function () {},
        mounted: function () {},
        beforeDestroy: function () {},
        destroyed: function () {},
        methods: {
          getSpaceUrl: function (t) {
            var e = t.mid;
            return "//space.bilibili.com/".concat(e);
          },
        },
      },
      xn =
        (n(402),
        Object(xe.a)(
          Cn,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              { staticClass: "content-list" },
              [
                t._l(t.renderList, function (e, i) {
                  return [
                    "string" === e.type
                      ? n("text-to-html", {
                          key: i,
                          staticClass: "string",
                          attrs: { text: e.content, "trans-link": !0 },
                        })
                      : t._e(),
                    "at" === e.type
                      ? n(
                          "a",
                          {
                            key: i,
                            staticClass: "at",
                            attrs: {
                              href: t.getSpaceUrl(e),
                              target: "_blank",
                              title: e.nickname,
                            },
                            on: {
                              click: function (t) {
                                t.stopPropagation();
                              },
                            },
                          },
                          [t._v(t._s(e.content))]
                        )
                      : t._e(),
                  ];
                }),
              ],
              2
            );
          },
          [],
          !1,
          null,
          "b8d820e0",
          null
        ).exports);
    function kn(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function Sn(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? kn(Object(n), !0).forEach(function (e) {
              In(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : kn(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function In(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var jn = {
        props: [
          "show",
          "oid",
          "type",
          "root",
          "parent",
          "commentId",
          "parentUserName",
          "needAtString",
          "isDanmaku",
          "item",
        ],
        data: function () {
          return {
            message: "",
            needCaptcha: !1,
            captchaUrl: "",
            captchaCode: "",
          };
        },
        computed: Sn(
          Sn({}, Object(L.c)(["face", "uname"])),
          {},
          {
            myAvatarStyle: function () {
              var t =
                this.face || "//static.hdslb.com/images/member/noface.gif";
              return {
                "background-image": "url(".concat(
                  bt(t, 46, 46).srcUrl.replace(/^http:/, ""),
                  ")"
                ),
              };
            },
            bfsCaptchaUrl: function () {
              return this.captchaUrl
                ? bt(this.captchaUrl).oriUrl.replace(/^http:/, "")
                : "";
            },
          }
        ),
        watch: {
          show: function (t) {
            t && this.focusInput();
          },
        },
        methods: {
          focusInput: function () {
            var t = this;
            this.$nextTick(function () {
              t.$refs.textarea.focus();
            });
          },
          onSendButtonClick: function () {
            this.sendComment();
          },
          sendComment: function () {
            var t,
              e,
              n,
              i,
              s = this,
              o = "";
            this.message
              ? ((o = this.needAtString
                  ? "回复 @"
                      .concat(this.parentUserName, " :")
                      .concat(this.message)
                  : this.message),
                this.isDanmaku
                  ? (function () {
                      var t =
                          arguments.length > 0 && void 0 !== arguments[0]
                            ? arguments[0]
                            : {},
                        e = t.oid,
                        n = void 0 === e ? 0 : e,
                        i = t.type,
                        s = void 0 === i ? 1 : i,
                        o = t.msg,
                        r = t.aid,
                        a = t.progress,
                        c = t.color,
                        l = void 0 === c ? 16777215 : c,
                        u = t.fontsize,
                        d = void 0 === u ? 25 : u,
                        p = t.rnd;
                      return E({
                        method: "post",
                        url: "//api.bilibili.com/x/v2/dm/post",
                        data: {
                          oid: n,
                          type: s,
                          msg: o,
                          aid: r,
                          progress: a,
                          color: l,
                          fontsize: d,
                          rnd: p,
                          pool: 0,
                          mode: 1,
                          plat: 1,
                        },
                      });
                    })({
                      msg: this.message,
                      oid: this.oid,
                      aid:
                        null === (t = this.item) ||
                        void 0 === t ||
                        null === (e = t.danmu) ||
                        void 0 === e
                          ? void 0
                          : e.aid,
                      progress:
                        null === (n = this.item) ||
                        void 0 === n ||
                        null === (i = n.danmu) ||
                        void 0 === i
                          ? void 0
                          : i.progress,
                      rnd: Number(Math.random().toString().substring(8)),
                    })
                      .then(function () {
                        (s.message = ""),
                          (s.needCaptcha = !1),
                          (s.captchaUrl = ""),
                          (s.captchaCode = ""),
                          s.linkMsg(
                            s.$refs.sendButton,
                            "评论成功",
                            "success",
                            !0
                          ),
                          s.$emit("success");
                      })
                      .catch(function (t) {
                        (s.needCaptcha = !1),
                          (s.captchaUrl = ""),
                          (s.captchaCode = ""),
                          console.log("danmaku response error: ", t),
                          s.linkMsg(
                            s.$refs.sendButton,
                            (null == t ? void 0 : t.msg) || "评论失败",
                            "error",
                            !0
                          );
                      })
                  : (function () {
                      var t =
                          arguments.length > 0 && void 0 !== arguments[0]
                            ? arguments[0]
                            : {},
                        e = t.oid,
                        n = void 0 === e ? 0 : e,
                        i = t.type,
                        s = void 0 === i ? 0 : i,
                        o = t.root,
                        r = void 0 === o ? 0 : o,
                        a = t.parent,
                        c = void 0 === a ? 0 : a,
                        l = t.commentId,
                        u = void 0 === l ? 0 : l,
                        d = t.message,
                        p = t.code,
                        m = t.from;
                      return E({
                        method: "post",
                        url: "//api.bilibili.com/x/v2/reply/add",
                        data: {
                          oid: n,
                          type: s,
                          message: d,
                          root: r || c || u,
                          parent: c || u,
                          jsonp: "jsonp",
                          scene: "msg",
                          plat: 1,
                          code: p,
                          from: m,
                        },
                      });
                    })({
                      oid: this.oid,
                      type: this.type,
                      root: this.root,
                      parent: this.parent,
                      commentId: this.commentId,
                      code: this.captchaCode || void 0,
                      message: o,
                      from: "im-reply",
                    })
                      .then(function () {
                        (s.message = ""),
                          (s.needCaptcha = !1),
                          (s.captchaUrl = ""),
                          (s.captchaCode = ""),
                          s.linkMsg(
                            s.$refs.sendButton,
                            "评论成功",
                            "success",
                            !0
                          ),
                          s.$emit("success");
                      })
                      .catch(function (t) {
                        switch (t.code) {
                          case 12015:
                            (s.needCaptcha = !0),
                              (s.captchaCode = ""),
                              (s.captchaUrl = t.data.url),
                              s.linkMsg(
                                s.$refs.sendButton,
                                "请输入验证码",
                                "caution",
                                !0
                              );
                            break;
                          case -105:
                            (s.needCaptcha = !1),
                              (s.captchaUrl = ""),
                              (s.captchaCode = ""),
                              s.linkMsg(
                                s.$refs.sendButton,
                                "验证码错误",
                                "caution",
                                !0
                              );
                            break;
                          default:
                            s.linkMsg(s.$refs.sendButton, t.msg, "error", !0);
                        }
                      }))
              : this.linkMsg(
                  this.$refs.sendButton,
                  "你还没有评论！",
                  "caution",
                  !0
                );
          },
          updateCaptcha: function () {
            var t = this.captchaUrl.indexOf("&_ts=");
            this.captchaUrl =
              this.captchaUrl.substr(0, -1 === t ? this.captchaUrl.length : t) +
              "&_ts=" +
              Date.now();
          },
        },
      },
      On =
        (n(403),
        Object(xe.a)(
          jn,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              {
                directives: [
                  {
                    name: "show",
                    rawName: "v-show",
                    value: t.show,
                    expression: "show",
                  },
                ],
                staticClass: "reply-box",
                on: {
                  click: function (t) {
                    t.stopPropagation(), t.preventDefault();
                  },
                },
              },
              [
                n("div", { staticClass: "left-box" }, [
                  n("div", {
                    staticClass: "my-avatar",
                    style: t.myAvatarStyle,
                    attrs: { title: t.uname },
                  }),
                ]),
                n("div", { staticClass: "center-box" }, [
                  n("textarea", {
                    directives: [
                      {
                        name: "model",
                        rawName: "v-model",
                        value: t.message,
                        expression: "message",
                      },
                    ],
                    ref: "textarea",
                    staticClass: "reply-textarea",
                    attrs: {
                      name: "reply-box",
                      placeholder:
                        "请自觉遵守互联网相关的政策法规，严禁发布色情、暴力、反动的言论。",
                    },
                    domProps: { value: t.message },
                    on: {
                      input: function (e) {
                        e.target.composing || (t.message = e.target.value);
                      },
                    },
                  }),
                  t.needCaptcha
                    ? n("div", { staticClass: "tool-bar" }, [
                        n("div", { staticClass: "captcha-box" }, [
                          n("span", [t._v("验证码：")]),
                          n("input", {
                            directives: [
                              {
                                name: "model",
                                rawName: "v-model",
                                value: t.captchaCode,
                                expression: "captchaCode",
                              },
                            ],
                            staticClass: "captcha-input",
                            attrs: {
                              type: "text",
                              placeholder: "请输入验证码",
                            },
                            domProps: { value: t.captchaCode },
                            on: {
                              input: function (e) {
                                e.target.composing ||
                                  (t.captchaCode = e.target.value);
                              },
                            },
                          }),
                          n("img", {
                            staticClass: "captcha-img",
                            attrs: { src: t.bfsCaptchaUrl, alt: "验证码" },
                            on: { click: t.updateCaptcha },
                          }),
                        ]),
                      ])
                    : t._e(),
                ]),
                n("div", { staticClass: "right-box" }, [
                  n(
                    "button",
                    {
                      ref: "sendButton",
                      staticClass: "send-button",
                      on: { click: t.onSendButtonClick },
                    },
                    [t._v("\n      发表"), n("br"), t._v("\n      评论\n    ")]
                  ),
                ]),
              ]
            );
          },
          [],
          !1,
          null,
          "7eb71e24",
          null
        ).exports),
      Ln = {
        props: { show: null, title: String, content: String },
        components: { ImPopup: Re },
        methods: {
          onConfirm: function (t) {
            this.$emit("onConfirm", t);
          },
          onCancel: function (t) {
            this.$emit("onCancel", t);
          },
        },
      },
      Pn =
        (n(404),
        Object(xe.a)(
          Ln,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e(
              "div",
              {
                on: {
                  click: function (t) {
                    t.stopPropagation(), t.preventDefault();
                  },
                },
              },
              [
                e(
                  "im-popup",
                  {
                    staticClass: "confirm-popup",
                    attrs: { show: this.show, title: this.title },
                    on: { onConfirm: this.onConfirm, onCancel: this.onCancel },
                  },
                  [
                    e("div", { staticClass: "content-text" }, [
                      this._v(this._s(this.content)),
                    ]),
                  ]
                ),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "0e0f8639",
          null
        ).exports),
      An = n(66),
      En = n.n(An);
    function Tn(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function Mn(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? Tn(Object(n), !0).forEach(function (e) {
              Bn(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : Tn(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function Bn(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var Dn = {
        props: ["item"],
        data: function () {
          return {
            imageError: !1,
            replyBoxShow: !1,
            deletePopupShow: !1,
            likeState: 0,
          };
        },
        computed: Mn(
          Mn({}, Object(L.c)(["uname"])),
          {},
          {
            userList: function () {
              return [this.item.user];
            },
            replyTime: function () {
              return this.item.reply_time;
            },
            replyDesc: function () {
              var t = this.item.item.business,
                e = this.item.counts,
                n = this.item.is_multi;
              return t && "评论" !== t
                ? "弹幕" === t
                  ? this.targetId > 0
                    ? "回复了我的弹幕"
                    : "对我的弹幕发表了评论"
                  : n
                  ? "等人对我的".concat(t, "发表了").concat(e, "条评论")
                  : e > 1
                  ? "对我的".concat(t, "发表了").concat(e, "条评论")
                  : "对我的".concat(t, "发表了评论")
                : "回复了我的评论";
            },
            iamgeUrl: function () {
              var t = this.item.item.image || "";
              return bt(t, 60, 60, !0).srcUrl.replace(/^http:/, "");
            },
            imageBoxStyle: function () {
              return this.iamgeUrl || this.isDeleted
                ? this.imageError || this.isDeleted
                  ? "background-image: url(".concat(En.a, ")")
                  : "background-image: url(".concat(this.iamgeUrl, ")")
                : "";
            },
            textBoxContent: function () {
              return this.item.item.title || this.item.item.desc;
            },
            realReply: function () {
              return this.item.item.source_content || "";
            },
            originalReply: function () {
              var t = this.item.item.target_reply_content;
              return t ? "".concat(this.uname, " : ").concat(t) : "";
            },
            atList: function () {
              return this.item.item.at_details || [];
            },
            oid: function () {
              return this.item.item.subject_id;
            },
            root: function () {
              return this.item.item.root_id;
            },
            targetId: function () {
              return this.item.item.target_id;
            },
            type: function () {
              return this.item.item.business_id;
            },
            commentId: function () {
              return this.item.item.source_id;
            },
            replyId: function () {
              return this.item.id;
            },
            isDeleted: function () {
              return (
                !this.item.item.title &&
                !this.item.item.image &&
                !this.item.item.desc
              );
            },
            canReply: function () {
              return !this.isDeleted && !this.item.item.hide_reply_button;
            },
            canShowThumbsUp: function () {
              var t;
              return !(
                null !== (t = this.item.item) &&
                void 0 !== t &&
                t.hide_like_button
              );
            },
            needAtString: function () {
              return this.targetId;
            },
            isDanmaku: function () {
              var t, e, n, i;
              return (
                "弹幕" ===
                  (null === (t = this.item) ||
                  void 0 === t ||
                  null === (e = t.item) ||
                  void 0 === e
                    ? void 0
                    : e.business) ||
                "danmu" ===
                  (null === (n = this.item) ||
                  void 0 === n ||
                  null === (i = n.item) ||
                  void 0 === i
                    ? void 0
                    : i.type)
              );
            },
          }
        ),
        watch: {},
        components: {
          BasicListItem: un,
          ContentList: xn,
          ReplyBox: On,
          ConfirmPopup: Pn,
          SVGIcon: ve,
        },
        mounted: function () {
          this.likeState = this.item.item.like_state;
        },
        methods: {
          goToDetail: function (t) {
            if (
              !cn(t).some(function (t) {
                return "A" === t.nodeName || "BUTTON" === t.nodeName;
              })
            ) {
              this.$bpreport.click({
                event: "im_reply_click",
                spmId: "444.0",
                data: { type: this.item.item.type },
              });
              var e = this.item.item.uri;
              e &&
                (e.indexOf("#") < 0 &&
                  this.commentId &&
                  !this.isDanmaku &&
                  (e = "".concat(e, "#reply").concat(this.commentId)),
                window.open(e));
            }
          },
          onImageError: function () {
            this.imageError = !0;
          },
          showReplyBox: function () {
            this.$bpreport.click({
              event: "im_reply_reply_click",
              spmId: "444.0",
            }),
              (this.replyBoxShow = !this.replyBoxShow);
          },
          confirmDelete: function () {
            var t = this;
            this.$bpreport.click({ event: "im_reply_del", spmId: "444.0" }),
              T({ type: 1, id: this.replyId })
                .then(function () {
                  (t.deletePopupShow = !1),
                    setTimeout(function () {
                      t.$emit("delete");
                    }, 300);
                })
                .catch(function (e) {
                  t.linkMsg(t.$refs.deleteBtn, e.msg, "error", !0);
                });
          },
          onSpmClick: function () {
            this.$bpreport.click({
              event: "im_reply_space_click",
              spmId: "444.0",
            });
          },
          onCommentSuccess: function () {
            this.replyBoxShow = !1;
          },
          likeComment: function () {
            var t,
              e,
              n,
              i,
              s,
              o,
              r,
              a,
              c,
              l,
              u = this;
            "danmu" ===
            (null === (t = this.item) ||
            void 0 === t ||
            null === (e = t.item) ||
            void 0 === e
              ? void 0
              : e.type)
              ? ((n = {
                  oid: this.oid,
                  dmid: this.item.item.source_id,
                  op: 1 === this.likeState ? 2 : 1,
                }),
                (i = n.oid),
                (s = void 0 === i ? 0 : i),
                (o = n.dmid),
                (r = void 0 === o ? 0 : o),
                (a = n.op),
                (c = void 0 === a ? 1 : a),
                (l = n.from),
                E({
                  method: "post",
                  url: "//api.bilibili.com/x/v2/dm/thumbup/add",
                  data: {
                    oid: s,
                    dmid: r,
                    op: c,
                    scene: "msg",
                    from: void 0 === l ? "im-reply" : l,
                  },
                }))
                  .then(function () {
                    (u.likeState = 1 - u.likeState),
                      1 === u.likeState &&
                        u.linkMsg(u.$refs.likeBtn, "点赞成功", "success", !0);
                  })
                  .catch(function (t) {
                    u.linkMsg(u.$refs.likeBtn, t.msg, "error", !0);
                  })
              : (function (t) {
                  var e = t.oid,
                    n = void 0 === e ? 0 : e,
                    i = t.type,
                    s = void 0 === i ? 0 : i,
                    o = t.rpid,
                    r = void 0 === o ? 0 : o,
                    a = t.action,
                    c = void 0 === a ? 1 : a,
                    l = t.from;
                  return E({
                    method: "post",
                    url: "//api.bilibili.com/x/v2/reply/action",
                    data: {
                      oid: n,
                      type: s,
                      rpid: r,
                      action: c,
                      scene: "msg",
                      from: void 0 === l ? "im-reply" : l,
                    },
                  });
                })({
                  oid: this.oid,
                  type: this.type,
                  rpid: this.item.item.source_id,
                  action: 1 - this.likeState,
                  from: "im-reply",
                })
                  .then(function () {
                    (u.likeState = 1 - u.likeState),
                      1 === u.likeState &&
                        u.linkMsg(u.$refs.likeBtn, "点赞成功", "success", !0);
                  })
                  .catch(function (t) {
                    u.linkMsg(u.$refs.likeBtn, t.msg, "error", !0);
                  });
          },
        },
      },
      Nn =
        (n(405),
        n(406),
        Object(xe.a)(
          Dn,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              { staticClass: "reply-item", on: { click: t.goToDetail } },
              [
                n(
                  "basic-list-item",
                  {
                    attrs: {
                      "user-list": t.userList,
                      desc: t.replyDesc,
                      time: t.replyTime,
                    },
                    on: { "spm-click": t.onSpmClick },
                  },
                  [
                    n("template", { slot: "content" }, [
                      n(
                        "div",
                        { staticClass: "real-reply" },
                        [
                          n("content-list", {
                            attrs: {
                              content: t.realReply,
                              "at-list": t.atList,
                            },
                          }),
                        ],
                        1
                      ),
                      t.originalReply
                        ? n("div", { staticClass: "orginal-reply" }, [
                            t._v(t._s(t.originalReply) + "\n      "),
                          ])
                        : t._e(),
                    ]),
                    n("template", { slot: "action" }, [
                      t.canReply
                        ? n(
                            "button",
                            {
                              staticClass: "action-button",
                              class: { active: t.replyBoxShow },
                              on: { click: t.showReplyBox },
                            },
                            [
                              n("SVGIcon", {
                                staticClass: "action-icon",
                                class: { active: t.replyBoxShow },
                                attrs: { name: "reply" },
                              }),
                              t._v("\n        回复\n      "),
                            ],
                            1
                          )
                        : t._e(),
                      t.canReply || t.canShowThumbsUp
                        ? n(
                            "button",
                            {
                              ref: "likeBtn",
                              staticClass: "action-button",
                              class: { active: t.likeState },
                              on: { click: t.likeComment },
                            },
                            [
                              n("SVGIcon", {
                                staticClass: "action-icon",
                                class: { active: t.likeState },
                                attrs: { name: "dianzan" },
                              }),
                              t._v(
                                "\n        " +
                                  t._s(t.likeState ? "已赞" : "点赞") +
                                  "\n      "
                              ),
                            ],
                            1
                          )
                        : t._e(),
                      n(
                        "button",
                        {
                          ref: "deleteBtn",
                          staticClass: "action-button del-button",
                          on: {
                            click: function (e) {
                              t.deletePopupShow = !0;
                            },
                          },
                        },
                        [
                          n("SVGIcon", {
                            staticClass: "action-icon",
                            attrs: { name: "trash" },
                          }),
                          t._v("\n        删除该通知\n      "),
                        ],
                        1
                      ),
                    ]),
                    n("template", { slot: "right" }, [
                      t.imageBoxStyle
                        ? n(
                            "div",
                            {
                              staticClass: "image-box",
                              style: t.imageBoxStyle,
                              attrs: { title: t.textBoxContent },
                            },
                            [
                              t.iamgeUrl
                                ? n("img", {
                                    attrs: { src: t.iamgeUrl, alt: "hidden" },
                                    on: { error: t.onImageError },
                                  })
                                : t._e(),
                            ]
                          )
                        : t._e(),
                      !t.imageBoxStyle && t.textBoxContent
                        ? n(
                            "div",
                            {
                              staticClass: "text-box",
                              attrs: { title: t.textBoxContent },
                            },
                            [t._v(t._s(t.textBoxContent) + "\n      ")]
                          )
                        : t._e(),
                    ]),
                  ],
                  2
                ),
                n("reply-box", {
                  attrs: {
                    show: t.replyBoxShow,
                    oid: t.oid,
                    type: t.type,
                    root: t.root,
                    parent: t.commentId,
                    parentUserName: t.item.user.nickname,
                    needAtString: t.needAtString,
                    isDanmaku: t.isDanmaku,
                    item: t.item.item,
                    "comment-id": t.commentId,
                  },
                  on: { success: t.onCommentSuccess },
                }),
                n("confirm-popup", {
                  attrs: {
                    show: t.deletePopupShow,
                    title: "删除",
                    content: "删除该条通知后将无法恢复，是否继续？",
                  },
                  on: {
                    onConfirm: t.confirmDelete,
                    onCancel: function (e) {
                      t.deletePopupShow = !1;
                    },
                  },
                }),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "33b3ab9a",
          null
        ).exports);
    function Rn(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function $n(t) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (i, s) {
          var o = t.apply(e, n);
          function r(t) {
            Rn(o, i, s, r, a, "next", t);
          }
          function a(t) {
            Rn(o, i, s, r, a, "throw", t);
          }
          r(void 0);
        });
      };
    }
    function Un(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function Vn(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? Un(Object(n), !0).forEach(function (e) {
              zn(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : Un(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function zn(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var Hn = {
        props: [],
        data: function () {
          return {
            replyMeList: [],
            cursorObj: {},
            isLoading: !1,
            lastViewAt: 0,
          };
        },
        computed: Vn(
          Vn({}, Object(L.c)(["listLoadingNum"])),
          {},
          {
            isNothing: function () {
              return this.replyMeList.length < 1 && this.listLoadingNum < 1;
            },
            dividerIndex: function () {
              if (!this.lastViewAt) return NaN;
              for (var t = NaN, e = 0; e < this.replyMeList.length; e++)
                if (this.replyMeList[e].reply_time <= this.lastViewAt) {
                  t = e - 1;
                  break;
                }
              return t;
            },
          }
        ),
        watch: {},
        components: { MyTransition: nn, Nothing: on, Card: Ie, ReplyItem: Nn },
        beforeCreate: function () {},
        mounted: function () {
          var t = this;
          return $n(
            q.a.mark(function e() {
              return q.a.wrap(function (e) {
                for (;;)
                  switch ((e.prev = e.next)) {
                    case 0:
                      return (
                        ce.$on("Index:LoadMore", t.fetchList),
                        t.setListLoadingNum(!0),
                        (e.next = 4),
                        t.fetchList()
                      );
                    case 4:
                      t.setListLoadingNum(!1),
                        t.$bpreport.pv({ spmId: "444.0", logId: "000281" });
                    case 6:
                    case "end":
                      return e.stop();
                  }
              }, e);
            })
          )();
        },
        beforeDestroy: function () {
          ce.$off("Index:LoadMore", this.fetchList);
        },
        methods: Vn(
          Vn({}, Object(L.b)(["setListLoadingNum"])),
          {},
          {
            fetchList: function () {
              var t = this;
              return $n(
                q.a.mark(function e() {
                  var n;
                  return q.a.wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            if (!t.cursorObj.is_end && !t.isLoading) {
                              e.next = 2;
                              break;
                            }
                            return e.abrupt("return");
                          case 2:
                            return (
                              (t.isLoading = !0),
                              (e.prev = 3),
                              (e.next = 6),
                              tn({
                                id: t.cursorObj.id,
                                lastTime: t.cursorObj.time,
                              })
                            );
                          case 6:
                            (n = e.sent),
                              (t.replyMeList = t.replyMeList.concat(
                                n.items || []
                              )),
                              (t.cursorObj = n.cursor || {}),
                              t.lastViewAt || (t.lastViewAt = n.last_view_at),
                              (e.next = 15);
                            break;
                          case 12:
                            (e.prev = 12),
                              (e.t0 = e.catch(3)),
                              console.error(e.t0);
                          case 15:
                            t.isLoading = !1;
                          case 16:
                          case "end":
                            return e.stop();
                        }
                    },
                    e,
                    null,
                    [[3, 12]]
                  );
                })
              )();
            },
            handleDelete: function (t) {
              this.replyMeList.splice(t, 1);
            },
          }
        ),
      },
      Fn =
        (n(407),
        Object(xe.a)(
          Hn,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              { staticClass: "reply" },
              [
                n(
                  "my-transition",
                  { attrs: { appear: !0 } },
                  [
                    t.isNothing
                      ? t._e()
                      : n(
                          "card",
                          { key: "reply", staticClass: "reply-card" },
                          [
                            t._l(t.replyMeList, function (e, i) {
                              return [
                                n("reply-item", {
                                  key: e.id,
                                  attrs: { item: e },
                                  on: {
                                    delete: function (e) {
                                      return t.handleDelete(i);
                                    },
                                  },
                                }),
                                i === t.dividerIndex
                                  ? n(
                                      "div",
                                      {
                                        key: "dl_" + e.id,
                                        staticClass: "divider-last",
                                      },
                                      [
                                        n("div"),
                                        n("span", [t._v("上次看到这里")]),
                                        n("div"),
                                      ]
                                    )
                                  : t._e(),
                                i !== t.dividerIndex &&
                                i !== t.replyMeList.length - 1
                                  ? n("div", {
                                      key: "d_" + e.id,
                                      staticClass: "divider",
                                    })
                                  : t._e(),
                              ];
                            }),
                          ],
                          2
                        ),
                    t.isNothing && !t.isLoading
                      ? n("nothing", { key: "nothing" })
                      : t._e(),
                  ],
                  1
                ),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "1df9d092",
          null
        ).exports);
    function Gn() {
      var t =
          arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
        e = t.id,
        n = t.lastTime;
      return E({
        method: "get",
        url: "//api.bilibili.com/x/msgfeed/at",
        data: { id: e, at_time: n },
      });
    }
    var Zn = {
        props: ["item"],
        data: function () {
          return { imageError: !1, replyBoxShow: !1, deletePopupShow: !1 };
        },
        computed: {
          userList: function () {
            return [this.item.user];
          },
          atTime: function () {
            return this.item.at_time;
          },
          atDesc: function () {
            var t = this.item.item.business;
            return "在".concat(t, "中@了我");
          },
          iamgeUrl: function () {
            var t = this.item.item.image || "";
            return bt(t, 60, 60, !0).srcUrl.replace(/^http:/, "");
          },
          imageBoxStyle: function () {
            return this.iamgeUrl || this.isDeleted
              ? this.imageError || this.isDeleted
                ? "background-image: url(".concat(En.a, ")")
                : "background-image: url(".concat(this.iamgeUrl, ")")
              : "";
          },
          textBoxContent: function () {
            return this.item.item.title || this.item.item.desc;
          },
          realAt: function () {
            return this.item.item.source_content || "";
          },
          atList: function () {
            return this.item.item.at_details || [];
          },
          oid: function () {
            return this.item.item.subject_id;
          },
          root: function () {
            return this.item.item.root_id;
          },
          targetId: function () {
            return this.item.item.target_id;
          },
          type: function () {
            return this.item.item.business_id;
          },
          commentId: function () {
            return this.item.item.source_id;
          },
          atId: function () {
            return this.item.id;
          },
          isDeleted: function () {
            return (
              !this.item.item.title &&
              !this.item.item.image &&
              !this.item.item.desc
            );
          },
          canReply: function () {
            return !this.isDeleted && !this.item.item.hide_reply_button;
          },
          needAtString: function () {
            return this.targetId;
          },
        },
        watch: {},
        components: {
          BasicListItem: un,
          ContentList: xn,
          ConfirmPopup: Pn,
          ReplyBox: On,
          SVGIcon: ve,
        },
        beforeCreate: function () {},
        created: function () {},
        beforeMount: function () {},
        mounted: function () {},
        beforeDestroy: function () {},
        destroyed: function () {},
        methods: {
          goToDetail: function (t) {
            if (
              !t.target ||
              ("A" !== t.target.nodeName && "BUTTON" !== t.target.nodeName)
            ) {
              this.$bpreport.click({
                event: "im_at_click",
                spmId: "444.1",
                data: { type: this.item.item.type },
              });
              var e = this.item.item.uri;
              e &&
                (e.indexOf("#") < 0 &&
                  this.commentId &&
                  (e = "".concat(e, "#reply").concat(this.commentId)),
                window.open(e));
            }
          },
          onImageError: function () {
            this.imageError = !0;
          },
          confirmDelete: function () {
            var t = this;
            this.$bpreport.click({ event: "im_at_del", spmId: "444.1" }),
              T({ type: 2, id: this.atId })
                .then(function () {
                  (t.deletePopupShow = !1),
                    setTimeout(function () {
                      t.$emit("delete");
                    }, 300);
                })
                .catch(function (e) {
                  t.linkMsg(t.$refs.deleteBtn, e.msg, "error", !0);
                });
          },
          onSpmClick: function () {
            this.$bpreport.click({
              event: "im_at_space_click",
              spmId: "444.1",
            });
          },
          onCommentSuccess: function () {
            this.replyBoxShow = !1;
          },
          showReplyBox: function () {
            this.$bpreport.click({
              event: "im_at_reply_click",
              spmId: "444.1",
            }),
              (this.replyBoxShow = !this.replyBoxShow);
          },
        },
      },
      qn =
        (n(408),
        Object(xe.a)(
          Zn,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              { staticClass: "at-item", on: { click: t.goToDetail } },
              [
                n(
                  "basic-list-item",
                  {
                    attrs: {
                      "user-list": t.userList,
                      desc: t.atDesc,
                      time: t.atTime,
                    },
                    on: { "spm-click": t.onSpmClick },
                  },
                  [
                    n("template", { slot: "content" }, [
                      n(
                        "div",
                        { staticClass: "real-at" },
                        [
                          n("content-list", {
                            attrs: { content: t.realAt, "at-list": t.atList },
                          }),
                        ],
                        1
                      ),
                    ]),
                    n("template", { slot: "action" }, [
                      t.canReply
                        ? n(
                            "button",
                            {
                              staticClass: "action-button",
                              class: { active: t.replyBoxShow },
                              on: { click: t.showReplyBox },
                            },
                            [
                              n("SVGIcon", {
                                staticClass: "action-icon",
                                class: { active: t.replyBoxShow },
                                attrs: { name: "reply" },
                              }),
                              t._v("\n        回复\n      "),
                            ],
                            1
                          )
                        : t._e(),
                      n(
                        "button",
                        {
                          ref: "deleteBtn",
                          staticClass: "action-button del-button",
                          on: {
                            click: function (e) {
                              t.deletePopupShow = !0;
                            },
                          },
                        },
                        [
                          n("SVGIcon", {
                            staticClass: "action-icon",
                            attrs: { name: "trash" },
                          }),
                          t._v("\n        删除该通知\n      "),
                        ],
                        1
                      ),
                    ]),
                    n("template", { slot: "right" }, [
                      t.imageBoxStyle
                        ? n(
                            "div",
                            {
                              staticClass: "image-box",
                              style: t.imageBoxStyle,
                              attrs: { title: t.textBoxContent },
                            },
                            [
                              t.iamgeUrl
                                ? n("img", {
                                    attrs: { src: t.iamgeUrl, alt: "hidden" },
                                    on: { error: t.onImageError },
                                  })
                                : t._e(),
                            ]
                          )
                        : t._e(),
                      !t.imageBoxStyle && t.textBoxContent
                        ? n(
                            "div",
                            {
                              staticClass: "text-box",
                              attrs: { title: t.textBoxContent },
                            },
                            [t._v(t._s(t.textBoxContent) + "\n      ")]
                          )
                        : t._e(),
                    ]),
                  ],
                  2
                ),
                n("reply-box", {
                  attrs: {
                    show: t.replyBoxShow,
                    oid: t.oid,
                    type: t.type,
                    root: t.root,
                    parent: t.commentId,
                    parentUserName: t.item.user.nickname,
                    needAtString: t.needAtString,
                    "comment-id": t.commentId,
                  },
                  on: { success: t.onCommentSuccess },
                }),
                n("confirm-popup", {
                  attrs: {
                    show: t.deletePopupShow,
                    title: "删除",
                    content: "删除该条通知后将无法恢复，是否继续？",
                  },
                  on: {
                    onConfirm: t.confirmDelete,
                    onCancel: function (e) {
                      t.deletePopupShow = !1;
                    },
                  },
                }),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "3882f668",
          null
        ).exports);
    function Kn(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function Wn(t) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (i, s) {
          var o = t.apply(e, n);
          function r(t) {
            Kn(o, i, s, r, a, "next", t);
          }
          function a(t) {
            Kn(o, i, s, r, a, "throw", t);
          }
          r(void 0);
        });
      };
    }
    function Jn(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function Yn(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? Jn(Object(n), !0).forEach(function (e) {
              Qn(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : Jn(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function Qn(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var Xn = {
        props: [],
        data: function () {
          return { atMeList: [], cursorObj: {}, isLoading: !1 };
        },
        computed: Yn(
          Yn({}, Object(L.c)(["listLoadingNum"])),
          {},
          {
            isNothing: function () {
              return this.atMeList.length < 1 && this.listLoadingNum < 1;
            },
          }
        ),
        watch: {},
        components: { MyTransition: nn, Nothing: on, Card: Ie, AtItem: qn },
        mounted: function () {
          var t = this;
          return Wn(
            q.a.mark(function e() {
              return q.a.wrap(function (e) {
                for (;;)
                  switch ((e.prev = e.next)) {
                    case 0:
                      return (
                        ce.$on("Index:LoadMore", t.fetchList),
                        t.setListLoadingNum(!0),
                        (e.next = 4),
                        t.fetchList()
                      );
                    case 4:
                      t.setListLoadingNum(!1),
                        t.$bpreport.pv({ spmId: "444.1", logId: "000281" });
                    case 6:
                    case "end":
                      return e.stop();
                  }
              }, e);
            })
          )();
        },
        beforeDestroy: function () {
          ce.$off("Index:LoadMore", this.fetchList);
        },
        methods: Yn(
          Yn({}, Object(L.b)(["setListLoadingNum"])),
          {},
          {
            fetchList: function () {
              var t = this;
              return Wn(
                q.a.mark(function e() {
                  var n;
                  return q.a.wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            if (!t.cursorObj.is_end && !t.isLoading) {
                              e.next = 2;
                              break;
                            }
                            return e.abrupt("return");
                          case 2:
                            return (
                              (t.isLoading = !0),
                              (e.prev = 3),
                              (e.next = 6),
                              Gn({
                                id: t.cursorObj.id,
                                lastTime: t.cursorObj.time,
                              })
                            );
                          case 6:
                            (n = e.sent),
                              (t.atMeList = t.atMeList.concat(n.items || [])),
                              (t.cursorObj = n.cursor || {}),
                              (e.next = 14);
                            break;
                          case 11:
                            (e.prev = 11),
                              (e.t0 = e.catch(3)),
                              console.error(e.t0);
                          case 14:
                            t.isLoading = !1;
                          case 15:
                          case "end":
                            return e.stop();
                        }
                    },
                    e,
                    null,
                    [[3, 11]]
                  );
                })
              )();
            },
            handleDelete: function (t) {
              this.atMeList.splice(t, 1);
            },
          }
        ),
      },
      ti = Object(xe.a)(
        Xn,
        function () {
          var t = this,
            e = t.$createElement,
            n = t._self._c || e;
          return n(
            "div",
            { staticClass: "at" },
            [
              n(
                "my-transition",
                { attrs: { appear: !0 } },
                [
                  t.isNothing
                    ? t._e()
                    : n(
                        "card",
                        { key: "at", staticClass: "at-card" },
                        t._l(t.atMeList, function (e, i) {
                          return n("at-item", {
                            key: e.item.id,
                            attrs: { item: e },
                            on: {
                              delete: function (e) {
                                return t.handleDelete(i);
                              },
                            },
                          });
                        }),
                        1
                      ),
                  t.isNothing && !t.isLoading
                    ? n("nothing", { key: "nothing" })
                    : t._e(),
                ],
                1
              ),
            ],
            1
          );
        },
        [],
        !1,
        null,
        "8fa938c2",
        null
      ).exports;
    function ei(t) {
      var e = t.tp,
        n = t.id,
        i = t.notice_state;
      return E({
        method: "post",
        url: "//api.bilibili.com/x/msgfeed/notice",
        data: {
          mobi_app: "web",
          platform: "web",
          tp: e,
          id: n,
          notice_state: i,
        },
      });
    }
    function ni(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function ii(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? ni(Object(n), !0).forEach(function (e) {
              si(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : ni(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function si(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var oi = {
      components: { BasicListItem: un, SVGIcon: ve, ConfirmPopup: Pn },
      props: ["item", "latest"],
      data: function () {
        return {
          imageError: !1,
          noticeState: 0,
          noticePopupShow: !1,
          deletePopupShow: !1,
        };
      },
      mounted: function () {
        this.noticeState = this.item.notice_state;
      },
      computed: {
        likeDesc: function () {
          var t = "赞了我的".concat(this.item.item.business || "");
          if (this.item.counts > 2) {
            var e =
              this.item.counts > 1e4
                ? String(Math.floor(this.item.counts / 1e3) / 10).concat("万")
                : this.item.counts;
            t = (
              this.latest ? "等 ".concat(e, " 人") : "等总计 ".concat(e, " 人")
            ).concat(t);
          }
          return t;
        },
        imageUrl: function () {
          var t = this.item.item.image || "";
          return bt(t, 60, 60, !0).srcUrl.replace(/^http:/, "");
        },
        imageBoxStyle: function () {
          return this.imageUrl || this.isDeleted
            ? this.imageError || this.isDeleted
              ? "background-image: url(".concat(En.a, ")")
              : "background-image: url(".concat(this.imageUrl, ")")
            : "";
        },
        textBoxContent: function () {
          return this.item.item.title || this.item.item.desc;
        },
        isDeleted: function () {
          return (
            !this.item.item.title &&
            !this.item.item.image &&
            !this.item.item.desc
          );
        },
      },
      methods: {
        goToDetail: function () {
          this.$bpreport.click({
            event: "im_like_click",
            spmId: "444.2",
            data: { type: this.item.item.type },
          });
          var t = this.item.item.uri,
            e = this.item.item.item_id;
          if (t) {
            if (/h\.bilibili.com\/ywh/.test(t)) {
              var n = t.split("h.bilibili.com/ywh/").pop();
              t = "https://t.bilibili.com/".concat(n, "?type=2");
            }
            /dmid=/.test(t) || (t += e ? "#reply".concat(e) : ""),
              window.open(t);
          }
        },
        toLikeDetail: function () {
          var t = ii(ii({}, this.item), {}, { latest: this.latest });
          this.$router.push(
            "/love/".concat(t.id).concat(t.latest ? "?latest=true" : "")
          );
        },
        onImageError: function () {
          this.imageError = !0;
        },
        onSpmClick: function (t) {
          "toLikeDetail" === t.type
            ? this.$bpreport.click({
                event: "im_like_click",
                spmId: "444.2",
                data: { type: this.item.item.type },
              })
            : this.$bpreport.click({
                event: "im_like_space_click",
                spmId: "444.2",
              });
        },
        confirmDelete: function () {
          var t = this;
          T({ type: 0, id: this.item.id })
            .then(function () {
              (t.deletePopupShow = !1),
                setTimeout(function () {
                  t.$emit("delete");
                }, 300);
            })
            .catch(function (e) {
              t.linkMsg(t.$refs.deleteBtn, e.msg, "error", !0);
            });
        },
        toggleNotice: function () {
          var t = this;
          0 === this.noticeState
            ? (this.noticePopupShow = !0)
            : ei({ tp: 0, id: this.item.id, notice_state: 0 }).then(
                function () {
                  t.noticeState = 0;
                }
              );
        },
        confirmNotice: function () {
          var t = this;
          (this.noticePopupShow = !1),
            ei({ tp: 0, id: this.item.id, notice_state: 1 }).then(function () {
              t.noticeState = 1;
            });
        },
      },
    };
    n(409);
    function ri(t) {
      return (
        (function (t) {
          if (Array.isArray(t)) return ai(t);
        })(t) ||
        (function (t) {
          if (
            ("undefined" != typeof Symbol && null != t[Symbol.iterator]) ||
            null != t["@@iterator"]
          )
            return Array.from(t);
        })(t) ||
        (function (t, e) {
          if (!t) return;
          if ("string" == typeof t) return ai(t, e);
          var n = Object.prototype.toString.call(t).slice(8, -1);
          "Object" === n && t.constructor && (n = t.constructor.name);
          if ("Map" === n || "Set" === n) return Array.from(t);
          if (
            "Arguments" === n ||
            /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
          )
            return ai(t, e);
        })(t) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function ai(t, e) {
      (null == e || e > t.length) && (e = t.length);
      for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
      return i;
    }
    function ci(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function li(t) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (i, s) {
          var o = t.apply(e, n);
          function r(t) {
            ci(o, i, s, r, a, "next", t);
          }
          function a(t) {
            ci(o, i, s, r, a, "throw", t);
          }
          r(void 0);
        });
      };
    }
    function ui(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function di(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? ui(Object(n), !0).forEach(function (e) {
              pi(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : ui(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function pi(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var mi = {
        components: {
          MyTransition: nn,
          Nothing: on,
          Card: Ie,
          LoveItem: Object(xe.a)(
            oi,
            function () {
              var t = this,
                e = t.$createElement,
                n = t._self._c || e;
              return n(
                "div",
                { staticClass: "love-item" },
                [
                  n(
                    "basic-list-item",
                    {
                      attrs: {
                        "user-list": t.item.users || [],
                        desc: t.likeDesc,
                        time: t.item.like_time,
                        likeItem: Object.assign({}, t.item, {
                          latest: t.latest,
                        }),
                      },
                      on: {
                        "spm-click": t.onSpmClick,
                        "to-like-detail": t.toLikeDetail,
                      },
                    },
                    [
                      n("template", { slot: "right" }, [
                        n(
                          "div",
                          { staticClass: "right-section" },
                          [
                            t.noticeState
                              ? n("SVGIcon", {
                                  staticClass: "notice-icon",
                                  attrs: { name: "bell-full" },
                                })
                              : t._e(),
                            t.imageBoxStyle
                              ? n(
                                  "div",
                                  {
                                    staticClass: "image-box",
                                    style: t.imageBoxStyle,
                                    attrs: { title: t.textBoxContent },
                                    on: { click: t.goToDetail },
                                  },
                                  [
                                    t.imageUrl
                                      ? n("img", {
                                          attrs: {
                                            src: t.imageUrl,
                                            alt: "hidden",
                                          },
                                          on: { error: t.onImageError },
                                        })
                                      : t._e(),
                                  ]
                                )
                              : t._e(),
                            !t.imageBoxStyle && t.textBoxContent
                              ? n(
                                  "div",
                                  {
                                    staticClass: "text-box",
                                    attrs: { title: t.textBoxContent },
                                    on: { click: t.goToDetail },
                                  },
                                  [t._v(t._s(t.textBoxContent) + "\n        ")]
                                )
                              : t._e(),
                          ],
                          1
                        ),
                      ]),
                      n("template", { slot: "action" }, [
                        n(
                          "button",
                          {
                            ref: "deleteBtn",
                            staticClass: "action-button",
                            on: {
                              click: function (e) {
                                t.deletePopupShow = !0;
                              },
                            },
                          },
                          [
                            n("SVGIcon", {
                              staticClass: "action-icon",
                              attrs: { name: "trash" },
                            }),
                            t._v("\n        删除该通知\n      "),
                          ],
                          1
                        ),
                        n(
                          "button",
                          {
                            staticClass: "action-button",
                            on: { click: t.toggleNotice },
                          },
                          [
                            n("SVGIcon", {
                              staticClass: "action-icon",
                              attrs: {
                                name: "bell-empty",
                                type: t.noticeState ? "active" : "default",
                              },
                            }),
                            t._v(
                              "\n        " +
                                t._s(t.noticeState ? "接收通知" : "不再通知") +
                                "\n      "
                            ),
                          ],
                          1
                        ),
                      ]),
                    ],
                    2
                  ),
                  n("confirm-popup", {
                    attrs: {
                      show: t.deletePopupShow,
                      title: "删除",
                      content:
                        "该条通知删除后，当有新点赞时会重新出现在列表，是否继续？",
                    },
                    on: {
                      onConfirm: t.confirmDelete,
                      onCancel: function (e) {
                        t.deletePopupShow = !1;
                      },
                    },
                  }),
                  n("confirm-popup", {
                    attrs: {
                      show: t.noticePopupShow,
                      title: "不再通知",
                      content:
                        "这条内容的点赞将不再通知，但仍可在列表内查看，是否继续？",
                    },
                    on: {
                      onConfirm: t.confirmNotice,
                      onCancel: function (e) {
                        t.noticePopupShow = !1;
                      },
                    },
                  }),
                ],
                1
              );
            },
            [],
            !1,
            null,
            "f89f2132",
            null
          ).exports,
        },
        data: function () {
          return {
            latestLikeList: [],
            likeList: [],
            cursorObj: {},
            isLoading: !1,
          };
        },
        computed: di(
          di({}, Object(L.c)(["listLoadingNum"])),
          {},
          {
            isNothing: function () {
              return (
                this.likeList.length < 1 &&
                this.latestLikeList.length < 1 &&
                this.listLoadingNum < 1
              );
            },
          }
        ),
        mounted: function () {
          var t = this;
          return li(
            q.a.mark(function e() {
              return q.a.wrap(function (e) {
                for (;;)
                  switch ((e.prev = e.next)) {
                    case 0:
                      return (
                        ce.$on("Index:LoadMore", t.fetchList),
                        t.setListLoadingNum(!0),
                        (e.next = 4),
                        t.fetchList()
                      );
                    case 4:
                      t.setListLoadingNum(!1),
                        t.$bpreport.pv({ spmId: "444.2", logId: "000281" });
                    case 6:
                    case "end":
                      return e.stop();
                  }
              }, e);
            })
          )();
        },
        beforeDestroy: function () {
          ce.$off("Index:LoadMore", this.fetchList);
        },
        methods: di(
          di({}, Object(L.b)(["setListLoadingNum"])),
          {},
          {
            fetchList: function () {
              var t = this;
              return li(
                q.a.mark(function e() {
                  var n, i;
                  return q.a.wrap(
                    function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            if (!t.cursorObj.is_end && !t.isLoading) {
                              e.next = 2;
                              break;
                            }
                            return e.abrupt("return");
                          case 2:
                            return (
                              (t.isLoading = !0),
                              (e.prev = 3),
                              (e.next = 6),
                              (s = {
                                lastId: t.cursorObj.id,
                                lastTime: t.cursorObj.time,
                              }),
                              (o = void 0),
                              (r = void 0),
                              (o = s.lastId),
                              (r = s.lastTime),
                              E({
                                method: "get",
                                url: "//api.bilibili.com/x/msgfeed/like",
                                data: { id: o, like_time: r, platform: "web" },
                              })
                            );
                          case 6:
                            (i = e.sent),
                              0 === t.latestLikeList.length &&
                                ((t.latestLikeList = i.latest.items || []),
                                sessionStorage.setItem(
                                  "likeListLastViewAt",
                                  i.latest.last_view_at
                                )),
                              (n = t.likeList).push.apply(
                                n,
                                ri(i.total.items || [])
                              ),
                              (t.cursorObj = i.total.cursor || {}),
                              (e.next = 15);
                            break;
                          case 12:
                            (e.prev = 12),
                              (e.t0 = e.catch(3)),
                              console.error(e.t0);
                          case 15:
                            t.isLoading = !1;
                          case 16:
                          case "end":
                            return e.stop();
                        }
                      var s, o, r;
                    },
                    e,
                    null,
                    [[3, 12]]
                  );
                })
              )();
            },
            handleDelete: function (t, e) {
              e ? this.latestLikeList.splice(t, 1) : this.likeList.splice(t, 1);
            },
          }
        ),
      },
      fi =
        (n(410),
        Object(xe.a)(
          mi,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              { staticClass: "love" },
              [
                n(
                  "my-transition",
                  { attrs: { appear: !0 } },
                  [
                    !t.isNothing && t.latestLikeList.length > 0
                      ? n(
                          "card",
                          { key: "latest", staticClass: "love-card" },
                          [
                            n("div", { staticClass: "header" }, [t._v("最新")]),
                            t._l(t.latestLikeList, function (e, i) {
                              return n("love-item", {
                                key: e.id,
                                attrs: { item: e, latest: !0 },
                                on: {
                                  delete: function (e) {
                                    return t.handleDelete(i, !0);
                                  },
                                },
                              });
                            }),
                          ],
                          2
                        )
                      : t._e(),
                    !t.isNothing && t.likeList.length > 0
                      ? n(
                          "card",
                          { key: "love", staticClass: "love-card" },
                          [
                            t.latestLikeList.length > 0
                              ? n("div", { staticClass: "header" }, [
                                  t._v("累计"),
                                ])
                              : t._e(),
                            t._l(t.likeList, function (e, i) {
                              return n("love-item", {
                                key: e.id,
                                attrs: { item: e },
                                on: {
                                  delete: function (e) {
                                    return t.handleDelete(i);
                                  },
                                },
                              });
                            }),
                          ],
                          2
                        )
                      : t._e(),
                    t.isNothing && !t.isLoading
                      ? n("nothing", { key: "nothing" })
                      : t._e(),
                  ],
                  1
                ),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "2cde8a84",
          null
        ).exports),
      hi = {
        props: ["item"],
        data: function () {
          return { followButtonHover: !1 };
        },
        computed: {},
        watch: {},
        components: { BasicListItem: un },
        beforeCreate: function () {},
        created: function () {},
        beforeMount: function () {},
        mounted: function () {},
        beforeDestroy: function () {},
        destroyed: function () {},
        methods: {
          followButtonText: function (t) {
            return t.user.follow
              ? this.followButtonHover
                ? "取消关注"
                : "已关注"
              : "关注";
          },
          onSpmClick: function () {
            for (var t = arguments.length, e = new Array(t), n = 0; n < t; n++)
              e[n] = arguments[n];
            this.$emit.apply(this, ["onSpmClick"].concat(e));
          },
          toggleFollow: function (t) {
            var e = this.$refs.followBtn;
            this.$emit("toggleFollow", { user: t, ref: e });
          },
        },
      };
    n(411);
    function gi(t) {
      return (
        (function (t) {
          if (Array.isArray(t)) return vi(t);
        })(t) ||
        (function (t) {
          if (
            ("undefined" != typeof Symbol && null != t[Symbol.iterator]) ||
            null != t["@@iterator"]
          )
            return Array.from(t);
        })(t) ||
        (function (t, e) {
          if (!t) return;
          if ("string" == typeof t) return vi(t, e);
          var n = Object.prototype.toString.call(t).slice(8, -1);
          "Object" === n && t.constructor && (n = t.constructor.name);
          if ("Map" === n || "Set" === n) return Array.from(t);
          if (
            "Arguments" === n ||
            /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
          )
            return vi(t, e);
        })(t) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function vi(t, e) {
      (null == e || e > t.length) && (e = t.length);
      for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
      return i;
    }
    var bi = {
        props: ["item"],
        components: {
          MyTransition: nn,
          Card: Ie,
          TextToHtml: bn,
          LoveUserItem: Object(xe.a)(
            hi,
            function () {
              var t = this,
                e = t.$createElement,
                n = t._self._c || e;
              return n(
                "basic-list-item",
                {
                  attrs: {
                    "user-list": [t.item.user],
                    desc: "赞了我",
                    time: t.item.like_time,
                  },
                  on: { "spm-click": t.onSpmClick },
                },
                [
                  n("template", { slot: "right" }, [
                    n("button", {
                      ref: "followBtn",
                      class: [
                        "follow-btn",
                        t.item.user.follow ? "inactive" : "active",
                      ],
                      domProps: {
                        textContent: t._s(t.followButtonText(t.item)),
                      },
                      on: {
                        mouseenter: function () {
                          t.followButtonHover = !0;
                        },
                        mouseleave: function () {
                          t.followButtonHover = !1;
                        },
                        click: function (e) {
                          return t.toggleFollow(t.item.user);
                        },
                      },
                    }),
                  ]),
                ],
                2
              );
            },
            [],
            !1,
            null,
            "5a558a68",
            null
          ).exports,
        },
        data: function () {
          return {
            likeItem: null,
            likeList: [],
            cursorObj: { pn: 1 },
            isLoading: !1,
            likeListLastViewAt: 0,
            deletePlaceholder: En.a,
            imageError: !1,
          };
        },
        computed: {
          isDeleted: function () {
            return (
              this.likeItem &&
              !this.likeItem.title &&
              !this.likeItem.image &&
              !this.likeItem.desc
            );
          },
          contentText: function () {
            return this.likeItem
              ? this.isDeleted
                ? "".concat(this.likeItem.business, "资源已失效")
                : ""
                    .concat(this.likeItem.business, "：")
                    .concat(this.likeItem.title || this.likeItem.desc || "")
              : "";
          },
          imageUrl: function () {
            var t = (this.likeItem && this.likeItem.image) || "";
            return bt(t, 60, 60, !0).srcUrl.replace(/^http:/, "");
          },
          imageBoxStyle: function () {
            return this.imageUrl || this.isDeleted
              ? this.imageError || this.isDeleted
                ? "background-image: url(".concat(En.a, ")")
                : "background-image: url(".concat(this.imageUrl, ")")
              : "";
          },
        },
        created: function () {
          (this.likeListLastViewAt =
            parseInt(sessionStorage.getItem("likeListLastViewAt")) || 0),
            ce.$on("Index:LoadMore", this.fetchList),
            this.fetchList();
        },
        beforeDestroy: function () {
          ce.$off("Index:LoadMore", this.fetchList);
        },
        methods: {
          fetchList: function () {
            var t,
              e,
              n,
              i,
              s,
              o,
              r = this;
            this.cursorObj.is_end ||
              this.isLoading ||
              ((this.isLoading = !0),
              ((t = {
                cardId: this.$route.params.id,
                lastViewAt: this.$route.query.latest
                  ? this.likeListLastViewAt
                  : 0,
                pn: this.cursorObj.pn,
              }),
              (e = t.cardId),
              (n = t.lastId),
              (i = t.lastTime),
              (s = t.lastViewAt),
              (o = t.pn),
              E({
                method: "get",
                url: "//api.bilibili.com/x/msgfeed/like_detail",
                data: {
                  card_id: e,
                  id: n,
                  like_time: i,
                  last_view_at: s,
                  pn: o,
                },
              }))
                .then(function (t) {
                  var e;
                  (r.isLoading = !1),
                    (r.likeItem = t.card),
                    (e = r.likeList).push.apply(e, gi(t.items || [])),
                    (r.cursorObj.is_end = t.page.is_end),
                    (r.cursorObj.pn += 1);
                })
                .catch(function (t) {
                  (r.isLoading = !1),
                    console.error(t),
                    r.linkMsg(
                      document.querySelector("#console-error"),
                      "".concat(t.msg || t.message),
                      "error"
                    ),
                    -404 === t.code && r.$router.push("/love");
                }));
          },
          toggleFollow: function (t) {
            var e = this,
              n = t.user,
              i = t.ref,
              s = n.follow ? 2 : 1;
            (function (t) {
              var e = t.fid,
                n = t.act;
              return E({
                method: "post",
                url: "//api.bilibili.com/x/relation/modify",
                data: { fid: e, act: n, re_src: 235 },
              });
            })({ fid: n.mid, act: s })
              .then(function () {
                (n.follow = 1 === s),
                  1 === s && e.handleSetGroup(n.mid, n.nickname, i);
              })
              .catch(function (t) {
                console.error(t),
                  e.linkMsg(i, "".concat(t.msg || t.message), "caution");
              });
          },
          handleSetGroup: function (t, e, n) {
            var i = this,
              s = n,
              o = function () {
                window.followGroupDialog(t, e, {
                  title: "设置分组",
                  onSubmitError: function (t) {
                    document.querySelector(".follow-dialog-wrap").remove(),
                      i.linkMsg(s, "加入分组失败，".concat(t), "caution");
                  },
                  onLoadTagsError: function (t) {
                    i.linkMsg(s, "获取所有标签列表失败，".concat(t), "caution");
                  },
                  onLoadRelationError: function (t) {
                    i.linkMsg(s, "获取标签列表失败，".concat(t), "caution");
                  },
                  onAddTagError: function (t) {
                    i.linkMsg(s, "添加分组失败，".concat(t), "caution");
                  },
                  onSubmitSuccess: function () {
                    i.linkMsg(s, "加入分组成功(ง •̀_•́)ง", "success");
                  },
                });
              };
            if (window.followGroupDialog) o();
            else {
              var r = document.createElement("script");
              (r.onload = o),
                document.body.appendChild(r),
                (r.src = "//static.hdslb.com/common/js/followGroupDialog.js");
            }
          },
          onSpmClick: function () {
            this.$bpreport.click({
              event: "im_like_space_click",
              spmId: "444.2",
            });
          },
          toDetail: function (t) {
            if (!t.target || "A" !== t.target.nodeName) {
              this.$bpreport.click({
                event: "im_like_click",
                spmId: "444.2",
                data: { type: this.likeItem.type },
              });
              var e = this.likeItem,
                n = e.uri,
                i = e.item_id;
              if (n && !this.isDeleted) {
                if (/h\.bilibili.com\/ywh/.test(n)) {
                  var s = n.split("h.bilibili.com/ywh/").pop();
                  n = "https://t.bilibili.com/".concat(s, "?type=2");
                }
                /dmid=/.test(n) || (n += i ? "#reply".concat(i) : ""),
                  window.open(n);
              }
            }
          },
        },
      },
      yi =
        (n(412),
        Object(xe.a)(
          bi,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              { staticClass: "love-detail" },
              [
                n(
                  "my-transition",
                  { attrs: { appear: !0 } },
                  [
                    n(
                      "card",
                      {
                        key: "detail",
                        staticClass: "detail",
                        on: { click: t.toDetail },
                      },
                      [
                        n("text-to-html", {
                          staticClass: "content",
                          class: { active: !t.isDeleted },
                          attrs: { text: t.contentText, "trans-link": !0 },
                        }),
                        t.imageBoxStyle
                          ? n(
                              "div",
                              {
                                staticClass: "content-img",
                                class: {
                                  active: this.likeItem && this.likeItem.image,
                                },
                                style: t.imageBoxStyle,
                              },
                              [
                                t.imageUrl
                                  ? n("img", {
                                      attrs: { src: t.imageUrl, alt: "hidden" },
                                      on: {
                                        error: function () {
                                          t.imageError = !0;
                                        },
                                      },
                                    })
                                  : t._e(),
                              ]
                            )
                          : t._e(),
                      ],
                      1
                    ),
                    n(
                      "card",
                      { key: "like-list", staticClass: "like-list" },
                      t._l(t.likeList, function (e) {
                        return n(
                          "div",
                          { key: e.user.mid, staticClass: "liked-user" },
                          [
                            n("love-user-item", {
                              attrs: { item: e },
                              on: {
                                toggleFollow: t.toggleFollow,
                                onSpmClick: t.onSpmClick,
                              },
                            }),
                          ],
                          1
                        );
                      }),
                      0
                    ),
                  ],
                  1
                ),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "ae7f6516",
          null
        ).exports),
      _i = {
        props: {
          time: null,
          content: String,
          title: String,
          sourceName: String,
        },
        computed: {
          parsedContent: function () {
            var t = this.content;
            try {
              return JSON.parse(t).web || t;
            } catch (e) {
              return t;
            }
          },
        },
        components: { TimeSpan: an, TextToHtml: bn, Card: Ie },
      },
      wi =
        (n(413),
        Object(xe.a)(
          _i,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e("card", { staticClass: "system-item" }, [
              e(
                "div",
                { staticClass: "top" },
                [
                  e("span", { staticClass: "title" }, [
                    this._v(this._s(this.title)),
                  ]),
                  e("time-span", { attrs: { time: this.time } }),
                ],
                1
              ),
              e(
                "div",
                { staticClass: "bottom" },
                [
                  e("text-to-html", {
                    attrs: { text: this.parsedContent, "trans-link": !0 },
                  }),
                ],
                1
              ),
            ]);
          },
          [],
          !1,
          null,
          "196262e8",
          null
        ).exports),
      Ci = function (t) {
        return Object(P.a)({
          method: "get",
          urlWithCSRF: !0,
          url: "//message.bilibili.com/x/sys-msg/query_notify_list",
          addPlatInfo: !0,
          data: { data_type: 1, cursor: t },
        });
      },
      xi = function (t) {
        t.begin_cursor, t.end_cursor;
        var e = t.page_size;
        t.order;
        return Object(P.a)({
          addPlatInfo: !0,
          useBridgeProxy: !0,
          urlWithCSRF: !0,
          method: "get",
          url: "//message.bilibili.com/x/sys-msg/query_unified_notify",
          data: { page_size: e },
        });
      },
      ki = function (t) {
        t.uid, t.begin_cursor, t.end_cursor;
        var e = t.page_size;
        t.order, t.has_up;
        return Object(P.a)({
          addPlatInfo: !0,
          useBridgeProxy: !0,
          urlWithCSRF: !0,
          method: "get",
          url: "//message.bilibili.com/x/sys-msg/query_user_notify",
          data: { page_size: e },
        });
      },
      Si = {
        set: function (t, e, n) {
          if ("undefined" != typeof window)
            try {
              localStorage.setItem(t, JSON.stringify(e)),
                n &&
                  localStorage.setItem(
                    "".concat(t, "-timeout"),
                    Date.now() + 1e3 * n
                  );
            } catch (t) {
              return;
            }
        },
        get: function (t) {
          var e =
            arguments.length > 1 && void 0 !== arguments[1]
              ? arguments[1]
              : null;
          if ("undefined" == typeof window) return e;
          try {
            var n = localStorage.getItem(t);
            if (!n) return e;
            var i = localStorage.getItem("".concat(t, "-timeout"));
            return i && parseInt(i) < Date.now()
              ? (localStorage.removeItem(t),
                localStorage.removeItem("".concat(t, "-timeout")),
                e)
              : JSON.parse(n);
          } catch (t) {
            return e;
          }
        },
        del: function (t) {
          if ("undefined" != typeof window)
            try {
              localStorage.removeItem(t);
            } catch (t) {}
        },
        has: function (t) {
          if ("undefined" == typeof window) return !1;
          try {
            var e = localStorage.getItem("".concat(t, "-timeout"));
            return (
              !(e && /^\d+$/.test(e) && parseInt(e) < Date.now()) &&
              !!localStorage.getItem(t)
            );
          } catch (t) {
            return !1;
          }
        },
      };
    function Ii(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function ji(t) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (i, s) {
          var o = t.apply(e, n);
          function r(t) {
            Ii(o, i, s, r, a, "next", t);
          }
          function a(t) {
            Ii(o, i, s, r, a, "throw", t);
          }
          r(void 0);
        });
      };
    }
    function Oi(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function Li(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? Oi(Object(n), !0).forEach(function (e) {
              Pi(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : Oi(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function Pi(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var Ai = function (t) {
        if (!t) return !1;
        var e = t.getBoundingClientRect();
        return (
          !!(e.left || e.right || e.top || e.bottom) &&
          e.top < window.innerHeight &&
          e.bottom > 0 &&
          e.left < window.innerWidth &&
          e.right > 0
        );
      },
      Ei = {
        data: function () {
          return {
            sysnotifyList: [],
            isLoading: !1,
            uid: "",
            showNotifyList: !1,
            hasCache: !0,
            isFirstFetch: !0,
          };
        },
        computed: Li({}, Object(L.c)(["listLoadingNum"])),
        components: { SystemItem: wi, Nothing: on, MyTransition: nn },
        created: function () {
          this.setListLoadingNum(!0),
            this.setListLoadingNum(!1),
            this.$bpreport.pv({ spmId: "444.3", logId: "000281" });
        },
        mounted: function () {
          var t = this;
          return ji(
            q.a.mark(function e() {
              return q.a.wrap(function (e) {
                for (;;)
                  switch ((e.prev = e.next)) {
                    case 0:
                      return (e.next = 2), t.getLoginInfo().then(t.getInitList);
                    case 2:
                      ce.$on("Index:LoadMore", t.loadMore);
                    case 3:
                    case "end":
                      return e.stop();
                  }
              }, e);
            })
          )();
        },
        beforeDestroy: function () {
          ce.$off("Index:LoadMore", this.loadMore);
        },
        methods: Li(
          Li({}, Object(L.b)(["setListLoadingNum"])),
          {},
          {
            getLoginInfo: function () {
              var t = this;
              return W.a.get().then(function (e) {
                t.uid = e.data.mid;
              });
            },
            getInitList: function () {
              var t = this;
              return ji(
                q.a.mark(function e() {
                  var n, i, s, o, r, a, c, l, u, d, p;
                  return q.a.wrap(function (e) {
                    for (;;)
                      switch ((e.prev = e.next)) {
                        case 0:
                          if (!t.isLoading) {
                            e.next = 2;
                            break;
                          }
                          return e.abrupt("return");
                        case 2:
                          return (
                            (t.isLoading = !0),
                            (r = []),
                            (a = []),
                            (t.isFirstFetch = !1),
                            (e.next = 8),
                            ki({ page_size: 20 }).then(
                              function (e) {
                                var n;
                                (r =
                                  (null == e ||
                                  null === (n = e.data) ||
                                  void 0 === n
                                    ? void 0
                                    : n.system_notify_list) || []),
                                  Si.set(
                                    "message-web__personal-system-info".concat(
                                      t.uid
                                    ),
                                    r,
                                    15552e3
                                  );
                              },
                              function (e) {
                                211e3 !== e.code ||
                                  (r =
                                    Si.get(
                                      "message-web__personal-system-info".concat(
                                        t.uid
                                      )
                                    ) || []).length ||
                                  ((t.hasCache = !1), (t.isLoading = !1));
                              }
                            )
                          );
                        case 8:
                          if (t.hasCache) {
                            e.next = 12;
                            break;
                          }
                          return (
                            (t.sysnotifyList = []),
                            t.loadMore(),
                            e.abrupt("return")
                          );
                        case 12:
                          return (
                            (e.next = 14),
                            xi({ page_size: 10 }).then(function (e) {
                              var n;
                              (t.isLoading = !1),
                                e.code ||
                                  (a =
                                    (null == e ||
                                    null === (n = e.data) ||
                                    void 0 === n
                                      ? void 0
                                      : n.system_notify_list) || []);
                            })
                          );
                        case 14:
                          (t.isLoading = !1),
                            (c =
                              (null === (n = r[r.length - 1]) || void 0 === n
                                ? void 0
                                : n.cursor) || 0),
                            ((null === (i = a[a.length - 1]) || void 0 === i
                              ? void 0
                              : i.cursor) || 0) > c &&
                              (c =
                                (null === (l = a[a.length - 1]) || void 0 === l
                                  ? void 0
                                  : l.cursor) || 0),
                            (u =
                              (null === (s = r[0]) || void 0 === s
                                ? void 0
                                : s.cursor) || 0),
                            ((null === (o = a[0]) || void 0 === o
                              ? void 0
                              : o.cursor) || 0) > u &&
                              (u =
                                (null === (d = a[0]) || void 0 === d
                                  ? void 0
                                  : d.cursor) || 0),
                            (m = void 0),
                            (m = { cursor: u }.cursor),
                            Object(P.a)({
                              addPlatInfo: !0,
                              useBridgeProxy: !0,
                              urlWithCSRF: !0,
                              method: "get",
                              url: "//message.bilibili.com/x/sys-msg/update_cursor",
                              data: { cursor: m, has_up: 0 },
                            }),
                            (p = r
                              .concat(a)
                              .sort(function (t, e) {
                                return e.cursor - t.cursor;
                              })
                              .filter(function (t) {
                                return t.cursor >= c;
                              })),
                            (t.sysnotifyList = p),
                            t.$nextTick(function () {
                              Ai(t.$refs.shim)
                                ? t.loadMore()
                                : (t.showNotifyList = !0);
                            });
                        case 23:
                        case "end":
                          return e.stop();
                      }
                    var m;
                  }, e);
                })
              )();
            },
            getSysnotifyList: function (t) {
              var e = this;
              return ji(
                q.a.mark(function n() {
                  var i;
                  return q.a.wrap(
                    function (n) {
                      for (;;)
                        switch ((n.prev = n.next)) {
                          case 0:
                            if (!e.isLoading) {
                              n.next = 2;
                              break;
                            }
                            return n.abrupt("return");
                          case 2:
                            return (
                              (e.isLoading = !0),
                              (n.prev = 3),
                              (n.next = 6),
                              Ci(t)
                            );
                          case 6:
                            (i = n.sent),
                              (e.sysnotifyList = e.sysnotifyList.concat(
                                i.data || []
                              )),
                              (n.next = 13);
                            break;
                          case 10:
                            (n.prev = 10),
                              (n.t0 = n.catch(3)),
                              console.error(n.t0);
                          case 13:
                            (e.showNotifyList = !0), (e.isLoading = !1);
                          case 15:
                          case "end":
                            return n.stop();
                        }
                    },
                    n,
                    null,
                    [[3, 10]]
                  );
                })
              )();
            },
            loadMore: function () {
              var t = U(0, "cursor")(this.sysnotifyList.slice(-1));
              this.getSysnotifyList(t);
            },
          }
        ),
      },
      Ti =
        (n(414),
        Object(xe.a)(
          Ei,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e(
              "div",
              [
                e(
                  "div",
                  {
                    directives: [
                      {
                        name: "show",
                        rawName: "v-show",
                        value: this.sysnotifyList.length,
                        expression: "sysnotifyList.length",
                      },
                    ],
                    staticClass: "system",
                  },
                  [
                    e(
                      "my-transition",
                      {
                        style: { opacity: this.showNotifyList ? 1 : 0 },
                        attrs: { appear: !0 },
                      },
                      this._l(this.sysnotifyList, function (t, n) {
                        return e("system-item", {
                          key: n,
                          attrs: {
                            time: t.time_at,
                            content: t.content,
                            title: t.title,
                            "source-name": t.source.name,
                          },
                        });
                      }),
                      1
                    ),
                    e("div", {
                      ref: "shim",
                      staticClass: "system-notify__shim",
                    }),
                  ],
                  1
                ),
                e("nothing", {
                  directives: [
                    {
                      name: "show",
                      rawName: "v-show",
                      value: this.sysnotifyList.length < 1 && !this.isLoading,
                      expression: "sysnotifyList.length < 1 && !isLoading",
                    },
                  ],
                  key: "noting",
                }),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "91ed4a16",
          null
        ).exports),
      Mi = (n(237), n(80), n(110)),
      Bi = n.n(Mi);
    function Di(t) {
      return (
        (function (t) {
          if (Array.isArray(t)) return $i(t);
        })(t) ||
        (function (t) {
          if (
            ("undefined" != typeof Symbol && null != t[Symbol.iterator]) ||
            null != t["@@iterator"]
          )
            return Array.from(t);
        })(t) ||
        Ri(t) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function Ni(t, e) {
      return (
        (function (t) {
          if (Array.isArray(t)) return t;
        })(t) ||
        (function (t, e) {
          var n =
            t &&
            (("undefined" != typeof Symbol && t[Symbol.iterator]) ||
              t["@@iterator"]);
          if (null == n) return;
          var i,
            s,
            o = [],
            r = !0,
            a = !1;
          try {
            for (
              n = n.call(t);
              !(r = (i = n.next()).done) &&
              (o.push(i.value), !e || o.length !== e);
              r = !0
            );
          } catch (t) {
            (a = !0), (s = t);
          } finally {
            try {
              r || null == n.return || n.return();
            } finally {
              if (a) throw s;
            }
          }
          return o;
        })(t, e) ||
        Ri(t, e) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function Ri(t, e) {
      if (t) {
        if ("string" == typeof t) return $i(t, e);
        var n = Object.prototype.toString.call(t).slice(8, -1);
        return (
          "Object" === n && t.constructor && (n = t.constructor.name),
          "Map" === n || "Set" === n
            ? Array.from(t)
            : "Arguments" === n ||
              /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
            ? $i(t, e)
            : void 0
        );
      }
    }
    function $i(t, e) {
      (null == e || e > t.length) && (e = t.length);
      for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
      return i;
    }
    var Ui = new r.a();
    function Vi(t, e, n, i, s) {
      var o = "";
      return (
        i && /\.gif/.test(t) && (o = "@1s"),
        {
          srcUrl: H(t, e, n, void 0 === s ? { c: 1 } : { others: s }) + o,
          oriUrl: H(t),
        }
      );
    }
    var zi = function (t) {
      var e,
        n,
        i,
        s,
        o = function (t) {
          return t < 10 ? "0".concat(t) : t;
        };
      return (
        (n = Math.floor(t / 3600)),
        (i = Math.floor((t - 3600 * n) / 60)),
        (s = (t - 3600 * n) % 60),
        (e = "".concat(o(i), ":").concat(o(s))),
        n > 0 && (e = "".concat(o(n), ":").concat(e)),
        e
      );
    };
    function Hi(t) {
      return (
        ("selectionStart" in t &&
          function () {
            var e = t.selectionEnd - t.selectionStart;
            return {
              start: parseInt(t.selectionStart),
              end: t.selectionEnd,
              length: e,
              text: t.value.substr(t.selectionStart, e),
            };
          }) ||
        function () {
          return null;
        }
      )();
    }
    var Fi = function () {
        var t =
            arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "",
          e =
            arguments.length > 1 && void 0 !== arguments[1]
              ? arguments[1]
              : " ",
          n =
            arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : "",
          i =
            arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 1,
          s = t.split(e),
          o = "";
        return (
          s.forEach(function (t, r) {
            (o += t), r !== s.length - 1 && (o += r !== i - 1 ? e : n);
          }),
          o
        );
      },
      Gi = function (t, e) {
        var n = [
            {
              match:
                /(?:(?:(?:http:\/\/|https:\/\/)(?:[a-zA-Z0-9_.-]+\.)*(?:bilibili|biligame)\.com(?:\/[/.$*?~=#!%@&\-\w]*)?)|(?:(?:http:\/\/|https:\/\/)(?:[a-zA-Z0-9_.-]+\.)*(?:acg|b23)\.tv(?:\/[/.$*?~=#!%@&\-\w]*)?)|(?:(?:http:\/\/|https:\/\/)dl\.(?:hdslb)\.com(?:\/[/.$*?~=#!%@&\-\w]*)?))/g,
              replace: function (t) {
                return '\n                <a href="'.concat(
                  t,
                  '" target="_blank" class="dynamic-link">\n                  <i class="bp-icon-font icon-link"></i> 网页链接\n                </a>\n              '
                );
              },
            },
            {
              match: /(?:bilibili:\/\/)(?:[/.$*?~=#!%@&\-\w]*)?/g,
              replace: function (t) {
                return '\n                <span data-href="'.concat(
                  t,
                  '">\n                  【请在移动端上打开链接】\n                </span>\n              '
                );
              },
            },
            {
              match: /\[(?:[^[\]]+)]/g,
              replace: function (t) {
                var n = t.slice(1, t.length - 1);
                if (!(n in e)) return t;
                var i = e[n],
                  s = /https?:\/\//.test(i.img) ? i.img : Bi.a,
                  o = "\n                  background-image: url("
                    .concat(
                      s,
                      ");\n                  height: 16px;\n                  width: 16px;\n                  animation-duration: "
                    )
                    .concat(
                      16 * i.step,
                      "ms;\n                  animation-timing-function: steps("
                    )
                    .concat(i.step, ", end);\n                  ")
                    .concat(
                      i.step ? "height: " + 16 * i.step + "px;" : ";",
                      "\n                "
                    );
                return '\n                  <a class="emotion-items active auto-reply-emoji-item" title="'
                  .concat(n, '">\n                    <div style="')
                  .concat(
                    o,
                    '" class="img-emoji auto-reply-emoji-item-inner" ></div>\n                  </a>\n                '
                  );
              },
            },
          ].concat(
            Di(
              dt()
                ? [
                    {
                      match: /bv1[\d\w]{9}/gi,
                      replace: function (t) {
                        return '<a href="https://www.bilibili.com/video/'
                          .concat(
                            t.slice(0, 2).toLowerCase().concat(t.slice(2)),
                            '" target="_blank" class="dynamic-link">'
                          )
                          .concat(t, "</a>");
                      },
                    },
                  ]
                : []
            ),
            [
              {
                match: /av\d+/gi,
                replace: function (t) {
                  return '<a href="//www.bilibili.com/video/'
                    .concat(
                      t.toLowerCase(),
                      '" target="_blank" class="dynamic-link">'
                    )
                    .concat(t, "</a>");
                },
              },
              {
                match: /vc\d+/gi,
                replace: function (t) {
                  return '<a href="//vc.bilibili.com/video/'
                    .concat(
                      t.slice(2),
                      '" target="_blank" class="dynamic-link">'
                    )
                    .concat(t, "</a>");
                },
              },
              {
                match: /cv\d+/gi,
                replace: function (t) {
                  return '<a href="//www.bilibili.com/read/'
                    .concat(
                      t.toLowerCase(),
                      '" target="_blank" class="dynamic-link">'
                    )
                    .concat(t, "</a>");
                },
              },
            ]
          ),
          i = t.replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\n/g, "");
        return (i = (function (t, e) {
          var n = t.map(function (t) {
            return t.match instanceof RegExp
              ? ((e = t.match),
                (n = t.replace),
                function (t) {
                  var i = t.match(e) || [],
                    s = t.split(e);
                  return [i.map(n), s];
                })
              : function (e) {
                  var n = Ni(t.match(e), 2),
                    i = n[0],
                    s = n[1];
                  return [i.map(t.replace), s];
                };
            var e, n;
          });
          return (function t(e) {
            return e.reduce(function (e, n) {
              return e.concat(Array.isArray(n) ? t(n) : n);
            }, []);
          })(
            (function t(e, i) {
              var s = n[e];
              return s
                ? i.map(function (n) {
                    for (
                      var i = Ni(s(n), 2),
                        o = i[0],
                        r = i[1],
                        a = t(e + 1, r),
                        c = [],
                        l = 0;
                      l < o.length;
                      l++
                    )
                      c.push(a[l]), c.push(o[l]);
                    return c.push(a[o.length]), c;
                  })
                : i;
            })(0, [e])
          );
        })(n, i).join(""));
      },
      Zi = function (t) {
        return parseInt(t) <= 0 || !t
          ? "0"
          : -1 !== String(t).indexOf(".") || -1 !== String(t).indexOf("-")
          ? t
          : (t = parseInt(t)) >= 1e4 && t < 1e8
          ? (t / 1e4).toFixed(t % 1e4 > 500 && t % 1e4 < 9500 ? 1 : 0) + "万"
          : t >= 1e8
          ? (t / 1e8).toFixed(t % 1e8 > 5e6 && t % 1e8 < 95e6 ? 1 : 0) + "亿"
          : t;
      };
    function qi(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function Ki(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? qi(Object(n), !0).forEach(function (e) {
              Wi(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : qi(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function Wi(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var Ji = (function (t) {
        var e = window.localStorage.getItem("im_deviceid_".concat(t));
        if (!t || !e) {
          var n = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(
            /[xy]/g,
            function (t) {
              var e = (16 * Math.random()) | 0;
              return ("x" === t ? e : (3 & e) | 8).toString(16).toUpperCase();
            }
          );
          return (
            (function (t, e) {
              Object.keys(localStorage).forEach(function (t) {
                t.match(/^im_deviceid_/) && window.localStorage.removeItem(t);
              }),
                window.localStorage.setItem("im_deviceid_".concat(e), t);
            })(n, t),
            n
          );
        }
        return e;
      })(),
      Yi = "//api.vc.bilibili.com",
      Qi = function (t) {
        return Object(P.a)({
          addPlatInfo: !0,
          method: "get",
          url: "".concat(Yi, "/link_group/v1/group/detail"),
          data: { group_id: t },
        });
      },
      Xi = function (t) {
        return Object(P.a)({
          addPlatInfo: !0,
          method: "get",
          url: "".concat(Yi, "/account/v1/user/cards"),
          data: { uids: t.join(",") },
        });
      },
      ts = function (t, e) {
        return Object(P.a)({
          addPlatInfo: !0,
          method: "get",
          url: "//api.live.bilibili.com/fans_medal/v1/fans_medal/details",
          data: { master_id: t, uids: e.join(",") },
        });
      },
      es = function (t, e, n) {
        return Object(P.a)({
          addPlatInfo: !0,
          ajaxVersion2: !0,
          urlWithCSRF: !0,
          useBridgeProxy: !0,
          method: "post",
          url: "".concat(Yi, "/x/im/sync_msg_svr/v1/fetch_msg_detail"),
          data: { talker_id: t, session_type: e, msg_details: n },
        });
      },
      ns = function (t, e) {
        return Object(P.a)({
          addPlatInfo: !0,
          method: "post",
          url: "".concat(Yi, "/link_setting/v1/link_setting/set_push_ss"),
          data: { talker_uid: t, setting: e },
        });
      },
      is = function (t) {
        return Object(P.a)({
          addPlatInfo: !0,
          method: "get",
          url: "".concat(Yi, "/session_svr/v1/session_svr/get_sessions"),
          data: t,
        });
      },
      ss = function (t) {
        return Object(P.a)({
          addPlatInfo: !0,
          method: "get",
          url: "".concat(Yi, "/session_svr/v1/session_svr/ack_sessions"),
          data: t,
        });
      },
      os = function (t) {
        return Object(P.a)({
          addPlatInfo: !0,
          method: "get",
          url: "".concat(Yi, "/svr_sync/v1/svr_sync/fetch_session_msgs"),
          data: Object.assign({}, { sender_device_id: "1" }, t),
        }).then(function (t) {
          return (window._per_webim_fetch_message_cost = t.cost), t;
        });
      },
      rs = function () {
        try {
          return /花火/.test(document.querySelector("title").innerText);
        } catch (t) {
          return !1;
        }
      },
      as = function (t) {
        return Object(P.a)({
          addPlatInfo: !0,
          method: "post",
          url: "".concat(Yi, "/web_im/v1/web_im/send_msg"),
          data: {
            msg: Ki(Ki({}, t), {}, { dev_id: Ji }),
            from_firework: rs() ? 1 : 0,
          },
        });
      };
    function cs(t) {
      var e = t.talker_id,
        n = t.session_type,
        i = t.target_id,
        s = t.reasonType,
        o = t.reasonDesc,
        r = t.keys,
        a = void 0 === r ? [] : r,
        c = t.msg_key,
        l = {
          biz_code: 4,
          accused_uid: i,
          object_id: i,
          reason_type: s,
          reason_desc: o,
        };
      return (
        1 === n
          ? ((l.module = 607),
            (l.comment = JSON.stringify({ group_id: 0, msg_key: c })))
          : e === i
          ? ((l.module = 603), (l.comment = JSON.stringify({ group_id: e })))
          : ((l.module = 604),
            (l.comment = JSON.stringify({ group_id: e, msg_key: c }))),
        (l.extra = JSON.stringify({ msg_keys: a })),
        Object(P.a)({
          method: "post",
          url: "//api.vc.bilibili.com/x/bplus/im/report/add",
          data: l,
        })
      );
    }
    function ls(t) {
      var e = t.uid,
        n = t.type;
      return Object(P.a)({
        method: "get",
        url: "//api.vc.bilibili.com/link_setting/v1/link_setting/is_limit",
        data: { uid: e, type: n },
      });
    }
    var us = {};
    var ds = [];
    function ps(t, e) {
      for (var n = 0; n < e.length; n++) {
        var i = e[n];
        (i.enumerable = i.enumerable || !1),
          (i.configurable = !0),
          "value" in i && (i.writable = !0),
          Object.defineProperty(t, i.key, i);
      }
    }
    var ms = [],
      fs = (function () {
        function t(e) {
          var n = this;
          !(function (t, e) {
            if (!(t instanceof e))
              throw new TypeError("Cannot call a class as a function");
          })(this, t),
            Object.keys(e).forEach(function (t) {
              n[t] = e[t];
            }),
            (this.$id = e.$id
              ? e.$id
              : "popup-".concat(
                  Math.floor(1e4 * Math.random() * Date.now()).toString(16)
                )),
            (this.$disabled = !1),
            (this.$out = !1),
            (this.type = e.type || "normal"),
            (this.lockWhenConfirm = e.lockWhenConfirm || !1),
            (this.$keep = e.keep || !1);
        }
        var e, n, i;
        return (
          (e = t),
          (n = [
            {
              key: "unlock",
              value: function () {
                this.$disabled = !1;
              },
            },
            {
              key: "lock",
              value: function () {
                this.$disabled = !0;
              },
            },
            {
              key: "close",
              value: function () {
                return this.removePopup();
              },
            },
            {
              key: "keep",
              value: function () {
                this.$keep = !0;
              },
            },
            {
              key: "cancelKeep",
              value: function () {
                this.$keep = !1;
              },
            },
            {
              key: "restore",
              value: function () {
                this.$out = !1;
              },
            },
            {
              key: "removePopup",
              value: function () {
                var t = this;
                return new Promise(function (e) {
                  (t.$out = !0),
                    setTimeout(function () {
                      if ((ds.splice(t.$index, 1), t.$keep)) {
                        var n = ms.filter(function (e) {
                          return e.$id === t.$id;
                        });
                        n.length ? (ms[ms.indexOf(n[0])] = t) : ms.push(t);
                      } else delete ms[ms.indexOf(t)];
                      var i;
                      (i = ds).forEach(function (t, e) {
                        i[e].$index = e;
                      }),
                        r.a.nextTick(function () {
                          e(),
                            window.navigator.userAgent.match(
                              /Maxthon\/4.[0-4]/
                            ) &&
                              ((window.document.body.style.backgroundColor =
                                "#fefefe"),
                              setTimeout(function () {
                                window.document.body.style.backgroundColor =
                                  "#fff";
                              }, 1));
                        });
                    }, 200);
                });
              },
            },
          ]) && ps(e.prototype, n),
          i && ps(e, i),
          t
        );
      })();
    function hs(t, e) {
      for (var n = 0; n < e.length; n++) {
        var i = e[n];
        (i.enumerable = i.enumerable || !1),
          (i.configurable = !0),
          "value" in i && (i.writable = !0),
          Object.defineProperty(t, i.key, i);
      }
    }
    var gs = (function () {
      function t(e) {
        !(function (t, e) {
          if (!(t instanceof e))
            throw new TypeError("Cannot call a class as a function");
        })(this, t),
          (this.param = e);
        var n = this.init();
        this.popup = n;
      }
      var e, n, i;
      return (
        (e = t),
        (n = [
          {
            key: "onInited",
            value: function (t) {
              return (this.popup.onInitedCallback = t), this;
            },
          },
          {
            key: "onConfirm",
            value: function (t) {
              return (this.popup.onConfirmCallback = t), this;
            },
          },
          {
            key: "onCancel",
            value: function (t) {
              return (this.popup.onCancelCallback = t), this;
            },
          },
          {
            key: "init",
            value: function () {
              var t = new fs(this.param),
                e = t.$id;
              if (
                !ds.filter(function (t) {
                  return t.$id === e;
                }).length
              ) {
                if (ms.length)
                  for (var n = 0, i = ms.length; n < i; n++) {
                    var s = ms[n];
                    if (s) {
                      s.restore(), ds.push(s);
                      var o = ds.indexOf(s);
                      ds[o].$index = o;
                    }
                  }
                var r = ds.push(t) - 1;
                return (
                  (ds[r].$index = r),
                  (t.onInitedCallback = null),
                  (t.onInitedCallbackExeced = !1),
                  t
                );
              }
              console.caution(
                '检测到 $id 相同 livePopup "'.concat(
                  this.param.$id,
                  '}", 请解决冲突.'
                )
              );
            },
          },
        ]) && hs(e.prototype, n),
        i && hs(e, i),
        t
      );
    })();
    function vs(t) {
      return (vs =
        "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
          ? function (t) {
              return typeof t;
            }
          : function (t) {
              return t &&
                "function" == typeof Symbol &&
                t.constructor === Symbol &&
                t !== Symbol.prototype
                ? "symbol"
                : typeof t;
            })(t);
    }
    var bs = [],
      ys = {
        data: function () {
          return { popups: ds };
        },
        computed: {
          currentPopup: function () {
            var t = this.popups[this.popups.length - 1];
            if (!t) return {};
            var e = t.component;
            if ("object" === vs(e)) {
              if (
                ((void 0 === t.content && void 0 === t.html) ||
                  ("server" !==
                    Object({ NODE_ENV: "production", BASE_URL: "/" }).VUE_ENV &&
                    window.console &&
                    console.warn(
                      "[BpPopup] 当使用 Component 方式构建弹窗时，传入的 html 与 content 属性无效."
                    ),
                  (t.html = null),
                  (t.content = null)),
                "object" === vs(e._Ctor))
              ) {
                var n = e.name;
                if ("string" != typeof n)
                  throw new Error(
                    "[Error] 在使用 Component 创建弹窗时必须指定 name."
                  );
                r.a.component(n, e), bs.push(n), (t.component.name = n);
              } else {
                if ("string" != typeof e.name)
                  throw new Error(
                    "[Error] 在使用 Component 创建弹窗时必须指定 name."
                  );
                r.a.component(e.name, e), bs.push(e.name);
              }
              t.$usingComponent = !0;
            }
            return t;
          },
        },
        components: { LinkBtn: Ae, Shell: Be },
        methods: {
          init: function (t) {
            this.$nextTick(function () {
              t.onInitedCallback &&
                !t.onInitedCallbackExeced &&
                setTimeout(function () {
                  t.onInitedCallback(t), (t.onInitedCallbackExeced = !0);
                }, 10);
            });
          },
          confirm: function (t, e) {
            var n = this.currentPopup;
            n.$disabled ||
              (n.lockWhenConfirm && n.lock(),
              n.confirmBtn || (n.confirmBtn = e.confirmBtn),
              n.cancelBtn || (n.cancelBtn = e.cancelBtn),
              n.closeBtn || (n.closeBtn = e.closeBtn),
              n.onConfirmCallback
                ? n.onConfirmCallback(n)
                : n.removePopup && n.removePopup());
          },
          cancel: function (t, e) {
            var n = this.currentPopup;
            n.$disabled ||
              (n.confirmBtn || (n.confirmBtn = e.confirmBtn),
              n.cancelBtn || (n.cancelBtn = e.cancelBtn),
              n.closeBtn || (n.closeBtn = e.closeBtn),
              n.onCancelCallback && n.onCancelCallback(n),
              n.removePopup && n.removePopup());
          },
          close: function (t) {
            t.removePopup && t.removePopup();
          },
        },
        provide: function () {
          var t = this,
            e = {};
          return (
            Object.defineProperty(e, "popup", {
              get: function () {
                return t.currentPopup;
              },
            }),
            e
          );
        },
      },
      _s =
        (n(416),
        Object(xe.a)(
          ys,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n("transition", { attrs: { name: "fade-out" } }, [
              t.popups.length
                ? n(
                    "div",
                    {
                      staticClass:
                        "bp-popup-ctnr dp-table w-100 h-100 p-fixed p-zero f-family",
                      attrs: { role: "alertdialog" },
                    },
                    [
                      n("div", {
                        directives: [
                          {
                            name: "show",
                            rawName: "v-show",
                            value: !t.currentPopup.hideMask,
                            expression: "!currentPopup.hideMask",
                          },
                        ],
                        staticClass: "body-merge w-100 h-100 p-absolute p-zero",
                      }),
                      n(
                        "div",
                        { staticClass: "dp-table-cell bp-v-middle" },
                        [
                          n(
                            "shell",
                            {
                              attrs: {
                                show: !t.currentPopup.$out,
                                width: t.currentPopup.width,
                                title: t.currentPopup.title,
                                "title-center": t.currentPopup.titleCenter,
                                button: t.currentPopup.button,
                                disabled: t.currentPopup.$disabled,
                                "on-confirm": t.confirm,
                                "on-cancel": t.cancel,
                                init: t.init(t.currentPopup),
                              },
                            },
                            [
                              t.currentPopup.$usingComponent
                                ? [
                                    n(t.currentPopup.component.name, {
                                      tag: "component",
                                    }),
                                  ]
                                : [
                                    "string" == typeof t.currentPopup.html
                                      ? n("div", {
                                          staticClass: "popup-content-ctnr",
                                          attrs: { id: t.currentPopup.$id },
                                          domProps: {
                                            innerHTML: t._s(
                                              t.currentPopup.html
                                            ),
                                          },
                                        })
                                      : n("div", {
                                          staticClass: "popup-content-ctnr",
                                          staticStyle: { "font-size": "13px" },
                                          attrs: { id: t.currentPopup.$id },
                                          domProps: {
                                            textContent: t._s(
                                              t.currentPopup.content
                                            ),
                                          },
                                        }),
                                  ],
                            ],
                            2
                          ),
                        ],
                        1
                      ),
                    ]
                  )
                : t._e(),
            ]);
          },
          [],
          !1,
          null,
          "b38bf146",
          null
        ).exports),
      ws = !1,
      Cs = {
        install: function (t) {
          if (!ws) {
            if (
              ((t.prototype.bpPopup = function (t) {
                return new gs(t, ds);
              }),
              "undefined" != typeof window)
            ) {
              var e = document.createElement("div");
              document.body.appendChild(e),
                t.nextTick(function () {
                  new t({
                    template:
                      '<div class="bp-popup-ctnr"><bp-popup></bp-popup></div>',
                    components: { BpPopup: _s },
                  }).$mount(e);
                });
            }
            ws = !0;
          }
        },
      };
    n(417);
    r.a.use(Cs);
    var xs = new r.a();
    var ks = function (t) {
        return (
          (-800 === t.code || 21015 === t.code || 23009 === t.code) &&
          (xs
            .bpPopup({
              title: "您需要进行手机认证",
              html:
                '<div class="live-cert-popup cellphone-providing"><div class="hint-img" role="image"></div><p class="t-center">为了维护社区的良好秩序，只有绑定手机号的账号才能发消息喔！<span>' +
                rt.happy() +
                "</span></p></div>",
              width: 400,
              button: { confirm: "去绑定！", cancel: "取消" },
            })
            .onConfirm(function () {
              window.open("//passport.bilibili.com/account/security#/home");
            }),
          !0)
        );
      },
      Ss = {
        props: {
          show: null,
          title: String,
          hideButton: Boolean,
          disabled: null,
        },
        components: { BpPopup: De },
        methods: {
          onConfirm: function (t) {
            this.$emit("onConfirm", t);
          },
          onCancel: function (t) {
            this.$emit("onCancel", t);
          },
        },
      },
      Is =
        (n(418),
        n(419),
        Object(xe.a)(
          Ss,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n("transition", { attrs: { name: "im-popup-fade" } }, [
              n(
                "div",
                {
                  directives: [
                    {
                      name: "show",
                      rawName: "v-show",
                      value: t.show,
                      expression: "show",
                    },
                  ],
                  staticClass: "im-popup",
                },
                [
                  t.hideButton
                    ? t._e()
                    : n(
                        "bp-popup",
                        {
                          staticClass: "im-popup-shell",
                          attrs: {
                            show: t.show,
                            title: t.title,
                            onConfirm: t.onConfirm,
                            onCancel: t.onCancel,
                            disabled: t.disabled,
                          },
                        },
                        [
                          n(
                            "div",
                            { staticClass: "content" },
                            [t._t("default")],
                            2
                          ),
                        ]
                      ),
                  t.hideButton
                    ? n(
                        "bp-popup",
                        {
                          staticClass: "im-popup-shell hide-button",
                          staticStyle: {
                            width: "auto !important",
                            padding: "0",
                            margin: "0",
                          },
                          attrs: {
                            show: t.show,
                            title: t.title,
                            onConfirm: t.onConfirm,
                            onCancel: t.onCancel,
                            button: !1,
                          },
                        },
                        [
                          n("div", { staticClass: "split-line" }),
                          n(
                            "div",
                            {
                              staticClass: "content",
                              staticStyle: { padding: "0" },
                            },
                            [t._t("default")],
                            2
                          ),
                        ]
                      )
                    : t._e(),
                ],
                1
              ),
            ]);
          },
          [],
          !1,
          null,
          "2d7a5bff",
          null
        ).exports),
      js = {
        props: { show: null, title: String, content: String },
        components: { ImPopup: Is },
        methods: {
          onConfirm: function (t) {
            this.$emit("onConfirm", t);
          },
          onCancel: function (t) {
            this.$emit("onCancel", t);
          },
        },
      },
      Os =
        (n(420),
        Object(xe.a)(
          js,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e(
              "div",
              {
                on: {
                  click: function (t) {
                    t.stopPropagation(), t.preventDefault();
                  },
                },
              },
              [
                e(
                  "im-popup",
                  {
                    staticClass: "confirm-popup",
                    attrs: { show: this.show, title: this.title },
                    on: { onConfirm: this.onConfirm, onCancel: this.onCancel },
                  },
                  [
                    e("div", { staticClass: "content-text" }, [
                      this._v(this._s(this.content)),
                    ]),
                  ]
                ),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "7b5a0399",
          null
        ).exports),
      Ls = n(50);
    new r.a({});
    n(421);
    function Ps(t) {
      return (Ps =
        "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
          ? function (t) {
              return typeof t;
            }
          : function (t) {
              return t &&
                "function" == typeof Symbol &&
                t.constructor === Symbol &&
                t !== Symbol.prototype
                ? "symbol"
                : typeof t;
            })(t);
    }
    var As = function (t) {
        return !(
          !t ||
          "object" !== Ps(t) ||
          "string" != typeof t.data ||
          "number" != typeof t.length ||
          "number" != typeof t.location ||
          "number" != typeof t.type
        );
      },
      Es = 0,
      Ts = {
        TYPE_STRING: ++Es,
        TYPE_LOTTERY: ++Es,
        TYPE_VOTE: ++Es,
        TYPE_AT: ++Es,
        TYPE_COMMIC_REMARK: ++Es,
        TYPE_LINK_HTTP: ++Es,
        TYPE_LINK_AV: ++Es,
        TYPE_LINK_BV: ++Es,
        TYPE_LINK_CV: ++Es,
        TYPE_LINK_VC: ++Es,
        TYPE_TOPIC: ++Es,
        TYPE_LINK_SHOP: ++Es,
        TYPE_KEYWORD: ++Es,
      },
      Ms = function (t, e, n) {
        return new Promise(function (i) {
          try {
            i(
              (function () {
                var t,
                  e,
                  n,
                  i =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : "",
                  s =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : {},
                  o =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : "",
                  r = [];
                if ("string" != typeof i || "" === i) return r;
                var a = s.ctrlJson,
                  c = void 0 === a ? "" : a,
                  l = s.extendCtrlJson,
                  u = void 0 === l ? "" : l,
                  d = s.display,
                  p = void 0 === d ? {} : d,
                  m = s.dynamicId,
                  f = void 0 === m ? "" : m,
                  h = s.isRemark,
                  g = void 0 !== h && h,
                  v = s.isClip,
                  b = void 0 !== v && v,
                  y = s.keyword,
                  _ = void 0 === y ? "" : y,
                  w = dt(),
                  C = 0;
                if (g) {
                  var x = i.replace(/\r\n/g, "\n").indexOf("\n"),
                    k = i.slice(0, x),
                    S = k.match(/(\[星])+(\[空星])*|(\[星])*(\[空星])+/g);
                  S &&
                    S[0] &&
                    (r.push({ type: Ts.TYPE_COMMIC_REMARK, text: S[0] }),
                    (C = x + 1));
                }
                var I = Object(j.d)(u),
                  O = c ? Object(j.d)(c) : [],
                  L = I.ctrl || [],
                  P = {};
                [].concat(O, L).forEach(function (t) {
                  As(t) && (P[t.location] || (P[t.location] = t));
                });
                var A = {};
                p.rich_text &&
                  p.rich_text.rich_details &&
                  p.rich_text.rich_details.forEach(function (t) {
                    A[t.orig_text] = t;
                  }),
                  null != p &&
                    null !== (t = p.origin) &&
                    void 0 !== t &&
                    null !== (e = t.rich_text) &&
                    void 0 !== e &&
                    null !== (n = e.rich_details) &&
                    void 0 !== n &&
                    n.length &&
                    p.origin.rich_text.rich_details.forEach(function (t) {
                      A[t.orig_text] = t;
                    });
                var E = function (t, e, n) {
                    return function (i) {
                      var s = !0,
                        o = 0;
                      do {
                        var a = t.exec(
                          i.text.endsWith("//")
                            ? i.text.substr(0, i.text.length - 2)
                            : i.text
                        );
                        if (a) {
                          var c = {};
                          if (A[a[0]]) {
                            c = {
                              text: A[a[0]].text,
                              icon: {
                                1: "//i0.hdslb.com/bfs/activity-plat/static/20210115/c4e76bc8e911f2aa43bdb44a218dbc34/wu3~93TYcA.png",
                                2: "//i0.hdslb.com/bfs/activity-plat/static/20210115/c4e76bc8e911f2aa43bdb44a218dbc34/gQvBjpFoAmv.png",
                              }[A[a[0]].icon_type],
                            };
                          }
                          a.index === o ||
                            n({
                              type: Ts.TYPE_STRING,
                              text: i.text.substring(o, a.index),
                            }),
                            r.push(e(a, c)),
                            (o = t.lastIndex);
                        } else
                          n({
                            type: Ts.TYPE_STRING,
                            text: i.text.substring(o),
                          }),
                            (s = !1);
                      } while (s);
                    };
                  },
                  T = !!_,
                  M = E(
                    new RegExp("".concat(_), "gi"),
                    function (t, e) {
                      return {
                        type: Ts.TYPE_KEYWORD,
                        text: e.text || t[0],
                        id: t[0],
                        icon: e.icon,
                      };
                    },
                    function (t) {
                      r.push(t);
                    }
                  ),
                  B = function (t) {
                    var e = !1,
                      n = t.text.split("#");
                    n.length > 1
                      ? n.forEach(function (t, i) {
                          if ("" === t)
                            e &&
                              (T
                                ? M({ type: Ts.TYPE_STRING, text: "#" })
                                : r.push({ type: Ts.TYPE_STRING, text: "#" })),
                              (e = !0);
                          else if (e)
                            if (
                              (function (t) {
                                var e = t.replace(/(^ +)|( +$)/g, "");
                                return (
                                  !/[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e) &&
                                  /^[^\n\r#@↵]{1,32}$/.test(e)
                                );
                              })(t) &&
                              i + 1 !== n.length
                            ) {
                              var s = t.trim().replace(/\xa0/g, " ");
                              r.push({
                                type: Ts.TYPE_TOPIC,
                                text: "#".concat(t, "#"),
                                id: s,
                              }),
                                (e = !1);
                            } else
                              T
                                ? M({
                                    type: Ts.TYPE_STRING,
                                    text: "#".concat(t),
                                  })
                                : r.push({
                                    type: Ts.TYPE_STRING,
                                    text: "#".concat(t),
                                  });
                          else
                            T
                              ? M({ type: Ts.TYPE_STRING, text: t })
                              : r.push({ type: Ts.TYPE_STRING, text: t }),
                              (e = !0);
                        })
                      : T
                      ? M({ type: Ts.TYPE_STRING, text: t.text })
                      : r.push({ type: Ts.TYPE_STRING, text: t.text });
                  },
                  D = E(
                    /vc(\d+)/gi,
                    function (t) {
                      return { type: Ts.TYPE_LINK_VC, text: t[0], id: t[1] };
                    },
                    B
                  ),
                  N = E(
                    /cv\d+/gi,
                    function (t, e) {
                      return {
                        type: Ts.TYPE_LINK_CV,
                        text: e.text || t[0],
                        id: "cv" + t[0].slice(2),
                        icon: e.icon,
                      };
                    },
                    D
                  ),
                  R = E(
                    /av\d+/gi,
                    function (t, e) {
                      return {
                        type: Ts.TYPE_LINK_AV,
                        text: e.text || t[0],
                        id: "av" + t[0].slice(2),
                        icon: e.icon,
                      };
                    },
                    N
                  ),
                  $ = E(
                    /(bv1[\d\w]{9})/gi,
                    function (t, e) {
                      return {
                        type: Ts.TYPE_LINK_BV,
                        text: e.text || t[0],
                        id: t[0],
                        icon: e.icon,
                      };
                    },
                    R
                  ),
                  U =
                    /(((http:\/\/|https:\/\/)([a-zA-Z0-9_.-]+\.)*(bilibili|biligame)\.com(\.\.\.|(\/[/.$*?~=#!%@&\-\w]*)?))|((http:\/\/|https:\/\/)([a-zA-Z0-9_.-]+\.)*(acg|b23)\.tv(\.\.\.|(\/[/.$*?~=#!%@&\-\w]*)?))|((http:\/\/|https:\/\/)dl\.(hdslb)\.com(\.\.\.|(\/[/.$*?~=#!%@&\-\w]*)?))|((http:\/\/|https:\/\/)sugs\.(suning)\.com(\.\.\.|(\/[/.$*?~=#!%@&\-\w]*)?)))|(https:\/\/static\.cdsb\.com\/micropub\/Articles\/202006\/6906c79ac5f0d1650b60aadd31879e32\.html)|(https:\/\/mp\.weixin\.qq\.com\/s\/(LOCoQsggmtmGq16XhFtw8A|MbRh8YThHIwlzRDWQCe2CQ))|(http:\/\/www\.bjnews\.com\.cn\/news\/2020\/06\/03\/734592\.html)/g,
                  V = E(
                    o ? new RegExp(o, "g") : U,
                    function (t, e) {
                      var n = t.filter(function (t) {
                        return !!t;
                      });
                      return b && n.length > 0 && /\.\.\.$/.test(n[0])
                        ? { type: Ts.TYPE_STRING, text: "..." }
                        : {
                            type: Ts.TYPE_LINK_HTTP,
                            text: e.text || "网页链接",
                            url: t[0],
                            icon: e.icon,
                          };
                    },
                    w ? $ : R
                  );
                return (
                  Object.keys(P)
                    .sort(function (t, e) {
                      return parseInt(t) > parseInt(e) ? 1 : -1;
                    })
                    .forEach(function (t) {
                      var e = P[t],
                        n = e.data,
                        s = e.length,
                        o = e.location,
                        a = e.type,
                        c = e.type_id,
                        l = e.prefix_icon,
                        u = I.vote || I.vote_cfg,
                        d = p.highlight,
                        m = 0,
                        h = function (t) {
                          o < C ||
                            (o + m > i.length
                              ? (o < i.length
                                  ? (o > C &&
                                      V({
                                        type: Ts.TYPE_STRING,
                                        text: i.substring(C, o),
                                      }),
                                    r.push(t))
                                  : V({
                                      type: Ts.TYPE_STRING,
                                      text: i.substring(C, i.length),
                                    }),
                                (C = i.length))
                              : o === C
                              ? (r.push(t), (C = o + m))
                              : o > C &&
                                (V({
                                  type: Ts.TYPE_STRING,
                                  text: i.substring(C, o),
                                }),
                                r.push(t),
                                (C = o + m)));
                        };
                      switch (a) {
                        case 1:
                          (m = s),
                            h({
                              type: Ts.TYPE_AT,
                              text: i.substring(o, o + m),
                              id: n,
                              dynamicId: f,
                            });
                          break;
                        case 2:
                          (m = parseInt(n)),
                            h({
                              type: Ts.TYPE_LOTTERY,
                              text: i.substring(o, o + m),
                              id: f,
                              dynamicId: f,
                            });
                          break;
                        case 3:
                          (m = parseInt(n)),
                            u && u.vote_id
                              ? h({
                                  type: Ts.TYPE_VOTE,
                                  text: i.substring(o, o + m),
                                  id: u.vote_id,
                                  dynamicId: f,
                                })
                              : h({
                                  type: Ts.TYPE_STRING,
                                  text: i.substring(o, o + m),
                                });
                          break;
                        case 4:
                          if (
                            ((m = parseInt(n)), d && Array.isArray(d.items))
                          ) {
                            for (
                              var g = {
                                  item_id: "",
                                  jump_url: "",
                                  source_type: void 0,
                                },
                                v = 0;
                              v < d.items.length;
                              v++
                            )
                              if (d.items[v].type_id === c) {
                                g = d.items[v];
                                break;
                              }
                            h({
                              type: Ts.TYPE_LINK_SHOP,
                              text: i.substring(o, o + m),
                              id: g.item_id,
                              dynamicId: f,
                              url: g ? g.jump_url : "",
                              shopIcon: l,
                              sourceType: g ? g.source_type : 0,
                            });
                          } else h({ type: Ts.TYPE_STRING, text: i.substring(o, o + m) });
                      }
                    }),
                  C < i.length &&
                    V({ type: Ts.TYPE_STRING, text: i.substring(C, i.length) }),
                  r
                );
              })(t, e, n)
            );
          } catch (e) {
            i([{ type: Ts.TYPE_STRING, text: t }]);
          }
        });
      };
    function Bs(t, e) {
      var n =
        ("undefined" != typeof Symbol && t[Symbol.iterator]) || t["@@iterator"];
      if (!n) {
        if (
          Array.isArray(t) ||
          (n = (function (t, e) {
            if (!t) return;
            if ("string" == typeof t) return Ds(t, e);
            var n = Object.prototype.toString.call(t).slice(8, -1);
            "Object" === n && t.constructor && (n = t.constructor.name);
            if ("Map" === n || "Set" === n) return Array.from(t);
            if (
              "Arguments" === n ||
              /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
            )
              return Ds(t, e);
          })(t)) ||
          (e && t && "number" == typeof t.length)
        ) {
          n && (t = n);
          var i = 0,
            s = function () {};
          return {
            s: s,
            n: function () {
              return i >= t.length ? { done: !0 } : { done: !1, value: t[i++] };
            },
            e: function (t) {
              throw t;
            },
            f: s,
          };
        }
        throw new TypeError(
          "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
        );
      }
      var o,
        r = !0,
        a = !1;
      return {
        s: function () {
          n = n.call(t);
        },
        n: function () {
          var t = n.next();
          return (r = t.done), t;
        },
        e: function (t) {
          (a = !0), (o = t);
        },
        f: function () {
          try {
            r || null == n.return || n.return();
          } finally {
            if (a) throw o;
          }
        },
      };
    }
    function Ds(t, e) {
      (null == e || e > t.length) && (e = t.length);
      for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
      return i;
    }
    function Ns(t, e) {
      for (var n = 0; n < e.length; n++) {
        var i = e[n];
        (i.enumerable = i.enumerable || !1),
          (i.configurable = !0),
          "value" in i && (i.writable = !0),
          Object.defineProperty(t, i.key, i);
      }
    }
    var Rs = function (t) {
        var e = "";
        if (!t) return e;
        switch (t.nodeName) {
          case "IMG":
            e = t.alt || "";
            break;
          case "INPUT":
            e = t.value || "";
            break;
          case "A":
            if (!t.getAttribute) return e;
            var n = t.getAttribute("alt");
            e = n || t.textContent || "";
            break;
          default:
            e = t.textContent || "";
        }
        return e;
      },
      $s = (function () {
        function t(e) {
          !(function (t, e) {
            if (!(t instanceof e))
              throw new TypeError("Cannot call a class as a function");
          })(this, t),
            (this.div = e);
        }
        var e, n, i;
        return (
          (e = t),
          (n = [
            {
              key: "getRange",
              value: function () {
                var t = window.getSelection();
                if (t && !(t.rangeCount < 1))
                  return t.getRangeAt(t.rangeCount - 1);
              },
            },
            {
              key: "getTextOffset",
              value: function () {
                var t =
                    arguments.length > 0 &&
                    void 0 !== arguments[0] &&
                    arguments[0],
                  e = this.getRange();
                if (!e) return 0;
                var n = t ? e.startContainer : e.endContainer,
                  i = t ? e.startOffset : e.endOffset,
                  s = 0;
                if (n === this.div) {
                  var o,
                    r = 0,
                    a = Bs(this.div.childNodes);
                  try {
                    for (a.s(); !(o = a.n()).done; ) {
                      var c = o.value,
                        l = Rs(c).length;
                      if (!(r < i)) return s > 0 ? s - 1 : 0;
                      (s += l), (r += 1);
                    }
                  } catch (t) {
                    a.e(t);
                  } finally {
                    a.f();
                  }
                  return s > 0 ? s - 1 : 0;
                }
                var u,
                  d = Bs(this.div.childNodes);
                try {
                  for (d.s(); !(u = d.n()).done; ) {
                    var p = u.value;
                    if (p === n || p.firstChild === n)
                      return (s += i) > 0 ? s - 1 : 0;
                    s += Rs(p).length;
                  }
                } catch (t) {
                  d.e(t);
                } finally {
                  d.f();
                }
                return s > 0 ? s - 1 : 0;
              },
            },
            {
              key: "setCaret",
              value: function (t) {
                var e = t + 1;
                try {
                  var n = window.getSelection();
                  if (!n) return;
                  for (var i = 0, s = 0; s < this.div.childNodes.length; s++) {
                    var o = this.div.childNodes[s],
                      r = Rs(o).length;
                    if (!(r < e - i)) {
                      if (r === e - i) {
                        n.collapse(this.div, s + 1);
                        break;
                      }
                      1 === o.nodeType
                        ? o.firstChild &&
                          o.firstChild.getAttribute &&
                          "false" !==
                            o.firstChild.getAttribute("contenteditable")
                          ? n.collapse(o.firstChild, e - i)
                          : e - i == 0
                          ? n.collapse(this.div, s)
                          : n.collapse(this.div, s + 1)
                        : n.collapse(o, e - i);
                      break;
                    }
                    i += r;
                  }
                } catch (t) {}
              },
            },
          ]) && Ns(e.prototype, n),
          i && Ns(e, i),
          t
        );
      })(),
      Us = n(306),
      Vs = n(108),
      zs = r.a.component("renderHTML", {
        mixins: [Us.a],
        props: { bus: { type: Object } },
        methods: {
          onVoteClick: function () {
            this.bus.$emit("vote-item-click");
          },
          onLotteryClick: function () {
            this.bus.$emit("lottery-item-click");
          },
          renderHTML: function () {
            var t = this,
              e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : [],
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : {},
              i =
                arguments.length > 2 && void 0 !== arguments[2] && arguments[2];
            return new Promise(function (s) {
              Object(Vs.a)(i)
                .then(function (o) {
                  s(t.renderHTMLSync(e, n, i, o));
                })
                .catch(function (n) {
                  console.error(n), s(t.renderHTMLSync(e, void 0, i, null, !0));
                });
            });
          },
          renderHTMLSync: function () {
            var t = this,
              e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : [],
              n =
                arguments.length > 1 && void 0 !== arguments[1]
                  ? arguments[1]
                  : {},
              i =
                arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
              s = arguments.length > 3 ? arguments[3] : void 0,
              o = arguments.length > 4 ? arguments[4] : void 0,
              r = this.$createElement,
              a = [];
            if (o)
              return (
                e.forEach(function (t) {
                  a.push(t.url || t.text || t.id);
                }),
                a
              );
            var c = n.verticalAlign,
              l = void 0 === c ? "text-bottom" : c,
              u = n.width,
              d = void 0 === u ? 20 : u,
              p = n.height,
              m = void 0 === p ? 20 : p,
              f = n.extendCtrlJson,
              h = void 0 === f ? "" : f,
              g = 0,
              v = Object(j.d)(h).from;
            return (
              v && (g = v.emoji_type),
              e.forEach(function (e) {
                var n = "",
                  o = "",
                  c = e.url || e.text || e.id || "";
                switch (e.type) {
                  case Ts.TYPE_STRING:
                    a.push(
                      t.renderEmoji(
                        c,
                        { width: d, height: m, verticalAlign: l, emojiType: g },
                        s,
                        i
                      )
                    );
                    break;
                  case Ts.TYPE_LOTTERY:
                    (o = e.text),
                      a.push(
                        r(
                          "span",
                          {
                            class: "dynamic-link-hover-bg",
                            on: { click: t.onLotteryClick },
                            attrs: { contenteditable: "false" },
                            style: "cursor:pointer;color:#00a1d6;",
                          },
                          [
                            r("i", {
                              class: "bp-svg-icon lottery-btn",
                              attrs: { contenteditable: "false" },
                              style:
                                "position:relative;top:-2px;margin-left:2px;margin-right:2px;",
                            }),
                            o,
                          ]
                        )
                      );
                    break;
                  case Ts.TYPE_VOTE:
                    (o = e.text),
                      a.push(
                        r(
                          "span",
                          {
                            class: "dynamic-link-hover-bg",
                            on: { click: t.onVoteClick },
                            attrs: { contenteditable: "false" },
                            style: "cursor:pointer;color:#00a1d6;",
                          },
                          [
                            r("i", {
                              class: "bp-svg-icon vote-btn",
                              attrs: { contenteditable: "false" },
                              style:
                                "position:relative;top:-1px;margin-left:2px;margin-right:2px;",
                            }),
                            o,
                          ]
                        )
                      );
                    break;
                  case Ts.TYPE_AT:
                    (n = "".concat(mt.a.SPACE, "/").concat(e.id, "/dynamic")),
                      a.push(
                        r(
                          "a",
                          {
                            attrs: {
                              href: n,
                              target: "_blank",
                              contenteditable: "false",
                            },
                            class: "dynamic-link-hover-bg",
                            style: "cursor:pointer;color:#00a1d6;",
                          },
                          [c]
                        )
                      );
                    break;
                  case Ts.TYPE_LINK_AV:
                  case Ts.TYPE_LINK_BV:
                    a.push(
                      r(
                        "a",
                        {
                          attrs: {
                            href: "".concat(mt.a.MAIN, "/video/").concat(e.id),
                            target: "_blank",
                            contenteditable: "false",
                          },
                          class: "dynamic-link-hover-bg",
                          style: "cursor:pointer;color:#00a1d6;",
                        },
                        [c]
                      )
                    );
                    break;
                  case Ts.TYPE_LINK_CV:
                    a.push(
                      r(
                        "a",
                        {
                          attrs: {
                            href: "".concat(mt.a.MAIN, "/read/").concat(e.id),
                            target: "_blank",
                            contenteditable: "false",
                          },
                          class: "dynamic-link-hover-bg",
                          style: "cursor:pointer;color:#00a1d6;",
                        },
                        [c]
                      )
                    );
                    break;
                  case Ts.TYPE_LINK_VC:
                    a.push(
                      r(
                        "a",
                        {
                          attrs: {
                            href: "".concat(mt.a.VC, "/video/").concat(e.id),
                            target: "_blank",
                            contenteditable: "false",
                          },
                          class: "dynamic-link-hover-bg",
                          style: "cursor:pointer;color:#00a1d6;",
                        },
                        [c]
                      )
                    );
                    break;
                  default:
                    a.push(c);
                }
              }),
              a
            );
          },
        },
      }),
      Hs = r.a.component("CoreEditor", {
        props: {
          value: {
            type: String,
            default: function () {
              return "";
            },
          },
          bus: {
            type: Object,
            default: function () {
              return new r.a();
            },
          },
          pasteHandler: { type: Function },
          extendCtrlJson: {
            type: String,
            default: function () {
              return "{}";
            },
          },
          chatPanel: { type: Boolean, default: !1 },
        },
        mixins: [zs],
        data: function () {
          return {
            textContent: this.value,
            domText: this.value,
            caretStart: 0,
            caretPos: 0,
            cm: void 0,
            recordStack: [],
            recordLen: 0,
            ris: [],
            componsionSelection: { start: 0, end: 0, ok: !1 },
            hasInit: !1,
          };
        },
        computed: {
          text: {
            get: function () {
              return this.textContent
                .replace(/\r\n|\r/g, "\n")
                .replace(/\n{2,}/g, "\n\n")
                .replace(/^\n+/, "")
                .replace(/^ +/, "");
            },
            set: function (t) {
              this.hasInit
                ? (this.textContent = t)
                : ((this.textContent = this.value || t), (this.hasInit = !0));
            },
          },
        },
        watch: {
          text: function (t, e) {
            t !== e &&
              (this.record(),
              this.emitTextUpdate(),
              this.emitDomTextUpdate(),
              this.updateRis(),
              this.chatPanel && this.$emit("inputMessage", t));
          },
          extendCtrlJson: function (t, e) {
            t !== e && this.updateRis();
          },
          value: function (t) {
            this.text !== t && (this.text = t);
          },
          caretPos: function (t) {
            this.bus.$emit("caret-change", t);
          },
        },
        render: function () {
          var t = arguments[0];
          return t("div", { ref: "editor", attrs: { id: "editor" } }, [
            "‍",
            this.ris.map(function (t) {
              return t || "";
            }),
            "\n",
          ]);
        },
        created: function () {
          this.initBus();
        },
        mounted: function () {
          var t = this.$refs.editor;
          (t.contentEditable = "true"),
            /MSIE |Trident/.test(window.navigator.userAgent) &&
              document.execCommand("AutoUrlDetect", !1, !1),
            (this.cm = new $s(t)),
            this.cm.setCaret(this.text.length),
            (this.recordStack = []),
            (this.recordLen = 0),
            this.record(),
            t.addEventListener("keypress", this.onKeypress),
            t.addEventListener("keydown", this.onKeydown),
            t.addEventListener("cut", this.onCut),
            t.addEventListener("paste", this.onPaste),
            t.addEventListener("compositionstart", this.onCompositionstart),
            t.addEventListener("compositionupdate", function (t) {
              return t.preventDefault();
            }),
            t.addEventListener("compositionend", this.onCompositionend),
            t.addEventListener("input", this.onInput),
            t.addEventListener("dragstart", function (t) {
              return t.preventDefault();
            }),
            t.addEventListener("drop", function (t) {
              return t.preventDefault();
            }),
            (t.value = ""),
            this.bus.$emit("editor-dom-change", t),
            this.updateRis();
        },
        updated: function () {
          this.cm.setCaret(this.caretPos),
            this.fixSafariShadowText(),
            this.scrollIntoView();
        },
        methods: {
          initBus: function () {
            var t = this;
            this.bus.$on("delete", this.deleteText),
              this.bus.$on("insert", this.insertText),
              this.bus.$on("replace", this.replaceText),
              this.bus.$on("reset", this.onReset),
              this.bus.$on("text-update", this.onTextUpdate),
              this.bus.$on("set", function (e) {
                (t.text = e), (t.caretPos = e.length);
              });
          },
          updateRis: function () {
            var t = this,
              e = { extendCtrlJson: this.extendCtrlJson };
            Ms(this.text, e).then(function (n) {
              t.renderHTML(n, e, t.chatPanel).then(function (e) {
                (t.ris = e), t.$nextTick(t.emitDomTextUpdate);
              });
            });
          },
          emitTextUpdate: function () {
            this.bus.$emit("text-update", this.text);
            var t = this.$refs.editor;
            (t.value = "‍".concat(this.text)),
              t.dispatchEvent(new CustomEvent("input"));
          },
          emitDomTextUpdate: function () {
            this.$emit("dom-update", {
              text: Rs(this.$refs.editor).replace(/\n+$/g, "").replace("‍", ""),
            });
          },
          onReset: function () {
            (this.text = ""), (this.recordStack = []), (this.recordLen = 0);
          },
          onTextUpdate: function (t) {
            this.text = t;
          },
          record: function () {
            this.recordLen < this.recordStack.length + 1 &&
              this.recordStack.push({
                text: this.text,
                textOffset: this.caretPos,
              }),
              (this.recordLen = this.recordStack.length);
          },
          onKeypress: function (t) {
            if (
              !(
                t.ctrlKey ||
                t.altKey ||
                t.metaKey ||
                t.isComposing ||
                0 === t.charCode
              )
            ) {
              var e = t.key;
              switch (e) {
                case "Spacebar":
                  e = " ";
                  break;
                case "Esc":
                  e = "Escape";
              }
              t.preventDefault(), t.stopPropagation();
              var n,
                i = this.cm.getTextOffset(!0),
                s = this.cm.getTextOffset();
              if ("Enter" === e)
                n = this.text.slice(0, i) + "\n" + this.text.slice(s);
              else {
                var o = t.keyCode ? String.fromCharCode(t.keyCode) : e;
                n = this.text.slice(0, i) + o + this.text.slice(s);
              }
              (this.caretPos = i + 1), (this.text = n);
            }
          },
          onKeydown: function (t) {
            if (this.chatPanel && !t.shiftKey && "Enter" === t.key)
              return this.$emit("enterText", t), void t.preventDefault();
            if ((t.ctrlKey || t.metaKey) && "z" === t.key) {
              if ((t.preventDefault(), this.recordStack.length <= 1)) return;
              this.recordStack.pop();
              var e = this.recordStack[this.recordStack.length - 1];
              (this.caretPos = e.textOffset || e.text.length),
                (this.text = e.text);
            }
            t.isComposing ||
              "Delete" !== t.key ||
              (t.preventDefault(), this.backspaceDelete(!0)),
              t.isComposing ||
                "Backspace" !== t.key ||
                (t.preventDefault(), this.backspaceDelete(!1));
          },
          backspaceDelete: function () {
            var t = this,
              e =
                arguments.length > 0 && void 0 !== arguments[0] && arguments[0],
              n = this.cm.getTextOffset(!0),
              i = this.cm.getTextOffset(),
              s = this.cm.getRange();
            if (s) {
              n > this.text.length && (n = this.text.length),
                i > this.text.length && (i = this.text.length);
              var o = function (n, i) {
                  var s = Rs(n).length;
                  if (e) {
                    if (i + s > t.text.length) return;
                    var o = t.text.slice(0, i) + t.text.slice(i + s);
                    (t.caretPos = i), (t.text = o);
                  } else {
                    if (i - s < 0) return;
                    var r = t.text.slice(0, i - s) + t.text.slice(i);
                    (t.caretPos = i - s), (t.text = r);
                  }
                },
                r = function () {
                  if (e) {
                    if (i >= t.text.length) return;
                    var s = t.text.slice(0, i) + t.text.slice(i + 1);
                    (t.caretPos = n), (t.text = s);
                  } else {
                    if (i < 1) return;
                    var o = t.text.slice(0, i - 1) + t.text.slice(i);
                    (t.caretPos = i - 1), (t.text = o);
                  }
                };
              if (n !== i) {
                var a = this.text.slice(0, n) + this.text.slice(i);
                (this.caretPos = n), (this.text = a);
              } else if (i > 0)
                if (s.endContainer === this.$refs.editor) {
                  var c = this.$refs.editor.childNodes[e ? 0 : s.endOffset - 1];
                  1 === c.nodeType ? o(c, i) : r();
                } else {
                  var l = s.endContainer,
                    u = l.previousSibling,
                    d = l.nextSibling;
                  l.parentNode !== this.$refs.editor &&
                  ((!e && s.endOffset === Rs(l).length) ||
                    (e && s.startOffset === Rs(l).length))
                    ? o(l.parentNode, e ? n : i)
                    : !e && u && 1 === u.nodeType && 0 === s.endOffset
                    ? o(u, i)
                    : e && d && 1 === d.nodeType && 0 === s.startOffset
                    ? o(d, n)
                    : r();
                }
              else r();
            }
          },
          deleteText: function () {
            var t,
              e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 1,
              n = this.cm.getTextOffset(!0),
              i = this.cm.getTextOffset();
            n > this.text.length && (n = this.text.length),
              i > this.text.length && (i = this.text.length),
              (t =
                e > 0
                  ? this.text.slice(0, n - e) + this.text.slice(i)
                  : this.text.slice(0, n) + this.text.slice(i - e)),
              (this.caretPos = n - e),
              (this.text = t);
          },
          onInput: function (t) {
            if (
              (t.preventDefault(),
              "insertText" === t.inputType && !t.isComposing)
            ) {
              var e = this.cm.getTextOffset(!0) - t.data.length,
                n = this.cm.getTextOffset() - t.data.length,
                i = this.text.slice(0, e) + t.data + this.text.slice(n);
              (this.caretPos = e + t.data.length), (this.text = i);
            }
            this.emitDomTextUpdate();
          },
          onCompositionstart: function () {
            var t = this.cm.getTextOffset(!0),
              e = this.cm.getTextOffset();
            (this.componsionSelection.start = t),
              (this.componsionSelection.end = e),
              (this.componsionSelection.ok = !0);
          },
          onCompositionend: function (t) {
            t.preventDefault();
            var e = this.componsionSelection.ok
                ? this.componsionSelection.start
                : this.cm.getTextOffset(!0) - t.data.length,
              n = this.componsionSelection.ok
                ? this.componsionSelection.end
                : this.cm.getTextOffset() - t.data.length;
            this.componsionSelection.ok = !1;
            var i = this.text.slice(0, e) + t.data + this.text.slice(n);
            (this.caretPos = e + t.data.length), (this.text = i);
          },
          onCut: function (t) {
            t.stopPropagation(), t.preventDefault();
            var e = t.clipboardData || window.clipboardData,
              n = this.cm.getTextOffset(!0),
              i = this.cm.getTextOffset();
            e.setData("text/plain", this.text.slice(n, i));
            var s = this.text.slice(0, n) + this.text.slice(i);
            (this.caretPos = n), (this.text = s);
          },
          onPaste: function (t) {
            if (this.pasteHandler && "function" == typeof this.pasteHandler)
              this.pasteHandler(t, this.insertText);
            else {
              t.stopPropagation(), t.preventDefault();
              var e = t.clipboardData || window.clipboardData,
                n = "".concat(e.getData("Text"), " ").replace(/ +$/, " ");
              this.insertText(Object(Ls.c)(n));
            }
          },
          insertText: function (t) {
            var e = this.cm.getTextOffset(!0),
              n = this.cm.getTextOffset(),
              i = this.text.slice(0, e) + t + this.text.slice(n);
            (this.caretPos = e + t.length), (this.text = i);
          },
          replaceText: function () {
            var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : { oldStr: "", newStr: "" },
              e = t.oldStr,
              n = t.newStr,
              i = this.text.replace(e, n);
            (this.caretPos = 0), (this.text = i);
          },
          fixSafariShadowText: function () {
            var t = this.$refs.editor.childNodes;
            if (!(t.length < 2)) {
              var e = t[t.length - 1],
                n = t[t.length - 2];
              3 === e.nodeType &&
                3 === n.nodeType &&
                e.nodeValue &&
                n.nodeValue &&
                e.parentNode.removeChild(e);
            }
          },
          scrollIntoView: function () {
            var t = this.cm.getRange();
            if (t) {
              var e = t.getBoundingClientRect().top,
                n = this.$refs.editor,
                i = n.getBoundingClientRect().top,
                s = n.getBoundingClientRect().bottom;
              (e < i || e > s) && (n.scrollTop = e - i);
            }
          },
        },
      }),
      Fs = {
        props: {
          placeholder: String,
          max: [Number, String],
          height: [Number, String],
          indicatorStyle: Object,
          monitDelete: Boolean,
          show: Boolean,
          bus: Object,
          rid: [Number, String],
          content: String,
        },
        components: { CoreEditor: Hs },
        data: function () {
          return {
            myContent: "",
            combination: !1,
            domText: "",
            extendCtrlJson: JSON.stringify({ from: { emoji_type: 1 } }),
          };
        },
        computed: {
          maxNum: function () {
            return parseInt(this.max, 10) || 10;
          },
          tooMuch: function () {
            return this.content.length > this.maxNum;
          },
          showPlaceholder: function () {
            return "‍" === this.domText.toString() && !this.content.length;
          },
        },
        watch: {
          content: function (t) {
            this.myContent = t;
          },
        },
        created: function () {
          this.myContent = this.content || "";
        },
        methods: {
          handleInsertEmoji: function (t) {
            this.$refs.coreEditor.insertText(t);
          },
          handleInputMessage: function (t) {
            this.$emit("inputMessage", t);
          },
          onDomUpdate: function (t) {
            var e = t.text;
            this.domText = e;
          },
          onInput: function (t) {
            this.bus.$emit("input", t.target.value);
          },
          keyupEnter: function () {
            this.combination;
          },
          keydownEnter: function (t) {
            var e = this;
            t.isComposing ||
              setTimeout(function () {
                e.combination || e.$emit("enter", t);
              }, 100);
          },
          keydownReturn: function (t) {
            this.combination = !0;
            this.bus.$emit("input", "".concat(t.target.value).concat("\n"));
          },
          keyupReturn: function () {
            var t = this;
            setTimeout(function () {
              t.combination = !1;
            }, 100);
          },
          keyupDelete: function (t) {
            if (this.monitDelete) {
              var e = Hi(this.$refs.inputBox);
              this.bus.$emit("delete", { target: t, position: e });
            }
          },
        },
      },
      Gs =
        (n(422),
        Object(xe.a)(
          Fs,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              {
                staticClass: "input-box",
                class: { "placeholder-shown": t.showPlaceholder },
                attrs: { placeholder: "回复一下吧～" },
              },
              [
                n("core-editor", {
                  key: t.rid,
                  ref: "coreEditor",
                  staticClass: "core-style",
                  class: {
                    "too-long": t.myContent.length > t.max,
                    "in-popup": !1,
                  },
                  style: { height: t.height + "px" },
                  attrs: {
                    chatPanel: "",
                    "extend-ctrl-json": t.extendCtrlJson,
                  },
                  on: {
                    enterText: t.keydownEnter,
                    "dom-update": t.onDomUpdate,
                    inputMessage: t.handleInputMessage,
                  },
                  model: {
                    value: t.myContent,
                    callback: function (e) {
                      t.myContent = e;
                    },
                    expression: "myContent",
                  },
                }),
                n(
                  "div",
                  { staticClass: "indicator", style: t.indicatorStyle },
                  [
                    n("span", { class: { "too-much": t.tooMuch } }, [
                      t._v(t._s(t.content.length)),
                    ]),
                    t._v("/"),
                    n("span", [t._v(t._s(t.maxNum))]),
                  ]
                ),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "715777d4",
          null
        ).exports),
      Zs = [
        "(⌒▽⌒)",
        "（￣▽￣）",
        "(=・ω・=)",
        "(｀・ω・´)",
        "(〜￣△￣)〜",
        "(･∀･)",
        "(°∀°)ﾉ",
        "(￣3￣)",
        "╮(￣▽￣)╭",
        "(´_ゝ｀)",
        "←_←",
        "→_→",
        "(<_<)",
        "(>_>)",
        "(;¬_¬)",
        '("▔□▔)/',
        "(ﾟДﾟ≡ﾟдﾟ)!?",
        "Σ(ﾟдﾟ;)",
        "Σ(￣□￣||)",
        "(´；ω；`)",
        "（/TДT)/",
        "(^・ω・^ )",
        "(｡･ω･｡)",
        "(●￣(ｴ)￣●)",
        "ε=ε=(ノ≧∇≦)ノ",
        "(´･_･`)",
        "(-_-#)",
        "（￣へ￣）",
        "(￣ε(#￣)Σ",
        "ヽ(`Д´)ﾉ",
        "（#-_-)┯━┯",
        "(╯°口°)╯(┴—┴",
        "←◡←",
        "( ♥д♥)",
        "_(:3」∠)_",
        "Σ>―(〃°ω°〃)♡→",
        "⁄(⁄ ⁄•⁄ω⁄•⁄ ⁄)⁄",
        "(╬ﾟдﾟ)▄︻┻┳═一",
        "･*･:≡(　ε:)",
        "(笑)",
        "(汗)",
        "(泣)",
        "(苦笑)",
      ],
      qs = {
        props: { direction: String },
        data: function () {
          return { open: !1, emojiList: Zs };
        },
        computed: {
          absoluteStyle: function () {
            var t = "top: 36px; transform-origin: 50% 0";
            return (
              "bottom" === this.direction &&
                (t = "bottom: 36px; transform-origin: 50% 100%"),
              t
            );
          },
        },
        mounted: function () {
          window.document.addEventListener("click", this.closeBox, !1),
            Ui.$on("emotionBtn:open", this.closeBox);
        },
        beforeDestroy: function () {
          window.document.removeEventListener("click", this.closeBox, !1);
        },
        methods: {
          toggleBox: function () {
            this.open || Ui.$emit("emojiBtn:open"),
              (this.open = !this.open),
              this.$emit("click");
          },
          closeBox: function () {
            this.open = !1;
          },
          inputIt: function (t) {
            this.$emit("input", t);
          },
        },
      },
      Ks =
        (n(423),
        Object(xe.a)(
          qs,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              { staticClass: "emoji-btn" },
              [
                n("a", {
                  staticClass: "emoji-btn-box",
                  class: { opened: t.open },
                  attrs: { title: "颜文字" },
                  on: {
                    click: function (e) {
                      return e.stopPropagation(), t.toggleBox(e);
                    },
                  },
                }),
                n("transition", { attrs: { name: "im-scale-in" } }, [
                  n(
                    "div",
                    {
                      directives: [
                        {
                          name: "show",
                          rawName: "v-show",
                          value: t.open,
                          expression: "open",
                        },
                      ],
                      staticClass: "emoji-box",
                      style: t.absoluteStyle,
                    },
                    t._l(t.emojiList, function (e) {
                      return n(
                        "a",
                        {
                          staticClass: "emoji-item",
                          on: {
                            click: function (n) {
                              return n.stopPropagation(), t.inputIt(e);
                            },
                          },
                        },
                        [t._v(t._s(e))]
                      );
                    }),
                    0
                  ),
                ]),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "05ad4642",
          null
        ).exports),
      Ws = {
        白眼: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/baiyan.png",
          step: 45,
        },
        doge: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/doge.png",
          step: 20,
        },
        坏笑: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/huaixiao.png",
          step: 31,
        },
        难过: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/nanguo.png",
          step: 28,
        },
        生气: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/shengqi.png",
          step: 11,
        },
        委屈: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/weiqu.png",
          step: 20,
        },
        斜眼笑: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/xieyanxiao.png",
          step: 8,
        },
        呆: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/fadai.png",
          step: 27,
        },
        发怒: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/fanu.png",
          step: 33,
        },
        惊吓: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/jingxia.png",
          step: 32,
        },
        呕吐: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/outu.png",
          step: 42,
        },
        思考: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/sikao.png",
          step: 27,
        },
        微笑: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/weixiao.png",
          step: 20,
        },
        疑问: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/yiwen.png",
          step: 21,
        },
        大哭: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/daku.png",
          step: 8,
        },
        鼓掌: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/guzhang.png",
          step: 17,
        },
        抠鼻: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/koubi.png",
          step: 30,
        },
        亲亲: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/qinqin.png",
          step: 7,
        },
        调皮: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/tiaopi.png",
          step: 50,
          coverStep: 23,
        },
        笑哭: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/xiaoku.png",
          step: 15,
        },
        晕: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/yun.png",
          step: 12,
        },
        点赞: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/dianzan.png",
          step: 20,
          coverStep: 18,
        },
        害羞: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/haixiu.png",
          step: 31,
        },
        睡着: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/shuizhao.png",
          step: 24,
        },
        色: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/se.png",
          step: 10,
        },
        吐血: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/tuxue.png",
          step: 8,
        },
        无奈: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/wunai.png",
          step: 23,
          coverStep: 15,
        },
        再见: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/zaijian.png",
          step: 24,
        },
        流汗: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/liuhan.png",
          step: 27,
          coverStep: 10,
        },
        偷笑: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/touxiao.png",
          step: 6,
        },
        抓狂: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/zhuakuang.png",
          step: 19,
        },
        黑人问号: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/heirenwenhao.png",
          step: 26,
        },
        困: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/kun.png",
          step: 44,
        },
        打脸: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/dalian.png",
          step: 37,
        },
        闭嘴: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/bizui.png",
          step: 31,
        },
        鄙视: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/bishi.png",
          step: 9,
        },
        腼腆: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/miantian.png",
          step: 28,
        },
        馋: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/chan.png",
          step: 40,
          coverStep: 10,
        },
        可爱: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/keai.png",
          step: 17,
        },
        发财: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/facai.png",
          step: 30,
        },
        生病: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/shengbing.png",
          step: 35,
        },
        流鼻血: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/liubixie.png",
          step: 35,
          coverStep: 10,
        },
        尴尬: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/ganga.png",
          step: 38,
        },
        大佬: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/dalao.png",
          step: 33,
        },
        流泪: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/liulei.png",
          step: 1,
        },
        冷漠: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/lengmo.png",
          step: 1,
        },
        皱眉: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/zhoumei.png",
          step: 1,
        },
        鬼脸: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/guilian.png",
          step: 1,
        },
        调侃: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/tiaokan.png",
          step: 1,
        },
        目瞪口呆: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/mudengkoudai.png",
          step: 1,
        },
      },
      Js = {
        props: { direction: String },
        data: function () {
          return { open: !1, showList: !1, emotionList: Ws };
        },
        computed: {
          absoluteStyle: function () {
            var t = "top: 36px; transform-origin: 50% 0";
            return (
              "bottom" === this.direction &&
                (t = "bottom: 36px; transform-origin: 50% 100%"),
              t
            );
          },
        },
        mounted: function () {
          window.document.addEventListener("click", this.closeBox, !1),
            Ui.$on("emojiBtn:open", this.closeBox);
        },
        beforeDestroy: function () {
          window.document.removeEventListener("click", this.closeBox, !1);
        },
        methods: {
          toggleBox: function () {
            var t = this;
            (this.showList = !1),
              this.open
                ? (this.showList = !1)
                : (Ui.$emit("emotionBtn:open"),
                  setTimeout(function () {
                    t.showList = !0;
                  }, 400)),
              (this.open = !this.open),
              this.$emit("click");
          },
          closeBox: function () {
            (this.showList = !1), (this.open = !1);
          },
          inputIt: function (t) {
            this.$emit("input", "[".concat(t, "]"));
          },
          getIconStyle: function (t) {
            return {
              backgroundImage: "url(".concat(t.img, ")"),
              animationDuration: "".concat(40 * t.step, "ms"),
              animationTimingFunction: "steps(".concat(t.step, ", end)"),
              transform: "translateY(-".concat(
                32 * (t.coverStep || t.step - 1),
                "px)"
              ),
              height: "".concat(32 * t.step, "px"),
            };
          },
        },
      },
      Ys =
        (n(424),
        n(425),
        Object(xe.a)(
          Js,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              { staticClass: "emotion-btn" },
              [
                n("a", {
                  staticClass: "emotion-btn-box",
                  class: { opened: t.open },
                  attrs: { title: "表情" },
                  on: {
                    click: function (e) {
                      return e.stopPropagation(), t.toggleBox(e);
                    },
                  },
                }),
                n("transition", { attrs: { name: "im-scale-in" } }, [
                  n(
                    "div",
                    {
                      directives: [
                        {
                          name: "show",
                          rawName: "v-show",
                          value: t.open,
                          expression: "open",
                        },
                      ],
                      staticClass: "emotion-box",
                      style: t.absoluteStyle,
                    },
                    [
                      t.showList
                        ? t._l(t.emotionList, function (e, i) {
                            return n(
                              "a",
                              {
                                staticClass: "emotion-item can-click",
                                attrs: { title: i },
                                on: {
                                  click: function (e) {
                                    return e.stopPropagation(), t.inputIt(i);
                                  },
                                },
                              },
                              [
                                n("div", {
                                  staticClass: "img",
                                  style: t.getIconStyle(e),
                                }),
                              ]
                            );
                          })
                        : t._e(),
                    ],
                    2
                  ),
                ]),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "5721754e",
          null
        ).exports),
      Qs = {
        methods: {
          click: function (t) {
            this.$emit("click", t);
          },
        },
      },
      Xs =
        (n(426),
        Object(xe.a)(
          Qs,
          function () {
            var t = this.$createElement;
            return (this._self._c || t)(
              "button",
              { staticClass: "btn-box", on: { click: this.click } },
              [this._t("default")],
              2
            );
          },
          [],
          !1,
          null,
          "6cbfef24",
          null
        ).exports),
      to = {
        userInfoOutOfDateTime: 9e5,
        groupInfoOutOfDateTime: 9e5,
        cdAfterSend: 0,
      },
      eo = {
        props: {
          arrow: { type: Boolean, default: !1 },
          arrowOptions: {
            type: Object,
            default: function () {
              return {};
            },
          },
        },
        data: function () {
          return {};
        },
        computed: {
          arrowStyle: function () {
            var t = this.arrowOptions || {},
              e = t.top,
              n = t.left,
              i = t.right,
              s = t.bottom,
              o = t.rotate,
              r = {};
            return (
              o && (r.transform = "rotateZ(".concat(o || 0, "deg)")),
              s
                ? (r.bottom = "".concat(s, "px"))
                : (r.top = "".concat(e || -5, "px")),
              i
                ? (r.right = "".concat(i, "px"))
                : (r.left = "".concat(n || 22, "px")),
              r
            );
          },
        },
        methods: {
          onClose: function (t) {
            this.$emit("close"), t.stopPropagation();
          },
        },
      },
      no =
        (n(427),
        Object(xe.a)(
          eo,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e("transition", { attrs: { name: "move-in" } }, [
              e(
                "div",
                {
                  staticClass: "static-popup",
                  style: { width: this.$attrs.width + "px" },
                },
                [
                  this.arrow
                    ? e("div", {
                        staticClass: "bp-arrow",
                        style: this.arrowStyle,
                      })
                    : this._e(),
                  e("div", {
                    staticClass: "bp-icon-font icon-group-dynamic close-btn",
                    on: { click: this.onClose },
                  }),
                  e("div", { staticClass: "title" }, [this._t("title")], 2),
                  e(
                    "div",
                    { staticClass: "content-ctnr" },
                    [this._t("default")],
                    2
                  ),
                ]
              ),
            ]);
          },
          [],
          !1,
          null,
          "00b4b4ea",
          null
        ).exports),
      io = {
        name: "emoji-item",
        props: { url: { type: String }, title: {} },
        data: function () {
          return {
            imgStyle: "background-color: #e7e7e7;width:100%;height:100%;",
          };
        },
        mounted: function () {
          (this.img = new Image()),
            (this.img.src = this.url),
            this.img.addEventListener("load", this.success),
            this.img.addEventListener("error", this.error);
        },
        destroyed: function () {
          this.img.removeEventListener("load", this.success),
            this.img.removeEventListener("error", this.error);
        },
        watch: {
          url: function () {
            this.img.src = this.url;
          },
        },
        methods: {
          success: function () {
            this.img.complete &&
              (this.imgStyle = "background-image: url(".concat(
                this.url,
                ");background-size: cover;width:100%;height:100%;"
              ));
          },
          error: function () {
            this.imgStyle = "background-color: #e7e7e7;width:100%;height:100%;";
          },
        },
      },
      so = Object(xe.a)(
        io,
        function () {
          var t = this.$createElement;
          return (this._self._c || t)("div", {
            style: this.imgStyle,
            attrs: { title: this.title },
          });
        },
        [],
        !1,
        null,
        null,
        null
      ).exports,
      oo = {
        props: {
          emojiList: {
            type: Array,
            default: function () {
              return [];
            },
          },
        },
        components: { emojiItem: so },
        data: function () {
          return { perfectScrollbar: null, isOldBrowser: Y };
        },
        watch: {
          emojiList: function () {
            this.isOldBrowser || this.updateScrollbar();
          },
        },
        mounted: function () {
          this.initScrollbar();
        },
        methods: {
          initScrollbar: function () {
            if (!this.isOldBrowser) {
              var t = this.$el;
              (this.perfectScrollbar = new ae.a(t, {
                wheelSpeed: 2,
                wheelPropagation: !0,
                minScrollbarLength: 20,
                theme: "playlist-editor",
              })),
                this.updateScrollbar();
            }
          },
          updateScrollbar: function () {
            var t = this;
            this.$nextTick(function () {
              var e = t.$el;
              (e.scrollTop = 1), t.perfectScrollbar.update(e);
            });
          },
        },
      },
      ro =
        (n(428),
        Object(xe.a)(
          oo,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              {
                staticClass: "emoji-page",
                class: { ie: t.isOldBrowser },
                on: {
                  mousedown: function (t) {
                    t.stopPropagation(), t.preventDefault();
                  },
                },
              },
              [
                n(
                  "ul",
                  { staticClass: "emoji-list f-clear" },
                  t._l(t.emojiList, function (e) {
                    return n(
                      "li",
                      {
                        key: e.url,
                        staticClass: "emoji",
                        class: { kaomoji: 4 === e.type },
                        on: {
                          click: function (n) {
                            return t.$emit("select", e.name);
                          },
                        },
                      },
                      [
                        4 !== e.type
                          ? n("emoji-item", {
                              attrs: {
                                title: e.name,
                                url: e.url.replace(/^http:\/\//, "//"),
                              },
                            })
                          : t._e(),
                        4 === e.type
                          ? n("span", { staticClass: "dp-i-block" }, [
                              t._v(t._s(e.name)),
                            ])
                          : t._e(),
                      ],
                      1
                    );
                  }),
                  0
                ),
              ]
            );
          },
          [],
          !1,
          null,
          "60ae9c4d",
          null
        ).exports),
      ao = {
        props: {
          emojiLists: {
            type: Array,
            default: function () {
              return [];
            },
          },
          curPid: { type: Number, default: 0 },
        },
        components: { emojiItem: so },
        data: function () {
          return { lineHeight: 36, curPage: 1, totalPages: 1 };
        },
        computed: {
          marginTop: function () {
            return -(this.curPage - 1) * this.lineHeight;
          },
        },
        watch: {
          emojiLists: function () {
            this.update();
          },
        },
        mounted: function () {
          this.init(), this.update();
        },
        methods: {
          init: function () {
            this.lineHeight = this.$el.offsetHeight;
          },
          update: function () {
            var t = this;
            this.$nextTick(function () {
              var e = t.$refs.list.offsetHeight;
              t.totalPages = Math.ceil(e / t.lineHeight);
            });
          },
          select: function (t) {
            this.$emit("select", t);
          },
          showPrev: function () {
            this.curPage > 1 && this.curPage--;
          },
          showNext: function () {
            this.curPage < this.totalPages && this.curPage++;
          },
        },
      },
      co =
        (n(429),
        Object(xe.a)(
          ao,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              {
                staticClass: "pagination",
                style: { height: t.lineHeight + "px" },
              },
              [
                n(
                  "ul",
                  {
                    ref: "list",
                    staticClass: "emoji-cover-list f-clear",
                    style: {
                      marginTop: t.marginTop + "px",
                      width: t.$attrs.width - 30 + "px",
                    },
                  },
                  t._l(t.emojiLists, function (e) {
                    return n(
                      "li",
                      {
                        staticClass: "emoji-cover f-left",
                        class: { selected: e.pid === t.curPid },
                        style: { height: t.lineHeight + "px" },
                        on: {
                          click: function (n) {
                            return t.select(e.pid);
                          },
                        },
                      },
                      [
                        n("emoji-item", {
                          attrs: { url: e.purl.replace(/^http:\/\//, "//") },
                        }),
                      ],
                      1
                    );
                  }),
                  0
                ),
                t.totalPages > 1
                  ? n(
                      "div",
                      {
                        staticClass: "page-controller",
                        style: {
                          height: t.lineHeight + "px",
                          lineHeight: t.lineHeight + "px",
                        },
                      },
                      [
                        n("span", {
                          staticClass:
                            "prev bp-icon-font icon-btn-triangle-left",
                          class: { disabled: t.curPage <= 1 },
                          on: { click: t.showPrev },
                        }),
                        n("span", {
                          staticClass:
                            "next bp-icon-font icon-btn-triangle-right",
                          class: { disabled: t.curPage >= t.totalPages },
                          on: { click: t.showNext },
                        }),
                      ]
                    )
                  : t._e(),
              ]
            );
          },
          [],
          !1,
          null,
          "97c4281e",
          null
        ).exports),
      lo = n(61);
    function uo(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    var po = {
        MAIN: "444.41",
        TAG: "333.169",
        SPACE: "333.49",
        DETAIL: "444.42",
        MESSAGE: "444.1",
      },
      mo = { 1: "emoji", 1e3: "emotion", 1001: "tv", 1002: "cat" },
      fo = {
        props: {
          fadeDirection: { type: Number, default: 1 },
          arrowOptions: {
            type: Object,
            default: function () {
              return {};
            },
          },
          field: { required: !0 },
          frozenElements: {
            type: Array,
            default: function () {
              return [];
            },
          },
          emojiType: {
            type: Array,
            default: function () {
              return [];
            },
          },
          spmType: { type: String },
          pubType: { type: String, default: "" },
          selectHandler: { type: Function, default: function () {} },
          isFromMessage: { type: Boolean, default: !1 },
          revert: null,
        },
        data: function () {
          return { curPid: 1, emojiLists: [] };
        },
        computed: {
          fadeStyle: function () {
            return 0 === this.fadeDirection
              ? ""
              : this.fadeDirection < 0
              ? "move-in-down"
              : "move-in";
          },
          curEmojiList: function () {
            var t = this,
              e = this.emojiLists.filter(function (e) {
                return e.pid === t.curPid;
              });
            return e.length > 0 && e[0].emojis ? e[0].emojis : [];
          },
          width: function () {
            return this.$attrs.width || 380;
          },
        },
        created: function () {
          var t,
            e = this;
          return ((t = q.a.mark(function t() {
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (t.next = 2), Object(Ls.b)(e.isFromMessage);
                  case 2:
                    e.emojiLists = Object(lo.b)(e.emojiType);
                  case 3:
                  case "end":
                    return t.stop();
                }
            }, t);
          })),
          function () {
            var e = this,
              n = arguments;
            return new Promise(function (i, s) {
              var o = t.apply(e, n);
              function r(t) {
                uo(o, i, s, r, a, "next", t);
              }
              function a(t) {
                uo(o, i, s, r, a, "throw", t);
              }
              r(void 0);
            });
          })();
        },
        mounted: function () {
          this.init(), this.bindEvents(), this.dataReport();
        },
        beforeDestroy: function () {
          this.removeEvents();
        },
        methods: {
          emojiIconId: function (t) {
            var e = this.curEmojiList[0].id;
            return (
              this.curEmojiList.forEach(function (n) {
                n.name === t && (e = n.id);
              }),
              e
            );
          },
          getCursortPosition: function (t) {
            var e = 0,
              n = t.ownerDocument || t.document,
              i = n.defaultView || n.parentWindow;
            if ("DIV" === t.tagName) {
              if (i.getSelection().rangeCount > 0) {
                var s = i.getSelection().getRangeAt(0),
                  o = s.cloneRange();
                o.selectNodeContents(t),
                  o.setEnd(s.endContainer, s.endOffset),
                  (e = o.toString().length);
              }
            } else e = t.selectionEnd;
            return e;
          },
          setCaretPosition: function (t, e) {
            var n, i;
            "DIV" === t.tagName
              ? ((n = document.createRange()).selectNodeContents(t),
                t.innerHTML.length > 0 && n.collapse(t, e),
                n.collapse(!0),
                (i = window.getSelection()).removeAllRanges(),
                i.addRange(n))
              : t.setSelectionRange(e, e);
          },
          mousewheelFix: function (t) {
            t.preventDefault();
          },
          init: function () {
            try {
              (this.curPid = this.emojiLists[0]
                ? this.emojiLists[0].pid
                : this.curPid),
                this.focusField();
            } catch (t) {
              return;
            }
          },
          dataReport: function () {
            var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : "",
              e = arguments.length > 1 ? arguments[1] : void 0;
            if (po.hasOwnProperty(this.spmType)) {
              var n = {};
              "_tab" === t
                ? (n = { package_id: this.curPid })
                : "_icon" === t &&
                  e &&
                  (n = {
                    package_id: this.curPid,
                    emoji_id: this.emojiIconId(e),
                    emoji_name: 1e3 === this.curPid ? "emotion" : e,
                  }),
                this.$bpreport.click({
                  logId: "000502",
                  spmId: po[this.spmType],
                  event: ""
                    .concat(this.pubType ? "publish" : "card_rt", "_emoji")
                    .concat(t)
                    .concat("MAIN" === this.spmType ? this.pubType : ""),
                  data: n,
                });
            }
          },
          bindEvents: function () {
            var t = this;
            this.$el.addEventListener("mousewheel", this.mousewheelFix, !1),
              this.$el.addEventListener(
                "DOMMouseScroll",
                this.mousewheelFix,
                !1
              ),
              setTimeout(function () {
                document.body.addEventListener("click", t.close, !1),
                  t.$el.addEventListener("click", t.stopPropagation),
                  t.frozenElements.forEach(function (e) {
                    e.addEventListener("click", t.stopPropagation);
                  });
              }, 100);
          },
          removeEvents: function () {
            var t = this;
            this.$el.removeEventListener("mousewheel", this.mousewheelFix),
              this.$el.removeEventListener(
                "DOMMouseScroll",
                this.mousewheelFix
              ),
              document.body.removeEventListener("click", this.close),
              this.$el.removeEventListener("click", this.stopPropagation),
              this.frozenElements.forEach(function (e) {
                e.removeEventListener("click", t.stopPropagation);
              });
          },
          stopPropagation: function (t) {
            t.stopPropagation();
          },
          focusField: function () {
            this.field && this.field.focus && this.field.focus();
          },
          close: function () {
            this.$emit("close");
          },
          switchEmojiPage: function (t) {
            (this.curPid = t), this.dataReport("_tab", mo[t]);
          },
          insertText: function (t) {
            if (
              (this.dataReport("_icon", t),
              this.field && "TEXTAREA" === this.field.tagName)
            ) {
              if ((this.$emit("update", t), !this.field)) return;
              if (document.selection)
                this.field.focus(), (document.selection.createRange().text = t);
              else if (
                this.field.selectionStart ||
                0 === parseInt(this.field.selectionStart)
              ) {
                var e = parseInt(this.field.selectionStart),
                  n = this.field.selectionEnd;
                (this.field.value =
                  this.field.value.substring(0, e) +
                  t +
                  this.field.value.substring(n, this.field.value.length)),
                  this.field.setSelectionRange(e + t.length, e + t.length);
              } else this.field.value += t;
              this.triggerTextareaInput(), this.focusField();
            } else this.selectHandler(t);
          },
          triggerTextareaInput: function () {
            var t = document.createEvent("HTMLEvents");
            t.initEvent("input", !1, !0), this.field.dispatchEvent(t);
          },
        },
        components: { StaticBox: no, EmojiPage: ro, EmojiPagination: co },
      },
      ho =
        (n(430),
        Object(xe.a)(
          fo,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n("transition", { attrs: { name: t.fadeStyle } }, [
              n(
                "div",
                {
                  class: { revert: t.revert },
                  on: {
                    mousedown: function (t) {
                      t.stopPropagation(), t.preventDefault();
                    },
                  },
                },
                [
                  n(
                    "static-box",
                    {
                      staticClass: "common-font",
                      attrs: {
                        arrow: !t.revert,
                        width: t.width,
                        "arrow-options": t.arrowOptions,
                      },
                      on: { close: t.close },
                    },
                    [
                      n("span", { attrs: { slot: "title" }, slot: "title" }, [
                        t._v("表情"),
                      ]),
                      n("emoji-page", {
                        attrs: { "emoji-list": t.curEmojiList },
                        on: { select: t.insertText },
                      }),
                      n("emoji-pagination", {
                        attrs: {
                          "emoji-lists": t.emojiLists,
                          "cur-pid": t.curPid,
                          width: t.width,
                        },
                        on: { select: t.switchEmojiPage },
                      }),
                    ],
                    1
                  ),
                ],
                1
              ),
            ]);
          },
          [],
          !1,
          null,
          "5275be0c",
          null
        ).exports);
    r.a.use(I);
    var go = ho;
    function vo(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    var bo = {
        props: { rid: [String, Number], hasButton: Boolean, show: Boolean },
        data: function () {
          return {
            content: "",
            inputting: !1,
            sendRemainSeconds: 0,
            emojiBoxShown: !1,
            bus: Ui,
          };
        },
        computed: {
          canSend: function () {
            var t = this.content.trim().length;
            return t > 0 && t <= 500 && 0 === this.sendRemainSeconds;
          },
          btnText: function () {
            var t = "发送";
            return (
              this.sendRemainSeconds > 0 &&
                (t = "".concat(this.sendRemainSeconds, "秒")),
              t
            );
          },
        },
        components: {
          InputBox: Gs,
          KaomojiBtn: Ks,
          BtnBox: Xs,
          EmotionBtn: Ys,
          EmojiBox: go,
        },
        mounted: function () {
          this.bus.$on("Ws:MessageWrite", this.setInputting),
            (this.emojiBoxShown = !1);
        },
        methods: {
          handleInputMessage: function (t) {
            this.onInput(t);
          },
          triggerEmojiShow: function () {
            this.emojiBoxShown = !this.emojiBoxShown;
          },
          onEmojiBoxClose: function () {
            this.emojiBoxShown = !1;
          },
          setLastSendTime: function () {
            var t = this;
            if (
              ((this.sendRemainSeconds = to.cdAfterSend),
              this.sendRemainSeconds > 0)
            )
              var e = setInterval(function () {
                t.sendRemainSeconds <= 0 && clearInterval(e),
                  (t.sendRemainSeconds -= 1);
              }, 1e3);
          },
          onInput: function (t) {
            this.content = t;
          },
          onInputEmoji: function (t) {
            this.$refs.inputBox.handleInsertEmoji(t);
          },
          sendIt: function () {
            var t = this;
            this.canSend &&
              this.$emit(
                "send",
                { content: JSON.stringify({ content: this.content }), type: 1 },
                function (e) {
                  e && (t.content = ""), t.setLastSendTime();
                }
              );
          },
          setInputting: function (t) {
            var e = this;
            t.rid === this.rid &&
              ((this.inputting = !0),
              setTimeout(function () {
                e.inputting = !1;
              }, 2800));
          },
          onDelete: function (t) {
            var e = this.content.slice(0, t.position.end),
              n = this.content.slice(t.position.end);
            if (e.match(/\[[^[\]]+?]$/) && "" === t.position.text) {
              var i = this.content;
              (this.content = e.replace(/\[[^[\]]+?]$/, "") + n),
                t.target.preventDefault();
              var s = t.position.end - (i.length - this.content.length);
              this.$nextTick(function () {
                !(function (t, e) {
                  if (t.setSelectionRange) t.focus(), t.setSelectionRange(e, e);
                  else if (t.createTextRange) {
                    var n = t.createTextRange();
                    n.collapse(!0),
                      n.moveEnd("character", e),
                      n.moveStart("character", e),
                      n.select();
                  }
                })(t.target.target, s);
              });
            }
          },
          selectImage: function () {
            var t = this,
              e = document.createElement("input");
            (e.type = "file"),
              (e.display = "none"),
              (e.accept = "image/png, image/jpeg, image/gif"),
              e.addEventListener("change", function (e) {
                var n = e.target || e.srcElement;
                t.sendImage(n.files[0]);
              }),
              e.click();
          },
          sendImage: function (t) {
            var e,
              n = this;
            return ((e = q.a.mark(function e() {
              var i, s;
              return q.a.wrap(
                function (e) {
                  for (;;)
                    switch ((e.prev = e.next)) {
                      case 0:
                        if (
                          !(
                            "gif" === t.type.split("/").pop() &&
                            t.size / Math.pow(2, 20) > 1
                          )
                        ) {
                          e.next = 5;
                          break;
                        }
                        return (
                          n.linkMsg(
                            n.$refs.sendImageButton,
                            "暂不支持超过1M的GIF图片发送",
                            "caution",
                            !0
                          ),
                          e.abrupt("return")
                        );
                      case 5:
                        if (!(t.size / Math.pow(2, 20) > 20)) {
                          e.next = 8;
                          break;
                        }
                        return (
                          n.linkMsg(
                            n.$refs.sendImageButton,
                            "暂不支持超过20M的图片发送",
                            "caution",
                            !0
                          ),
                          e.abrupt("return")
                        );
                      case 8:
                        return (
                          (e.prev = 8),
                          (e.next = 11),
                          (o = t),
                          (r = void 0),
                          (r = new FormData()).append("file_up", o),
                          r.append("biz", "im"),
                          r.append("csrf", vt("bili_jct")),
                          Object(P.a)({
                            addPlatInfo: !0,
                            url: "//api.bilibili.com/x/dynamic/feed/draw/upload_bfs",
                            method: "post",
                            data: r,
                            headers: { "Content-Type": "multipart/form-data" },
                          })
                        );
                      case 11:
                        (i = e.sent),
                          (s = JSON.stringify({
                            url: i.data.image_url,
                            height: i.data.image_height,
                            width: i.data.image_width,
                            imageType: t.type.split("/").pop(),
                            original: 1,
                            size: Math.ceil(t.size / 1024),
                          })),
                          n.$emit("send", { content: s, type: 2 }),
                          (e.next = 20);
                        break;
                      case 16:
                        (e.prev = 16),
                          (e.t0 = e.catch(8)),
                          console.error(e.t0),
                          n.linkMsg(
                            n.$refs.sendImageButton,
                            "发送图片失败",
                            "error",
                            !0
                          );
                      case 20:
                      case "end":
                        return e.stop();
                    }
                  var o, r;
                },
                e,
                null,
                [[8, 16]]
              );
            })),
            function () {
              var t = this,
                n = arguments;
              return new Promise(function (i, s) {
                var o = e.apply(t, n);
                function r(t) {
                  vo(o, i, s, r, a, "next", t);
                }
                function a(t) {
                  vo(o, i, s, r, a, "throw", t);
                }
                r(void 0);
              });
            })();
          },
        },
      },
      yo =
        (n(431),
        Object(xe.a)(
          bo,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              {
                staticClass: "send-box",
                on: {
                  click: function (e) {
                    return t.$emit("click");
                  },
                },
              },
              [
                n("div", { staticClass: "row" }, [
                  n("div", { staticClass: "space-margin" }, [
                    n("label", {
                      ref: "sendImageButton",
                      staticClass: "image-upload-btn",
                      on: { click: t.selectImage },
                    }),
                  ]),
                  n(
                    "div",
                    { staticClass: "emoji-container" },
                    [
                      n("button", {
                        ref: "btn",
                        staticClass: "emotion-btn-box",
                        class: { active: t.emojiBoxShown },
                        attrs: { title: "表情" },
                        on: { click: t.triggerEmojiShow },
                      }),
                      t.emojiBoxShown
                        ? n("emoji-box", {
                            ref: "emojibtn",
                            staticClass: "bp-emoji-box",
                            attrs: {
                              "is-from-message": "",
                              field: null,
                              revert: !0,
                              "select-handler": t.onInputEmoji,
                              "emoji-type": ["kaomojis", "dynamicEmojis"],
                              "spm-type": "MESSAGE",
                              "pub-type": "1",
                            },
                            on: { close: t.onEmojiBoxClose },
                          })
                        : t._e(),
                    ],
                    1
                  ),
                ]),
                n("InputBox", {
                  ref: "inputBox",
                  attrs: {
                    rid: t.rid,
                    max: "500",
                    bus: t.bus,
                    content: t.content,
                    height: 60,
                    "monit-delete": !0,
                    "indicator-style": { bottom: "-30px", right: "100px" },
                    show: t.show,
                  },
                  on: {
                    input: t.onInput,
                    enter: t.sendIt,
                    delete: t.onDelete,
                    inputMessage: t.handleInputMessage,
                  },
                }),
                n(
                  "div",
                  { staticClass: "row right" },
                  [
                    n(
                      "btn-box",
                      {
                        staticClass: "send-btn",
                        class: { active: t.canSend },
                        attrs: { title: "enter 发送\nshift + enter 换行" },
                        on: { click: t.sendIt },
                      },
                      [t._v(t._s(t.btnText))]
                    ),
                  ],
                  1
                ),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "7762b962",
          null
        ).exports),
      _o = {
        props: {
          time: {
            type: [String, Object, Number],
            default: function () {
              return "刚刚";
            },
          },
          reverse: {
            type: Boolean,
            default: function () {
              return !1;
            },
          },
        },
        computed: {
          timeText: function () {
            var t,
              e = this.time;
            "string" == typeof e && e.match(/^\d+$/g) && (e = parseInt(e)),
              "number" == typeof e && e < 9466848e5 && (e *= 1e3);
            var n = new Date(e),
              i = new Date();
            if (n.getTime()) {
              var s = n.getFullYear(),
                o = n.getMonth() + 1,
                r = n.getDate(),
                a = this.num2String(n.getHours()),
                c = this.num2String(n.getMinutes()),
                l =
                  s === i.getFullYear() &&
                  o === i.getMonth() + 1 &&
                  r === i.getDate()
                    ? "今天"
                    : "".concat(s, "年").concat(o, "月").concat(r, "日"),
                u = "".concat(a, ":").concat(c);
              t = this.reverse
                ? "".concat(u, " ").concat(l)
                : "".concat(l, " ").concat(u);
            } else t = e;
            return t;
          },
        },
        methods: {
          num2String: function (t) {
            return t > 9 ? String(t) : "0".concat(t);
          },
        },
      },
      wo =
        (n(432),
        Object(xe.a)(
          _o,
          function () {
            var t = this.$createElement;
            return (this._self._c || t)("span", { staticClass: "time" }, [
              this._v(this._s(this.timeText)),
            ]);
          },
          [],
          !1,
          null,
          "318cad34",
          null
        ).exports),
      Co = { props: { time: [String, Number] }, components: { TimeSpan: wo } },
      xo =
        (n(433),
        Object(xe.a)(
          Co,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e(
              "div",
              { staticClass: "msg-time" },
              [e("time-span", { attrs: { time: this.time } })],
              1
            );
          },
          [],
          !1,
          null,
          "82bd82b8",
          null
        ).exports),
      ko = {},
      So =
        (n(434),
        Object(xe.a)(
          ko,
          function () {
            var t = this.$createElement;
            this._self._c;
            return this._m(0);
          },
          [
            function () {
              var t = this.$createElement,
                e = this._self._c || t;
              return e("div", { staticClass: "lds-spinner" }, [
                e("div"),
                e("div"),
                e("div"),
                e("div"),
                e("div"),
                e("div"),
                e("div"),
                e("div"),
                e("div"),
                e("div"),
                e("div"),
                e("div"),
              ]);
            },
          ],
          !1,
          null,
          null,
          null
        ).exports),
      Io = {
        components: { Spinner: So },
        props: {
          hasHistory: { type: Boolean, default: !1 },
          hasMore: { type: Boolean, default: !1 },
          status: { type: String, default: "done" },
          text: null,
        },
        methods: {
          loadHistory: function () {
            this.$emit("loadHistory");
          },
          loadMoreMsg: function () {
            Ui.$emit("loadMoreMsg");
          },
        },
      },
      jo =
        (n(435),
        Object(xe.a)(
          Io,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n("div", { staticClass: "msg-more" }, [
              n(
                "span",
                {
                  directives: [
                    {
                      name: "show",
                      rawName: "v-show",
                      value: "done" === t.status && !t.hasMore && t.hasHistory,
                      expression: "status === 'done' && !hasMore && hasHistory",
                    },
                  ],
                  staticClass: "load-more",
                  on: { click: t.loadHistory },
                },
                [
                  n("span", { staticClass: "icon" }),
                  t._v(t._s(t.text || "查看以往消息")),
                ]
              ),
              n(
                "span",
                {
                  directives: [
                    {
                      name: "show",
                      rawName: "v-show",
                      value: "done" === t.status && !t.hasMore && !t.hasHistory,
                      expression:
                        "status === 'done' && !hasMore && !hasHistory",
                    },
                  ],
                  staticClass: "no-more",
                },
                [t._v("没有更多消息了～")]
              ),
              n(
                "span",
                {
                  directives: [
                    {
                      name: "show",
                      rawName: "v-show",
                      value: "loading" === t.status,
                      expression: "status === 'loading'",
                    },
                  ],
                  staticClass: "loading",
                },
                [n("Spinner")],
                1
              ),
              n(
                "span",
                {
                  directives: [
                    {
                      name: "show",
                      rawName: "v-show",
                      value: "error" === t.status,
                      expression: "status === 'error'",
                    },
                  ],
                  staticClass: "error",
                },
                [
                  t._v("消息加载失败，"),
                  n(
                    "span",
                    { staticClass: "btn", on: { click: t.loadMoreMsg } },
                    [t._v("点击重新加载")]
                  ),
                ]
              ),
            ]);
          },
          [],
          !1,
          null,
          "0f4fd40a",
          null
        ).exports),
      Oo = (n(436), { props: ["level", "label", "type"] }),
      Lo = Object(xe.a)(
        Oo,
        function () {
          var t = this,
            e = t.$createElement,
            n = t._self._c || e;
          return n(
            "div",
            {
              staticClass: "fans-medal-item",
              class: ["level-" + t.level, t.type ? "special-medal" : ""],
            },
            [
              t.type
                ? n("div", { staticClass: "label" }, [
                    n("i", { staticClass: "medal-deco", class: [t.type] }),
                    n("span", {
                      staticClass: "content",
                      domProps: { textContent: t._s(t.label) },
                    }),
                  ])
                : n("span", {
                    staticClass: "label",
                    domProps: { textContent: t._s(t.label) },
                  }),
              n("span", {
                staticClass: "level",
                domProps: { textContent: t._s(t.level) },
              }),
              t._t("default"),
            ],
            2
          );
        },
        [],
        !1,
        null,
        null,
        null
      ).exports;
    n(437);
    function Po(t, e) {
      for (var n = 0; n < e.length; n++) {
        var i = e[n];
        (i.enumerable = i.enumerable || !1),
          (i.configurable = !0),
          "value" in i && (i.writable = !0),
          Object.defineProperty(t, i.key, i);
      }
    }

    /**
     * PhotoImager is an image viewer for website.
     * Please check documention for more detail.
     *
     * @license MIT
     */
    var Ao = !1;
    "undefined" != typeof window &&
      (Ao = window.navigator.userAgent.indexOf("Firefox") > -1);
    var Eo = (function () {
      function t(e) {
        !(function (t, e) {
          if (!(t instanceof e))
            throw new TypeError("Cannot call a class as a function");
        })(this, t),
          (this._images = []),
          (this._isFavourite = !1),
          (this._isSupported = !1),
          (this._isAuthorized = !1),
          (this._config = null),
          (this._vm = null),
          (this.inited = !1),
          (this._imageMeta = { originalWidth: 0, originalHeight: 0 }),
          (this._clickeEvents = []),
          (this.config = e);
      }
      var e, n, i;
      return (
        (e = t),
        (i = [
          {
            key: "setOrignalImageSize",
            value: function (t) {
              var e = t._imageViewer;
              (e.style.width = t._imageMeta.originalWidth + "px"),
                (e.style.height = t._imageMeta.originalHeight + "px");
            },
          },
          {
            key: "setReactiveImageSize",
            value: function (e) {
              var n = window.innerWidth || document.documentElement.offsetWidth,
                i = window.innerHeight || document.documentElement.offsetHeight,
                s = e._imageViewer;
              t.setOrignalImageSize(e);
              var o = e._currentImageSize,
                r = o.width,
                a = o.height,
                c = r / a,
                l = n / i;
              if (r > n || a > i) {
                switch (!0) {
                  case c < 1:
                    Mo(s, i);
                    break;
                  case 1 === c:
                    if (l >= 1 && a >= i) {
                      Mo(s, i);
                      break;
                    }
                    r >= n && To(s, n);
                    break;
                  case c > 1:
                    a >= i && Mo(s, i), r >= n && To(s, n);
                }
                if (n > 800) {
                  var u = 0.8 * n - 150;
                  e._currentImageSize.width > u && To(s, u);
                }
              }
            },
          },
          {
            key: "setReactiveImagePosition",
            value: function (t) {
              var e = window.innerWidth || document.documentElement.offsetWidth,
                n = window.innerHeight || document.documentElement.offsetHeight,
                i = t._imageViewer,
                s = Bo(i),
                o = (e - s.width) / 2,
                r = (n - s.height) / 2;
              (i.style.left = (o > 0 ? o : 0) + "px"),
                (i.style.top = (r > 0 ? r : 0) + "px"),
                t._pre && (t._pre.style.width = i.style.left),
                t._next && (t._next.style.width = i.style.left);
            },
          },
        ]),
        (n = [
          {
            key: "images",
            get: function () {
              return this._images;
            },
            set: function (t) {
              this._vm && void 0 !== this._vm.images && (this._vm.images = t),
                (this._images = t);
            },
          },
          {
            key: "isFavourite",
            get: function () {
              return this._isFavourite;
            },
            set: function (t) {
              (this._isFavourite = t),
                this._vm &&
                  void 0 !== this._vm.isFavourite &&
                  (this._vm.isFavourite = t);
            },
          },
          {
            key: "isSupported",
            get: function () {
              return this._isSupported;
            },
            set: function (t) {
              (this._isSupported = t),
                this._vm &&
                  void 0 !== this._vm.isSupported &&
                  (this._vm.isSupported = t);
            },
          },
          {
            key: "isAuthorized",
            get: function () {
              return this._isAuthorized;
            },
            set: function (t) {
              (this._isAuthorized = t),
                this._vm &&
                  void 0 !== this._vm.isAuthorized &&
                  (this._vm.isAuthorized = t);
            },
          },
          {
            key: "currentImage",
            get: function () {
              return this._vm.currentImage;
            },
            set: function (t) {
              this._vm.currentImage = t;
            },
          },
          {
            key: "totalImages",
            get: function () {
              var t = this.images.length;
              return (
                this._vm &&
                  "number" == typeof this._vm.totalImages &&
                  (this._vm.totalImages = t),
                t
              );
            },
          },
          {
            key: "config",
            get: function () {
              return this._config;
            },
            set: function (t) {
              (this._config = t), this._vm && (this._vm.config = t);
            },
          },
          {
            key: "_currentImageSize",
            get: function () {
              return Bo(this._vm.$refs.imageViewer);
            },
          },
          {
            key: "_imageViewer",
            get: function () {
              return this._vm.$refs.imageViewer;
            },
          },
          {
            key: "_pre",
            get: function () {
              return this._vm.$refs.pre;
            },
          },
          {
            key: "_next",
            get: function () {
              return this._vm.$refs.next;
            },
          },
          {
            key: "_init",
            value: function (t) {
              this.inited ||
                (void 0 !== t.element
                  ? this._initByElement(t)
                  : this._initByValues(t),
                this._createComponent(t),
                (this.isSupported = !!t.isSupported),
                (this.isFavourite = !!t.isFavourite),
                (this.isAuthorized = !!t.isAuthorized));
            },
          },
          {
            key: "_initByElement",
            value: function (t) {
              for (
                var e = this,
                  n = (
                    "string" == typeof t.element
                      ? document.querySelector(t.element)
                      : t.element
                  ).querySelectorAll("[data-photo-imager-src]"),
                  i = function (t, i) {
                    var s = n[t],
                      o = s.getAttribute("data-photo-imager-src") || "",
                      r = s.getAttribute("title") || "",
                      a = function () {
                        (e.currentImage = t), e.show();
                      };
                    s.addEventListener("click", a),
                      e._clickeEvents.push({
                        el: s,
                        handler: a,
                        type: "click",
                      }),
                      e.images.push({ url: o, title: r });
                  },
                  s = 0,
                  o = n.length;
                s < o;
                s++
              )
                i(s);
            },
          },
          {
            key: "_initByValues",
            value: function (t) {
              if (
                void 0 !== t.images &&
                "[object Array]" !== Object.prototype.toString.call(t.images)
              )
                throw new TypeError(
                  "[".concat("PhotoImager", "] images 参数必须为 Array.")
                );
              (this.images =
                t.images.map(function (t) {
                  return Object.assign({}, t, {
                    url: t.url || "",
                    title: t.title || "",
                  });
                }) || []),
                this.images.length ||
                  void 0 === this.images ||
                  this.images.push(t.image || { title: "", url: "" });
            },
          },
          {
            key: "_createComponent",
            value: function (e) {
              var n = this,
                i = document.createElement("div");
              document.body.appendChild(i);
              var s = new r.a({
                data: function () {
                  return {
                    config: e,
                    isSupported: !1,
                    isFavourite: !1,
                    isAuthorized: !1,
                    images: n.images,
                    showComponent: !1,
                    imageInLoading: !0,
                    currentImage: 0,
                    totalImages: n.totalImages,
                    eventInited: !1,
                    useZoomingFunc: !1,
                    inActualSize: !1,
                    loadingImageUrl: "",
                    showHinter: !1,
                  };
                },
                template:
                  '<div class="photo-imager-container" v-show="showComponent" :class="{\'preview-mode\': useZoomingFunc && !inActualSize, \'actual-size\': useZoomingFunc && inActualSize}">\n      <div class="image-container" v-show="!imageInLoading" track-name="big_see">\n        <img class="image-viewer" @contextmenu="rightMouseFunc($event)" :src="showingImage.url" alt="Image" ref="imageViewer" :title="showingImage.title" :style="{ \'z-index\': inActualSize ? 12 : 0 }">\n      </div>\n\n      <div class="loading-image-container" v-show="imageInLoading" style="text-align: center">\n        <img class="image-viewer" @contextmenu="rightMouseFunc($event)" :src="loadingImageUrl">\n      </div>\n\n      <div class="control-buttons" v-show="!inActualSize">\n        <button class="control-button prev" ref="pre" @click="goPrev" v-if="totalImages > 1 && currentImage > 0"></button>\n        <button class="control-button next" ref="next" @click="goNext" v-if="totalImages > 1 && currentImage < totalImages - 1"></button>\n        <button class="close-button" @click="close">\n          <i class="bp-icon-font icon-close"></i>\n        </button>\n      </div>\n\n      <div class="image-hinter-ctnr" @mouseenter="openHinter($event)" @mouseleave="closeHinter($event)" v-show="!inActualSize">\n        <div class="image-count-hinter" :class="{\'show\': showHinter}">\n          <div class="count-hinter">\n            <span class="current-index">{{currentImage + 1}}</span>\n            <span>/ {{totalImages}}</span>\n          </div>\n          <div v-if="isAuthorized" class="view-actual-pictrue">\n            <a :href="showingImage.url" target="_blank">查看原图</a>\n          </div>\n        </div>\n      </div>\n\n      <button class="support-button" v-if="config.showSupportWidget" v-show="isSupported !== \'undefined\' && !inActualSize" @click="onSupport" :class="{actived: isSupported}" track-name="big_sup">\n        <div>\n          <i class="icon bp-svg-icon" :class="isSupported ? \'good-4\' : \'good-1\'"></i>\n        </div>\n        <div>\n          <span class="label" v-text="isSupported ? \'已点赞\' : \'点赞\'"></span>\n        </div>\n      </button>\n\n      <button class="favourite-button" v-if="config.showFavouriteWidget" v-show="isFavourite !== undefined && !inActualSize" @click="onFavourite" :class="{actived: isFavourite}" track-name="big_col">\n        <div>\n          <i class="icon bp-svg-icon" :class="isFavourite ? \'collection-4\' : \'collection-icons\'"></i>\n        </div>\n        <div>\n          <span class="label" v-text="isFavourite ? \'已收藏\' : \'收藏\'"></span>\n        </div>\n      </button>\n\n      <div class="loading-progress" role="progress" v-show="imageInLoading">\n        <i class="loading-icon"></i>\n      </div>\n    </div>\n    ',
                computed: {
                  showingImage: function () {
                    return this.images[this.currentImage];
                  },
                },
                methods: {
                  openHinter: function () {
                    var t = this,
                      e = null;
                    return function () {
                      var n =
                          arguments.length > 0 && void 0 !== arguments[0]
                            ? arguments[0]
                            : NaN,
                        i = t;
                      clearTimeout(e),
                        (i.showHinter = !0),
                        n &&
                          !isNaN(n) &&
                          (e = setTimeout(function () {
                            return i.closeHinter();
                          }, n));
                    };
                  },
                  closeHinter: function () {
                    this.showHinter = !1;
                  },
                  rightMouseFunc: function (t) {
                    !1 !== this.isAuthorized &&
                      (this.popMessage(
                        t.pageX,
                        t.pageY,
                        "作者设置了禁止保存，不可以偷偷存图哦~"
                      ),
                      (t.returnValue = !1));
                  },
                  popMessage: function (t, e, n) {
                    var i = document.createDocumentFragment(),
                      s = document.createElement("div");
                    (s.innerHTML = '<span class="toast-text">'.concat(
                      n,
                      "</span>"
                    )),
                      (s.className = "pop-message"),
                      (s.style.left = t + "px"),
                      (s.style.top = e + "px"),
                      setTimeout(function () {
                        (s.className += " out"),
                          setTimeout(function () {
                            s.parentNode.removeChild(s);
                          }, 350);
                      }, 2e3),
                      i.appendChild(s),
                      document.body.appendChild(i);
                  },
                  resetState: function () {
                    (this.imageInLoading = !0), (this.useZoomingFunc = !1);
                  },
                  goPrev: function () {
                    n.currentImage > 0 &&
                      n.images.length &&
                      !this.imageInLoading &&
                      (n.currentImage--, (this.inActualSize = !1)),
                      n.currentImage <= 0 && this.openHinter(3e3);
                  },
                  goNext: function () {
                    this.currentImage < n.totalImages - 1 &&
                      !this.imageInLoading &&
                      (n.currentImage++, (this.inActualSize = !1)),
                      n.currentImage >= n.totalImages - 1 &&
                        this.openHinter(3e3);
                  },
                  show: function () {
                    (this.showComponent = !0), e.hideBodyScroll && No();
                  },
                  close: function () {
                    this.releaseEvent(),
                      (this.showComponent = !1),
                      e.hideBodyScroll && $o(),
                      setTimeout(this.destroy);
                  },
                  destroy: function () {
                    var t,
                      e = this.$refs.imageViewer;
                    null == e ||
                      e.removeEventListener("click", this.zoomingEvent),
                      null == e ||
                        e.removeEventListener("load", this.imageOnLoad),
                      this.releaseEvent(),
                      null === (t = this.$el.parentElement) ||
                        void 0 === t ||
                        t.removeChild(this.$el),
                      this.$destroy();
                  },
                  onSupport: function (t) {
                    if ("function" == typeof e.onSupport) {
                      var i = !this.isSupported;
                      e.onSupport(i, t.target)
                        .then(function () {
                          n.isSupported = i;
                        })
                        .catch(function () {});
                    }
                  },
                  onFavourite: function (t) {
                    if ("function" == typeof e.onFavourite) {
                      var i = !this.isFavourite;
                      e.onFavourite(i, t.target)
                        .then(function () {
                          n.isFavourite = i;
                        })
                        .catch(function () {});
                    }
                  },
                  releaseEvent: function () {
                    var t = this;
                    window.removeEventListener(
                      "resize",
                      t.setImagePositionAndSize
                    ),
                      window.removeEventListener("keyup", t.keyUpEvent),
                      window.removeEventListener(
                        "mousewheel",
                        t.scrollingEvent
                      ),
                      Ao &&
                        window.removeEventListener(
                          "DOMMouseScroll",
                          t.scrollingEvent
                        ),
                      (t.eventInited = !1);
                  },
                  imageOnLoad: function () {
                    var t = this,
                      e = this;
                    (e.imageInLoading = !1),
                      this.$nextTick(function () {
                        var i = Do(t.$refs.imageViewer),
                          s = i.width,
                          o = i.height;
                        (n._imageMeta.originalWidth = s),
                          (n._imageMeta.originalHeight = o),
                          e.setZoomable(),
                          e.setImagePositionAndSize();
                      });
                  },
                  setZoomable: function () {
                    var t =
                        window.innerWidth ||
                        document.documentElement.offsetWidth,
                      e =
                        window.innerHeight ||
                        document.documentElement.offsetHeight,
                      n = Do(this.$refs.imageViewer),
                      i = n.width,
                      s = n.height;
                    (t < i || e < s) &&
                      ((this.inActualSize = !1), (this.useZoomingFunc = !0));
                  },
                  scrollingEvent: function (t) {
                    if (!this.inActualSize) {
                      t.preventDefault();
                      var e = 0;
                      t.wheelDelta
                        ? (e = t.wheelDelta)
                        : t.detail && (e = -1 * t.detail),
                        e < 0 ? this.goNext() : this.goPrev();
                    }
                  },
                  zoomingEvent: function () {
                    if (this.useZoomingFunc) {
                      var i = !this.inActualSize;
                      (this.inActualSize = i),
                        i
                          ? (t.setOrignalImageSize(n),
                            t.setReactiveImagePosition(n),
                            No())
                          : (this.setImagePositionAndSize(),
                            e.hideBodyScroll || $o());
                    }
                  },
                  keyUpEvent: function (t) {
                    var e = this;
                    switch (t.keyCode) {
                      case 27:
                        e.close();
                        break;
                      case 37:
                        !e.inActualSize && e.goPrev();
                        break;
                      case 39:
                        !e.inActualSize && e.goNext();
                    }
                  },
                  setImagePositionAndSize: function () {
                    n._setImagePositionAndSize(), this.setZoomable();
                  },
                  initEvent: function () {
                    var t = this;
                    if (!t.eventInited) {
                      var e = this.$refs.imageViewer,
                        n = new Image();
                      n.addEventListener("load", function e() {
                        t.imageOnLoad(), n.removeEventListener("load", e);
                      }),
                        (n.src = t.loadingImageUrl),
                        e.addEventListener("load", t.imageOnLoad),
                        e.addEventListener("click", t.zoomingEvent),
                        window.addEventListener(
                          "resize",
                          t.setImagePositionAndSize
                        ),
                        window.addEventListener("keyup", t.keyUpEvent),
                        window.addEventListener(
                          "mousewheel",
                          t.scrollingEvent,
                          { passive: !1 }
                        ),
                        Ao &&
                          window.addEventListener(
                            "DOMMouseScroll",
                            t.scrollingEvent
                          ),
                        (t.eventInited = !0);
                    }
                  },
                },
                created: function () {
                  this.loadingImageUrl = this.showingImage.url;
                },
                mounted: function () {
                  this.showComponent && this.initEvent();
                },
                watch: {
                  "showingImage.url": function (t) {
                    var e = this,
                      n = this;
                    (n.loadingImageUrl = ""),
                      this.$nextTick(function () {
                        n.loadingImageUrl = t;
                        var i = e.$refs.imageViewer;
                        n.resetState(),
                          (i.style.width = ""),
                          (i.style.height = "");
                      });
                  },
                  showComponent: function (t) {
                    var e = this;
                    t &&
                      this.$nextTick(function () {
                        e.initEvent();
                      });
                  },
                },
              });
              s.$mount(i), (this._vm = s);
            },
          },
          {
            key: "_setImagePositionAndSize",
            value: function () {
              var e = this;
              window.requestAnimationFrame
                ? window.requestAnimationFrame(function () {
                    t.setReactiveImageSize(e), t.setReactiveImagePosition(e);
                  })
                : (t.setReactiveImageSize(this),
                  t.setReactiveImagePosition(this));
            },
          },
          {
            key: "goPrev",
            value: function () {
              this._vm.goPrev();
            },
          },
          {
            key: "goNext",
            value: function () {
              this._vm.goNext();
            },
          },
          {
            key: "show",
            value: function () {
              var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 0;
              this._init(this.config),
                t < 0 && (t = 0),
                t > this.totalImages - 1 && (t = this.totalImages - 1),
                this._vm.show(),
                "number" == typeof t && (this.currentImage = t);
            },
          },
          {
            key: "close",
            value: function () {
              this._vm.close();
            },
          },
          {
            key: "destroy",
            value: function () {
              this._clickeEvents.forEach(function (t) {
                t.el.removeEventListener(t.type, t.handler);
              }),
                this._vm.destroy();
            },
          },
        ]) && Po(e.prototype, n),
        i && Po(e, i),
        t
      );
    })();
    function To(t, e) {
      (t.style.width = e + "px"), (t.style.height = "auto");
    }
    function Mo(t, e) {
      (t.style.height = e + "px"), (t.style.width = "auto");
    }
    function Bo(t) {
      return t.getBoundingClientRect();
    }
    function Do(t) {
      return { width: t.naturalWidth, height: t.naturalHeight };
    }
    function No() {
      document.body.style.overflow = "hidden";
    }
    var Ro = "undefined" != typeof window ? document.body.style.overflow : "";
    function $o() {
      document.body.style.overflow = Ro;
    }
    n(143);
    var Uo = n(68),
      Vo = n.n(Uo),
      zo = n(308),
      Ho = n.n(zo);
    function Fo(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function Go(t) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (i, s) {
          var o = t.apply(e, n);
          function r(t) {
            Fo(o, i, s, r, a, "next", t);
          }
          function a(t) {
            Fo(o, i, s, r, a, "throw", t);
          }
          r(void 0);
        });
      };
    }
    function Zo(t, e) {
      for (var n = 0; n < e.length; n++) {
        var i = e[n];
        (i.enumerable = i.enumerable || !1),
          (i.configurable = !0),
          "value" in i && (i.writable = !0),
          Object.defineProperty(t, i.key, i);
      }
    }
    var qo = (function () {
        function t(e) {
          !(function (t, e) {
            if (!(t instanceof e))
              throw new TypeError("Cannot call a class as a function");
          })(this, t),
            (this.instance = Ho.a.createInstance(e)),
            (this.cache = {});
        }
        var e, n, i, s, o, r, a;
        return (
          (e = t),
          (n = [
            {
              key: "getItem",
              value:
                ((a = Go(
                  q.a.mark(function t(e) {
                    return q.a.wrap(
                      function (t) {
                        for (;;)
                          switch ((t.prev = t.next)) {
                            case 0:
                              return (
                                (t.prev = 0),
                                (t.next = 3),
                                this.instance.getItem(e)
                              );
                            case 3:
                              return t.abrupt("return", t.sent);
                            case 6:
                              return (
                                (t.prev = 6),
                                (t.t0 = t.catch(0)),
                                console.warn(
                                  "IndexedDB读取失败: ".concat(t.t0.message)
                                ),
                                t.abrupt("return", this.cache[e])
                              );
                            case 10:
                            case "end":
                              return t.stop();
                          }
                      },
                      t,
                      this,
                      [[0, 6]]
                    );
                  })
                )),
                function (t) {
                  return a.apply(this, arguments);
                }),
            },
            {
              key: "setItem",
              value:
                ((r = Go(
                  q.a.mark(function t(e, n) {
                    return q.a.wrap(
                      function (t) {
                        for (;;)
                          switch ((t.prev = t.next)) {
                            case 0:
                              return (
                                (this.cache[e] = n),
                                (t.prev = 1),
                                (t.next = 4),
                                this.instance.setItem(e, n)
                              );
                            case 4:
                              t.next = 9;
                              break;
                            case 6:
                              (t.prev = 6),
                                (t.t0 = t.catch(1)),
                                console.warn(
                                  "IndexedDB储存失败: ".concat(t.t0.message)
                                );
                            case 9:
                            case "end":
                              return t.stop();
                          }
                      },
                      t,
                      this,
                      [[1, 6]]
                    );
                  })
                )),
                function (t, e) {
                  return r.apply(this, arguments);
                }),
            },
            {
              key: "removeItem",
              value:
                ((o = Go(
                  q.a.mark(function t(e) {
                    return q.a.wrap(
                      function (t) {
                        for (;;)
                          switch ((t.prev = t.next)) {
                            case 0:
                              return (
                                (this.cache[e] = null),
                                (t.prev = 1),
                                (t.next = 4),
                                this.instance.removeItem(e)
                              );
                            case 4:
                              t.next = 9;
                              break;
                            case 6:
                              (t.prev = 6),
                                (t.t0 = t.catch(1)),
                                console.warn(
                                  "IndexedDB储存失败: ".concat(t.t0.message)
                                );
                            case 9:
                            case "end":
                              return t.stop();
                          }
                      },
                      t,
                      this,
                      [[1, 6]]
                    );
                  })
                )),
                function (t) {
                  return o.apply(this, arguments);
                }),
            },
            {
              key: "clear",
              value:
                ((s = Go(
                  q.a.mark(function t() {
                    return q.a.wrap(
                      function (t) {
                        for (;;)
                          switch ((t.prev = t.next)) {
                            case 0:
                              this.instance.clear(), (this.cache = {});
                            case 2:
                            case "end":
                              return t.stop();
                          }
                      },
                      t,
                      this
                    );
                  })
                )),
                function () {
                  return s.apply(this, arguments);
                }),
            },
          ]) && Zo(e.prototype, n),
          i && Zo(e, i),
          t
        );
      })(),
      Ko = new qo({
        name: "im_store",
        storeName: "messageStore",
        description: "消息数据",
      }),
      Wo = new qo({
        name: "im_store",
        storeName: "messageSequenceStore",
        description: "每个会话的消息序列",
      }),
      Jo = new qo({
        name: "im_store",
        storeName: "latestMsgFetched",
        description: "每个会话拉取新消息的位置",
      }),
      Yo = new qo({
        name: "im_store",
        storeName: "sessionMsgDeleted",
        description: "每个会话已删除消息的最新一条",
      }),
      Qo = new qo({
        name: "im_store",
        storeName: "userStore",
        description: "用户信息数据",
      }),
      Xo = new qo({
        name: "im_store",
        storeName: "groupStore",
        description: "群组信息数据",
      }),
      tr = new qo({
        name: "im_store",
        storeName: "groupMemberStore",
        description: "群组成员列表数据",
      }),
      er = new qo({
        name: "im_store",
        storeName: "pushCardGuide",
        description: "该会话是否接收过推送卡片(是否展示过推送卡片引导)",
      }),
      nr = function () {
        var t = [Ko, Wo, Qo, Xo, tr, Jo, Yo, er].map(function (t) {
          return t.clear();
        });
        return Promise.all(t);
      },
      ir =
        (n(439),
        function (t) {
          try {
            return /{/.test(t)
              ? JSON.parse(t.replace("{↵", "{").replace("↵}", "}"))
              : { content: t || "" };
          } catch (e) {
            try {
              return JSON.parse(
                t.replace("{↵", "{").replace("↵}", "}").replace(/\n/g, "")
              );
            } catch (e) {
              return { content: t || "" };
            }
          }
        }),
      sr = {
        set: function (t, e, n) {
          if ("undefined" != typeof window)
            try {
              localStorage.setItem(t, JSON.stringify(e)),
                n &&
                  localStorage.setItem(
                    "".concat(t, "-timeout"),
                    Date.now() + 1e3 * n
                  );
            } catch (t) {
              return;
            }
        },
        get: function (t) {
          var e =
            arguments.length > 1 && void 0 !== arguments[1]
              ? arguments[1]
              : null;
          if ("undefined" == typeof window) return e;
          try {
            var n = localStorage.getItem(t);
            if (!n) return e;
            var i = localStorage.getItem("".concat(t, "-timeout"));
            return i && parseInt(i) < Date.now()
              ? (localStorage.removeItem(t),
                localStorage.removeItem("".concat(t, "-timeout")),
                e)
              : JSON.parse(n);
          } catch (t) {
            return e;
          }
        },
        del: function (t) {
          if ("undefined" != typeof window)
            try {
              localStorage.removeItem(t);
            } catch (t) {}
        },
        has: function (t) {
          if ("undefined" == typeof window) return !1;
          try {
            var e = localStorage.getItem("".concat(t, "-timeout"));
            return (
              !(e && /^\d+$/.test(e) && parseInt(e) < Date.now()) &&
              !!localStorage.getItem(t)
            );
          } catch (t) {
            return !1;
          }
        },
      };
    function or(t, e) {
      return (
        (function (t) {
          if (Array.isArray(t)) return t;
        })(t) ||
        (function (t, e) {
          var n =
            t &&
            (("undefined" != typeof Symbol && t[Symbol.iterator]) ||
              t["@@iterator"]);
          if (null == n) return;
          var i,
            s,
            o = [],
            r = !0,
            a = !1;
          try {
            for (
              n = n.call(t);
              !(r = (i = n.next()).done) &&
              (o.push(i.value), !e || o.length !== e);
              r = !0
            );
          } catch (t) {
            (a = !0), (s = t);
          } finally {
            try {
              r || null == n.return || n.return();
            } finally {
              if (a) throw s;
            }
          }
          return o;
        })(t, e) ||
        ar(t, e) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function rr(t) {
      return (
        (function (t) {
          if (Array.isArray(t)) return cr(t);
        })(t) ||
        (function (t) {
          if (
            ("undefined" != typeof Symbol && null != t[Symbol.iterator]) ||
            null != t["@@iterator"]
          )
            return Array.from(t);
        })(t) ||
        ar(t) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function ar(t, e) {
      if (t) {
        if ("string" == typeof t) return cr(t, e);
        var n = Object.prototype.toString.call(t).slice(8, -1);
        return (
          "Object" === n && t.constructor && (n = t.constructor.name),
          "Map" === n || "Set" === n
            ? Array.from(t)
            : "Arguments" === n ||
              /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
            ? cr(t, e)
            : void 0
        );
      }
    }
    function cr(t, e) {
      (null == e || e > t.length) && (e = t.length);
      for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
      return i;
    }
    function lr(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function ur(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? lr(Object(n), !0).forEach(function (e) {
              dr(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : lr(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function dr(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    function pr(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function mr(t) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (i, s) {
          var o = t.apply(e, n);
          function r(t) {
            pr(o, i, s, r, a, "next", t);
          }
          function a(t) {
            pr(o, i, s, r, a, "throw", t);
          }
          r(void 0);
        });
      };
    }
    var fr = function (t) {
        sr.get("_emoji_in_single_msg_") ||
          sr.set("_emoji_in_single_msg_", { emoji: [] }, 86400);
        var e = { emoji: t.concat(sr.get("_emoji_in_single_msg_").emoji) };
        sr.set("_emoji_in_single_msg_", e, 86400);
      },
      hr = (function () {
        var t = mr(
          q.a.mark(function t(e, n, i, s, o, r) {
            var a, c, l, u, d, p, m, f, h, g;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    if (
                      ((a = []),
                      (c = []),
                      (l = []),
                      (u = n.filter(function (t) {
                        return ![5, 51].includes(t.msg_type);
                      })),
                      (d = localStorage.getItem("im-uid")))
                    )
                      for (
                        p = u.filter(function (t) {
                          return String(t.sender_uid) === d;
                        }),
                          m = o.length,
                          f = function (t) {
                            3 === o[t].type &&
                              p.some(function (e) {
                                return e.msg_key === o[t].key;
                              }) &&
                              (c.push(o[t].key),
                              o.splice(t, 1),
                              (m -= 1),
                              (t -= 1)),
                              (h = t);
                          },
                          h = 0;
                        h < m;
                        h++
                      )
                        f(h);
                    return (
                      (t.next = 8),
                      Promise.all(
                        n.map(
                          (function () {
                            var t = mr(
                              q.a.mark(function t(e) {
                                var n, i;
                                return q.a.wrap(function (t) {
                                  for (;;)
                                    switch ((t.prev = t.next)) {
                                      case 0:
                                        if (5 !== e.msg_type) {
                                          t.next = 14;
                                          break;
                                        }
                                        if (
                                          (a.push({
                                            msg_key: e.content,
                                            sys_cancel: e.sys_cancel,
                                          }),
                                          !e.sys_cancel)
                                        ) {
                                          t.next = 8;
                                          break;
                                        }
                                        Ko.removeItem(e.content),
                                          (n = o.findIndex(function (t) {
                                            return t.key === e.content;
                                          })) >= 0 && o.splice(n, 1),
                                          (t.next = 12);
                                        break;
                                      case 8:
                                        return (
                                          (t.next = 10), Ko.getItem(e.content)
                                        );
                                      case 10:
                                        (i = t.sent) &&
                                          Ko.setItem(
                                            e.content,
                                            ur(ur({}, i), {}, { msg_status: 1 })
                                          );
                                      case 12:
                                        t.next = 15;
                                        break;
                                      case 14:
                                        Ko.setItem(String(e.msg_key), e);
                                      case 15:
                                      case "end":
                                        return t.stop();
                                    }
                                }, t);
                              })
                            );
                            return function (e) {
                              return t.apply(this, arguments);
                            };
                          })()
                        )
                      )
                    );
                  case 8:
                    return (
                      n.forEach(
                        (function () {
                          var t = mr(
                            q.a.mark(function t(e) {
                              var n;
                              return q.a.wrap(function (t) {
                                for (;;)
                                  switch ((t.prev = t.next)) {
                                    case 0:
                                      if (51 !== e.msg_type) {
                                        t.next = 5;
                                        break;
                                      }
                                      return (
                                        (t.next = 3), Ko.getItem(e.content)
                                      );
                                    case 3:
                                      null != (n = t.sent) &&
                                        n.msg_seqno &&
                                        l.push({
                                          msg_key: String(e.content),
                                          seqno: n.msg_seqno,
                                        });
                                    case 5:
                                    case "end":
                                      return t.stop();
                                  }
                              }, t);
                            })
                          );
                          return function (e) {
                            return t.apply(this, arguments);
                          };
                        })()
                      ),
                      (g = u.map(function (t) {
                        return { type: 0, key: String(t.msg_key) };
                      })),
                      i && n.length > 0
                        ? g.push({
                            type: 1,
                            begin_seqno: s,
                            end_seqno:
                              n[n.length - 1] && n[n.length - 1].msg_seqno,
                          })
                        : (i && 0 !== n.length) ||
                          0 !== s ||
                          g.push({ type: 2 }),
                      g.length > 0 && 2 === g[g.length - 1].type
                        ? o.splice.apply(o, [r, o.length - r].concat(rr(g)))
                        : 0 === r
                        ? o.unshift.apply(o, rr(g))
                        : o.splice.apply(o, [r, 1].concat(rr(g))),
                      (t.next = 14),
                      Wo.setItem(e, o)
                    );
                  case 14:
                    return (
                      0 === r &&
                        n.length &&
                        Jo.setItem(e, {
                          timestamp: n[0].timestamp,
                          msg_seqno: n[0].msg_seqno,
                        }),
                      (t.next = 17),
                      gr(e, u)
                    );
                  case 17:
                    return (u = t.sent), t.abrupt("return", [u, c, a, l]);
                  case 19:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e, n, i, s, o, r) {
          return t.apply(this, arguments);
        };
      })(),
      gr = (function () {
        var t = mr(
          q.a.mark(function t(e, n) {
            var i, s, o;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (t.next = 2), er.getItem(e);
                  case 2:
                    return (i = t.sent), (t.next = 5), Wo.getItem(e);
                  case 5:
                    if (((t.t0 = t.sent), t.t0)) {
                      t.next = 8;
                      break;
                    }
                    t.t0 = [];
                  case 8:
                    return (
                      (s = t.t0),
                      (o = n.reduce(function (t, n) {
                        var o;
                        if (
                          11 === n.msg_type &&
                          (i === n.msg_key || null === i)
                        ) {
                          (i = n.msg_key), er.setItem(e, i);
                          var r = Math.round(16e6 * Math.random()).toString(16),
                            a = {
                              msg_key: r,
                              msg_type: -2,
                              msg_status: 0,
                              msg_seqno: n.msg_seqno,
                              timestamp: n.timestamp,
                              sender_uid: n.sender_uid,
                              added: !1,
                            };
                          (o = [a, n]), Ko.setItem(r, a);
                          var c = s.findIndex(function (t) {
                            return t.key === n.msg_key;
                          });
                          c > -1 &&
                            s.splice(c, 0, { type: 0, key: r, local: 1 });
                        } else o = [n];
                        return t.concat(o);
                      }, [])),
                      (t.next = 12),
                      Wo.setItem(e, s)
                    );
                  case 12:
                    return t.abrupt("return", o);
                  case 13:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e, n) {
          return t.apply(this, arguments);
        };
      })(),
      vr = function (t) {
        var e,
          n = [],
          i = [],
          s = [];
        return (
          t.forEach(function (t) {
            (t.content = ir(t.content)),
              7 === t.msg_type && 5 === t.content.source && t.content.id
                ? n.push(t.content.id)
                : 11 === t.msg_type && t.content.rid
                ? n.push(t.content.rid)
                : 7 === t.msg_type && 6 === t.content.source && t.content.id
                ? i.push(t.content.id)
                : 12 === t.msg_type && t.content.rid
                ? i.push(t.content.rid)
                : 7 === t.msg_type &&
                  16 === t.content.source &&
                  t.content.id &&
                  s.push(t.content.id);
          }),
          (n.length || i.length || s.length) &&
            ((e = {
              aids: n.join(","),
              ep_ids: s.join(","),
              article_ids: i.join(","),
            }),
            Object(P.a)({
              method: "get",
              addPlatInfo: !0,
              url: "//api.vc.bilibili.com/x/im/feed/infoweb",
              data: e,
            })).then(function (t) {
              if (t.data && t.data.archive && t.data.archive.length) {
                var e = t.data.archive.reduce(function (t, e) {
                  return (t[e.aid] = e), t;
                }, {});
                pa.commit("setVideoDetails", e);
              }
              if (t.data && t.data.article && t.data.article.length) {
                var n = t.data.article.reduce(function (t, e) {
                  return (t[e.id] = e), t;
                }, {});
                pa.commit("setArticleDetails", n);
              }
              if (t.data && t.data.pgc && t.data.pgc.length) {
                var i = t.data.pgc.reduce(function (t, e) {
                  return (t[e.ep_id] = e), t;
                }, {});
                pa.commit("setPgcDetails", i);
              }
            }),
          t
        );
      },
      br = (function () {
        var t = mr(
          q.a.mark(function t(e, n, i) {
            var s, o, r, a, c, l, u, d, p, m;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (
                      (s = "".concat(n, "_").concat(e)),
                      (t.next = 3),
                      Wo.getItem(s)
                    );
                  case 3:
                    if (((t.t0 = t.sent), t.t0)) {
                      t.next = 6;
                      break;
                    }
                    t.t0 = [];
                  case 6:
                    return (
                      (o = t.t0),
                      (t.next = 9),
                      os({
                        talker_id: e,
                        session_type: n,
                        size: 50,
                        begin_seqno: i,
                      })
                    );
                  case 9:
                    (r = t.sent).data.e_infos && fr(r.data.e_infos),
                      (a = (r.data.messages && r.data.messages.slice(0)) || []);
                  case 12:
                    if (
                      !(
                        r.data.messages &&
                        r.data.messages.length > 0 &&
                        r.data.has_more
                      )
                    ) {
                      t.next = 20;
                      break;
                    }
                    return (
                      (t.next = 15),
                      os({
                        talker_id: e,
                        session_type: n,
                        size: 50,
                        begin_seqno: i,
                        end_seqno: a[a.length - 1].msg_seqno,
                      })
                    );
                  case 15:
                    (r = t.sent).data.messages &&
                      a.push.apply(a, rr(r.data.messages)),
                      r.data.e_infos && fr(r.data.e_infos),
                      (t.next = 12);
                    break;
                  case 20:
                    return (t.next = 22), hr(s, a, !1, i, o, 0);
                  case 22:
                    return (
                      (c = t.sent),
                      (l = or(c, 4)),
                      (u = l[0]),
                      (d = l[1]),
                      (p = l[2]),
                      (m = l[3]),
                      t.abrupt("return", [vr(u), d, p, m])
                    );
                  case 29:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e, n, i) {
          return t.apply(this, arguments);
        };
      })(),
      yr = (function () {
        var t = mr(
          q.a.mark(function t(e, n, i, s) {
            var o,
              r,
              a,
              c,
              l,
              u,
              d,
              p,
              m,
              f,
              h,
              g,
              v,
              b,
              y,
              _,
              w,
              C,
              x,
              k,
              S,
              I,
              j,
              O,
              L,
              P = arguments;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (
                      (o = P.length > 4 && void 0 !== P[4] ? P[4] : 0),
                      (r = P.length > 5 && void 0 !== P[5] && P[5]),
                      (a = "".concat(n, "_").concat(e)),
                      (t.next = 5),
                      Wo.getItem(a)
                    );
                  case 5:
                    if (((t.t0 = t.sent), t.t0)) {
                      t.next = 8;
                      break;
                    }
                    t.t0 = [];
                  case 8:
                    if (((l = t.t0), r && (l = []), 0 !== l.length)) {
                      t.next = 24;
                      break;
                    }
                    return (
                      (t.next = 13),
                      os({ talker_id: e, session_type: n, size: s })
                    );
                  case 13:
                    return (
                      (u = t.sent).data.e_infos && fr(u.data.e_infos),
                      (d = u.data.messages || []),
                      (t.next = 18),
                      hr(a, d, u.data.has_more, 0, l, 0)
                    );
                  case 18:
                    (p = t.sent),
                      (m = or(p, 1)),
                      (f = m[0]),
                      (c = f),
                      (t.next = 82);
                    break;
                  case 24:
                    return (h = []), (g = o), (t.next = 28), Jo.getItem(a);
                  case 28:
                    if (((t.t1 = t.sent), t.t1)) {
                      t.next = 31;
                      break;
                    }
                    t.t1 = null;
                  case 31:
                    if (
                      ((v = t.t1),
                      (b = (v && v.msg_seqno) || 0),
                      !(i > b && 0 === o))
                    ) {
                      t.next = 47;
                      break;
                    }
                    return (
                      (t.next = 36),
                      os({
                        talker_id: e,
                        session_type: n,
                        size: 20,
                        begin_seqno: b,
                      })
                    );
                  case 36:
                    if (!(y = t.sent).data.messages) {
                      t.next = 46;
                      break;
                    }
                    return (
                      (_ = y.data.messages || []),
                      (t.next = 41),
                      hr(a, _, y.data.has_more, b, l, 0)
                    );
                  case 41:
                    (w = t.sent),
                      (C = or(w, 1)),
                      (x = C[0]),
                      h.push.apply(h, rr(x)),
                      (g += x.length);
                  case 46:
                    y.data.e_infos && fr(y.data.e_infos);
                  case 47:
                    if (!(g < o + s)) {
                      t.next = 79;
                      break;
                    }
                    if (l[g]) {
                      t.next = 50;
                      break;
                    }
                    return t.abrupt("break", 79);
                  case 50:
                    if (0 !== l[g].type) {
                      t.next = 55;
                      break;
                    }
                    h.push(Ko.getItem(l[g].key)), (g += 1), (t.next = 77);
                    break;
                  case 55:
                    if (2 !== l[g].type) {
                      t.next = 59;
                      break;
                    }
                    return t.abrupt("break", 79);
                  case 59:
                    return (
                      (k = o + s - g),
                      (t.next = 62),
                      os({
                        talker_id: e,
                        session_type: n,
                        size: k,
                        end_seqno: l[g].end_seqno,
                        begin_seqno: l[g].begin_seqno,
                      })
                    );
                  case 62:
                    return (
                      (S = t.sent),
                      (I = S.data.messages || []),
                      S.data.e_infos && fr(S.data.e_infos),
                      (t.next = 67),
                      hr(a, I, S.data.has_more, l[g].begin_seqno, l, g)
                    );
                  case 67:
                    if (
                      ((j = t.sent), (O = or(j, 1)), !((L = O[0]).length >= k))
                    ) {
                      t.next = 75;
                      break;
                    }
                    return (
                      h.push.apply(h, rr(L.slice(0, k))), t.abrupt("break", 79)
                    );
                  case 75:
                    h.push.apply(h, rr(L)), (g += L.length);
                  case 77:
                    t.next = 47;
                    break;
                  case 79:
                    return (t.next = 81), Promise.all(h);
                  case 81:
                    c = t.sent;
                  case 82:
                    return t.abrupt("return", vr(c));
                  case 83:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e, n, i, s) {
          return t.apply(this, arguments);
        };
      })(),
      _r = (function () {
        var t = mr(
          q.a.mark(function t(e, n, i, s, o) {
            var r, a, c, l, u, d, p, m;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (
                      (r = "".concat(i, "_").concat(n)),
                      (t.next = 3),
                      Wo.getItem(r)
                    );
                  case 3:
                    if (((t.t0 = t.sent), t.t0)) {
                      t.next = 6;
                      break;
                    }
                    t.t0 = [];
                  case 6:
                    a = t.t0;
                    try {
                      c = /\[(?:[^[\]]+)]/g.test(s);
                    } catch (t) {
                      c = !1;
                    }
                    return (
                      (l = {
                        sender_uid: e,
                        receiver_id: n,
                        receiver_type: i,
                        msg_type: o,
                        msg_status: 0,
                        content: s,
                        timestamp: Math.floor(Date.now() / 1e3),
                        new_face_version: c ? 1 : 0,
                      }),
                      (t.next = 11),
                      as(l)
                    );
                  case 11:
                    if (0 === (u = t.sent).code) {
                      t.next = 14;
                      break;
                    }
                    throw u;
                  case 14:
                    return (
                      (d = u.data.key_hit_infos) &&
                        Object.keys(d).length &&
                        ((m = d.toast),
                        (null == d || null === (p = d.high_text) || void 0 === p
                          ? void 0
                          : p.length) &&
                          d.high_text.forEach(function (t) {
                            Object.keys(t).length &&
                              (m = Fi(
                                m,
                                t.title,
                                '<a href="'
                                  .concat(t.url, '" style="color: #5090CC">')
                                  .concat(t.title, "</a>"),
                                t.index
                              ));
                          }),
                        pa.commit(
                          "setSendingWarningInfo",
                          dr({}, u.data.msg_key, m)
                        )),
                      (l.msg_key = u.data.msg_key),
                      a.unshift({ type: 3, key: String(l.msg_key) }),
                      (t.next = 20),
                      Promise.all([
                        Wo.setItem(r, a),
                        Ko.setItem(String(l.msg_key), l),
                      ])
                    );
                  case 20:
                    return t.abrupt("return", l);
                  case 21:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e, n, i, s, o) {
          return t.apply(this, arguments);
        };
      })(),
      wr = (function () {
        var t = mr(
          q.a.mark(function t(e, n, i, s) {
            var o, r, a, c;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (
                      (o = {
                        sender_uid: e,
                        receiver_id: n,
                        receiver_type: i,
                        timestamp: Math.floor(Date.now() / 1e3),
                        msg_type: 5,
                        content: s,
                      }),
                      (r = as(o)),
                      (a = Ko.getItem(s)),
                      (t.next = 5),
                      Promise.all([r, a])
                    );
                  case 5:
                    (c = t.sent),
                      Ko.setItem(s, ur(ur({}, c[1]), {}, { msg_status: 1 }));
                  case 7:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e, n, i, s) {
          return t.apply(this, arguments);
        };
      })(),
      Cr = (function () {
        var t = mr(
          q.a.mark(function t(e, n, i) {
            var s, o, r, a;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (t.next = 2), Ko.getItem(i);
                  case 2:
                    if (((t.t0 = t.sent), t.t0)) {
                      t.next = 5;
                      break;
                    }
                    t.t0 = {};
                  case 5:
                    return (
                      (s = t.t0),
                      (o = "".concat(n, "_").concat(e)),
                      (t.next = 9),
                      Wo.getItem(o)
                    );
                  case 9:
                    if (((t.t1 = t.sent), t.t1)) {
                      t.next = 12;
                      break;
                    }
                    t.t1 = [];
                  case 12:
                    return (
                      (r = t.t1),
                      (t.next = 15),
                      Promise.all([
                        Wo.setItem(
                          o,
                          r.filter(function (t) {
                            return t.key !== s.msg_key;
                          })
                        ),
                        Ko.removeItem(i),
                      ])
                    );
                  case 15:
                    return (t.next = 17), Yo.getItem(o);
                  case 17:
                    if ((a = t.sent) && !(a.msg_seqno < s.msg_seqno)) {
                      t.next = 21;
                      break;
                    }
                    return (t.next = 21), Yo.setItem(o, s);
                  case 21:
                    return t.abrupt("return", s);
                  case 22:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e, n, i) {
          return t.apply(this, arguments);
        };
      })(),
      xr = (function () {
        var t = mr(
          q.a.mark(function t(e, n) {
            var i, s, o, r, a;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (
                      (i = "".concat(n, "_").concat(e)),
                      (t.next = 3),
                      Wo.getItem(i)
                    );
                  case 3:
                    if (((t.t0 = t.sent), t.t0)) {
                      t.next = 6;
                      break;
                    }
                    t.t0 = [];
                  case 6:
                    (s = t.t0), (r = 0);
                  case 8:
                    if (!(r < s.length)) {
                      t.next = 19;
                      break;
                    }
                    if (0 !== s[r].type) {
                      t.next = 16;
                      break;
                    }
                    return (t.next = 12), Ko.getItem(s[r].key);
                  case 12:
                    if (
                      !(
                        (a = t.sent).msg_type > -1 &&
                        5 !== a.msg_type &&
                        51 !== a.msg_type
                      )
                    ) {
                      t.next = 16;
                      break;
                    }
                    return (o = a), t.abrupt("break", 19);
                  case 16:
                    r++, (t.next = 8);
                    break;
                  case 19:
                    return t.abrupt("return", o);
                  case 20:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e, n) {
          return t.apply(this, arguments);
        };
      })(),
      kr = (function () {
        var t = mr(
          q.a.mark(function t(e, n, i) {
            var s, o, r;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (
                      (s = "".concat(n, "_").concat(e)),
                      (t.next = 3),
                      Wo.getItem(s)
                    );
                  case 3:
                    if (((t.t0 = t.sent), t.t0)) {
                      t.next = 6;
                      break;
                    }
                    t.t0 = [];
                  case 6:
                    if (
                      ((o = t.t0),
                      !(
                        (r = o.findIndex(function (t) {
                          return 0 === t.type && t.key === i;
                        })) > -1
                      ))
                    ) {
                      t.next = 12;
                      break;
                    }
                    return t.abrupt(
                      "return",
                      o
                        .filter(function (t) {
                          return !t.local && Boolean(t.key);
                        })
                        .slice(Math.max(0, r - 5), r + 5)
                        .filter(function (t) {
                          return !t.local && Boolean(t.key);
                        })
                        .map(function (t) {
                          return t.key;
                        })
                    );
                  case 12:
                    return t.abrupt("return", []);
                  case 13:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e, n, i) {
          return t.apply(this, arguments);
        };
      })(),
      Sr = (function () {
        var t = mr(
          q.a.mark(function t(e, n, i, s) {
            var o, r, a, c, l;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (
                      (o = "".concat(n, "_").concat(e)),
                      (t.next = 3),
                      Ko.getItem(i)
                    );
                  case 3:
                    return (r = t.sent), (t.next = 6), Wo.getItem(o);
                  case 6:
                    if (((t.t0 = t.sent), t.t0)) {
                      t.next = 9;
                      break;
                    }
                    t.t0 = [];
                  case 9:
                    if (
                      ((a = t.t0),
                      (c = a.findIndex(function (t) {
                        return 0 === t.type && t.key === i;
                      })),
                      r && !(c < 0))
                    ) {
                      t.next = 13;
                      break;
                    }
                    return t.abrupt("return");
                  case 13:
                    return (
                      (r.added = !0),
                      Ko.setItem(i, r),
                      (t.next = 17),
                      Ko.setItem(s.msg_key, s)
                    );
                  case 17:
                    return (
                      (l = { type: 0, key: s.msg_key }),
                      s.msg_key < 0 && (l.local = 1),
                      a.splice(c, 0, l),
                      (t.next = 22),
                      Wo.setItem(o, a)
                    );
                  case 22:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e, n, i, s) {
          return t.apply(this, arguments);
        };
      })();
    function Ir(t) {
      return (
        (function (t) {
          if (Array.isArray(t)) return jr(t);
        })(t) ||
        (function (t) {
          if (
            ("undefined" != typeof Symbol && null != t[Symbol.iterator]) ||
            null != t["@@iterator"]
          )
            return Array.from(t);
        })(t) ||
        (function (t, e) {
          if (!t) return;
          if ("string" == typeof t) return jr(t, e);
          var n = Object.prototype.toString.call(t).slice(8, -1);
          "Object" === n && t.constructor && (n = t.constructor.name);
          if ("Map" === n || "Set" === n) return Array.from(t);
          if (
            "Arguments" === n ||
            /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
          )
            return jr(t, e);
        })(t) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function jr(t, e) {
      (null == e || e > t.length) && (e = t.length);
      for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
      return i;
    }
    function Or(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function Lr(t) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (i, s) {
          var o = t.apply(e, n);
          function r(t) {
            Or(o, i, s, r, a, "next", t);
          }
          function a(t) {
            Or(o, i, s, r, a, "throw", t);
          }
          r(void 0);
        });
      };
    }
    var Pr = 1,
      Ar = 0,
      Er = 0,
      Tr = [null, null],
      Mr = ["group", "unfollow", "bin"],
      Br = function (t) {
        return Promise.all(
          t.map(
            (function () {
              var t = Lr(
                q.a.mark(function t(e) {
                  var n;
                  return q.a.wrap(function (t) {
                    for (;;)
                      switch ((t.prev = t.next)) {
                        case 0:
                          return (
                            (t.next = 2),
                            Yo.getItem(
                              "".concat(e.session_type, "_").concat(e.talker_id)
                            )
                          );
                        case 2:
                          if (
                            !(n = t.sent) ||
                            !e.last_msg ||
                            n.msg_seqno !== e.last_msg.msg_seqno
                          ) {
                            t.next = 7;
                            break;
                          }
                          return (t.next = 6), xr(e.talker_id, e.session_type);
                        case 6:
                          e.last_msg = t.sent;
                        case 7:
                        case "end":
                          return t.stop();
                      }
                  }, t);
                })
              );
              return function (e) {
                return t.apply(this, arguments);
              };
            })()
          )
        );
      },
      Dr = (function () {
        var t = Lr(
          q.a.mark(function t(e, n, i, s, o) {
            var r, a, c, l, u, d, p;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (
                      (r = e),
                      (a = n),
                      (c = !1),
                      (t.next = 5),
                      (m = { begin_ts: e }),
                      Object(P.a)({
                        addPlatInfo: !0,
                        method: "get",
                        url: "".concat(
                          Yi,
                          "/session_svr/v1/session_svr/new_sessions"
                        ),
                        data: m,
                      }).then(function (t) {
                        return (
                          (window._per_webim_new_session_cost = t.cost),
                          (t.data.session_list = t.data.session_list || []),
                          (t.data.session_list = t.data.session_list.filter(
                            function (t) {
                              return 0 !== t.talker_id;
                            }
                          )),
                          t
                        );
                      })
                    );
                  case 5:
                    (l = t.sent),
                      (u =
                        (l.data.session_list && l.data.session_list.slice(0)) ||
                        []);
                  case 7:
                    if (!l.data.has_more) {
                      t.next = 14;
                      break;
                    }
                    return (
                      (t.next = 10),
                      is({
                        session_type: 1,
                        group_fold: 0,
                        unfollow_fold: 0,
                        sort_rule: 1,
                        begin_ts: e,
                        end_ts: u[u.length - 1].session_ts,
                        size: 20,
                      })
                    );
                  case 10:
                    (l = t.sent),
                      u.push.apply(u, Ir(l.data.session_list || [])),
                      (t.next = 7);
                    break;
                  case 14:
                    return (
                      u.length && ((r = Math.max(r, u[0].session_ts)), Br(u)),
                      u.reverse().forEach(function (t) {
                        if (1 === o) {
                          if (1 === t.is_intercept && !t.is_trust) return;
                          var e = NaN;
                          if (
                            (Ar && 2 === t.session_type && Tr[0]
                              ? (e = 0)
                              : Er &&
                                1 === t.session_type &&
                                0 === t.is_follow &&
                                Tr[1] &&
                                (e = 1),
                            !Number.isNaN(e))
                          ) {
                            (Tr[e].session_ts = t.session_ts),
                              (Tr[e].talker_id = t.talker_id),
                              (Tr[e].last_msg = t.last_msg),
                              (Tr[e].group_name = t.group_name);
                            var n = i.findIndex(function (t) {
                              return -1 === t.session_type && t.name === Mr[e];
                            });
                            return void (
                              n >= 0 && (i.splice(n, 1), i.splice(s, 0, Tr[e]))
                            );
                          }
                        } else if (2 === o) {
                          if (0 !== t.is_follow) return;
                        } else if (3 === o) {
                          if (2 !== t.session_type) return;
                        } else if (5 === o && (t.is_trust || !t.is_intercept))
                          return;
                        var r = i.findIndex(function (e) {
                          return (
                            e.talker_id == t.talker_id &&
                            e.session_type === t.session_type
                          );
                        });
                        r >= 0 && r < s
                          ? i.splice(r, 1, t)
                          : r >= 0 && r >= s
                          ? (i.splice(r, 1), i.splice(s, 0, t))
                          : i.splice(s, 0, t);
                      }),
                      (t.next = 18),
                      ss({ begin_ts: n })
                    );
                  case 18:
                    return (
                      (d = t.sent),
                      (p = (d.data && d.data.session_list) || []).length &&
                        ((a = p.reduce(function (t, e) {
                          return Math.max(t, e.ack_ts);
                        }, n)),
                        p.map(function (t) {
                          var e = i.findIndex(function (e) {
                            return (
                              e.talker_id === t.talker_id &&
                              e.session_type == t.session_type
                            );
                          });
                          e >= 0 && (i[e] = t);
                        })),
                      t.abrupt("return", [r, a, c])
                    );
                  case 22:
                  case "end":
                    return t.stop();
                }
              var m;
            }, t);
          })
        );
        return function (e, n, i, s, o) {
          return t.apply(this, arguments);
        };
      })(),
      Nr = (function () {
        var t = Lr(
          q.a.mark(function t(e, n, i, s, o) {
            var r, a, c, l, u;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (
                      (Pr = e),
                      (Ar = n),
                      (Er = i),
                      (t.next = 5),
                      is({
                        session_type: s,
                        group_fold: 1 - Pr || Ar,
                        unfollow_fold: Er,
                        sort_rule: 2,
                      })
                    );
                  case 5:
                    return (
                      (r = t.sent),
                      (a = !!r.data.anti_disturb_clearing),
                      (c = r.data.session_list || []),
                      (t.next = 10),
                      Br(c)
                    );
                  case 10:
                    if (1 !== s) {
                      t.next = 20;
                      break;
                    }
                    return (
                      (l = []),
                      Pr && Ar
                        ? l.push(
                            is({
                              session_type: 3,
                              size: 1,
                              group_fold: Ar,
                              unfollow_fold: Er,
                              sort_rule: 1,
                            })
                          )
                        : l.push(Promise.resolve({})),
                      Er
                        ? l.push(
                            is({
                              session_type: 2,
                              size: 1,
                              group_fold: Ar,
                              unfollow_fold: Er,
                              sort_rule: 1,
                            })
                          )
                        : l.push(Promise.resolve({})),
                      o
                        ? l.push(
                            is({
                              session_type: 5,
                              size: 1,
                              group_fold: Ar,
                              unfollow_fold: Er,
                              sort_rule: 1,
                            })
                          )
                        : l.push(Promise.resolve({})),
                      (t.next = 17),
                      Promise.all(l)
                    );
                  case 17:
                    (u = t.sent),
                      (Tr = u.map(function (t, e) {
                        var n =
                          t.data &&
                          t.data.session_list &&
                          t.data.session_list[0];
                        return n
                          ? {
                              talker_id: n.talker_id,
                              session_ts: n.session_ts,
                              last_msg: n.last_msg,
                              group_name: n.group_name,
                              session_type: -1,
                              sorted: !1,
                              name: Mr[e],
                              unfollow_unread: n.unread_count,
                            }
                          : null;
                      })).forEach(function (t) {
                        if (t && !t.sorted)
                          for (var e = 0; e <= c.length; e++)
                            if (
                              !c[e] ||
                              (!c[e].top_ts &&
                                Number(t.session_ts) > Number(c[e].session_ts))
                            ) {
                              (t.sorted = !0), c.splice(e, 0, t);
                              break;
                            }
                      });
                  case 20:
                    return t.abrupt("return", [c, a]);
                  case 21:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e, n, i, s, o) {
          return t.apply(this, arguments);
        };
      })(),
      Rr = (function () {
        var t = Lr(
          q.a.mark(function t(e) {
            var n,
              i,
              s,
              o = arguments;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (
                      (n = o.length > 1 && void 0 !== o[1] ? o[1] : 1),
                      (t.next = 3),
                      is({
                        session_type: n,
                        group_fold: Ar,
                        unfollow_fold: Er,
                        sort_rule: 2,
                        end_ts: e,
                      })
                    );
                  case 3:
                    return (
                      (i = t.sent),
                      (s = i.data.session_list || []),
                      (t.next = 7),
                      Br(s)
                    );
                  case 7:
                    return (
                      1 === n &&
                        Tr.filter(function (t) {
                          return t && !t.sorted;
                        }).forEach(function (t) {
                          for (var e = 0; e < s.length; e++)
                            if (
                              !s[e].top_ts &&
                              Number(t.session_ts) > Number(s[e].session_ts)
                            ) {
                              (t.sorted = !0), s.splice(e, 0, t);
                              break;
                            }
                        }),
                      t.abrupt("return", s)
                    );
                  case 9:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e) {
          return t.apply(this, arguments);
        };
      })(),
      $r = (function () {
        var t = Lr(
          q.a.mark(function t(e) {
            var n;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (
                      (n = "".concat(e.session_type, "_").concat(e.talker_id)),
                      Wo.removeItem(n),
                      t.abrupt(
                        "return",
                        ((i = e.talker_id),
                        (s = e.session_type),
                        Object(P.a)({
                          addPlatInfo: !0,
                          method: "post",
                          url: "".concat(
                            Yi,
                            "/session_svr/v1/session_svr/remove_session"
                          ),
                          data: { talker_id: i, session_type: s },
                        }))
                      )
                    );
                  case 3:
                  case "end":
                    return t.stop();
                }
              var i, s;
            }, t);
          })
        );
        return function (e) {
          return t.apply(this, arguments);
        };
      })(),
      Ur = function (t) {
        var e, n, i;
        (e = t.talker_id),
          (n = t.session_type),
          (i = t.max_seqno),
          Object(P.a)({
            addPlatInfo: !0,
            method: "post",
            url: "".concat(Yi, "/session_svr/v1/session_svr/update_ack"),
            data: { talker_id: e, session_type: n, ack_seqno: i },
          });
      },
      Vr = (function () {
        var t = Lr(
          q.a.mark(function t(e, n, i) {
            var s, o, r, a, c;
            return q.a.wrap(
              function (t) {
                for (;;)
                  switch ((t.prev = t.next)) {
                    case 0:
                      return (
                        (t.prev = 0),
                        (t.next = 3),
                        (m = e),
                        (f = n),
                        Object(P.a)({
                          url: "".concat(
                            Yi,
                            "/session_svr/v1/session_svr/session_detail"
                          ),
                          method: "get",
                          data: { talker_id: m, session_type: f },
                        })
                      );
                    case 3:
                      return (
                        (s = t.sent.data),
                        (t.next = 6),
                        yr(e, n, s.max_seqno, 20, 0, !0)
                      );
                    case 6:
                      t.next = 21;
                      break;
                    case 8:
                      return (
                        (t.prev = 8),
                        (t.t0 = t.catch(0)),
                        (s = { talker_id: e, session_type: n }),
                        (t.next = 13),
                        (p = [e]),
                        (d = 1 === n ? "uids" : "group_ids") in
                        (u = { own_uid: i })
                          ? Object.defineProperty(u, d, {
                              value: p,
                              enumerable: !0,
                              configurable: !0,
                              writable: !0,
                            })
                          : (u[d] = p),
                        (l = u),
                        Object(P.a)({
                          addPlatInfo: !0,
                          method: "get",
                          url: "".concat(
                            Yi,
                            "/link_setting/v1/link_setting/get_msg_dnd"
                          ),
                          data: l,
                        }).catch(function (t) {
                          return (
                            console.error(t),
                            {
                              data: {
                                uid_settings: [{ setting: 0 }],
                                group_settings: [{ setting: 0 }],
                              },
                            }
                          );
                        })
                      );
                    case 13:
                      return (
                        (o = t.sent),
                        (r =
                          o.data[1 === n ? "uid_settings" : "group_settings"]),
                        (a = r && r[0].setting),
                        (s.is_dnd = a),
                        (t.next = 19),
                        yr(e, n, 0, 20, 0, !0)
                      );
                    case 19:
                      (c = t.sent),
                        (s.last_msg = c.find(function (t) {
                          return (
                            t.msg_type > 0 && ![5, 51].includes(t.msg_type)
                          );
                        }));
                    case 21:
                      return t.abrupt("return", s);
                    case 22:
                    case "end":
                      return t.stop();
                  }
                var l, u, d, p, m, f;
              },
              t,
              null,
              [[0, 8]]
            );
          })
        );
        return function (e, n, i) {
          return t.apply(this, arguments);
        };
      })();
    function zr(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function Hr(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? zr(Object(n), !0).forEach(function (e) {
              Fr(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : zr(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function Fr(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    function Gr(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function Zr(t) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (i, s) {
          var o = t.apply(e, n);
          function r(t) {
            Gr(o, i, s, r, a, "next", t);
          }
          function a(t) {
            Gr(o, i, s, r, a, "throw", t);
          }
          r(void 0);
        });
      };
    }
    var qr = (function () {
        var t = Zr(
          q.a.mark(function t(e) {
            var n;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (t.next = 2), Qi(e);
                  case 2:
                    if (!(n = t.sent).data || !n.data.group_id) {
                      t.next = 7;
                      break;
                    }
                    return (
                      (t.next = 6),
                      Xo.setItem(
                        String(n.data.group_id),
                        Hr(Hr({}, n.data), {}, { ts: Date.now() })
                      )
                    );
                  case 6:
                    return t.abrupt("return", n.data);
                  case 7:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e) {
          return t.apply(this, arguments);
        };
      })(),
      Kr = (function () {
        var t = Zr(
          q.a.mark(function t(e, n) {
            var i, s, o, r, a, c, l, u;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (
                      (t.next = 2),
                      Promise.all(
                        n.map(function (t) {
                          return tr.getItem("".concat(e, "_").concat(t));
                        })
                      )
                    );
                  case 2:
                    if (
                      ((i = t.sent),
                      (s = Date.now()),
                      !i.some(function (t) {
                        return !(t && t.ts > s - to.groupInfoOutOfDateTime);
                      }))
                    ) {
                      t.next = 23;
                      break;
                    }
                    return (t.next = 7), Xo.getItem(String(e));
                  case 7:
                    if ((o = t.sent) && o.ts > s - to.groupInfoOutOfDateTime) {
                      t.next = 12;
                      break;
                    }
                    return (t.next = 11), qr(e);
                  case 11:
                    o = t.sent;
                  case 12:
                    if (!(r = o && o.owner_uid)) {
                      t.next = 23;
                      break;
                    }
                    return (
                      (d = e),
                      (a = Object(P.a)({
                        addPlatInfo: !0,
                        method: "get",
                        url: "".concat(Yi, "/link_group/v1/group/member_list"),
                        data: { group_id: d },
                      })),
                      (c = ts(r, n)),
                      (t.next = 18),
                      Promise.all([a, c])
                    );
                  case 18:
                    if (
                      ((l = t.sent),
                      !Array.isArray(l[0].data.list) ||
                        !Array.isArray(l[1].data.list))
                    ) {
                      t.next = 23;
                      break;
                    }
                    return (
                      (u = l[1].data.list.map(function (t) {
                        var e = l[0].data.list.find(function (e) {
                          return e.uid === t.uid;
                        });
                        return Hr(Hr({}, t), e);
                      })).map(function (t) {
                        tr.setItem(
                          "".concat(e, "_").concat(t.uid),
                          Hr(Hr({}, t), {}, { ts: s })
                        );
                      }),
                      t.abrupt("return", u)
                    );
                  case 23:
                    return t.abrupt(
                      "return",
                      i.filter(function (t) {
                        return t;
                      })
                    );
                  case 24:
                  case "end":
                    return t.stop();
                }
              var d;
            }, t);
          })
        );
        return function (e, n) {
          return t.apply(this, arguments);
        };
      })();
    function Wr(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function Jr(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? Wr(Object(n), !0).forEach(function (e) {
              Yr(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : Wr(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function Yr(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    function Qr(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function Xr(t) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (i, s) {
          var o = t.apply(e, n);
          function r(t) {
            Qr(o, i, s, r, a, "next", t);
          }
          function a(t) {
            Qr(o, i, s, r, a, "throw", t);
          }
          r(void 0);
        });
      };
    }
    var ta = (function () {
        var t = Xr(
          q.a.mark(function t(e) {
            var n;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    if (
                      ((n = localStorage.getItem("im-uid") || ""),
                      String(e) === n)
                    ) {
                      t.next = 6;
                      break;
                    }
                    return (t.next = 4), nr();
                  case 4:
                    return (
                      localStorage.setItem("im-uid", e), t.abrupt("return", !0)
                    );
                  case 6:
                    return t.abrupt("return", !1);
                  case 7:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e) {
          return t.apply(this, arguments);
        };
      })(),
      ea = (function () {
        var t = Xr(
          q.a.mark(function t(e) {
            var n, i, s, o, r, a, c, l, u;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (
                      (e = e.filter(function (t) {
                        return 0 !== t;
                      })),
                      (n = []),
                      (i = {}),
                      (s = Date.now()),
                      (o = (function () {
                        var t = Xr(
                          q.a.mark(function t(e) {
                            var o;
                            return q.a.wrap(function (t) {
                              for (;;)
                                switch ((t.prev = t.next)) {
                                  case 0:
                                    return (t.next = 2), Qo.getItem(String(e));
                                  case 2:
                                    (o = t.sent) &&
                                    o.ts > s - to.userInfoOutOfDateTime
                                      ? (i[e] = o)
                                      : n.push(e);
                                  case 4:
                                  case "end":
                                    return t.stop();
                                }
                            }, t);
                          })
                        );
                        return function (e) {
                          return t.apply(this, arguments);
                        };
                      })()),
                      (t.next = 7),
                      Promise.all(
                        e.map(function (t) {
                          return o(t);
                        })
                      )
                    );
                  case 7:
                    if (!n.length) {
                      t.next = 21;
                      break;
                    }
                    (r = 50), (a = 0), (c = n.length);
                  case 10:
                    if (!(a < c)) {
                      t.next = 21;
                      break;
                    }
                    return (l = n.slice(a, a + r)), (t.next = 14), Xi(l);
                  case 14:
                    if (!(u = t.sent).data || !u.data.length) {
                      t.next = 18;
                      break;
                    }
                    return (
                      (t.next = 18),
                      Promise.all(
                        u.data.map(
                          (function () {
                            var t = Xr(
                              q.a.mark(function t(e) {
                                return q.a.wrap(function (t) {
                                  for (;;)
                                    switch ((t.prev = t.next)) {
                                      case 0:
                                        return (
                                          (t.next = 2),
                                          Qo.setItem(
                                            String(e.mid),
                                            Jr(Jr({}, e), {}, { ts: s })
                                          )
                                        );
                                      case 2:
                                        i[e.mid] = e;
                                      case 3:
                                      case "end":
                                        return t.stop();
                                    }
                                }, t);
                              })
                            );
                            return function (e) {
                              return t.apply(this, arguments);
                            };
                          })()
                        )
                      )
                    );
                  case 18:
                    (a += r), (t.next = 10);
                    break;
                  case 21:
                    return t.abrupt("return", i);
                  case 22:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e) {
          return t.apply(this, arguments);
        };
      })(),
      na = (function () {
        var t = Xr(
          q.a.mark(function t(e, n) {
            var i, s, o, r, a, c;
            return q.a.wrap(
              function (t) {
                for (;;)
                  switch ((t.prev = t.next)) {
                    case 0:
                      return (
                        (i = []),
                        (s = []),
                        (o = {}),
                        (r = Date.now()),
                        (t.next = 6),
                        Promise.all(
                          e.map(
                            (function () {
                              var t = Xr(
                                q.a.mark(function t(e) {
                                  var n, a;
                                  return q.a.wrap(function (t) {
                                    for (;;)
                                      switch ((t.prev = t.next)) {
                                        case 0:
                                          if (
                                            ((n =
                                              -1 === e.session_type &&
                                              "unfollow" === e.name),
                                            1 !== e.session_type && !n)
                                          ) {
                                            t.next = 5;
                                            break;
                                          }
                                          i.push(e.talker_id), (t.next = 10);
                                          break;
                                        case 5:
                                          if (2 !== e.session_type) {
                                            t.next = 10;
                                            break;
                                          }
                                          return (
                                            (t.next = 8),
                                            Xo.getItem(String(e.talker_id))
                                          );
                                        case 8:
                                          (a = t.sent) &&
                                          a.ts > r - to.groupInfoOutOfDateTime
                                            ? ((o[e.talker_id] = a),
                                              i.push(a.owner_uid))
                                            : s.push(e.talker_id);
                                        case 10:
                                          e.last_msg &&
                                            i.push(e.last_msg.sender_uid);
                                        case 11:
                                        case "end":
                                          return t.stop();
                                      }
                                  }, t);
                                })
                              );
                              return function (e) {
                                return t.apply(this, arguments);
                              };
                            })()
                          )
                        )
                      );
                    case 6:
                      if (!s.length) {
                        t.next = 22;
                        break;
                      }
                      return (
                        (t.prev = 7),
                        (t.next = 10),
                        Object(P.a)({
                          addPlatInfo: !0,
                          method: "get",
                          url: "".concat(Yi, "/link_group/v1/member/my_groups"),
                        })
                      );
                    case 10:
                      if (
                        !(
                          (a = t.sent).data &&
                          a.data.list &&
                          a.data.list.length
                        )
                      ) {
                        t.next = 14;
                        break;
                      }
                      return (
                        (t.next = 14),
                        Promise.all(
                          a.data.list.map(
                            (function () {
                              var t = Xr(
                                q.a.mark(function t(e) {
                                  return q.a.wrap(function (t) {
                                    for (;;)
                                      switch ((t.prev = t.next)) {
                                        case 0:
                                          return (
                                            (t.next = 2),
                                            Xo.setItem(
                                              String(e.group_id),
                                              Jr(Jr({}, e), {}, { ts: r })
                                            )
                                          );
                                        case 2:
                                          o[e.group_id]
                                            ? ((o[e.group_id] = e),
                                              i.push(e.owner_uid))
                                            : s.some(function (t) {
                                                return t === e.group_id;
                                              }) &&
                                              ((s = s.filter(function (t) {
                                                return t !== e.group_id;
                                              })),
                                              (o[e.group_id] = e),
                                              i.push(e.owner_uid));
                                        case 3:
                                        case "end":
                                          return t.stop();
                                      }
                                  }, t);
                                })
                              );
                              return function (e) {
                                return t.apply(this, arguments);
                              };
                            })()
                          )
                        )
                      );
                    case 14:
                      t.next = 19;
                      break;
                    case 16:
                      (t.prev = 16), (t.t0 = t.catch(7)), console.error(t.t0);
                    case 19:
                      if (!s.length) {
                        t.next = 22;
                        break;
                      }
                      return (
                        (t.next = 22),
                        Promise.all(
                          s.map(
                            (function () {
                              var t = Xr(
                                q.a.mark(function t(e) {
                                  var s;
                                  return q.a.wrap(
                                    function (t) {
                                      for (;;)
                                        switch ((t.prev = t.next)) {
                                          case 0:
                                            return (
                                              (t.prev = 0), (t.next = 3), qr(e)
                                            );
                                          case 3:
                                            (s = t.sent) &&
                                              ((o[s.group_id] = s),
                                              i.push(s.owner_uid)),
                                              (t.next = 10);
                                            break;
                                          case 7:
                                            (t.prev = 7),
                                              (t.t0 = t.catch(0)),
                                              n && n(t.t0);
                                          case 10:
                                          case "end":
                                            return t.stop();
                                        }
                                    },
                                    t,
                                    null,
                                    [[0, 7]]
                                  );
                                })
                              );
                              return function (e) {
                                return t.apply(this, arguments);
                              };
                            })()
                          )
                        )
                      );
                    case 22:
                      return (t.next = 24), ea(i);
                    case 24:
                      return (c = t.sent), t.abrupt("return", [c, o]);
                    case 26:
                    case "end":
                      return t.stop();
                  }
              },
              t,
              null,
              [[7, 16]]
            );
          })
        );
        return function (e, n) {
          return t.apply(this, arguments);
        };
      })(),
      ia = (function () {
        var t = Xr(
          q.a.mark(function t(e, n, i, s) {
            var o;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    if (
                      ("".concat(n, "_").concat(e),
                      (s.last_msg && s.last_msg.msg_seqno) !== i.msg_seqno)
                    ) {
                      t.next = 7;
                      break;
                    }
                    return (t.next = 5), xr(e, n);
                  case 5:
                    (o = t.sent), (s.last_msg = o);
                  case 7:
                    return t.abrupt("return", s);
                  case 8:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e, n, i, s) {
          return t.apply(this, arguments);
        };
      })(),
      sa = (function () {
        var t = Xr(
          q.a.mark(function t(e, n, i) {
            var s, o;
            return q.a.wrap(function (t) {
              for (;;)
                switch ((t.prev = t.next)) {
                  case 0:
                    return (t.next = 2), ns(n, Number(!i));
                  case 2:
                    return (
                      (s = {
                        msg_key: Math.round(16e6 * Math.random()).toString(16),
                        timestamp: Date.now() / 1e3,
                        msg_status: 0,
                        sender_uid: n,
                        msg_type: -1,
                        push: i,
                      }),
                      (t.next = 5),
                      Wo.getItem(e)
                    );
                  case 5:
                    if (((t.t0 = t.sent), t.t0)) {
                      t.next = 8;
                      break;
                    }
                    t.t0 = [];
                  case 8:
                    return (
                      (o = t.t0).unshift({ type: 0, key: s.msg_key }),
                      (t.next = 12),
                      Promise.all([Wo.setItem(e, o), Ko.setItem(s.msg_key, s)])
                    );
                  case 12:
                    return t.abrupt("return", s);
                  case 13:
                  case "end":
                    return t.stop();
                }
            }, t);
          })
        );
        return function (e, n, i) {
          return t.apply(this, arguments);
        };
      })();
    function oa(t, e) {
      return (
        (function (t) {
          if (Array.isArray(t)) return t;
        })(t) ||
        (function (t, e) {
          var n =
            t &&
            (("undefined" != typeof Symbol && t[Symbol.iterator]) ||
              t["@@iterator"]);
          if (null == n) return;
          var i,
            s,
            o = [],
            r = !0,
            a = !1;
          try {
            for (
              n = n.call(t);
              !(r = (i = n.next()).done) &&
              (o.push(i.value), !e || o.length !== e);
              r = !0
            );
          } catch (t) {
            (a = !0), (s = t);
          } finally {
            try {
              r || null == n.return || n.return();
            } finally {
              if (a) throw s;
            }
          }
          return o;
        })(t, e) ||
        (function (t, e) {
          if (!t) return;
          if ("string" == typeof t) return ra(t, e);
          var n = Object.prototype.toString.call(t).slice(8, -1);
          "Object" === n && t.constructor && (n = t.constructor.name);
          if ("Map" === n || "Set" === n) return Array.from(t);
          if (
            "Arguments" === n ||
            /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
          )
            return ra(t, e);
        })(t, e) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function ra(t, e) {
      (null == e || e > t.length) && (e = t.length);
      for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
      return i;
    }
    function aa(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function ca(t) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (i, s) {
          var o = t.apply(e, n);
          function r(t) {
            aa(o, i, s, r, a, "next", t);
          }
          function a(t) {
            aa(o, i, s, r, a, "throw", t);
          }
          r(void 0);
        });
      };
    }
    function la(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function ua(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? la(Object(n), !0).forEach(function (e) {
              da(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : la(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function da(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    r.a.use(L.a);
    var pa = new L.a.Store({
        state: {
          uid: NaN,
          sysSetting: {},
          blackListObj: {},
          userInfos: {},
          groupInfos: {},
          gmInfos: {},
          videoDetails: {},
          articleDetails: {},
          pgcDetails: {},
          amILimited: !1,
          limitedText: "你已被封禁，无法举报",
          warningMsg: {},
          msgRegex: {},
        },
        mutations: {
          setRegex: function (t, e) {
            t.msgRegex = e;
          },
          setSendingWarningInfo: function (t, e) {
            t.warningMsg = ua(ua({}, t.warningMsg), e);
          },
          setUid: function (t, e) {
            t.uid = e;
          },
          setSysSetting: function (t, e) {
            t.sysSetting = e;
          },
          setBlackList: function (t, e) {
            t.blackListObj = e;
          },
          setUserInfos: function (t, e) {
            t.userInfos = ua(ua({}, t.userInfos), e);
          },
          setGroupInfos: function (t, e) {
            t.groupInfos = ua(ua({}, t.groupInfos), e);
          },
          setGmInfos: function (t, e) {
            var n = t.gmInfos;
            t.gmInfos = Object.keys(e).reduce(function (t, i) {
              return (t[i] = ua(ua({}, n[i]), e[i])), t;
            }, ua({}, t.gmInfos));
          },
          setVideoDetails: function (t, e) {
            t.videoDetails = ua(ua({}, t.videoDetails), e);
          },
          setArticleDetails: function (t, e) {
            t.articleDetails = ua(ua({}, t.articleDetails), e);
          },
          setPgcDetails: function (t, e) {
            t.pgcDetails = ua(ua({}, t.pgcDetails), e);
          },
          setMyLimitedStatus: function (t, e) {
            t.amILimited = e;
          },
          setMyLimitedText: function (t, e) {
            t.limitedText = e;
          },
        },
        actions: {
          getUserInfos: function (t, e) {
            return ca(
              q.a.mark(function n() {
                var i, s;
                return q.a.wrap(function (n) {
                  for (;;)
                    switch ((n.prev = n.next)) {
                      case 0:
                        return (i = t.commit), (n.next = 3), ea(e);
                      case 3:
                        return (
                          (s = n.sent),
                          i("setUserInfos", s),
                          n.abrupt("return", s)
                        );
                      case 6:
                      case "end":
                        return n.stop();
                    }
                }, n);
              })
            )();
          },
          getSessionsExtraInfo: function (t, e) {
            return ca(
              q.a.mark(function n() {
                var i, s, o, r, a;
                return q.a.wrap(function (n) {
                  for (;;)
                    switch ((n.prev = n.next)) {
                      case 0:
                        return (i = t.commit), (n.next = 3), na(e);
                      case 3:
                        (s = n.sent),
                          (o = oa(s, 2)),
                          (r = o[0]),
                          (a = o[1]),
                          i("setUserInfos", r),
                          i("setGroupInfos", a);
                      case 9:
                      case "end":
                        return n.stop();
                    }
                }, n);
              })
            )();
          },
          getGroupMemberInfo: function (t, e) {
            return ca(
              q.a.mark(function n() {
                var i, s, o, r, a;
                return q.a.wrap(function (n) {
                  for (;;)
                    switch ((n.prev = n.next)) {
                      case 0:
                        return (
                          (i = t.commit),
                          (s = e.gid),
                          (o = e.uids),
                          (n.next = 4),
                          Kr(s, o)
                        );
                      case 4:
                        (r = n.sent),
                          (a = r.reduce(function (t, e) {
                            return (t[e.uid] = e), t;
                          }, {})),
                          i("setGmInfos", da({}, s, a));
                      case 7:
                      case "end":
                        return n.stop();
                    }
                }, n);
              })
            )();
          },
          getExtraGroupMemberInfo: function (t, e) {
            var n = t.dispatch,
              i = e.gid,
              s = e.uids;
            n("getUserInfos", s), n("getGroupMemberInfo", { gid: i, uids: s });
          },
        },
      }),
      ma = {
        props: {
          content: {
            type: Object,
            default: function () {
              return {};
            },
          },
          isMe: [Boolean, Number],
        },
        data: function () {
          return {
            shareSource: {
              1: "小视频",
              2: "相簿",
              3: "纯文字",
              4: "直播",
              5: "投稿视频",
              6: "投稿专栏",
              7: "番剧",
              8: "音乐",
              9: "国产动画",
              10: "图片",
              11: "动态",
            },
            videoCardCoverStyle: {
              backgroundImage: "url(".concat(
                this.formatImage(this.content.thumb) || Vo.a,
                ")"
              ),
            },
            cvCardCoverStyle: { backgroundImage: "url(".concat(Vo.a, ")") },
            cvImages: new Array(3).fill({
              backgroundImage: "url(".concat(Vo.a, ")"),
            }),
            triggerUpdate: !1,
          };
        },
        computed: {
          detail: function () {
            return 5 === this.content.source
              ? pa.state.videoDetails[this.content.id] || {}
              : 6 === this.content.source
              ? pa.state.articleDetails[this.content.id] || {}
              : (16 === this.content.source &&
                  pa.state.pgcDetails[this.content.id]) ||
                {};
          },
          shareCardClass: function () {
            var t = [];
            switch ((this.isMe && t.push("is-me"), this.content.source)) {
              case 5:
              case 16:
                t.push("video-type");
                break;
              case 6:
                t.push("article-type");
            }
            return t;
          },
          temp: function () {
            return Vi(this.content.thumb, 60, 60);
          },
          styleString: function () {
            var t = Vi(this.content.thumb, 60, 60);
            return "background-image: url(".concat(t.srcUrl, ")");
          },
          url: function () {
            var t = "",
              e = this.content.source,
              n = this.content.id;
            switch (e) {
              case 1:
                t = "//vc.bilibili.com/video/".concat(n);
                break;
              case 2:
                t = "//h.bilibili.com/".concat(n);
                break;
              case 4:
                t = "//live.bilibili.com/".concat(n);
                break;
              case 5:
                t = this.triggerUpdate ? "" : pt(n, this.content.bvid);
                break;
              case 6:
                t = "//www.bilibili.com/read/cv".concat(n);
                break;
              case 7:
                t = "//bangumi.bilibili.com/anime/".concat(n);
                break;
              case 9:
                t = this.triggerUpdate ? "" : pt(n, this.content.bvid);
                break;
              case 11:
                t = "//t.bilibili.com/".concat(n, "?tab=1");
                break;
              case 16:
                t = this.content.url || "";
                break;
              default:
                t = "";
            }
            return t.replace(/^javascript:/i, "");
          },
          headline: function () {
            return this.content.headline;
          },
          type: function () {
            return 16 === this.content.source
              ? this.content.source_desc || ""
              : this.shareSource[this.content.source];
          },
        },
        watch: {
          detail: function (t) {
            var e = this;
            if (
              ((5 === this.content.source || 16 === this.content.source) &&
                t.pic) ||
              this.content.thumb
            ) {
              var n = "";
              5 === this.content.source &&
                (n = t.pic || this.content.thumb || ""),
                16 === this.content.source &&
                  (n = this.content.thumb || t.pic || ""),
                (n = Vi(n, 360, 200, !0).srcUrl.replace(/^http:/, ""));
              var i = new Image();
              (i.src = n),
                (i.onload = function () {
                  e.videoCardCoverStyle = {
                    backgroundImage: "url(".concat(n, ")"),
                    backgroundSize: "cover",
                  };
                });
            }
            if (6 === this.content.source)
              if (t.image_urls && t.image_urls.length < 3 && t.image_urls[0]) {
                var s = Vi(t.image_urls[0], 360, 105, !0).srcUrl.replace(
                    /^http:/,
                    ""
                  ),
                  o = new Image();
                (o.src = s),
                  (o.onload = function () {
                    e.cvCardCoverStyle = {
                      backgroundImage: "url(".concat(s, ")"),
                      backgroundSize: "cover",
                    };
                  });
              } else if (t.image_urls && t.image_urls.length >= 3)
                for (
                  var r = function (t) {
                      var n = Vi(
                          e.detail.image_urls[t],
                          120,
                          105,
                          !0
                        ).srcUrl.replace(/^http:/, ""),
                        i = new Image();
                      (i.src = n),
                        (i.onload = function () {
                          e.$set(e.cvImages, t, {
                            backgroundImage: "url(".concat(n, ")"),
                            backgroundSize: "cover",
                          });
                        });
                    },
                    a = 0;
                  a < 3;
                  a++
                )
                  r(a);
          },
        },
        components: { SVGIcon: ve },
        beforeCreate: function () {},
        created: function () {},
        beforeMount: function () {},
        mounted: function () {
          var t = this;
          G.$on("ShowBvConfigUpdated", function () {
            (t.triggerUpdate = !0),
              t.$nextTick(function () {
                t.triggerUpdate = !1;
              });
          });
        },
        beforeDestroy: function () {},
        destroyed: function () {},
        methods: {
          formatImage: function (t) {
            return t ? Vi(t, 360, 200, !0).srcUrl.replace(/^http:/, "") : "";
          },
          formatTime: function (t) {
            return zi(t);
          },
          formatNumber: function (t) {
            return X(t).replace(/\s+/g, "");
          },
        },
      },
      fa =
        (n(440),
        Object(xe.a)(
          ma,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return t.triggerUpdate
              ? t._e()
              : n(
                  t.url ? "a" : "span",
                  {
                    tag: "component",
                    staticClass: "share-card",
                    class: t.shareCardClass,
                    attrs: { href: t.url, target: "_blank" },
                  },
                  [
                    [5, 6, 16].some(function (e) {
                      return e === t.content.source;
                    })
                      ? t._e()
                      : [
                          t.headline
                            ? n("div", { staticClass: "headline" }, [
                                t._v(t._s(t.headline)),
                              ])
                            : t._e(),
                          n("div", { staticClass: "main-content" }, [
                            n(
                              "div",
                              {
                                staticClass: "img",
                                class: {
                                  video: 1 === t.content.source,
                                  photo: 2 === t.content.source,
                                },
                                style: t.styleString,
                              },
                              [
                                1 === t.content.source
                                  ? n("div", { staticClass: "video-icon" })
                                  : t._e(),
                                2 === t.content.source
                                  ? n("div", { staticClass: "photo-icon" })
                                  : t._e(),
                              ]
                            ),
                            n("div", { staticClass: "text-content" }, [
                              n(
                                "div",
                                {
                                  staticClass: "content",
                                  class: { "no-headline": !t.headline },
                                },
                                [t._v(t._s(t.content.title))]
                              ),
                              n("div", { staticClass: "type" }, [
                                t._v(t._s(t.type)),
                              ]),
                            ]),
                          ]),
                          n(
                            "div",
                            { staticClass: "up-info" },
                            [
                              n("SVGIcon", {
                                style: { width: "14px", color: "#999" },
                                attrs: { name: "up" },
                              }),
                              n("div", { staticClass: "up-name" }, [
                                t._v(t._s(t.content.author)),
                              ]),
                            ],
                            1
                          ),
                        ],
                    5 === t.content.source || 16 === t.content.source
                      ? [
                          n(
                            "div",
                            {
                              staticClass: "cover",
                              style: t.videoCardCoverStyle,
                            },
                            [
                              n("div", { staticClass: "snum" }),
                              t.detail.is_started
                                ? n("div", { staticClass: "infos" }, [
                                    n("span", {
                                      staticClass: "duration",
                                      domProps: {
                                        textContent: t._s(
                                          t.detail.duration
                                            ? t.formatTime(t.detail.duration)
                                            : "-- : --"
                                        ),
                                      },
                                    }),
                                    n("span", {
                                      staticClass: "play-num",
                                      domProps: {
                                        textContent: t._s(
                                          (void 0 !== t.detail.view
                                            ? t.formatNumber(t.detail.view)
                                            : "-- ") + "播放"
                                        ),
                                      },
                                    }),
                                    n("span", {
                                      staticClass: "danmu",
                                      domProps: {
                                        textContent: t._s(
                                          (void 0 !== t.detail.danmaku
                                            ? t.formatNumber(t.detail.danmaku)
                                            : "-- ") + "弹幕"
                                        ),
                                      },
                                    }),
                                  ])
                                : t._e(),
                              n("div", { staticClass: "play" }),
                            ]
                          ),
                          n("div", { staticClass: "content" }, [
                            n("span", {
                              domProps: {
                                textContent: t._s(
                                  t.content.title || t.detail.title || ""
                                ),
                              },
                            }),
                          ]),
                          n(
                            "div",
                            { staticClass: "footer" },
                            [
                              16 !== t.content.source &&
                              (t.detail.up_name || t.content.author)
                                ? n("SVGIcon", {
                                    style: { width: "14px" },
                                    attrs: { name: "up" },
                                  })
                                : t._e(),
                              16 !== t.content.source
                                ? n("div", { staticClass: "up-name" }, [
                                    t._v(
                                      t._s(t.detail.up_name || t.content.author)
                                    ),
                                  ])
                                : t._e(),
                              n("div", {
                                staticClass: "type",
                                domProps: { textContent: t._s(t.type) },
                              }),
                            ],
                            1
                          ),
                        ]
                      : t._e(),
                    6 === t.content.source
                      ? [
                          n("div", { staticClass: "title" }, [
                            n("span", {
                              domProps: {
                                textContent: t._s(
                                  t.detail.title || t.content.title || ""
                                ),
                              },
                            }),
                          ]),
                          t.detail.image_urls && t.detail.image_urls.length >= 3
                            ? n(
                                "div",
                                { staticClass: "cv-images cv-img-3" },
                                t._l(t.cvImages, function (t, e) {
                                  return n("div", { key: e, style: t });
                                }),
                                0
                              )
                            : t._e(),
                          !t.detail.image_urls ||
                          (t.detail.image_urls &&
                            t.detail.image_urls.length < 3)
                            ? n("div", {
                                staticClass: "cv-images cv-img-single",
                                style: t.cvCardCoverStyle,
                              })
                            : t._e(),
                          n("div", { staticClass: "summary" }, [
                            n("span", {
                              domProps: {
                                textContent: t._s(
                                  t.detail.summary || t.content.summary
                                ),
                              },
                            }),
                          ]),
                          n("div", { staticClass: "infos" }, [
                            n("span", {
                              domProps: {
                                textContent: t._s(
                                  (void 0 !== t.detail.view_num
                                    ? t.formatNumber(t.detail.view_num)
                                    : "-- ") + "阅读"
                                ),
                              },
                            }),
                            n("span", {
                              domProps: {
                                textContent: t._s(
                                  (void 0 !== t.detail.like_num
                                    ? t.formatNumber(t.detail.like_num)
                                    : "-- ") + "点赞"
                                ),
                              },
                            }),
                            n("span", {
                              domProps: {
                                textContent: t._s(
                                  (void 0 !== t.detail.reply_num
                                    ? t.formatNumber(t.detail.reply_num)
                                    : "-- ") + "评论"
                                ),
                              },
                            }),
                          ]),
                          n(
                            "div",
                            { staticClass: "footer" },
                            [
                              n("SVGIcon", {
                                style: { width: "14px" },
                                attrs: { name: "up" },
                              }),
                              n("div", { staticClass: "up-name" }, [
                                t._v(
                                  t._s(t.detail.up_name || t.content.author)
                                ),
                              ]),
                              n("div", {
                                staticClass: "type",
                                domProps: { textContent: t._s(t.type) },
                              }),
                            ],
                            1
                          ),
                        ]
                      : t._e(),
                  ],
                  2
                );
          },
          [],
          !1,
          null,
          "0c96bf84",
          null
        ).exports),
      ha = {
        1: "小视频",
        2: "相簿",
        3: "纯文字",
        4: "直播",
        5: "投稿视频",
        6: "投稿专栏",
        7: "番剧",
        8: "音乐",
        9: "国产动画",
        10: "图片",
        11: "动态",
        17: "番剧",
      },
      ga = {
        props: { content: { type: Object, require: !0 } },
        components: { SVGIcon: ve },
        computed: {
          styleString: function () {
            var t =
              this.content.cover || this.content.thumb
                ? Vi(this.content.cover || this.content.thumb, 48, 48)
                : {};
            return "background-image: url(".concat(t.srcUrl || Vo.a, ")");
          },
          sourceName: function () {
            return 16 === this.content.source
              ? this.content.source_desc || ""
              : ha[this.content.source] || this.content.source || "";
          },
          jumpUrl: function () {
            var t, e;
            return (
              (null === (t = this.content) ||
              void 0 === t ||
              null === (e = t.url) ||
              void 0 === e
                ? void 0
                : e.replace(/^http:\/\//, "https://")) || ""
            );
          },
        },
        methods: {
          handleClick: function () {
            this.content.url && (window.location = this.content.url);
          },
        },
      },
      va =
        (n(441),
        Object(xe.a)(
          ga,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              t.jumpUrl ? "a" : "div",
              {
                tag: "component",
                staticClass: "share-container",
                attrs: { href: t.jumpUrl, target: "_blank" },
              },
              [
                n("div", { staticClass: "content-container" }, [
                  n("div", { staticClass: "img", style: t.styleString }),
                  n("div", { staticClass: "info-container" }, [
                    n("div", { staticClass: "info-title" }, [
                      t._v(t._s(t.content.title)),
                    ]),
                    n("div", { staticClass: "info-desc" }, [
                      t._v(t._s(t.content.desc)),
                    ]),
                  ]),
                ]),
                n(
                  "div",
                  {
                    staticClass: "source-container",
                    class: { reverse: !t.content.author },
                  },
                  [
                    t.content.author
                      ? n(
                          "div",
                          { staticClass: "source-up" },
                          [
                            n("SVGIcon", {
                              style: {
                                width: "14px",
                                color: "#999",
                                display: "inline-block",
                              },
                              attrs: { name: "up" },
                            }),
                            n("div", { staticClass: "up-name" }, [
                              t._v(t._s(t.content.author)),
                            ]),
                          ],
                          1
                        )
                      : t._e(),
                    n("div", { staticClass: "source-business" }, [
                      t._v(t._s(t.sourceName)),
                    ]),
                  ]
                ),
              ]
            );
          },
          [],
          !1,
          null,
          null,
          null
        ).exports),
      ba = (n(442), n(445), n(95)),
      ya = n.n(ba),
      _a = {
        props: {
          placeholder: String,
          max: [Number, String],
          content: String,
          height: [Number, String],
          indicatorStyle: Object,
          monitDelete: Boolean,
          show: Boolean,
        },
        data: function () {
          return { myContent: "", combination: !1 };
        },
        computed: {
          maxNum: function () {
            return parseInt(this.max, 10) || 10;
          },
          tooMuch: function () {
            return this.content.length > this.maxNum;
          },
        },
        watch: {
          content: function (t) {
            this.myContent = t;
          },
          show: function (t) {
            t && this.$refs.inputBox.focus();
          },
        },
        created: function () {
          this.myContent = this.content || "";
        },
        mounted: function () {
          this.$refs.inputBox.focus();
        },
        methods: {
          onInput: function (t) {
            this.$emit("input", t.target.value);
          },
          keyupEnter: function () {
            this.combination;
          },
          keydownEnter: function (t) {
            var e = this;
            t.isComposing ||
              setTimeout(function () {
                e.combination || e.$emit("enter", t);
              }, 100);
          },
          keydownReturn: function (t) {
            this.combination = !0;
            this.$emit("input", "".concat(t.target.value).concat("\n"));
          },
          keyupReturn: function () {
            var t = this;
            setTimeout(function () {
              t.combination = !1;
            }, 100);
          },
          keyupDelete: function (t) {
            if (this.monitDelete) {
              var e = Hi(this.$refs.inputBox);
              this.$emit("delete", { target: t, position: e });
            }
          },
        },
      },
      wa =
        (n(446),
        Object(xe.a)(
          _a,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n("div", { staticClass: "input-box" }, [
              n("textarea", {
                directives: [
                  {
                    name: "model",
                    rawName: "v-model",
                    value: t.myContent,
                    expression: "myContent",
                  },
                ],
                ref: "inputBox",
                staticClass: "textarea",
                style: { height: t.height + "px" },
                attrs: {
                  placeholder: t.placeholder,
                  maxlength: t.max,
                  autofocus: "autofocus",
                },
                domProps: { value: t.myContent },
                on: {
                  input: [
                    function (e) {
                      e.target.composing || (t.myContent = e.target.value);
                    },
                    t.onInput,
                  ],
                  keydown: [
                    function (e) {
                      return !e.type.indexOf("key") &&
                        t._k(e.keyCode, "delete", [8, 46], e.key, [
                          "Backspace",
                          "Delete",
                          "Del",
                        ])
                        ? null
                        : t.keyupDelete(e);
                    },
                    function (e) {
                      return !e.type.indexOf("key") &&
                        t._k(e.keyCode, "enter", 13, e.key, "Enter")
                        ? null
                        : (e.preventDefault(), t.keydownEnter(e));
                    },
                    function (e) {
                      return !e.type.indexOf("key") &&
                        t._k(e.keyCode, "enter", 13, e.key, "Enter")
                        ? null
                        : (e.preventDefault(),
                          e.ctrlKey ? t.keydownReturn(e) : null);
                    },
                    function (e) {
                      return !e.type.indexOf("key") &&
                        t._k(e.keyCode, "enter", 13, e.key, "Enter")
                        ? null
                        : (e.preventDefault(),
                          e.shiftKey ? t.keydownReturn(e) : null);
                    },
                  ],
                  keyup: [
                    function (e) {
                      return !e.type.indexOf("key") &&
                        t._k(e.keyCode, "enter", 13, e.key, "Enter")
                        ? null
                        : (e.preventDefault(), t.keyupEnter(e));
                    },
                    function (e) {
                      return !e.type.indexOf("key") &&
                        t._k(e.keyCode, "enter", 13, e.key, "Enter")
                        ? null
                        : (e.preventDefault(),
                          e.ctrlKey ? t.keyupReturn(e) : null);
                    },
                    function (e) {
                      return !e.type.indexOf("key") &&
                        t._k(e.keyCode, "enter", 13, e.key, "Enter")
                        ? null
                        : (e.preventDefault(),
                          e.shiftKey ? t.keyupReturn(e) : null);
                    },
                  ],
                },
              }),
              n("div", { staticClass: "indicator", style: t.indicatorStyle }, [
                n("span", { class: { "too-much": t.tooMuch } }, [
                  t._v(t._s(t.content.length)),
                ]),
                t._v("/"),
                n("span", [t._v(t._s(t.maxNum))]),
              ]),
            ]);
          },
          [],
          !1,
          null,
          "6e6c7ae3",
          null
        ).exports),
      Ca = {
        props: ["checked", "value", "name"],
        data: function () {
          return {};
        },
        computed: {},
        watch: {},
        components: { SVGIcon: ve },
        beforeCreate: function () {},
        created: function () {},
        beforeMount: function () {},
        mounted: function () {},
        beforeDestroy: function () {},
        destroyed: function () {},
        methods: {
          onClick: function (t) {
            this.$emit("click", t);
          },
        },
      },
      xa =
        (n(447),
        Object(xe.a)(
          Ca,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e(
              "label",
              { staticClass: "type-selector" },
              [
                e("input", {
                  staticClass: "radio",
                  attrs: { name: this.name, type: "radio" },
                  domProps: { value: this.value, checked: this.checked },
                  on: { click: this.onClick },
                }),
                e("SVGIcon", {
                  staticClass: "radio-icon",
                  attrs: {
                    name: "radio",
                    type: this.checked ? "selected" : "",
                  },
                }),
                this._t("default"),
              ],
              2
            );
          },
          [],
          !1,
          null,
          "7ef12ee6",
          null
        ).exports),
      ka = {
        props: {
          show: null,
          types: Array,
          reportSingleMessage: { type: Boolean, default: !1 },
          name: String,
          isGroup: Boolean,
        },
        data: function () {
          return {
            type: 1,
            reportContent: "",
            reportTypeList: [
              { type: 1, name: "色情低俗" },
              { type: 2, name: "政治敏感" },
              { type: 3, name: "违法有害" },
              { type: 4, name: "广告骚扰" },
              { type: 5, name: "人身攻击" },
              { type: 6, name: "诈骗" },
              { type: 0, name: "其他问题" },
            ],
          };
        },
        computed: {
          showList: function () {
            var t = this;
            return this.reportTypeList.filter(function (e) {
              return t.types.includes(e.type);
            });
          },
          active: function () {
            return (
              (this.type && this.type > 0) ||
              (0 === this.type && this.reportContent.trim())
            );
          },
          title: function () {
            return this.reportSingleMessage
              ? "我要举报"
              : this.isGroup
              ? "举报该应援团"
              : "举报该用户";
          },
        },
        components: { ImPopup: Is, InputBox: wa, ImRadio: xa },
        methods: {
          onConfirm: function () {
            this.$emit("onConfirm", {
              type: this.type,
              content: this.reportContent || "",
            }),
              (this.reportContent = "");
          },
          onCancel: function () {
            this.$emit("onCancel");
          },
          onInput: function (t) {
            this.reportContent = t;
          },
        },
      },
      Sa =
        (n(448),
        Object(xe.a)(
          ka,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "im-popup",
              {
                staticClass: "report-popup",
                attrs: { show: t.show, title: t.title, disabled: !t.active },
                on: { onConfirm: t.onConfirm, onCancel: t.onCancel },
              },
              [
                t.reportSingleMessage
                  ? t._e()
                  : n("div", { ref: "popup", staticClass: "content-text" }, [
                      t._v("请选择您举报"),
                      n("span", { staticClass: "name" }, [t._v(t._s(t.name))]),
                      t._v("的理由，该对话近期内的消息将作为证据一并提交。"),
                    ]),
                t.reportSingleMessage
                  ? n("div", { ref: "popup", staticClass: "content-text" }, [
                      t._v("请选择举报的理由："),
                    ])
                  : t._e(),
                n(
                  "div",
                  { staticClass: "selector-box" },
                  t._l(t.showList, function (e) {
                    return n(
                      "im-radio",
                      {
                        key: e.type,
                        class: { "other-reason": 0 === e.type },
                        attrs: {
                          checked: e.type === t.type,
                          value: e.type,
                          name: "report-type",
                        },
                        on: {
                          click: function (n) {
                            t.type = e.type;
                          },
                        },
                      },
                      [t._v(t._s(e.name))]
                    );
                  }),
                  1
                ),
                n("div", { staticClass: "report-tip" }, [
                  t._v(
                    "为帮助审核人员更快处理，请补充问题类型和出现位置等详细信息。"
                  ),
                ]),
                n("input-box", {
                  staticClass: "report-input",
                  attrs: {
                    placeholder: "举报内容",
                    max: "50",
                    content: t.reportContent,
                    height: 86,
                  },
                  on: { input: t.onInput },
                }),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "02d1af01",
          null
        ).exports);
    function Ia(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    var ja = {
        components: { ReportPopup: Sa, ConfirmPopup: Os },
        props: {
          targetDom: { type: HTMLElement, default: null },
          msgKey: { type: String, default: "" },
          uid: { type: Number, default: -1 },
          time: { type: Number, default: 0 },
          isMe: { type: Boolean, default: !1 },
          isLimit: { type: Boolean, default: !1 },
          limitMsg: { type: String, default: "" },
          image: { type: String, default: "" },
          talkerId: { type: [Number, String], required: !0 },
          sessionType: { type: Number, required: !0 },
          verifyNoPass: { type: Boolean, default: !1 },
          status: { type: Number, default: 0 },
        },
        data: function () {
          return {
            show: !1,
            pos: { x: 0, y: 0 },
            reportVisible: !1,
            deleteConfirmVisible: !1,
            reportTypes: [1, 2, 3, 4, 5, 6, 0],
          };
        },
        computed: {
          posStyle: function () {
            return {
              left: "".concat(this.pos.x, "px"),
              top: "".concat(this.pos.y, "px"),
            };
          },
        },
        watch: {
          targetDom: function (t) {
            t && this.bindEvents();
          },
        },
        mounted: function () {
          this.targetDom && this.bindEvents();
        },
        beforeDestroy: function () {
          this.targetDom.removeEventListener("contextmenu", this.pClick);
        },
        methods: {
          bindEvents: function () {
            var t = this;
            this.pClick &&
              this.targetDom.removeEventListener("contextmenu", this.pClick),
              (this.pClick = function (e) {
                if (
                  (e.preventDefault(),
                  (t.pos = { x: e.clientX, y: e.clientY }),
                  !t.show)
                ) {
                  t.show = !0;
                  var n = function e(n) {
                    var i = (function (t) {
                        var e = t.path || (t.composedPath && t.composedPath());
                        if (!e) {
                          e = [];
                          for (var n = t.target; n !== document; )
                            e.unshift(n), (n = n.parentNode);
                        }
                        return e;
                      })(n),
                      s = t.$refs.selfRef,
                      o =
                        t.$refs.selfRef &&
                        i.some(function (t) {
                          return t === s.current;
                        });
                    i.some(function (e) {
                      return e === t.targetDom;
                    }) ||
                      o ||
                      ((t.show = !1),
                      document.removeEventListener("click", e),
                      document.removeEventListener("contextmenu", e));
                  };
                  document.addEventListener("click", n),
                    document.addEventListener("contextmenu", n);
                }
              }),
              this.targetDom.addEventListener("contextmenu", this.pClick);
          },
          saveImage: function () {
            var t = this;
            ya.a.get(this.image, { responseType: "blob" }).then(function (e) {
              var n = t.image.split("/").pop();
              if (navigator.msSaveBlob) navigator.msSaveBlob(e.data, n);
              else {
                var i = URL.createObjectURL(e.data),
                  s = document.createElement("a");
                (s.style.display = "none"),
                  (s.href = i),
                  (s.download = n),
                  document.body.appendChild(s),
                  s.click(),
                  document.body.removeChild(s),
                  (t.show = !1);
              }
            });
          },
          report: function () {
            var t,
              e = this;
            return ((t = q.a.mark(function t() {
              return q.a.wrap(function (t) {
                for (;;)
                  switch ((t.prev = t.next)) {
                    case 0:
                      if (!pa.state.amILimited) {
                        t.next = 4;
                        break;
                      }
                      return (
                        (e.show = !1),
                        e.linkMsg(
                          e.$refs.selfRef,
                          pa.state.limitedText,
                          "error",
                          !0
                        ),
                        t.abrupt("return")
                      );
                    case 4:
                      e.isLimit
                        ? e.linkMsg(
                            e.$refs.selfRef,
                            e.limitMsg || "该用户已被封禁",
                            "info",
                            !0
                          )
                        : (e.reportVisible = !0);
                    case 5:
                    case "end":
                      return t.stop();
                  }
              }, t);
            })),
            function () {
              var e = this,
                n = arguments;
              return new Promise(function (i, s) {
                var o = t.apply(e, n);
                function r(t) {
                  Ia(o, i, s, r, a, "next", t);
                }
                function a(t) {
                  Ia(o, i, s, r, a, "throw", t);
                }
                r(void 0);
              });
            })();
          },
          onReportSuccess: function (t) {
            var e = this,
              n = t.type,
              i = t.content;
            kr(this.talkerId, this.sessionType, this.msgKey)
              .then(function (t) {
                return cs({
                  talker_id: e.talkerId,
                  session_type: e.sessionType,
                  target_id: e.uid,
                  reasonType: n,
                  reasonDesc: i,
                  keys: t,
                  msg_key: e.msgKey,
                });
              })
              .then(function () {
                e.linkMsg(
                  e.$refs.selfRef,
                  "举报已提交",
                  "success",
                  !0,
                  !1,
                  3e3
                );
              })
              .catch(function (t) {
                console.error(t),
                  e.linkMsg(
                    e.$refs.selfRef,
                    t.msg || t.message,
                    "error",
                    !0,
                    !1,
                    3e3
                  );
              })
              .finally(function () {
                (e.reportVisible = !1), (e.show = !1);
              });
          },
          onReportCancel: function () {
            (this.reportVisible = !1), (this.show = !1);
          },
          drawback: function () {
            var t = this;
            Date.now() / 1e3 - this.time > 120
              ? (this.linkMsg(
                  this.$refs.selfRef,
                  "发送时间超过2分钟不能撤回",
                  "caution",
                  !0
                ),
                (this.show = !1))
              : wr(this.uid, this.talkerId, this.sessionType, this.msgKey)
                  .then(function () {
                    t.linkMsg(t.$refs.selfRef, "撤回成功", "success", !0),
                      Ui.$emit("drawbackMsg", {
                        talkerId: t.talkerId,
                        sessionType: t.sessionType,
                        msgKey: t.msgKey,
                      });
                  })
                  .catch(function (e) {
                    console.error(e),
                      t.linkMsg(
                        t.$refs.selfRef,
                        "撤回失败，请重试",
                        "error",
                        !0
                      );
                  })
                  .finally(function () {
                    t.show = !1;
                  });
          },
          handleCancelDelete: function () {
            (this.deleteConfirmVisible = !1), (this.show = !1);
          },
          deleteLocally: function () {
            var t = this;
            Cr(this.talkerId, this.sessionType, this.msgKey)
              .then(function (e) {
                t.linkMsg(t.$refs.selfRef, "删除成功", "success", !0),
                  Ui.$emit("deleteMsgLocally", t.talkerId, t.sessionType, e);
              })
              .catch(function (e) {
                console.error(e),
                  t.linkMsg(t.$refs.selfRef, "删除失败，请重试", "error", !0);
              });
          },
        },
      },
      Oa =
        (n(449),
        Object(xe.a)(
          ja,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return t.show && !t.verifyNoPass && 50 !== t.status
              ? n(
                  "div",
                  {
                    ref: "selfRef",
                    staticClass: "context-menu",
                    style: t.posStyle,
                  },
                  [
                    n(
                      "ul",
                      [
                        !t.isMe && t.uid > 0
                          ? n(
                              "li",
                              {
                                on: {
                                  click: function (e) {
                                    return e.preventDefault(), t.report(e);
                                  },
                                },
                              },
                              [t._v("举报")]
                            )
                          : t._e(),
                        t.isMe
                          ? n(
                              "li",
                              {
                                on: {
                                  click: function (e) {
                                    return e.preventDefault(), t.drawback(e);
                                  },
                                },
                              },
                              [t._v("撤回")]
                            )
                          : t._e(),
                        n(
                          "li",
                          {
                            on: {
                              click: function (e) {
                                e.preventDefault(),
                                  (t.deleteConfirmVisible = !0);
                              },
                            },
                          },
                          [t._v("删除")]
                        ),
                        t.image
                          ? [
                              n("hr"),
                              n(
                                "li",
                                {
                                  on: {
                                    click: function (e) {
                                      return e.preventDefault(), t.saveImage(e);
                                    },
                                  },
                                },
                                [t._v("保存图片")]
                              ),
                            ]
                          : t._e(),
                      ],
                      2
                    ),
                    n("report-popup", {
                      attrs: {
                        show: t.reportVisible,
                        types: t.reportTypes,
                        reportSingleMessage: !0,
                      },
                      on: {
                        onConfirm: t.onReportSuccess,
                        onCancel: t.onReportCancel,
                      },
                    }),
                    n("confirm-popup", {
                      attrs: {
                        show: t.deleteConfirmVisible,
                        content: "消息删除后不再显示在聊天记录里，确认删除吗？",
                      },
                      on: {
                        onCancel: t.handleCancelDelete,
                        onConfirm: t.deleteLocally,
                      },
                    }),
                  ],
                  1
                )
              : t._e();
          },
          [],
          !1,
          null,
          "4d35a2b6",
          null
        ).exports);
    function La(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function Pa(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? La(Object(n), !0).forEach(function (e) {
              Aa(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : La(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function Aa(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    function Ea(t) {
      return (
        (function (t) {
          if (Array.isArray(t)) return Ba(t);
        })(t) ||
        (function (t) {
          if (
            ("undefined" != typeof Symbol && null != t[Symbol.iterator]) ||
            null != t["@@iterator"]
          )
            return Array.from(t);
        })(t) ||
        Ma(t) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function Ta(t, e) {
      return (
        (function (t) {
          if (Array.isArray(t)) return t;
        })(t) ||
        (function (t, e) {
          var n =
            t &&
            (("undefined" != typeof Symbol && t[Symbol.iterator]) ||
              t["@@iterator"]);
          if (null == n) return;
          var i,
            s,
            o = [],
            r = !0,
            a = !1;
          try {
            for (
              n = n.call(t);
              !(r = (i = n.next()).done) &&
              (o.push(i.value), !e || o.length !== e);
              r = !0
            );
          } catch (t) {
            (a = !0), (s = t);
          } finally {
            try {
              r || null == n.return || n.return();
            } finally {
              if (a) throw s;
            }
          }
          return o;
        })(t, e) ||
        Ma(t, e) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function Ma(t, e) {
      if (t) {
        if ("string" == typeof t) return Ba(t, e);
        var n = Object.prototype.toString.call(t).slice(8, -1);
        return (
          "Object" === n && t.constructor && (n = t.constructor.name),
          "Map" === n || "Set" === n
            ? Array.from(t)
            : "Arguments" === n ||
              /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
            ? Ba(t, e)
            : void 0
        );
      }
    }
    function Ba(t, e) {
      (null == e || e > t.length) && (e = t.length);
      for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
      return i;
    }
    var Da = {
        props: {
          avatar: String,
          mid: null,
          isMe: [Boolean, Number],
          name: String,
          content: null,
          type: Number,
          group: null,
          medal: {
            type: Object,
            default: function () {
              return {};
            },
          },
          text: String,
          groupType: Number,
          msgKey: String,
          time: Number,
          isLimit: Boolean,
          limitMsg: String,
          talkerId: [Number, String],
          msgObj: Object,
          verifyNoPass: Boolean,
        },
        data: function () {
          return {
            photoImager: null,
            image: { url: "", width: 0, height: 0 },
            targetDom: null,
            triggerUpdate: !1,
            expressionData: {},
          };
        },
        computed: {
          msg: function () {
            return this.text || this.content.content || this.content || "";
          },
          msgRegex: function () {
            return pa.state.msgRegex;
          },
          avatarStyle: function () {
            var t =
              this.avatar || "//static.hdslb.com/images/member/noface.gif";
            return {
              backgroundImage: "url(".concat(
                Vi(t, 30, 30).srcUrl.replace(/^http:/, ""),
                ")"
              ),
            };
          },
          msg2html: function () {
            var t = this;
            if (!this.triggerUpdate) {
              if (2 === this.type || 6 === this.type) {
                var e,
                  n =
                    this.content.url && this.content.url.replace(/^http:/, ""),
                  i = this.content.width,
                  s = this.content.height;
                i > 490 &&
                  ((i = 490),
                  (s = (this.content.height / this.content.width) * 490)),
                  s > 150 &&
                    ((s = 150),
                    (i = (this.content.width / this.content.height) * 150));
                var o =
                    (2 === this.type ? "[图片]" : "[自定义表情]") +
                    " 点击查看大图",
                  r = Vi(n, (i = parseInt(i)), (s = parseInt(s))),
                  a = r.srcUrl
                    .replace(/&/g, "&amp;")
                    .replace(/</g, "&lt;")
                    .replace(/>/g, "&gt;")
                    .replace(/"/g, "&quot;")
                    .replace(/'/g, "&#x27;")
                    .replace(/\//g, "&#x2f;")
                    .replace(/\n/g, "<br>");
                this.image = { url: n, width: i, height: s };
                var c =
                    this.verifyNoPass ||
                    50 ===
                      (null == this ||
                      null === (e = this.msgObj) ||
                      void 0 === e
                        ? void 0
                        : e.msg_status),
                  l = c ? a.split("@")[0] : a;
                return '\n          <img class="im-msg-item-img '
                  .concat(c ? "error-img" : "", '" title="')
                  .concat(o, '" alt="')
                  .concat(o, '" src="')
                  .concat(l, '" style="width: ')
                  .concat(i, "px; height: ")
                  .concat(s, 'px; background: #fff">\n        ');
              }
              if (1 === this.type && "string" == typeof this.msg) {
                var u = function (t, e) {
                    var n = t.map(function (t) {
                      return t.match instanceof RegExp
                        ? ((e = t.match),
                          (n = t.replace),
                          function (t) {
                            var i = t.match(e) || [],
                              s = t.split(e);
                            return [i.map(n), s];
                          })
                        : function (e) {
                            var n = Ta(t.match(e), 2),
                              i = n[0],
                              s = n[1];
                            return [i.map(t.replace), s];
                          };
                      var e, n;
                    });
                    return (function t(e) {
                      return e.reduce(function (e, n) {
                        return e.concat(Array.isArray(n) ? t(n) : n);
                      }, []);
                    })(
                      (function t(e, i) {
                        var s = n[e];
                        return s
                          ? i.map(function (n) {
                              for (
                                var i = Ta(s(n), 2),
                                  o = i[0],
                                  r = i[1],
                                  a = t(e + 1, r),
                                  c = [],
                                  l = 0;
                                l < o.length;
                                l++
                              )
                                c.push(a[l]), c.push(o[l]);
                              return c.push(a[o.length]), c;
                            })
                          : i;
                      })(0, [e])
                    );
                  },
                  d = [
                    {
                      match: /(?:bilibili:\/\/)(?:[/.$*?~=#!%@&\-\w]*)?/g,
                      replace: function (t) {
                        return '\n              <span data-href="'.concat(
                          t,
                          '">\n                【请在移动端上打开链接】\n              </span>\n            '
                        );
                      },
                    },
                    {
                      match: /\[(?:[^[\]]+)]/g,
                      replace: function (e) {
                        var n = e.slice(1, e.length - 1);
                        if (!(n in t.expressionData)) return e;
                        var i = t.expressionData[n],
                          s = /https?:\/\//.test(i.img) ? i.img : Bi.a,
                          o = "\n                background-image: url("
                            .concat(s, ");\n                height: ")
                            .concat(
                              i.size > 1 ? 40 : 20,
                              "px;\n                width: "
                            )
                            .concat(
                              i.size > 1 ? 40 : 20,
                              "px;\n                animation-duration: "
                            )
                            .concat(
                              20 * i.step,
                              "ms;\n                animation-timing-function: steps("
                            )
                            .concat(i.step, ", end);\n                ")
                            .concat(
                              i.step ? "height: " + 20 * i.step + "px;" : ";",
                              "\n              "
                            );
                        return '\n                <a class="emotion-items active '
                          .concat(
                            i.size > 1 ? "emotion-items-big" : "",
                            '" title="'
                          )
                          .concat(n, '">\n                  <div style="')
                          .concat(o, '" class="')
                          .concat(
                            i.size > 1 ? "img-emoji-big" : "img-emoji",
                            '" ></div>\n                </a>\n              '
                          );
                      },
                    },
                  ].concat(
                    Ea(
                      dt()
                        ? [
                            {
                              match: /bv1[\d\w]{9}/gi,
                              replace: function (t) {
                                return '<a href="https://www.bilibili.com/video/'
                                  .concat(
                                    t
                                      .slice(0, 2)
                                      .toLowerCase()
                                      .concat(t.slice(2)),
                                    '" target="_blank" class="dynamic-link">'
                                  )
                                  .concat(t, "</a>");
                              },
                            },
                          ]
                        : []
                    ),
                    [
                      {
                        match: /av\d+/gi,
                        replace: function (t) {
                          return '<a href="//www.bilibili.com/video/'
                            .concat(
                              t.toLowerCase(),
                              '" target="_blank" class="dynamic-link">'
                            )
                            .concat(t, "</a>");
                        },
                      },
                      {
                        match: /vc\d+/gi,
                        replace: function (t) {
                          return '<a href="//vc.bilibili.com/video/'
                            .concat(
                              t.slice(2),
                              '" target="_blank" class="dynamic-link">'
                            )
                            .concat(t, "</a>");
                        },
                      },
                      {
                        match: /cv\d+/gi,
                        replace: function (t) {
                          return '<a href="//www.bilibili.com/read/'
                            .concat(
                              t.toLowerCase(),
                              '" target="_blank" class="dynamic-link">'
                            )
                            .concat(t, "</a>");
                        },
                      },
                    ]
                  ),
                  p = this.msg
                    .replace(/</g, "&lt;")
                    .replace(/>/g, "&gt;")
                    .replace(/\n/g, "<br/>");
                if (Object.keys(this.msgRegex).length) {
                  var m,
                    f,
                    h = new RegExp(this.msgRegex.any_url, "g"),
                    g = (p.match(h) || []).sort(function (t, e) {
                      return e.length - t.length;
                    }),
                    v =
                      null === (m = this.msgRegex) || void 0 === m
                        ? void 0
                        : m.white_list.filter(function (t) {
                            return -1 === t.indexOf("bilibili://");
                          }),
                    b = new RegExp(v.join("|")),
                    y = new RegExp(
                      null === (f = this.msgRegex) || void 0 === f
                        ? void 0
                        : f.black_list.join("|")
                    );
                  return (
                    g.forEach(function (e, n) {
                      var i, s;
                      !b.test(e) ||
                        (null !== (i = t.msgRegex) &&
                          void 0 !== i &&
                          null !== (s = i.black_list) &&
                          void 0 !== s &&
                          s.length &&
                          y.test(e)) ||
                        (p = p
                          .split(e)
                          .join("bilibili-msg-link-placeholder-".concat(n)));
                    }),
                    (p = u(d, p).join("")),
                    g.forEach(function (t, e) {
                      p = p
                        .split("bilibili-msg-link-placeholder-".concat(e))
                        .join(
                          '\n              <a href="'.concat(
                            t,
                            '" target="_blank" class="dynamic-link">\n                <i class="bp-icon-font icon-link"></i> 网页链接\n              </a>\n            '
                          )
                        );
                    }),
                    p
                  );
                }
                return (p = u(d, p).join(""));
              }
              return '\n          <span class="not-support-icon"></span><span class="not-support-text no-select">不支持的消息类型，请使用最新版客户端查看</span>\n        ';
            }
          },
          isMusic: function () {
            return (
              this.content &&
              (8 === this.content.source ||
                /bilibili:\/\/music/.test(this.content.url))
            );
          },
        },
        components: {
          Medal: Lo,
          ShareCard: fa,
          ShareCardNormal: va,
          ContextMenu: Oa,
        },
        mounted: function () {
          var t = this;
          S.pv({
            spmId: "444.1",
            logId: "000873",
            event: "im_message_show",
            data: {
              msg_key: this.msgObj.msg_key,
              msg_type: this.msgObj.msg_type,
              sender_uid: this.msgObj.sender_uid,
            },
          }),
            (this.targetDom = this.$refs.message),
            G.$on("ShowBvConfigUpdated", function () {
              (t.triggerUpdate = !0),
                t.$nextTick(function () {
                  t.triggerUpdate = !1;
                });
            }),
            this.handleExpressionData();
        },
        beforeDestroy: function () {
          this.photoImager && this.photoImager.destroy();
        },
        methods: {
          handleExpressionData: function () {
            for (
              var t = JSON.parse(localStorage.getItem("_emoji_in_single_msg_")),
                e = t ? t.emoji : [],
                n = {},
                i = 0;
              i < e.length;
              i++
            )
              n[e[i].text.slice(1, -1)] = Pa(
                Pa({}, e[i]),
                {},
                { step: e[i].step || 0, img: e[i].gif_url || e[i].url }
              );
            this.expressionData = Pa(Pa({}, n), this.handleEmojiBoxData());
          },
          handleEmojiBoxData: function () {
            for (
              var t = window.bp_emoji_data_v3.free || [],
                e = {},
                n = function (n) {
                  var i = t[n].size;
                  t[n].emojis.forEach(function (t) {
                    e[t.name.slice(1, -1)] = {
                      img: t.gif_url || t.url,
                      step: t.step || 0,
                      size: i,
                    };
                  });
                },
                i = 0;
              i < t.length;
              i++
            )
              n(i);
            return e;
          },
          openPhotoImager: function (t) {
            if (
              !this.verifyNoPass &&
              50 !== this.msgObj.msg_status &&
              this.image.url
            ) {
              if ((t.preventDefault(), this.photoImager))
                return void this.photoImager.show();
              var e = new Eo({
                images: [this.image],
                showSupportWidget: !1,
                showFavouriteWidget: !1,
                hideBodyScroll: !0,
              });
              (this.photoImager = e), this.photoImager.show();
            }
          },
          handleClick: function (t) {
            t.target &&
              "A" === t.target.tagName &&
              S.click({
                spmId: "444.1",
                logId: "000873",
                event: "im_message_click",
                data: {
                  msg_key: this.msgObj.msg_key,
                  msg_type: this.msgObj.msg_type,
                  sender_uid: this.msgObj.sender_uid,
                  url: 1 === this.type ? t.target.href : void 0,
                },
              });
          },
        },
      },
      Na =
        (n(450),
        n(451),
        n(452),
        Object(xe.a)(
          Da,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              {
                staticClass: "msg-item",
                class: {
                  "not-me": !t.isMe,
                  "is-up": t.medal.master,
                  "is-me": t.isMe,
                },
              },
              [
                n("a", {
                  staticClass: "avatar",
                  style: t.avatarStyle,
                  attrs: {
                    href: "//space.bilibili.com/" + t.mid,
                    title: t.name,
                    target: "_blank",
                  },
                }),
                t.group
                  ? n("div", { staticClass: "medal-box" }, [
                      t.medal.master
                        ? n("div", { staticClass: "medal-master" }, [
                            n("span", [
                              t._v(t._s(2 !== t.groupType ? "UP" : "群主")),
                            ]),
                          ])
                        : t._e(),
                      !t.medal.admin || t.medal.system || t.medal.master
                        ? t._e()
                        : n("div", { staticClass: "medal-admin" }, [
                            n("span", [t._v("管理员")]),
                          ]),
                      t.medal.system && 2 !== t.groupType
                        ? n("div", { staticClass: "medal-system" }, [
                            n("span", [t._v("系统")]),
                          ])
                        : t._e(),
                      !t.medal.name ||
                      2 === t.groupType ||
                      t.medal.master ||
                      t.medal.admin ||
                      t.medal.system
                        ? t._e()
                        : n(
                            "div",
                            {
                              staticClass: "fans-medal",
                              style:
                                "border-color: #" +
                                (t.medal.color && t.medal.color.toString(16)),
                            },
                            [
                              n(
                                "span",
                                {
                                  staticClass: "name",
                                  style:
                                    "background-color: #" +
                                    (t.medal.color &&
                                      t.medal.color.toString(16)),
                                },
                                [t._v(t._s(t.medal.name))]
                              ),
                              n(
                                "span",
                                {
                                  staticClass: "level",
                                  style:
                                    "color: #" +
                                    (t.medal.color &&
                                      t.medal.color.toString(16)),
                                },
                                [t._v(t._s(t.medal.level || 1))]
                              ),
                            ]
                          ),
                      n("div", { staticClass: "name" }, [t._v(t._s(t.name))]),
                    ])
                  : t._e(),
                n(
                  "div",
                  {
                    ref: "message",
                    staticClass: "message",
                    class: {
                      group: t.group,
                      "img-padding": 2 === t.type || 6 === t.type,
                    },
                    on: { click: t.handleClick },
                  },
                  [
                    !t.triggerUpdate &&
                    (t.isMusic ||
                      (7 !== t.type && 9 !== t.type && 14 !== t.type))
                      ? n("div", {
                          staticClass: "message-content",
                          class: {
                            "is-me": t.isMe,
                            "not-img": 2 !== t.type && 6 !== t.type,
                          },
                          attrs: { "data-key": t.msgKey },
                          domProps: { innerHTML: t._s(t.msg2html) },
                          on: { click: t.openPhotoImager },
                        })
                      : t._e(),
                    7 !== t.type || t.isMusic || [17].includes(t.content.source)
                      ? t._e()
                      : n(
                          "div",
                          {
                            staticClass: "message-content share-type",
                            class: {
                              "is-me": t.isMe,
                              "not-img": 2 !== t.type && 6 !== t.type,
                            },
                            attrs: { "data-key": t.msgKey },
                          },
                          [
                            n("share-card", {
                              attrs: { content: t.content, "is-me": t.isMe },
                            }),
                          ],
                          1
                        ),
                    14 === t.type ||
                    (7 === t.type && [17].includes(t.content.source))
                      ? n(
                          "div",
                          {
                            staticClass: "message-content share-type",
                            class: {
                              "is-me": t.isMe,
                              "not-img": 2 !== t.type && 6 !== t.type,
                            },
                            attrs: { "data-key": t.msgKey },
                          },
                          [
                            n("share-card-normal", {
                              attrs: { content: t.content, "is-me": t.isMe },
                            }),
                          ],
                          1
                        )
                      : t._e(),
                    9 === t.type
                      ? n("div", {
                          staticClass: "message-content not-img",
                          class: { "is-me": t.isMe },
                          attrs: { "data-key": t.msgKey },
                          domProps: {
                            textContent: t._s("收到一个小程序，请在手机上查看"),
                          },
                        })
                      : t._e(),
                    n("context-menu", {
                      attrs: {
                        targetDom: t.targetDom,
                        image:
                          (2 === t.type &&
                            t.content.url &&
                            t.content.url.replace(/^http:/, "")) ||
                          "",
                        isMe: t.isMe,
                        msgKey: t.msgKey,
                        uid: t.mid,
                        talkerId: t.talkerId,
                        sessionType: t.group ? 2 : 1,
                        time: t.time,
                        isLimit: t.isLimit,
                        limitMsg: t.limitMsg,
                        verifyNoPass: t.verifyNoPass,
                        status: t.msgObj.msg_status,
                      },
                    }),
                  ],
                  1
                ),
              ]
            );
          },
          [],
          !1,
          null,
          "d5403732",
          null
        ).exports);
    function Ra(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    var $a = {
        components: { ContextMenu: Oa },
        props: {
          msg: { type: Object, required: !0 },
          talkerId: { type: [Number, String], required: !0 },
        },
        data: function () {
          return {
            targetDom: null,
            checkFinished: 0,
            intervalTimer: null,
            checkData: {},
          };
        },
        computed: {
          coverUrl: function () {
            var t,
              e,
              n,
              i,
              s,
              o =
                (null === (t = this.msg.content) || void 0 === t
                  ? void 0
                  : t.biz_content) || {},
              r = o.cover,
              a = o.backup_cover;
            return this.liveFinished
              ? (null === (e = this.checkData) ||
                void 0 === e ||
                null === (n = e.biz_content) ||
                void 0 === n
                  ? void 0
                  : n.backup_cover) || a
              : (null === (i = this.checkData) ||
                void 0 === i ||
                null === (s = i.biz_content) ||
                void 0 === s
                  ? void 0
                  : s.cover) ||
                  r ||
                  a;
          },
          isLive: function () {
            var t, e;
            return [2, 3, 5].includes(
              null === (t = this.msg.content) ||
                void 0 === t ||
                null === (e = t.biz_content) ||
                void 0 === e
                ? void 0
                : e.biz_type
            );
          },
          liveStatus: function () {
            var t, e;
            return (
              (null === (t = this.msg.content) ||
              void 0 === t ||
              null === (e = t.biz_content) ||
              void 0 === e
                ? void 0
                : e.biz_status) || 0
            );
          },
          isLiving: function () {
            return this.isLive && 1 === this.liveStatus && !this.checkFinished;
          },
          liveFinished: function () {
            return (this.isLive && 0 === this.liveStatus) || this.checkFinished;
          },
          isGaming: function () {
            var t, e;
            return (
              3 ===
              (null === (t = this.msg.content) ||
              void 0 === t ||
              null === (e = t.biz_content) ||
              void 0 === e
                ? void 0
                : e.biz_type)
            );
          },
          isFirstPlay: function () {
            var t, e;
            return (
              5 ===
              (null === (t = this.msg.content) ||
              void 0 === t ||
              null === (e = t.biz_content) ||
              void 0 === e
                ? void 0
                : e.biz_type)
            );
          },
          needRefresh: function () {
            var t, e;
            return (
              this.isLive &&
              1 === this.liveStatus &&
              1 ===
                (null === (t = this.msg.content) ||
                void 0 === t ||
                null === (e = t.biz_content) ||
                void 0 === e
                  ? void 0
                  : e.refresh_type) &&
              !this.checkFinished
            );
          },
        },
        beforeDestroy: function () {
          clearInterval(this.intervalTimer);
        },
        mounted: function () {
          this.needRefresh && (this.handleRefresh(), this.setUpdateLoop()),
            S.pv({
              spmId: "444.1",
              logId: "000873",
              event: "im_message_show",
              data: {
                msg_key: this.msg.msg_key,
                msg_type: this.msg.msg_type,
                sender_uid: this.msg.sender_uid,
                notify_code: this.msg.notify_code,
              },
            }),
            (this.targetDom = this.$refs.message);
        },
        methods: {
          handleJump: function () {
            var t, e;
            (null === (t = this.msg) ||
            void 0 === t ||
            null === (e = t.content) ||
            void 0 === e
              ? void 0
              : e.jump_uri) && window.open(this.msg.content.jump_uri);
          },
          setUpdateLoop: function () {
            var t = this;
            this.intervalTimer = setInterval(function () {
              t.handleRefresh();
            }, 6e4);
          },
          handleRefresh: function () {
            var t,
              e = this;
            return ((t = q.a.mark(function t() {
              return q.a.wrap(function (t) {
                for (;;)
                  switch ((t.prev = t.next)) {
                    case 0:
                      es(e.msg.sender_uid, 1, [
                        { msg_key: e.msg.msg_key, seqno: e.msg.msg_seqno },
                      ]).then(function (t) {
                        var n;
                        if (!t.code && null != t && t.data[0]) {
                          var i = JSON.parse(t.data[0].content || "{}");
                          (e.checkData = i),
                            0 ===
                              (null == i ||
                              null === (n = i.biz_content) ||
                              void 0 === n
                                ? void 0
                                : n.biz_status) &&
                              ((e.checkFinished = 1),
                              clearInterval(e.intervalTimer));
                        }
                      });
                    case 1:
                    case "end":
                      return t.stop();
                  }
              }, t);
            })),
            function () {
              var e = this,
                n = arguments;
              return new Promise(function (i, s) {
                var o = t.apply(e, n);
                function r(t) {
                  Ra(o, i, s, r, a, "next", t);
                }
                function a(t) {
                  Ra(o, i, s, r, a, "throw", t);
                }
                r(void 0);
              });
            })();
          },
          handleClick: function () {
            S.click({
              spmId: "444.1",
              logId: "000873",
              event: "im_message_click",
              data: {
                msg_key: this.msg.msg_key,
                msg_type: this.msg.msg_type,
                sender_uid: this.msg.sender_uid,
              },
            });
          },
          isLinkActive: function (t) {
            return t && 0 !== t.indexOf("bilibili://");
          },
          escapeJS: function (t) {
            return t && t.replace(/^javascript:/i, "");
          },
        },
      },
      Ua =
        (n(453),
        Object(xe.a)(
          $a,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return t.msg.content
              ? n(
                  "div",
                  {
                    ref: "message",
                    staticClass: "msg-notify",
                    on: { click: t.handleClick },
                  },
                  [
                    t.msg.content.notifier
                      ? [
                          n(
                            "a",
                            {
                              staticClass: "notifier",
                              attrs: {
                                href:
                                  t.escapeJS(
                                    t.msg.content.notifier.jump_url ||
                                      t.msg.content.jump_uri
                                  ) || "",
                                target: "_blank",
                              },
                            },
                            [
                              t.msg.content.notifier.avatar_url
                                ? n("div", {
                                    staticClass: "avatar",
                                    style: {
                                      "background-image":
                                        "url(" +
                                        t.msg.content.notifier.avatar_url +
                                        ")",
                                    },
                                  })
                                : t._e(),
                              n("div", {
                                staticClass: "name",
                                domProps: {
                                  textContent: t._s(
                                    t.msg.content.notifier.nickname
                                  ),
                                },
                              }),
                            ]
                          ),
                          n("hr"),
                        ]
                      : t._e(),
                    n("span", [
                      t.isGaming
                        ? t._e()
                        : n("div", [
                            n("div", {
                              staticClass: "title",
                              domProps: {
                                textContent: t._s(t.msg.content.title || ""),
                              },
                            }),
                            n("div", {
                              staticClass: "content",
                              domProps: {
                                textContent: t._s(t.msg.content.text || ""),
                              },
                            }),
                          ]),
                      n("div", { staticClass: "cover-container" }, [
                        t.isGaming
                          ? n("div", { staticClass: "game-info" }, [
                              n("div", {
                                staticClass: "title",
                                domProps: {
                                  textContent: t._s(t.msg.content.title || ""),
                                },
                              }),
                              n("div", {
                                staticClass: "content game-content",
                                domProps: {
                                  textContent: t._s(t.msg.content.text || ""),
                                },
                              }),
                            ])
                          : t._e(),
                        !t.isGaming && t.msg.content.modules
                          ? n(
                              "div",
                              {
                                staticClass: "table-container",
                                class: { "limit-width": t.coverUrl },
                              },
                              [
                                t.msg.content.modules
                                  ? n("table", { staticClass: "modules" }, [
                                      n(
                                        "tbody",
                                        t._l(
                                          t.msg.content.modules,
                                          function (e) {
                                            return n(
                                              "tr",
                                              {
                                                key: e.title,
                                                staticClass: "module",
                                              },
                                              [
                                                n(
                                                  "th",
                                                  {
                                                    staticClass: "mtitle",
                                                    attrs: { scope: "col" },
                                                  },
                                                  [
                                                    n("span", {
                                                      domProps: {
                                                        textContent: t._s(
                                                          e.title
                                                        ),
                                                      },
                                                    }),
                                                  ]
                                                ),
                                                n(
                                                  "td",
                                                  {
                                                    staticClass: "detail",
                                                    attrs: { scope: "col" },
                                                  },
                                                  [
                                                    n("span", {
                                                      domProps: {
                                                        textContent: t._s(
                                                          e.detail
                                                        ),
                                                      },
                                                    }),
                                                  ]
                                                ),
                                              ]
                                            );
                                          }
                                        ),
                                        0
                                      ),
                                    ])
                                  : t._e(),
                              ]
                            )
                          : t._e(),
                        t.coverUrl
                          ? n(
                              "div",
                              {
                                staticClass: "cover",
                                class: {
                                  "live-finished": t.liveFinished,
                                  "game-cover": t.isGaming,
                                },
                                on: { click: t.handleJump },
                              },
                              [
                                n("img", {
                                  attrs: { src: t.coverUrl, alt: "" },
                                }),
                                t.liveFinished && t.isFirstPlay
                                  ? n(
                                      "div",
                                      { staticClass: "first-play-finished" },
                                      [n("div", [t._v(t._s("首映已结束"))])]
                                    )
                                  : t.liveFinished
                                  ? n(
                                      "div",
                                      { staticClass: "live-finished-text" },
                                      [
                                        n("div", { staticClass: "text" }, [
                                          t._v(
                                            t._s(
                                              t.isGaming
                                                ? "比赛已结束"
                                                : "直播已结束"
                                            )
                                          ),
                                        ]),
                                      ]
                                    )
                                  : t._e(),
                                t.isLiving
                                  ? n("div", { staticClass: "living-part" }, [
                                      t._m(0),
                                      n("span", [
                                        t._v(
                                          t._s(
                                            t.isFirstPlay ? "首映中" : "直播中"
                                          )
                                        ),
                                      ]),
                                    ])
                                  : t._e(),
                              ]
                            )
                          : t._e(),
                      ]),
                    ]),
                    t.msg.content.jump_uri
                      ? [
                          n("hr"),
                          n(
                            t.isLinkActive(t.msg.content.jump_uri)
                              ? "a"
                              : "span",
                            {
                              tag: "component",
                              staticClass: "link",
                              attrs: {
                                href: t.escapeJS(t.msg.content.jump_uri) || "",
                                target: "_blank",
                              },
                            },
                            [
                              n("span", {
                                domProps: {
                                  textContent: t._s(
                                    t.msg.content.jump_text || "查看详情"
                                  ),
                                },
                              }),
                              n("i"),
                            ]
                          ),
                        ]
                      : t._e(),
                    t.msg.content.jump_uri_2
                      ? [
                          n("hr"),
                          n(
                            t.isLinkActive(t.msg.content.jump_uri_2)
                              ? "a"
                              : "span",
                            {
                              tag: "component",
                              staticClass: "link",
                              attrs: {
                                href:
                                  t.escapeJS(t.msg.content.jump_uri_2) || "",
                                target: "_blank",
                              },
                            },
                            [
                              n("span", {
                                domProps: {
                                  textContent: t._s(
                                    t.msg.content.jump_text_2 || "查看详情"
                                  ),
                                },
                              }),
                              n("i"),
                            ]
                          ),
                        ]
                      : t._e(),
                    t.msg.content.jump_uri_3
                      ? [
                          n("hr"),
                          n(
                            t.isLinkActive(t.msg.content.jump_uri_3)
                              ? "a"
                              : "span",
                            {
                              tag: "component",
                              staticClass: "link",
                              attrs: {
                                href:
                                  t.escapeJS(t.msg.content.jump_uri_3) || "",
                                target: "_blank",
                              },
                            },
                            [
                              n("span", {
                                domProps: {
                                  textContent: t._s(
                                    t.msg.content.jump_text_3 || "查看详情"
                                  ),
                                },
                              }),
                              n("i"),
                            ]
                          ),
                        ]
                      : t._e(),
                    n("context-menu", {
                      attrs: {
                        targetDom: t.targetDom,
                        msgKey: t.msg.msg_key,
                        talkerId: t.talkerId,
                        isMe: !1,
                        sessionType: 1,
                      },
                    }),
                  ],
                  2
                )
              : t._e();
          },
          [
            function () {
              var t = this.$createElement,
                e = this._self._c || t;
              return e("div", { staticClass: "icon-container" }, [
                e("div", { staticClass: "living-icon" }),
              ]);
            },
          ],
          !1,
          null,
          "6cfee131",
          null
        ).exports);
    function Va(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    var za = {
        components: { ContextMenu: Oa },
        props: {
          msg: { type: Object, required: !0 },
          talkerId: { type: [Number, String], required: !0 },
        },
        data: function () {
          return {
            targetDom: null,
            checkFinished: 0,
            intervalTimer: null,
            checkData: {},
          };
        },
        computed: {
          coverUrl: function () {
            var t,
              e,
              n,
              i =
                (null === (t = this.msg.content) || void 0 === t
                  ? void 0
                  : t.biz_content) || {},
              s = i.cover,
              o = i.backup_cover;
            return (
              (null === (e = this.checkData) ||
              void 0 === e ||
              null === (n = e.biz_content) ||
              void 0 === n
                ? void 0
                : n.cover) ||
              s ||
              o
            );
          },
          isAllStar: function () {
            var t, e;
            return (
              4 ===
              (null === (t = this.msg.content) ||
              void 0 === t ||
              null === (e = t.biz_content) ||
              void 0 === e
                ? void 0
                : e.biz_type)
            );
          },
          isLive: function () {
            var t, e;
            return [2, 3].includes(
              null === (t = this.msg.content) ||
                void 0 === t ||
                null === (e = t.biz_content) ||
                void 0 === e
                ? void 0
                : e.biz_type
            );
          },
          liveStatus: function () {
            var t, e;
            return (
              (null === (t = this.msg.content) ||
              void 0 === t ||
              null === (e = t.biz_content) ||
              void 0 === e
                ? void 0
                : e.biz_status) || 0
            );
          },
          isLiving: function () {
            return this.isLive && 1 === this.liveStatus && !this.checkFinished;
          },
          liveFinished: function () {
            return (this.isLive && 0 === this.liveStatus) || this.checkFinished;
          },
          isGaming: function () {
            var t, e;
            return (
              3 ===
              (null === (t = this.msg.content) ||
              void 0 === t ||
              null === (e = t.biz_content) ||
              void 0 === e
                ? void 0
                : e.biz_type)
            );
          },
          specialStyle: function () {
            var t, e;
            return [3, 4].includes(
              null === (t = this.msg.content) ||
                void 0 === t ||
                null === (e = t.biz_content) ||
                void 0 === e
                ? void 0
                : e.biz_type
            );
          },
          needRefresh: function () {
            var t, e;
            return (
              this.isLive &&
              1 === this.liveStatus &&
              1 ===
                (null === (t = this.msg.content) ||
                void 0 === t ||
                null === (e = t.biz_content) ||
                void 0 === e
                  ? void 0
                  : e.refresh_type) &&
              !this.checkFinished
            );
          },
        },
        beforeDestroy: function () {
          clearInterval(this.intervalTimer);
        },
        mounted: function () {
          this.needRefresh && (this.handleRefresh(), this.setUpdateLoop()),
            S.pv({
              spmId: "444.1",
              logId: "000873",
              event: "im_message_show",
              data: {
                msg_key: this.msg.msg_key,
                msg_type: this.msg.msg_type,
                sender_uid: this.msg.sender_uid,
                notify_code: this.msg.notify_code,
              },
            }),
            (this.targetDom = this.$refs.message);
        },
        methods: {
          handleJump: function () {
            var t, e;
            (null === (t = this.msg) ||
            void 0 === t ||
            null === (e = t.content) ||
            void 0 === e
              ? void 0
              : e.jump_uri) && window.open(this.msg.content.jump_uri);
          },
          setUpdateLoop: function () {
            var t = this;
            this.intervalTimer = setInterval(function () {
              t.handleRefresh();
            }, 6e4);
          },
          handleRefresh: function () {
            var t,
              e = this;
            return ((t = q.a.mark(function t() {
              return q.a.wrap(function (t) {
                for (;;)
                  switch ((t.prev = t.next)) {
                    case 0:
                      es(e.msg.sender_uid, 1, [
                        { msg_key: e.msg.msg_key, seqno: e.msg.msg_seqno },
                      ]).then(function (t) {
                        var n;
                        if (!t.code && null != t && t.data[0]) {
                          var i = JSON.parse(t.data[0].content || "{}");
                          (e.checkData = i),
                            0 ===
                              (null == i ||
                              null === (n = i.biz_content) ||
                              void 0 === n
                                ? void 0
                                : n.biz_status) &&
                              ((e.checkFinished = 1),
                              clearInterval(e.intervalTimer));
                        }
                      });
                    case 1:
                    case "end":
                      return t.stop();
                  }
              }, t);
            })),
            function () {
              var e = this,
                n = arguments;
              return new Promise(function (i, s) {
                var o = t.apply(e, n);
                function r(t) {
                  Va(o, i, s, r, a, "next", t);
                }
                function a(t) {
                  Va(o, i, s, r, a, "throw", t);
                }
                r(void 0);
              });
            })();
          },
          handleClick: function () {
            S.click({
              spmId: "444.1",
              logId: "000873",
              event: "im_message_click",
              data: {
                msg_key: this.msg.msg_key,
                msg_type: this.msg.msg_type,
                sender_uid: this.msg.sender_uid,
              },
            });
          },
          isLinkActive: function (t) {
            return t && 0 !== t.indexOf("bilibili://");
          },
          escapeJS: function (t) {
            return t && t.replace(/^javascript:/i, "");
          },
        },
      },
      Ha =
        (n(454),
        Object(xe.a)(
          za,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return t.msg.content
              ? n(
                  "div",
                  {
                    ref: "message",
                    staticClass: "msg-notify-all-star",
                    on: { click: t.handleClick },
                  },
                  [
                    t.msg.content.notifier
                      ? [
                          n(
                            "a",
                            {
                              staticClass: "notifier",
                              attrs: {
                                href:
                                  t.escapeJS(
                                    t.msg.content.notifier.jump_url ||
                                      t.msg.content.jump_uri
                                  ) || "",
                                target: "_blank",
                              },
                            },
                            [
                              t.msg.content.notifier.avatar_url
                                ? n("div", {
                                    staticClass: "avatar",
                                    style: {
                                      "background-image":
                                        "url(" +
                                        t.msg.content.notifier.avatar_url +
                                        ")",
                                    },
                                  })
                                : t._e(),
                              n("div", {
                                staticClass: "name",
                                domProps: {
                                  textContent: t._s(
                                    t.msg.content.notifier.nickname
                                  ),
                                },
                              }),
                            ]
                          ),
                          n("hr"),
                        ]
                      : t._e(),
                    n("span", [
                      t.msg.content.modules
                        ? n("div", [
                            n("div", {
                              staticClass: "title",
                              domProps: {
                                textContent: t._s(t.msg.content.title || ""),
                              },
                            }),
                            n("div", {
                              staticClass: "content",
                              domProps: {
                                textContent: t._s(t.msg.content.text || ""),
                              },
                            }),
                          ])
                        : t._e(),
                      n("div", { staticClass: "cover-container" }, [
                        t.msg.content.modules
                          ? t._e()
                          : n("div", { staticClass: "game-info" }, [
                              n("div", [
                                n("div", {
                                  staticClass: "title",
                                  domProps: {
                                    textContent: t._s(
                                      t.msg.content.title || ""
                                    ),
                                  },
                                }),
                                n("div", {
                                  staticClass: "content game-content",
                                  domProps: {
                                    textContent: t._s(t.msg.content.text || ""),
                                  },
                                }),
                              ]),
                            ]),
                        !t.isGaming && t.msg.content.modules
                          ? n(
                              "div",
                              {
                                staticClass: "table-container",
                                class: {
                                  "limit-width": t.coverUrl,
                                  "fit-all-star": t.isAllStar,
                                },
                              },
                              [
                                t.msg.content.modules
                                  ? n("table", { staticClass: "modules" }, [
                                      n(
                                        "tbody",
                                        t._l(
                                          t.msg.content.modules,
                                          function (e) {
                                            return n(
                                              "tr",
                                              {
                                                key: e.title,
                                                staticClass: "module",
                                              },
                                              [
                                                n(
                                                  "th",
                                                  {
                                                    staticClass: "mtitle",
                                                    attrs: { scope: "col" },
                                                  },
                                                  [
                                                    n("span", {
                                                      domProps: {
                                                        textContent: t._s(
                                                          e.title
                                                        ),
                                                      },
                                                    }),
                                                  ]
                                                ),
                                                n(
                                                  "td",
                                                  {
                                                    staticClass: "detail",
                                                    attrs: { scope: "col" },
                                                  },
                                                  [
                                                    n("span", {
                                                      domProps: {
                                                        textContent: t._s(
                                                          e.detail
                                                        ),
                                                      },
                                                    }),
                                                  ]
                                                ),
                                              ]
                                            );
                                          }
                                        ),
                                        0
                                      ),
                                    ])
                                  : t._e(),
                              ]
                            )
                          : t._e(),
                        t.coverUrl
                          ? n(
                              "div",
                              {
                                staticClass: "cover",
                                class: {
                                  "live-finished": t.liveFinished,
                                  "game-cover": !t.msg.content.modules,
                                  "all-star-cover": t.isAllStar,
                                },
                                on: { click: t.handleJump },
                              },
                              [
                                n("img", {
                                  attrs: { src: t.coverUrl, alt: "" },
                                }),
                                t.liveFinished
                                  ? n(
                                      "div",
                                      { staticClass: "live-finished-text" },
                                      [
                                        n("div", { staticClass: "text" }, [
                                          t._v(
                                            t._s(
                                              t.isGaming
                                                ? "比赛已结束"
                                                : "直播已结束"
                                            )
                                          ),
                                        ]),
                                      ]
                                    )
                                  : t._e(),
                                t.isLiving
                                  ? n("div", { staticClass: "living-part" }, [
                                      t._m(0),
                                      n("span", [t._v("直播中")]),
                                    ])
                                  : t._e(),
                              ]
                            )
                          : t._e(),
                      ]),
                    ]),
                    t.msg.content.jump_uri
                      ? [
                          n("hr"),
                          n(
                            t.isLinkActive(t.msg.content.jump_uri)
                              ? "a"
                              : "span",
                            {
                              tag: "component",
                              staticClass: "link",
                              attrs: {
                                href: t.escapeJS(t.msg.content.jump_uri) || "",
                                target: "_blank",
                              },
                            },
                            [
                              n("span", {
                                domProps: {
                                  textContent: t._s(
                                    t.msg.content.jump_text || "查看详情"
                                  ),
                                },
                              }),
                              n("i"),
                            ]
                          ),
                        ]
                      : t._e(),
                    t.msg.content.jump_uri_2
                      ? [
                          n("hr"),
                          n(
                            t.isLinkActive(t.msg.content.jump_uri_2)
                              ? "a"
                              : "span",
                            {
                              tag: "component",
                              staticClass: "link",
                              attrs: {
                                href:
                                  t.escapeJS(t.msg.content.jump_uri_2) || "",
                                target: "_blank",
                              },
                            },
                            [
                              n("span", {
                                domProps: {
                                  textContent: t._s(
                                    t.msg.content.jump_text_2 || "查看详情"
                                  ),
                                },
                              }),
                              n("i"),
                            ]
                          ),
                        ]
                      : t._e(),
                    t.msg.content.jump_uri_3
                      ? [
                          n("hr"),
                          n(
                            t.isLinkActive(t.msg.content.jump_uri_3)
                              ? "a"
                              : "span",
                            {
                              tag: "component",
                              staticClass: "link",
                              attrs: {
                                href:
                                  t.escapeJS(t.msg.content.jump_uri_3) || "",
                                target: "_blank",
                              },
                            },
                            [
                              n("span", {
                                domProps: {
                                  textContent: t._s(
                                    t.msg.content.jump_text_3 || "查看详情"
                                  ),
                                },
                              }),
                              n("i"),
                            ]
                          ),
                        ]
                      : t._e(),
                    n("context-menu", {
                      attrs: {
                        targetDom: t.targetDom,
                        msgKey: t.msg.msg_key,
                        talkerId: t.talkerId,
                        isMe: !1,
                        sessionType: 1,
                      },
                    }),
                  ],
                  2
                )
              : t._e();
          },
          [
            function () {
              var t = this.$createElement,
                e = this._self._c || t;
              return e("div", { staticClass: "icon-container" }, [
                e("div", { staticClass: "living-icon" }),
              ]);
            },
          ],
          !1,
          null,
          "787c48c8",
          null
        ).exports),
      Fa = {
        components: { ContextMenu: Oa },
        props: {
          msg: { type: Object, required: !0 },
          talkerId: { type: Number, required: !0 },
        },
        data: function () {
          return {
            targetDom: null,
            coverStyle: { backgroundImage: "url(".concat(Vo.a, ")") },
            cvImages: new Array(3).fill({
              backgroundImage: "url(".concat(Vo.a, ")"),
            }),
            triggerUpdate: !1,
          };
        },
        computed: {
          detail: function () {
            return 11 === this.msg.msg_type
              ? pa.state.videoDetails[this.msg.content.rid] || {}
              : (12 === this.msg.msg_type &&
                  pa.state.articleDetails[this.msg.content.rid]) ||
                  {};
          },
        },
        watch: {
          detail: function (t) {
            var e = this;
            if (11 === this.msg.msg_type && t.pic) {
              var n = Vi(t.pic, 360, 200, !0).srcUrl.replace(/^http:/, ""),
                i = new Image();
              (i.src = n),
                (i.onload = function () {
                  e.coverStyle = {
                    backgroundImage: "url(".concat(n, ")"),
                    backgroundSize: "cover",
                  };
                });
            } else if (12 === this.msg.msg_type && t.image_urls)
              if (t.image_urls.length < 3 && t.image_urls[0]) {
                var s = Vi(t.image_urls[0], 711, 200, !0).srcUrl.replace(
                    /^http:/,
                    ""
                  ),
                  o = new Image();
                (o.src = s),
                  (o.onload = function () {
                    e.coverStyle = {
                      backgroundImage: "url(".concat(s, ")"),
                      backgroundSize: "cover",
                    };
                  });
              } else if (t.image_urls.length >= 3)
                for (
                  var r = function (t) {
                      var n = Vi(
                          e.detail.image_urls[t],
                          233,
                          200,
                          !0
                        ).srcUrl.replace(/^http:/, ""),
                        i = new Image();
                      (i.src = n),
                        (i.onload = function () {
                          e.$set(e.cvImages, t, {
                            backgroundImage: "url(".concat(n, ")"),
                            backgroundSize: "cover",
                          });
                        });
                    },
                    a = 0;
                  a < 3;
                  a++
                )
                  r(a);
          },
        },
        mounted: function () {
          var t = this;
          S.pv({
            spmId: "444.1",
            logId: "000873",
            event: "im_message_show",
            data: {
              msg_key: this.msg.msg_key,
              msg_type: this.msg.msg_type,
              sender_uid: this.msg.sender_uid,
            },
          }),
            (this.targetDom = this.$refs.message),
            G.$on("ShowBvConfigUpdated", function () {
              (t.triggerUpdate = !0),
                t.$nextTick(function () {
                  t.triggerUpdate = !1;
                });
            });
        },
        methods: {
          handleClick: function () {
            S.click({
              spmId: "444.1",
              logId: "000873",
              event: "im_message_click",
              data: {
                msg_key: this.msg.msg_key,
                msg_type: this.msg.msg_type,
                sender_uid: this.msg.sender_uid,
              },
            });
          },
          getCardLink: function () {
            return 11 === this.msg.msg_type
              ? pt(this.msg.content.rid, this.msg.content.bvid)
              : 12 === this.msg.msg_type
              ? "//www.bilibili.com/read/cv".concat(this.msg.content.rid)
              : void 0;
          },
          formatTime: function (t) {
            return zi(t);
          },
        },
      },
      Ga =
        (n(455),
        Object(xe.a)(
          Fa,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return t.triggerUpdate
              ? t._e()
              : n(
                  "a",
                  {
                    ref: "message",
                    staticClass: "msg-push",
                    attrs: { href: t.getCardLink(), target: "_blank" },
                    on: { click: t.handleClick },
                  },
                  [
                    11 === t.msg.msg_type
                      ? [
                          n("div", { staticClass: "video-content" }, [
                            n(
                              "div",
                              { staticClass: "left", style: t.coverStyle },
                              [
                                n("div", { staticClass: "snum" }),
                                n("div", {
                                  staticClass: "duration",
                                  domProps: {
                                    textContent: t._s(
                                      t.detail.duration
                                        ? t.formatTime(t.detail.duration)
                                        : "-- : --"
                                    ),
                                  },
                                }),
                                n("div", { staticClass: "play" }),
                              ]
                            ),
                            n("div", { staticClass: "right" }, [
                              n("div", {
                                staticClass: "title",
                                domProps: {
                                  textContent: t._s(
                                    t.detail.title || t.msg.content.title || ""
                                  ),
                                },
                              }),
                              n("div", {
                                staticClass: "desc",
                                domProps: {
                                  textContent: t._s(t.detail.desc || ""),
                                },
                              }),
                            ]),
                          ]),
                          n("hr"),
                          t._m(0),
                        ]
                      : t._e(),
                    12 === t.msg.msg_type
                      ? [
                          n("div", { staticClass: "cv-title" }, [
                            n("span", {
                              domProps: {
                                textContent: t._s(
                                  t.detail.title || t.msg.content.title || ""
                                ),
                              },
                            }),
                          ]),
                          t.detail.image_urls && t.detail.image_urls.length >= 3
                            ? n(
                                "div",
                                { staticClass: "cv-images cv-img-3" },
                                t._l(t.cvImages, function (t, e) {
                                  return n("div", { key: e, style: t });
                                }),
                                0
                              )
                            : t._e(),
                          !t.detail.image_urls ||
                          (t.detail.image_urls &&
                            t.detail.image_urls.length < 3)
                            ? n("div", {
                                staticClass: "cv-images cv-img-single",
                                style: t.coverStyle,
                              })
                            : t._e(),
                          n("div", { staticClass: "cv-detail" }, [
                            n("span", {
                              domProps: {
                                textContent: t._s(
                                  t.detail.summary || t.msg.content.summary
                                ),
                              },
                            }),
                          ]),
                          n("hr"),
                          t._m(1),
                        ]
                      : t._e(),
                    n("context-menu", {
                      attrs: {
                        targetDom: t.targetDom,
                        msgKey: t.msg.msg_key,
                        talkerId: t.talkerId,
                        isMe: !1,
                        sessionType: 1,
                      },
                    }),
                  ],
                  2
                );
          },
          [
            function () {
              var t = this.$createElement,
                e = this._self._c || t;
              return e("div", { staticClass: "footer" }, [
                e("span", { staticClass: "type" }, [this._v("投稿视频")]),
              ]);
            },
            function () {
              var t = this.$createElement,
                e = this._self._c || t;
              return e("div", { staticClass: "footer" }, [
                e("span", { staticClass: "type" }, [this._v("投稿专栏")]),
              ]);
            },
          ],
          !1,
          null,
          "69960110",
          null
        ).exports),
      Za = {
        components: { ContextMenu: Oa },
        props: {
          msg: { type: Object, required: !0 },
          talkerId: { type: Number, required: !0 },
        },
        data: function () {
          return { targetDom: null, loaded: !1, imgStyle: {} };
        },
        computed: {
          href: function () {
            var t =
              (this.msg.content &&
                this.msg.content.jump_url &&
                this.msg.content.jump_url
                  .replace(/^http:/i, "")
                  .replace(/^javascript:/i, "")) ||
              "";
            return 0 === t.indexOf("bilibili://") ? "" : t;
          },
        },
        mounted: function () {
          var t = this;
          S.pv({
            spmId: "444.1",
            logId: "000873",
            event: "im_message_show",
            data: {
              msg_key: this.msg.msg_key,
              msg_type: this.msg.msg_type,
              sender_uid: this.msg.sender_uid,
              abnormal_title: this.msg.content && this.msg.content.title,
            },
          }),
            (this.targetDom = this.$refs.message);
          var e = new Image();
          e.onload = function () {
            t.loaded = !0;
          };
          var n = this.msg.content && this.msg.content.pic_url;
          (n = Vi(n, 1080, 540, !1).srcUrl.replace(/^http:/, "")) &&
            ((e.src = n),
            (this.imgStyle = { "background-image": "url(".concat(n, ")") }));
        },
        methods: {
          handleClick: function () {
            S.click({
              spmId: "444.1",
              logId: "000873",
              event: "im_message_click",
              data: {
                msg_key: this.msg.msg_key,
                msg_type: this.msg.msg_type,
                sender_uid: this.msg.sender_uid,
                abnormal_title: this.msg.content && this.msg.content.title,
              },
            });
          },
        },
      },
      qa =
        (n(456),
        Object(xe.a)(
          Za,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              t.href ? "a" : "span",
              {
                ref: "message",
                tag: "component",
                staticClass: "abnormal-card",
                attrs: { href: t.href, target: "_blank" },
                on: { click: t.handleClick },
              },
              [
                t.loaded
                  ? t._e()
                  : n("div", { staticClass: "placeholder" }, [
                      n("div", { staticClass: "tv" }),
                    ]),
                t.loaded
                  ? n("div", { staticClass: "img", style: t.imgStyle })
                  : t._e(),
                n("context-menu", {
                  attrs: {
                    targetDom: t.targetDom,
                    msgKey: t.msg.msg_key,
                    talkerId: t.talkerId,
                    isMe: !1,
                    sessionType: 1,
                  },
                }),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "485cf726",
          null
        ).exports),
      Ka = {
        props: { itemObj: { type: Object, default: function () {} } },
        computed: {
          isArtical: function () {
            return "文章" === this.itemObj.literal_logo;
          },
          coverImg: function () {
            return Vi(this.itemObj.cover_url, 128, 72).srcUrl || "";
          },
          iconClass: function () {
            return (
              { 文章: "artical-icon", 合集: "compilation-icon" }[
                this.itemObj.literal_logo
              ] || ""
            );
          },
        },
      },
      Wa =
        (n(457),
        Object(xe.a)(
          Ka,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "a",
              {
                staticClass: "ar-recommend-item",
                attrs: { href: t.itemObj.jump_url, target: "_blank" },
              },
              [
                n("img", {
                  directives: [
                    {
                      name: "lazy",
                      rawName: "v-lazy",
                      value: t.coverImg,
                      expression: "coverImg",
                    },
                  ],
                  staticClass: "ar-recommend-item__img",
                }),
                n("div", { staticClass: "ar-recommend-item__info" }, [
                  n("div", { staticClass: "ar-recommend-item__info--title" }, [
                    t._v(t._s(t.itemObj.field1)),
                  ]),
                  n("div", { staticClass: "ar-recommend-item__info--desc" }, [
                    t.iconClass
                      ? n("div", {
                          staticClass: "type-icon",
                          class: t.iconClass,
                        })
                      : t._e(),
                    n("div", { staticClass: "time" }, [
                      t._v(t._s(t.itemObj.field2)),
                    ]),
                  ]),
                  n("div", { staticClass: "ar-recommend-item__info--view" }, [
                    t.itemObj.field3
                      ? n("i", {
                          class: [
                            t.isArtical
                              ? "bilifont icon-view"
                              : "bp-icon-font icon-play-a",
                          ],
                        })
                      : t._e(),
                    n("span", { staticClass: "view" }, [
                      t._v(t._s(t.itemObj.field3)),
                    ]),
                    t.itemObj.field4
                      ? n("i", {
                          class: [
                            t.isArtical
                              ? "bilifont icon-chat"
                              : "bp-icon-font icon-danmu-a",
                          ],
                        })
                      : t._e(),
                    n("span", { staticClass: "chat" }, [
                      t._v(t._s(t.itemObj.field4)),
                    ]),
                  ]),
                ]),
              ]
            );
          },
          [],
          !1,
          null,
          null,
          null
        ).exports);
    function Ja(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function Ya(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? Ja(Object(n), !0).forEach(function (e) {
              Qa(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : Ja(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function Qa(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    function Xa(t, e) {
      var n =
        ("undefined" != typeof Symbol && t[Symbol.iterator]) || t["@@iterator"];
      if (!n) {
        if (
          Array.isArray(t) ||
          (n = (function (t, e) {
            if (!t) return;
            if ("string" == typeof t) return tc(t, e);
            var n = Object.prototype.toString.call(t).slice(8, -1);
            "Object" === n && t.constructor && (n = t.constructor.name);
            if ("Map" === n || "Set" === n) return Array.from(t);
            if (
              "Arguments" === n ||
              /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
            )
              return tc(t, e);
          })(t)) ||
          (e && t && "number" == typeof t.length)
        ) {
          n && (t = n);
          var i = 0,
            s = function () {};
          return {
            s: s,
            n: function () {
              return i >= t.length ? { done: !0 } : { done: !1, value: t[i++] };
            },
            e: function (t) {
              throw t;
            },
            f: s,
          };
        }
        throw new TypeError(
          "Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
        );
      }
      var o,
        r = !0,
        a = !1;
      return {
        s: function () {
          n = n.call(t);
        },
        n: function () {
          var t = n.next();
          return (r = t.done), t;
        },
        e: function (t) {
          (a = !0), (o = t);
        },
        f: function () {
          try {
            r || null == n.return || n.return();
          } finally {
            if (a) throw o;
          }
        },
      };
    }
    function tc(t, e) {
      (null == e || e > t.length) && (e = t.length);
      for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
      return i;
    }
    function ec(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    var nc = {
        components: { PushItem: Wa },
        props: {
          mainTitle: { type: String, default: "" },
          pushList: {
            type: Array,
            default: function () {
              return [];
            },
          },
          msg: { type: Object, required: !0 },
        },
        computed: {
          recomList: function () {
            return this.pushList.map(function (t) {
              return { card_id: t.card_id, card_type: t.card_type };
            });
          },
          reportParams: function () {
            return {
              msg_key: this.msg.msg_key,
              msg_type: this.msg.msg_type,
              msg_user_id: this.msg.sender_uid,
            };
          },
          computeHeight: function () {
            var t = this.mainTitle ? 40 : 25;
            return {
              height:
                84 * (this.validRecommend.length || this.recomList.length) +
                t +
                "px",
            };
          },
        },
        data: function () {
          return { validRecommend: [], hide: !1 };
        },
        created: function () {
          this.getValidRecommend();
        },
        mounted: function () {
          this.reportData();
        },
        methods: {
          getValidRecommend: function () {
            var t,
              e = this;
            return ((t = q.a.mark(function t() {
              return q.a.wrap(function (t) {
                for (;;)
                  switch ((t.prev = t.next)) {
                    case 0:
                      e.recomList.length || (e.hide = !0),
                        e.recomList.length &&
                          ((n = e.recomList),
                          Object(P.a)({
                            method: "post",
                            useBridgeProxy: !0,
                            urlWithCSRF: !0,
                            ajaxVersion2: !0,
                            url: "//api.vc.bilibili.com/x/im/recommend_card/check_status",
                            data: { status_request: n },
                          })).then(function (t) {
                            0 === t.code &&
                              t.data.status_response
                                .filter(function (t) {
                                  return t.is_valid;
                                })
                                .forEach(function (t) {
                                  var n,
                                    i = 0,
                                    s = Xa(e.pushList);
                                  try {
                                    for (s.s(); !(n = s.n()).done; ) {
                                      var o = n.value;
                                      o.card_id === t.card_id &&
                                        (i++, e.validRecommend.push(o));
                                    }
                                  } catch (t) {
                                    s.e(t);
                                  } finally {
                                    s.f();
                                  }
                                  0 === i && (e.hide = !0);
                                });
                          });
                    case 2:
                    case "end":
                      return t.stop();
                  }
                var n;
              }, t);
            })),
            function () {
              var e = this,
                n = arguments;
              return new Promise(function (i, s) {
                var o = t.apply(e, n);
                function r(t) {
                  ec(o, i, s, r, a, "next", t);
                }
                function a(t) {
                  ec(o, i, s, r, a, "throw", t);
                }
                r(void 0);
              });
            })();
          },
          reportData: function () {
            S.pv({
              spmId: "444.1",
              logId: "000873",
              event: "im.chat-single.receive-message.all.show",
              data: this.reportParams,
            });
          },
          handleClickReport: function (t, e) {
            S.click({
              spmId: "444.1",
              logId: "000873",
              event: "im.chat-single.receive-message.video-card.click",
              data: Ya(
                Ya({}, this.reportParams),
                {},
                {
                  card_pos: e + 1,
                  entity: t.card_type,
                  entity_id: t.card_id,
                  entity_name: t.field1,
                }
              ),
            });
          },
        },
      },
      ic =
        (n(458),
        Object(xe.a)(
          nc,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return t.hide
              ? t._e()
              : n(
                  "div",
                  {
                    directives: [
                      {
                        name: "show",
                        rawName: "v-show",
                        value: t.validRecommend.length,
                        expression: "validRecommend.length",
                      },
                    ],
                    staticClass: "auto-reply-push",
                    style: t.computeHeight,
                  },
                  [
                    n(
                      "div",
                      {
                        directives: [
                          {
                            name: "show",
                            rawName: "v-show",
                            value: t.mainTitle,
                            expression: "mainTitle",
                          },
                        ],
                        staticClass: "auto-reply-push__desc",
                      },
                      [t._v(t._s(t.mainTitle))]
                    ),
                    t._l(t.validRecommend, function (e, i) {
                      return n("PushItem", {
                        key: e.card_id,
                        attrs: { "item-obj": e },
                        nativeOn: {
                          click: function (n) {
                            return t.handleClickReport(e, i);
                          },
                        },
                      });
                    }),
                  ],
                  2
                );
          },
          [],
          !1,
          null,
          null,
          null
        ).exports);
    function sc(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function oc(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? sc(Object(n), !0).forEach(function (e) {
              rc(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : sc(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function rc(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var ac = {
        components: { PushItem: Wa },
        props: { msg: { type: Object, required: !0 } },
        mounted: function () {
          var t = this;
          [11, 12].some(function (e) {
            return e === t.msg.msg_type;
          }) &&
            (this.getEmojiData(),
            this.verifyAttachStatus(),
            this.isShowExpand(),
            this.reportData(),
            this.isCardExpired());
        },
        data: function () {
          return {
            isFolded: !0,
            emojiData: {},
            showExpand: !1,
            height: 0,
            expired: !1,
            attachExpired: !1,
            hasValidate: !1,
          };
        },
        methods: {
          toggleExpand: function () {
            this.isFolded = !this.isFolded;
          },
          isCardExpired: function () {
            var t, e, n, i, s, o, r;
            (null === (t = this.msg) ||
            void 0 === t ||
            null === (e = t.content) ||
            void 0 === e
              ? void 0
              : e.cover) ||
              ((null === (n = this.msg) ||
              void 0 === n ||
              null === (i = n.content) ||
              void 0 === i ||
              null === (s = i.image_urls) ||
              void 0 === s
                ? void 0
                : s.length) &&
                this.msg.content.image_urls[0]) ||
              "" ||
              "内容已失效" !==
                (null === (o = this.msg) ||
                void 0 === o ||
                null === (r = o.content) ||
                void 0 === r
                  ? void 0
                  : r.title) ||
              (this.expired = !0);
          },
          verifyAttachStatus: function () {
            var t,
              e,
              n,
              i,
              s,
              o = this,
              r =
                null === (t = this.msg) ||
                void 0 === t ||
                null === (e = t.content) ||
                void 0 === e ||
                null === (n = e.attach_msg) ||
                void 0 === n
                  ? void 0
                  : n.id,
              a =
                null === (i = this.msg) ||
                void 0 === i ||
                null === (s = i.content) ||
                void 0 === s
                  ? void 0
                  : s.rid;
            Object(P.a)({
              method: "get",
              addPlatInfo: !0,
              url: "//api.vc.bilibili.com/x/im/feed/infoweb",
              data: rc(
                { am_ids: r },
                11 === this.msg.msg_type ? "aids" : "article_ids",
                a
              ),
            }).then(function (t) {
              var e;
              if (t.code) o.hasValidate = !0;
              else {
                var n =
                  null === (e = t.data) || void 0 === e ? void 0 : e.attach_msg;
                null != n &&
                  n.length &&
                  -1 === n[0].status &&
                  (o.attachExpired = !0);
                var i = t.data[11 === o.msg.msg_type ? "archive" : "article"];
                null != i && i.length && -1 === i[0].status && (o.expired = !0),
                  (o.hasValidate = !0),
                  o.isShowExpand();
              }
            });
          },
          getEmojiData: function () {
            for (
              var t = JSON.parse(localStorage.getItem("_emoji_in_single_msg_")),
                e = t ? t.emoji : [],
                n = {},
                i = 0;
              i < e.length;
              i++
            )
              n[e[i].text.slice(1, -1)] = oc(
                oc({}, e[i]),
                {},
                { step: e[i].step || 0, img: e[i].gif_url || e[i].url }
              );
            this.emojiData = oc(
              oc({}, n),
              (function () {
                for (
                  var t = window.bp_emoji_data_v3.free || [],
                    e = {},
                    n = function (n) {
                      var i = t[n].size;
                      t[n].emojis.forEach(function (t) {
                        e[t.name.slice(1, -1)] = {
                          img: t.gif_url || t.url,
                          step: t.step || 0,
                          size: i,
                        };
                      });
                    },
                    i = 0;
                  i < t.length;
                  i++
                )
                  n(i);
                return e;
              })()
            );
          },
          processMsg: function () {
            var t, e, n;
            return Gi(
              null === (t = this.msg) ||
                void 0 === t ||
                null === (e = t.content) ||
                void 0 === e ||
                null === (n = e.attach_msg) ||
                void 0 === n
                ? void 0
                : n.content,
              this.emojiData
            );
          },
          isShowExpand: function () {
            var t = this;
            this.$nextTick(function () {
              var e,
                n =
                  (null === (e = t.$refs.textContainer) || void 0 === e
                    ? void 0
                    : e.clientHeight) || 0;
              (t.height = n), n > 20 && (t.showExpand = !0);
            });
          },
          reportData: function () {
            S.pv(
              oc(oc({}, this.reportParams), {}, { event: "im_message_show" })
            );
          },
          handleClickReport: function () {
            S.click(
              oc(oc({}, this.reportParams), {}, { event: "im_message_click" })
            );
          },
        },
        computed: {
          showAttachMsg: function () {
            var t, e, n;
            return !(
              null === (t = this.msg) ||
              void 0 === t ||
              null === (e = t.content) ||
              void 0 === e ||
              null === (n = e.attach_msg) ||
              void 0 === n ||
              !n.content ||
              this.expired ||
              this.attachExpired
            );
          },
          reportParams: function () {
            return {
              spmId: "444.1",
              logId: "000873",
              data: {
                msg_key: this.msg.msg_key,
                msg_type: this.msg.msg_type,
                sender_uid: this.msg.sender_uid,
              },
            };
          },
          formatData: function () {
            var t,
              e,
              n,
              i,
              s,
              o,
              r,
              a,
              c,
              l,
              u,
              d,
              p,
              m,
              f,
              h,
              g,
              v,
              b =
                (null === (t = this.msg) ||
                void 0 === t ||
                null === (e = t.content) ||
                void 0 === e
                  ? void 0
                  : e.cover) ||
                ((null === (n = this.msg) ||
                void 0 === n ||
                null === (i = n.content) ||
                void 0 === i ||
                null === (s = i.image_urls) ||
                void 0 === s
                  ? void 0
                  : s.length) &&
                  this.msg.content.image_urls[0]) ||
                "";
            if (this.expired)
              return {
                card_type: 2,
                card_id: 0,
                field1: "内容已失效",
                cover_url: "",
                field2: "",
                field3: "",
                field4: "",
                literal_logo: "",
                icon3: 1,
                icon4: 2,
                jump_url: void 0,
              };
            var y = new Date(
                1e3 *
                  ((null === (o = this.msg) ||
                  void 0 === o ||
                  null === (r = o.content) ||
                  void 0 === r
                    ? void 0
                    : r.pub_date) || 0)
              ),
              _ = y.getFullYear(),
              w = y.getMonth() + 1,
              C = y.getDate(),
              x = "".concat(_, "-").concat(w, "-").concat(C);
            return {
              card_type: 12 === this.msg.msg_type ? 2 : 3,
              card_id:
                null === (a = this.msg) ||
                void 0 === a ||
                null === (c = a.content) ||
                void 0 === c
                  ? void 0
                  : c.rid,
              field1:
                null === (l = this.msg) ||
                void 0 === l ||
                null === (u = l.content) ||
                void 0 === u
                  ? void 0
                  : u.title,
              cover_url: b,
              field2: y ? x : "",
              field3:
                null !==
                  (d = Zi(
                    (null === (p = this.msg) ||
                    void 0 === p ||
                    null === (m = p.content) ||
                    void 0 === m
                      ? void 0
                      : m.view) || 0
                  )) && void 0 !== d
                  ? d
                  : "",
              field4:
                12 === this.msg.msg_type
                  ? Zi(
                      (null === (f = this.msg) ||
                      void 0 === f ||
                      null === (h = f.content) ||
                      void 0 === h
                        ? void 0
                        : h.reply) || 0
                    )
                  : Zi(
                      (null === (g = this.msg) ||
                      void 0 === g ||
                      null === (v = g.content) ||
                      void 0 === v
                        ? void 0
                        : v.danmaku) || 0
                    ),
              literal_logo: 12 === this.msg.msg_type ? "文章" : "",
              icon3: 1,
              icon4: 2,
              jump_url: this.getCardLink,
            };
          },
          getCardLink: function () {
            return 11 === this.msg.msg_type
              ? pt(this.msg.content.rid, this.msg.content.bvid)
              : 12 === this.msg.msg_type
              ? "//www.bilibili.com/read/cv".concat(this.msg.content.rid)
              : "";
          },
        },
      },
      cc =
        (n(459),
        Object(xe.a)(
          ac,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              {
                directives: [
                  {
                    name: "show",
                    rawName: "v-show",
                    value: t.hasValidate,
                    expression: "hasValidate",
                  },
                ],
                staticClass: "msg-push-new",
              },
              [
                n("PushItem", {
                  attrs: { itemObj: t.formatData },
                  nativeOn: {
                    click: function (e) {
                      return t.handleClickReport(e);
                    },
                  },
                }),
                t.showAttachMsg
                  ? n(
                      "div",
                      {
                        staticClass: "msg-push-new__leave-message",
                        on: { click: t.toggleExpand },
                      },
                      [
                        n("div", {
                          ref: "textContainer",
                          staticClass: "msg-push-new__leave-message--text",
                          class: { "fold-text": t.showExpand && t.isFolded },
                          domProps: { innerHTML: t._s(t.processMsg()) },
                        }),
                        t.showExpand
                          ? n("div", {
                              staticClass:
                                "msg-push-new__leave-message--expand",
                              class: { "rotate-icon": t.isFolded },
                            })
                          : t._e(),
                      ]
                    )
                  : t._e(),
              ],
              1
            );
          },
          [],
          !1,
          null,
          null,
          null
        ).exports),
      lc = {
        props: {
          rid: [String, Number],
          hasTip: Boolean,
          group: Boolean,
          list: Array,
          status: String,
          isLimit: Boolean,
          limitMsg: String,
          hasMore: Boolean,
          pushSetting: Boolean,
        },
        data: function () {
          return {
            hasHistory: !1,
            atBottom: !0,
            atTop: !1,
            historyShow: !1,
            historyRid: null,
            historyTitle: "",
            scrollBar: null,
            currentTime: Date.now(),
            bottomDistance: 0,
          };
        },
        computed: {
          uid: function () {
            return pa.state.uid;
          },
          sysSetting: function () {
            return pa.state.sysSetting;
          },
          detailState: function () {
            return pa.state.videoDetails && pa.state.articleDetails;
          },
          groupInfo: function () {
            return pa.state.groupInfos[this.rid] || {};
          },
          groupType: function () {
            return this.groupInfo && this.groupInfo.group_type;
          },
          gmInfos: function () {
            return pa.state.gmInfos[this.rid] || {};
          },
          userInfos: function () {
            return pa.state.userInfos || {};
          },
        },
        watch: {
          list: function (t, e) {
            var n = this;
            0 === e.length
              ? this.scrollToBottom()
              : this.$nextTick(function () {
                  var t = n.$refs.messageList,
                    e = n.$refs.messageListContent.clientHeight;
                  t.scrollTop = e - (n.bottomDistance || 0);
                });
          },
          atTop: function (t) {
            t && this.$emit("atTop");
          },
          atBottom: function (t) {
            t && this.$emit("atBottom");
          },
          detailState: function (t) {
            var e = this;
            this.$nextTick(function () {
              var t = e.$refs.messageList,
                n = e.$refs.messageListContent.clientHeight;
              t.scrollTop = n - (e.bottomDistance || 0);
            });
          },
        },
        components: {
          MsgTime: xo,
          MsgMore: jo,
          MsgItem: Na,
          MsgNotify: Ua,
          MsgNotifyAllStar: Ha,
          MsgPush: Ga,
          MsgAbnormal: qa,
          MsgAutoReplyPush: ic,
          MsgPushNew: cc,
        },
        mounted: function () {
          var t = this;
          (window.onWarnLinkClick = function (e, n) {
            if (n) {
              var i = t.list.find(function (t) {
                return t.msg_key === e;
              });
              t.$emit("report", i);
            }
          }),
            this.forceScrollToBottom(),
            setInterval(function () {
              t.currentTime = Date.now();
            }, to.updateCurrentTime),
            this.getHistoryRid(),
            Ui.$on("clearUnread", this.scrollToBottom),
            Ui.$on("Dialog:SendMessage", this.scrollToBottom),
            this.$refs.messageList.addEventListener("scroll", this.ifAtBottom, {
              capture: !1,
              passive: !0,
            });
        },
        beforeDestroy: function () {
          this.$refs.messageList.removeEventListener(
            "scroll",
            this.ifAtBottom,
            { capture: !1, passive: !0 }
          );
        },
        methods: {
          forceScrollToBottom: function () {
            var t = this.$refs.messageList;
            setTimeout(function () {
              t.scrollTop = t.scrollHeight;
            }, 500);
          },
          hasSendingWarning: function (t) {
            return pa.state.warningMsg[t] || "";
          },
          hasRecivedWarning: function (t) {
            var e = t.key_hit_infos;
            if (!e) return "";
            if (!Object.keys(e).length) return "";
            var n = e.toast;
            return (
              e.high_text.forEach(function (e) {
                if (Object.keys(e).length) {
                  var i =
                    e.url.indexOf(
                      "https://message.bilibili.com/h5/app/report"
                    ) > -1;
                  n = Fi(
                    n,
                    e.title,
                    '<a href="'
                      .concat(
                        i ? "javascript:void(0)" : e.url,
                        '" onclick="onWarnLinkClick(\''
                      )
                      .concat(t.msg_key, "', ")
                      .concat(i, ')" style="color: #5090CC">')
                      .concat(e.title, "</a>"),
                    e.index
                  );
                }
              }),
              n
            );
          },
          isSysInfo: function (t) {
            return 1 === t.msg_status || 0 === t.sender_uid || t.msg_type < 0;
          },
          getMedal: function (t) {
            return {
              level:
                this.gmInfos[t.sender_uid] &&
                this.gmInfos[t.sender_uid].fans_level,
              color:
                this.gmInfos[t.sender_uid] &&
                this.gmInfos[t.sender_uid].fans_medal_color,
              name: this.groupInfo && this.groupInfo.fans_medal_name,
              admin:
                2 ===
                (this.gmInfos[t.sender_uid] && this.gmInfos[t.sender_uid].role),
              system: 0 === t.sender_uid,
              master:
                t.sender_uid === (this.groupInfo && this.groupInfo.owner_uid),
            };
          },
          getHistoryRid: function () {
            var t,
              e,
              n,
              i,
              s = this;
            this.group ||
              this.rid === this.uid ||
              ((t = { mid: this.rid }),
              (e = t.pageNum),
              (n = void 0 === e ? 1 : e),
              (i = t.mid),
              i && us[i.toString()]
                ? Promise.resolve(us[i.toString()])
                : Object(P.a)({
                    method: "get",
                    url: "//message.bilibili.com/api/msg/query.room.list.do",
                    data: { page_no: n, mid: i },
                  }).then(function (t) {
                    return i && (us[i.toString()] = t), t;
                  })).then(function (t) {
                t.length
                  ? ((s.hasHistory = !0),
                    (s.historyRid = t[0].rid),
                    (s.historyTitle = "和 ".concat(
                      t[0].room_name,
                      " 的以往私信"
                    )))
                  : (s.hasHistory = !1);
              });
          },
          showHistory: function () {
            window.open(
              "https://message.bilibili.com/archive/mid".concat(this.rid)
            );
          },
          hideHistory: function () {
            this.historyShow = !1;
          },
          ifShowTime: function (t, e) {
            if (0 === t) return !0;
            function n(t) {
              return parseInt(
                (function () {
                  for (
                    var t = arguments.length, e = new Array(t), n = 0;
                    n < t;
                    n++
                  )
                    e[n] = arguments[n];
                  return function (t) {
                    return e.reduce(function (t, e) {
                      return t && t[e] ? t[e] : null;
                    }, t);
                  };
                })(
                  t,
                  "timestamp"
                )(e) || 0
              );
            }
            function i(t, e) {
              return (t - e) / 60 / 5;
            }
            var s = n(0),
              o = n(t - 1),
              r = n(t),
              a = i(o, s),
              c = i(r, s);
            return c > 1 && c - a >= 1;
          },
          scrollToBottom: function () {
            var t = this;
            this.$nextTick(function () {
              var e = t.$refs.messageList;
              if (e && t.$refs.messageListContent) {
                var n = t.$refs.messageListContent.clientHeight;
                (e.scrollTop = n - e.clientHeight),
                  (t.bottomDistance = n - e.scrollTop);
              }
            });
          },
          ifAtBottom: function () {
            var t = this.$refs.messageList,
              e = this.$refs.messageListContent.clientHeight;
            (this.bottomDistance = e - t.scrollTop),
              (this.atBottom = e - t.clientHeight - t.scrollTop < 10),
              (this.atTop = t.scrollTop < 100);
          },
          drawbackText: function (t) {
            return t.sender_uid === this.uid
              ? "你撤回了一条消息"
              : this.group
              ? this.userInfos[t.sender_uid]
                ? "".concat(
                    (null === (e = this.userInfos[t.sender_uid]) || void 0 === e
                      ? void 0
                      : e.name) || this.userInfos[t.sender_uid].uname,
                    "撤回了一条消息"
                  )
                : "消息已撤回"
              : "对方撤回了一条消息";
            var e;
          },
          systemMsg: function (t) {
            return t.content && t.content.content
              ? t.content.content
              : "收到一条系统通知，请在手机上查看";
          },
          setPush: function (t) {
            this.$emit("setPush", t);
          },
          learnMore: function (t) {
            var e = this.list[t];
            if (!e.added) {
              e.added = !0;
              var n = {
                msg_key: Math.round(16e6 * Math.random()).toString(16),
                msg_status: 0,
                msg_type: -3,
                msg_seqno: e.msg_seqno,
                timestamp: e.timestamp,
                sender_uid: e.sender_uid,
              };
              this.list.splice(t + 1, 0, n),
                Sr(this.rid, this.group ? 2 : 1, e.msg_key, n);
            }
          },
          isAllStar: function (t) {
            var e, n;
            return (
              4 ===
              (null == t ||
              null === (e = t.content) ||
              void 0 === e ||
              null === (n = e.biz_content) ||
              void 0 === n
                ? void 0
                : n.biz_type)
            );
          },
        },
      },
      uc =
        (n(460),
        Object(xe.a)(
          lc,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              { ref: "messageList", staticClass: "message-list" },
              [
                n(
                  "div",
                  {
                    ref: "messageListContent",
                    staticClass: "message-list-content",
                    class: { "padding-top": t.hasTip },
                  },
                  [
                    n("msg-more", {
                      directives: [
                        {
                          name: "show",
                          rawName: "v-show",
                          value: !t.group || "done" !== t.status,
                          expression: "!group || status !== 'done'",
                        },
                      ],
                      key: "msgMore",
                      attrs: {
                        hasMore: t.hasMore,
                        hasHistory: t.hasHistory,
                        status: t.status,
                        text: "查看和他的历史私信消息",
                      },
                      on: { loadHistory: t.showHistory },
                    }),
                    t._l(t.list, function (e, i) {
                      return [
                        t.ifShowTime(i, t.list) && 2 !== e.msg_status
                          ? n("msg-time", {
                              key: e.msg_key + "time",
                              attrs: { time: e.timestamp },
                            })
                          : t._e(),
                        t.isSysInfo(e)
                          ? [
                              1 === e.msg_status
                                ? n("div", { staticClass: "notify-wrapper" }, [
                                    n("span", {
                                      staticClass: "notify-text",
                                      domProps: {
                                        textContent: t._s(t.drawbackText(e)),
                                      },
                                    }),
                                  ])
                                : t._e(),
                              0 === e.sender_uid
                                ? n("div", { staticClass: "notify-wrapper" }, [
                                    n("span", {
                                      staticClass: "notify-text",
                                      domProps: {
                                        textContent: t._s(t.systemMsg(e)),
                                      },
                                    }),
                                  ])
                                : t._e(),
                              -1 === e.msg_type
                                ? n("div", { staticClass: "notify-wrapper" }, [
                                    !0 === e.push
                                      ? n(
                                          "span",
                                          { staticClass: "notify-push" },
                                          [t._v("你已设置接受该账号的内容推送")]
                                        )
                                      : t._e(),
                                    !1 === e.push
                                      ? n(
                                          "span",
                                          { staticClass: "notify-push" },
                                          [
                                            t._v(
                                              "你已设置不接受该账号的内容推送"
                                            ),
                                            n(
                                              "span",
                                              {
                                                staticClass: "set-push",
                                                class: {
                                                  disabled: t.pushSetting,
                                                },
                                                on: {
                                                  click: function (e) {
                                                    return t.setPush(!0);
                                                  },
                                                },
                                              },
                                              [t._v("开启推送")]
                                            ),
                                          ]
                                        )
                                      : t._e(),
                                  ])
                                : t._e(),
                              -2 === e.msg_type &&
                              t.list[i - 1] &&
                              11 === t.list[i - 1].msg_type
                                ? n("div", { staticClass: "notify-wrapper" }, [
                                    t.sysSetting.vc_hint_title
                                      ? n(
                                          "span",
                                          { staticClass: "notify-push" },
                                          [
                                            n("span", [
                                              t._v(
                                                t._s(t.sysSetting.vc_hint_title)
                                              ),
                                            ]),
                                            t.sysSetting.vc_hint_title_button
                                              ? n("span", {
                                                  staticClass: "set-push",
                                                  class: { disabled: e.added },
                                                  domProps: {
                                                    textContent: t._s(
                                                      t.sysSetting
                                                        .vc_hint_title_button
                                                    ),
                                                  },
                                                  on: {
                                                    click: function (e) {
                                                      return t.learnMore(i);
                                                    },
                                                  },
                                                })
                                              : t._e(),
                                          ]
                                        )
                                      : t._e(),
                                  ])
                                : t._e(),
                              -3 === e.msg_type &&
                              t.list[i - 2] &&
                              11 === t.list[i - 2].msg_type
                                ? n("div", { staticClass: "notify-wrapper" }, [
                                    t.sysSetting.vc_hint_detail
                                      ? n(
                                          "span",
                                          { staticClass: "notify-push" },
                                          [
                                            n("span", [
                                              t._v(
                                                t._s(
                                                  t.sysSetting.vc_hint_detail
                                                )
                                              ),
                                            ]),
                                            t.sysSetting.vc_hint_detail_button
                                              ? n("span", {
                                                  staticClass: "set-push",
                                                  class: {
                                                    disabled: !t.pushSetting,
                                                  },
                                                  domProps: {
                                                    textContent: t._s(
                                                      t.sysSetting
                                                        .vc_hint_detail_button
                                                    ),
                                                  },
                                                  on: {
                                                    click: function (e) {
                                                      return t.setPush(!1);
                                                    },
                                                  },
                                                })
                                              : t._e(),
                                          ]
                                        )
                                      : t._e(),
                                  ])
                                : t._e(),
                            ]
                          : t._e(),
                        !t.isSysInfo(e) && [0, 50].includes(e.msg_status)
                          ? [
                              [10, 11, 12, 13, 16].some(function (t) {
                                return t === e.msg_type;
                              })
                                ? t._e()
                                : n("msg-item", {
                                    key: e.msg_key,
                                    attrs: {
                                      avatar:
                                        t.userInfos[e.sender_uid] &&
                                        t.userInfos[e.sender_uid].face,
                                      content: e.content,
                                      name:
                                        t.userInfos[e.sender_uid] &&
                                        (t.userInfos[e.sender_uid].name ||
                                          t.userInfos[e.sender_uid].uname),
                                      isMe: t.uid == e.sender_uid,
                                      mid: e.sender_uid,
                                      type: e.msg_type,
                                      "msg-key": e.msg_key,
                                      "verify-no-pass": e.verifyNoPass || !1,
                                      time: e.timestamp,
                                      group: t.group,
                                      medal: t.getMedal(e),
                                      "group-type": t.groupType,
                                      isLimit: t.isLimit,
                                      limitMsg: t.limitMsg,
                                      talkerId: t.rid,
                                      msgObj: e,
                                    },
                                  }),
                              t.hasSendingWarning(e.msg_key) ||
                              t.hasRecivedWarning(e)
                                ? [
                                    n("div", { staticClass: "send-warning" }, [
                                      n("span", {
                                        staticClass: "warning-text",
                                        domProps: {
                                          innerHTML: t._s(
                                            t.hasSendingWarning(e.msg_key) ||
                                              t.hasRecivedWarning(e)
                                          ),
                                        },
                                      }),
                                    ]),
                                  ]
                                : t._e(),
                              10 !== e.msg_type || t.isAllStar(e)
                                ? t._e()
                                : n("msg-notify", {
                                    attrs: { talkerId: t.rid, msg: e },
                                  }),
                              10 === e.msg_type && t.isAllStar(e)
                                ? n("msg-notify-all-star", {
                                    attrs: { talkerId: t.rid, msg: e },
                                  })
                                : t._e(),
                              n("msg-push-new", {
                                directives: [
                                  {
                                    name: "show",
                                    rawName: "v-show",
                                    value: [11, 12].some(function (t) {
                                      return t === e.msg_type;
                                    }),
                                    expression:
                                      "[11, 12].some(v => v === li.msg_type)",
                                  },
                                ],
                                attrs: { talkerId: t.rid, msg: e },
                              }),
                              13 === e.msg_type
                                ? n("msg-abnormal", {
                                    attrs: { talkerId: t.rid, msg: e },
                                  })
                                : t._e(),
                              n("msg-auto-reply-push", {
                                directives: [
                                  {
                                    name: "show",
                                    rawName: "v-show",
                                    value: 16 === e.msg_type,
                                    expression: "li.msg_type === 16",
                                  },
                                ],
                                attrs: {
                                  msg: e,
                                  "main-title": e.content.main_title,
                                  "push-list": e.content.sub_cards,
                                },
                              }),
                            ]
                          : t._e(),
                      ];
                    }),
                  ],
                  2
                ),
              ]
            );
          },
          [],
          !1,
          null,
          "6d524588",
          null
        ).exports),
      dc = {
        props: {
          menuList: { type: Array },
          position: { type: String },
          menuListStyle: { type: String },
        },
        data: function () {
          return { show: !1 };
        },
        mounted: function () {
          window.addEventListener("click", this.actionListener);
        },
        destroyed: function () {
          window.removeEventListener("click", this.actionListener);
        },
        methods: {
          actionListener: function (t) {
            t.target !== this.$refs.menuBtn && this.show && (this.show = !1);
          },
          showMenu: function () {
            this.show = !this.show;
          },
        },
      },
      pc =
        (n(461),
        n(462),
        Object(xe.a)(
          dc,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              { staticClass: "action-menu", style: t.position },
              [
                n("transition", { attrs: { name: "more-action" } }, [
                  n(
                    "div",
                    {
                      directives: [
                        {
                          name: "show",
                          rawName: "v-show",
                          value: t.show,
                          expression: "show",
                        },
                      ],
                      staticClass: "menu-list",
                      style: t.menuListStyle,
                    },
                    [
                      t._l(t.menuList, function (e) {
                        return [
                          e.url
                            ? [
                                n(
                                  "a",
                                  { attrs: { href: e.url, target: "_blank" } },
                                  [t._v(t._s(e.name))]
                                ),
                              ]
                            : t._e(),
                          e.name && !e.tips
                            ? [
                                n("a", {
                                  staticClass: "btn",
                                  domProps: { textContent: t._s(e.name) },
                                  on: { click: e.handle },
                                }),
                              ]
                            : t._e(),
                          e.name && e.tips
                            ? [
                                n(
                                  "a",
                                  {
                                    staticClass: "btn",
                                    on: { click: e.handle },
                                  },
                                  [
                                    n("span", {
                                      staticClass: "name",
                                      domProps: { textContent: t._s(e.name) },
                                    }),
                                    n("span", {
                                      staticClass: "tips",
                                      domProps: { textContent: t._s(e.tips) },
                                    }),
                                  ]
                                ),
                              ]
                            : t._e(),
                        ];
                      }),
                    ],
                    2
                  ),
                ]),
                n("a", {
                  ref: "menuBtn",
                  staticClass: "btn bp-icon-font icon-more-1",
                  on: { click: t.showMenu },
                }),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "d43989d2",
          null
        ).exports),
      mc = {
        components: { SVGIcon: ve },
        props: { show: Boolean },
        data: function () {
          return {
            phoneNumber: "",
            sendLocked: !1,
            comfirmLocked: !1,
            cooldown: 0,
            token: "",
            code: "",
            fetchPhoneNumberFailed: !1,
          };
        },
        computed: {
          sendText: function () {
            return this.cooldown
              ? "".concat(this.cooldown, "s后获取")
              : "获取验证码";
          },
        },
        watch: {
          show: function (t) {
            t && this.fetchPhoneNumber();
          },
        },
        created: function () {
          this.fetchPhoneNumber();
        },
        methods: {
          fetchPhoneNumber: function () {
            var t = this;
            Object(P.a)({
              method: "get",
              url: "//api.bilibili.com/x/silverbullet-proxy/web/recaptcha/hide/tel",
              throttleInterval: "1000",
            })
              .then(function (e) {
                if (!e.data.tel) throw e;
                (t.fetchPhoneNumberFailed = !1), (t.phoneNumber = e.data.tel);
              })
              .catch(function (e) {
                (t.code = ""), (t.token = ""), (t.fetchPhoneNumberFailed = !0);
              });
          },
          send: function () {
            var t = this;
            this.cooldown > 0 ||
              this.sendLocked ||
              ((this.sendLocked = !0),
              Object(P.a)({
                method: "post",
                url: "//api.bilibili.com/x/silverbullet-proxy/web/recaptcha/sms/send",
              })
                .then(function (e) {
                  if (0 !== e.code) throw e;
                  (t.sendLocked = !1),
                    (t.token = e.data.token),
                    (t.cooldown = 60);
                  var n = setInterval(function () {
                    (t.cooldown -= 1),
                      t.cooldown <= 0 && ((t.cooldown = 0), clearInterval(n));
                  }, 1e3);
                })
                .catch(function (e) {
                  (t.sendLocked = !1),
                    t.linkMsg(t.$refs.sendBtn, e.msg || e.message, "error");
                }));
          },
          confirm: function () {
            var t = this;
            this.token
              ? this.code
                ? this.comfirmLocked ||
                  ((this.comfirmLocked = !0),
                  Object(P.a)({
                    method: "post",
                    url: "//api.bilibili.com/x/silverbullet-proxy/web/recaptcha/sms/check",
                    data: { token: this.token, code: this.code },
                  })
                    .then(function (e) {
                      if (0 !== e.code) throw e;
                      (t.comfirmLocked = !1),
                        t.linkMsg(t.$refs.comfirmBtn, "验证成功", "success"),
                        (t.code = ""),
                        (t.token = ""),
                        t.$emit("close", !0);
                    })
                    .catch(function (e) {
                      (t.comfirmLocked = !1),
                        t.linkMsg(
                          t.$refs.comfirmBtn,
                          e.msg || e.message,
                          "error"
                        );
                    }))
                : this.linkMsg(this.$refs.comfirmBtn, "验证码不能为空", "error")
              : this.linkMsg(
                  this.$refs.comfirmBtn,
                  "请先通过短信获取验证码",
                  "error"
                );
          },
          handleKeyup: function (t) {
            "Enter" === t.key && this.confirm();
          },
        },
      },
      fc =
        (n(463),
        Object(xe.a)(
          mc,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              {
                directives: [
                  {
                    name: "show",
                    rawName: "v-show",
                    value: t.show,
                    expression: "show",
                  },
                ],
                staticClass: "cover",
              },
              [
                n("div", { staticClass: "card" }, [
                  n(
                    "div",
                    { staticClass: "title" },
                    [
                      n("span", [t._v("手机号验证")]),
                      n("SVGIcon", {
                        staticClass: "close",
                        attrs: { name: "group-dynamic" },
                        nativeOn: {
                          click: function (e) {
                            return t.$emit("close");
                          },
                        },
                      }),
                    ],
                    1
                  ),
                  n("div", { staticClass: "content" }, [
                    n(
                      "div",
                      { staticClass: "row1" },
                      [
                        n("span", { staticClass: "label" }, [t._v("手机号")]),
                        n("span", {
                          domProps: { textContent: t._s(t.phoneNumber) },
                        }),
                        n("SVGIcon", {
                          directives: [
                            {
                              name: "show",
                              rawName: "v-show",
                              value: t.fetchPhoneNumberFailed,
                              expression: "fetchPhoneNumberFailed",
                            },
                          ],
                          staticClass: "retry",
                          attrs: { name: "right-r-dynamic" },
                          nativeOn: {
                            click: function (e) {
                              return t.fetchPhoneNumber(e);
                            },
                          },
                        }),
                      ],
                      1
                    ),
                    n("div", { staticClass: "row2" }, [
                      n("input", {
                        directives: [
                          {
                            name: "model",
                            rawName: "v-model",
                            value: t.code,
                            expression: "code",
                          },
                        ],
                        attrs: { placeholder: "输入验证码" },
                        domProps: { value: t.code },
                        on: {
                          keyup: t.handleKeyup,
                          input: function (e) {
                            e.target.composing || (t.code = e.target.value);
                          },
                        },
                      }),
                      n(
                        "button",
                        {
                          ref: "sendBtn",
                          staticClass: "send",
                          class: { disabled: t.cooldown > 0 },
                          on: { click: t.send },
                        },
                        [t._v(t._s(t.sendText))]
                      ),
                    ]),
                    t.token
                      ? n("div", { staticClass: "tips" }, [
                          t._v("短信发送成功"),
                        ])
                      : t._e(),
                    n(
                      "button",
                      {
                        ref: "comfirmBtn",
                        staticClass: "confirm-btn",
                        on: { click: t.confirm },
                      },
                      [t._v("确定")]
                    ),
                  ]),
                ]),
              ]
            );
          },
          [],
          !1,
          null,
          "0ec940e9",
          null
        ).exports);
    function hc(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function gc(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? hc(Object(n), !0).forEach(function (e) {
              vc(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : hc(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function vc(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    function bc() {
      return "M".concat(
        String(Math.random()).replace(/0\./, "").substring(0, 7)
      );
    }
    var yc = bc();
    function _c() {
      var t =
          arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {},
        e = gc(gc({}, t), {}, { spmId: "444.1" });
      S.event(gc({ spmId: "444.1" }, e));
    }
    function wc(t) {
      var e = { _id: yc, lt: 0, dlt: 0 };
      window.removeEventListener("load", wc);
      var n = t.timing,
        i = n.fetchStart,
        s = n.domContentLoadedEventEnd,
        o = n.loadEventStart;
      (e.lt = o - i),
        (e.dlt = s - i),
        _c({ event: "per-webim-default", data: e });
    }
    var Cc = {
      default: function () {
        try {
          var t = window.performance;
          if (!t) return;
          t.timing.loadEventStart
            ? wc(t)
            : window.addEventListener("load", wc.bind(null, t));
        } catch (t) {}
      },
      add: function (t) {
        try {
          if (!t || "string" != typeof t) return;
          var e = window.performance;
          if (!e) return;
          e.mark("".concat(t, "_start"));
        } catch (t) {}
      },
      stop: function (t) {
        var e =
          arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
        try {
          if (!t || "string" != typeof t) return;
          var n = window.performance;
          if (!n) return void console.log("no performance");
          n.mark("".concat(t, "_end"));
          var i = bc();
          n.measure("".concat(i, "_a"), "fetchStart", "".concat(t, "_end"));
          try {
            n.measure(i, "".concat(t, "_start"), "".concat(t, "_end"));
          } catch (e) {
            n.measure(i, "fetchStart", "".concat(t, "_end"));
          }
          var s = n.getEntriesByName(i),
            o = s[s.length - 1],
            r = n.getEntriesByName("".concat(i, "_a")),
            a = r[r.length - 1],
            c = {
              event: t,
              data: gc(
                {
                  _id: yc,
                  cost: o.duration.toFixed(0),
                  dur: a.duration.toFixed(0),
                },
                e
              ),
            };
          _c(c), n.clearMeasures(i), n.clearMeasures("".concat(i, "_a"));
        } catch (t) {}
      },
    };
    function xc(t, e) {
      return (
        (function (t) {
          if (Array.isArray(t)) return t;
        })(t) ||
        (function (t, e) {
          var n =
            t &&
            (("undefined" != typeof Symbol && t[Symbol.iterator]) ||
              t["@@iterator"]);
          if (null == n) return;
          var i,
            s,
            o = [],
            r = !0,
            a = !1;
          try {
            for (
              n = n.call(t);
              !(r = (i = n.next()).done) &&
              (o.push(i.value), !e || o.length !== e);
              r = !0
            );
          } catch (t) {
            (a = !0), (s = t);
          } finally {
            try {
              r || null == n.return || n.return();
            } finally {
              if (a) throw s;
            }
          }
          return o;
        })(t, e) ||
        Sc(t, e) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function kc(t) {
      return (
        (function (t) {
          if (Array.isArray(t)) return Ic(t);
        })(t) ||
        (function (t) {
          if (
            ("undefined" != typeof Symbol && null != t[Symbol.iterator]) ||
            null != t["@@iterator"]
          )
            return Array.from(t);
        })(t) ||
        Sc(t) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function Sc(t, e) {
      if (t) {
        if ("string" == typeof t) return Ic(t, e);
        var n = Object.prototype.toString.call(t).slice(8, -1);
        return (
          "Object" === n && t.constructor && (n = t.constructor.name),
          "Map" === n || "Set" === n
            ? Array.from(t)
            : "Arguments" === n ||
              /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
            ? Ic(t, e)
            : void 0
        );
      }
    }
    function Ic(t, e) {
      (null == e || e > t.length) && (e = t.length);
      for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
      return i;
    }
    function jc(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function Oc(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? jc(Object(n), !0).forEach(function (e) {
              Lc(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : jc(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function Lc(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    function Pc(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function Ac(t) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (i, s) {
          var o = t.apply(e, n);
          function r(t) {
            Pc(o, i, s, r, a, "next", t);
          }
          function a(t) {
            Pc(o, i, s, r, a, "throw", t);
          }
          r(void 0);
        });
      };
    }
    var Ec = {
        components: {
          MoreAction: pc,
          SendBox: yo,
          MessageList: uc,
          ReportPopup: Sa,
          ConfirmPopup: Os,
          SMSVerify: fc,
        },
        props: {
          sid: String,
          activeSid: String,
          infos: Object,
          setBin: Boolean,
          binSessionType: Number,
        },
        data: function () {
          return {
            status: "loading",
            canSend: !0,
            list: [],
            hasMore: !0,
            newMessageNum: 0,
            reportPopupShow: !1,
            blackPopupShow: !1,
            addBlackMsgItem: null,
            exitGroupPopupShow: !1,
            lastTime: 0,
            isLimit: !1,
            limitMsg: "",
            sending: !1,
            showPushSetting: !1,
            pushSetting: !1,
            stopPushConfirmVisible: !1,
            needSMSVerify: !1,
            SMSVerifyVisible: !1,
          };
        },
        computed: {
          uid: function () {
            return pa.state.uid || 0;
          },
          blackListObj: function () {
            return pa.state.blackListObj || {};
          },
          groupInfo: function () {
            return pa.state.groupInfos[this.sessionId] || {};
          },
          userInfo: function () {
            return 1 === this.sessionType
              ? pa.state.userInfos[this.sessionId] || {}
              : pa.state.userInfos[
                  this.groupInfo && this.groupInfo.owner_uid
                ] || {};
          },
          sessionType: function () {
            return parseInt(this.sid.split("_")[0]);
          },
          sessionId: function () {
            var t = this.sid.split("_")[1];
            return Number.isSafeInteger(Number(t)) ? Number(t) : t;
          },
          roomName: function () {
            return 2 === this.infos.session_type
              ? this.groupInfo && this.groupInfo.group_name
              : this.userInfo &&
                  ((null === (t = this.userInfo) || void 0 === t
                    ? void 0
                    : t.name) ||
                    this.userInfo.uname);
            var t;
          },
          menuList: function () {
            var t = this,
              e = [];
            this.list.length &&
              this.list.some(function (t) {
                return t.msg_type > 0;
              }) &&
              5 !== this.binSessionType &&
              e.push({
                name: this.infos.top_ts ? "取消置顶" : "置顶聊天",
                handle: function () {
                  var e;
                  ((e = {
                    talker_id: t.infos.talker_id,
                    session_type: t.infos.session_type,
                    op_type: Number(Boolean(t.infos.top_ts)),
                  }),
                  Object(P.a)({
                    addPlatInfo: !0,
                    method: "post",
                    url: "".concat(Yi, "/session_svr/v1/session_svr/set_top"),
                    data: e,
                  }))
                    .then(function () {
                      t.$emit("toggleTop");
                    })
                    .catch(function (e) {
                      console.error(e),
                        t.$linkMsg("".concat(e.msg || e.message), "error");
                    });
                },
              });
            var n = this.infos.is_dnd;
            return (
              e.push({
                name: n ? "关闭免打扰" : "开启免打扰",
                handle: function () {
                  var e = { uid: t.uid, setting: Number(!n) };
                  1 === t.infos.session_type
                    ? (e.dnd_uid = t.infos.talker_id)
                    : (e.dnd_group_id = t.infos.talker_id),
                    (function (t) {
                      return Object(P.a)({
                        addPlatInfo: !0,
                        method: "post",
                        url: "".concat(
                          Yi,
                          "/link_setting/v1/link_setting/set_msg_dnd"
                        ),
                        data: t,
                      });
                    })(e)
                      .then(function () {
                        t.$emit("toggleDnd");
                      })
                      .catch(function (e) {
                        console.error(e),
                          t.$linkMsg("".concat(e.msg || e.message), "error");
                      });
                },
              }),
              2 === this.infos.session_type
                ? e.push({
                    name: "退出该应援团",
                    handle: function () {
                      t.exitGroupPopupShow = !0;
                    },
                  })
                : 0 === this.infos.system_msg_type &&
                  (this.isBlack
                    ? e.push({
                        name: "移除黑名单",
                        handle: function () {
                          return t.removeFromBlackList();
                        },
                      })
                    : e.push({
                        name: "加入黑名单",
                        handle: function () {
                          t.blackPopupShow = !0;
                        },
                      })),
              0 === this.infos.system_msg_type &&
                e.push({
                  name:
                    2 === this.infos.session_type
                      ? "举报该应援团"
                      : "举报该用户",
                  handle: function () {
                    return t.reportIt();
                  },
                }),
              1 === this.infos.session_type &&
                this.showPushSetting &&
                0 === this.infos.system_msg_type &&
                e.push({
                  name: this.pushSetting ? "不接收推送" : "开启推送",
                  tips: this.pushSetting ? "通知正常接收" : void 0,
                  handle: function () {
                    t.pushSetting
                      ? (t.stopPushConfirmVisible = !0)
                      : t.togglePushSetting(!0);
                  },
                }),
              5 === this.binSessionType &&
                e.push({
                  name: "取消拦截",
                  handle: function () {
                    t.$emit("removeFromBin", t.infos.talker_id);
                  },
                }),
              e
            );
          },
          masterId: function () {
            return this.userInfo && this.userInfo.uid;
          },
          reportTypes: function () {
            return 2 !== this.infos.session_type
              ? [0, 1, 2, 3, 4, 5, 6]
              : [0, 1, 2, 3, 4, 5];
          },
          isBlack: function () {
            return !!this.blackListObj[this.sessionId];
          },
          showMoreAction: function () {
            return !this.setBin;
          },
        },
        watch: {
          activeSid: function () {
            this.sid === this.activeSid &&
              ((this.cachedList = {}), this.initLoad(this.sid));
          },
        },
        created: function () {
          var t = this;
          return Ac(
            q.a.mark(function e() {
              return q.a.wrap(function (e) {
                for (;;)
                  switch ((e.prev = e.next)) {
                    case 0:
                      if (((t.cachedList = {}), t.sid !== t.activeSid)) {
                        e.next = 4;
                        break;
                      }
                      return (e.next = 4), t.initLoad(t.sid);
                    case 4:
                      Ui.$on("loadNewMsg", t.loadNewMsg),
                        Ui.$on("loadMoreMsg", t.loadMoreMsg),
                        (t.handleDrawbackMsg = function (e) {
                          var n = e.talkerId,
                            i = e.sessionType,
                            s = e.msgKey;
                          n === t.sessionId &&
                            i === t.sessionType &&
                            ((
                              t.list.find(function (t) {
                                return t.msg_key === s;
                              }) || {}
                            ).msg_status = 1);
                        }),
                        Ui.$on("drawbackMsg", t.handleDrawbackMsg),
                        (t.handleDeleteMsgLocally = function (e, n, i) {
                          e === t.sessionId &&
                            n === t.sessionType &&
                            ((t.list = t.list.filter(function (t) {
                              return t.msg_key !== i.msg_key;
                            })),
                            (t.cachedList[i.msg_key] = !1));
                        }),
                        Ui.$on("deleteMsgLocally", t.handleDeleteMsgLocally),
                        t.infos.system_msg_type &&
                          0 !== t.infos.system_msg_type &&
                          (t.canSend = !1);
                    case 11:
                    case "end":
                      return e.stop();
                  }
              }, e);
            })
          )();
        },
        beforeDestroy: function () {
          Ui.$off("loadNewMsg", this.loadNewMsg),
            Ui.$off("loadMoreMsg", this.loadMoreMsg),
            Ui.$off("drawbackMsg", this.handleDrawbackMsg),
            Ui.$off("deleteMsgLocally", this.handleDeleteMsgLocally);
        },
        methods: {
          setBlackList: function (t) {
            pa.commit("setBlackList", Oc(Oc({}, this.blackListObj), t));
          },
          initLoad: function (t) {
            var e = this;
            return Ac(
              q.a.mark(function n() {
                var i, s;
                return q.a.wrap(
                  function (n) {
                    for (;;)
                      switch ((n.prev = n.next)) {
                        case 0:
                          return (
                            (n.prev = 0),
                            (e.status = "loading"),
                            (e.list = []),
                            (!e.lastGetLimitPush ||
                              Date.now() - e.lastGetLimitPush > 1e4) &&
                              ((e.lastGetLimitPush = Date.now()),
                              e.getLimitStatus(),
                              1 === e.sessionType && e.getPushSetting()),
                            (n.next = 6),
                            yr(
                              e.sessionId,
                              e.sessionType,
                              e.infos.max_seqno,
                              20
                            )
                          );
                        case 6:
                          if (
                            ((i = n.sent), e.sid === t && 0 === e.list.length)
                          ) {
                            n.next = 9;
                            break;
                          }
                          return n.abrupt("return");
                        case 9:
                          (e.list = i.reverse()),
                            e.list.forEach(function (t) {
                              return (e.cachedList[t.msg_key] = !0);
                            }),
                            (e.hasMore = 0 !== e.list.length),
                            1 === e.sessionType
                              ? pa.dispatch("getUserInfos", [
                                  e.sessionId,
                                  e.uid,
                                ])
                              : 2 === e.sessionType &&
                                ((s = e.list.map(function (t) {
                                  return t.sender_uid;
                                })),
                                (s = [].concat(kc(new Set(s)), [e.uid])),
                                pa.dispatch("getExtraGroupMemberInfo", {
                                  gid: e.sessionId,
                                  uids: s,
                                })),
                            window._per_webim_dialogloaded ||
                              (e.$nextTick(function () {
                                var t =
                                  (window._per_webim_new_session_cost || 0) +
                                  (window._per_webim_fetch_message_cost || 0) +
                                  (window._per_webim_get_unread_count_cost ||
                                    0);
                                Cc.stop("per-webim-dialogloaded", {
                                  init: window._per_webim_init,
                                  api_cost: t,
                                }),
                                  Ui.$emit("DialogLoaded");
                              }),
                              (window._per_webim_dialogloaded = !0)),
                            (e.status = "done"),
                            (n.next = 21);
                          break;
                        case 17:
                          (n.prev = 17),
                            (n.t0 = n.catch(0)),
                            (e.status = "error"),
                            console.error(n.t0);
                        case 21:
                        case "end":
                          return n.stop();
                      }
                  },
                  n,
                  null,
                  [[0, 17]]
                );
              })
            )();
          },
          loadMoreMsg: function () {
            var t = this;
            return Ac(
              q.a.mark(function e() {
                var n, i, s, o;
                return q.a.wrap(
                  function (e) {
                    for (;;)
                      switch ((e.prev = e.next)) {
                        case 0:
                          if (t.hasMore && "loading" !== t.status) {
                            e.next = 2;
                            break;
                          }
                          return e.abrupt("return");
                        case 2:
                          return (
                            (t.status = "loading"),
                            (e.prev = 3),
                            (e.next = 6),
                            yr(
                              t.sessionId,
                              t.sessionType,
                              t.infos.max_seqno,
                              20,
                              t.list.length
                            )
                          );
                        case 6:
                          (i = e.sent.reverse()),
                            (s = i.filter(function (e) {
                              return (
                                !t.cachedList[e.msg_key] &&
                                ((t.cachedList[e.msg_key] = !0), !0)
                              );
                            })),
                            2 === t.sessionType &&
                              ((o = s.map(function (t) {
                                return t.sender_uid;
                              })),
                              (o = kc(new Set(o))),
                              pa.dispatch("getExtraGroupMemberInfo", {
                                gid: t.sessionId,
                                uids: o,
                              })),
                            (n = t.list).unshift.apply(n, kc(s)),
                            (t.hasMore = 20 === i.length),
                            (t.status = "done"),
                            (e.next = 18);
                          break;
                        case 14:
                          (e.prev = 14),
                            (e.t0 = e.catch(3)),
                            (t.status = "error"),
                            console.error(e.t0);
                        case 18:
                        case "end":
                          return e.stop();
                      }
                  },
                  e,
                  null,
                  [[3, 14]]
                );
              })
            )();
          },
          loadNewMsg: function (t) {
            var e = this;
            return Ac(
              q.a.mark(function n() {
                var i, s, o, r, a, c, l, u, d, p, m, f, h;
                return q.a.wrap(
                  function (n) {
                    for (;;)
                      switch ((n.prev = n.next)) {
                        case 0:
                          if (
                            t.talker_id === e.sessionId &&
                            t.session_type === e.sessionType
                          ) {
                            n.next = 2;
                            break;
                          }
                          return n.abrupt("return");
                        case 2:
                          return (
                            (n.next = 4),
                            Jo.getItem(
                              "".concat(e.sessionType, "_").concat(e.sessionId)
                            )
                          );
                        case 4:
                          if (((n.t0 = n.sent), n.t0)) {
                            n.next = 7;
                            break;
                          }
                          n.t0 = null;
                        case 7:
                          return (
                            (i = n.t0),
                            (s = (i && i.msg_seqno) || 0),
                            (n.prev = 9),
                            (n.next = 12),
                            br(e.sessionId, e.sessionType, s)
                          );
                        case 12:
                          if (
                            ((o = n.sent),
                            (r = xc(o, 4)),
                            (a = r[0]),
                            (c = r[1]),
                            (l = r[2]),
                            (u = r[3]),
                            a.reverse(),
                            (d = a.filter(function (t) {
                              return (
                                !e.cachedList[t.msg_key] &&
                                ((e.cachedList[t.msg_key] = !0), !0)
                              );
                            })),
                            l.forEach(function (t) {
                              var n = e.list.find(function (e) {
                                return e.msg_key === t.msg_key;
                              });
                              n && (n.msg_status = t.sys_cancel ? 2 : 1);
                            }),
                            (e.list = e.list
                              .filter(function (t) {
                                return !c.some(function (e) {
                                  return String(e) === String(t.msg_key);
                                });
                              })
                              .concat(d)),
                            2 === e.sessionType &&
                              ((p = a.map(function (t) {
                                return t.sender_uid;
                              })),
                              (p = kc(new Set(p))),
                              pa.dispatch("getExtraGroupMemberInfo", {
                                gid: e.sessionId,
                                uids: p,
                              })),
                            !u.length)
                          ) {
                            n.next = 31;
                            break;
                          }
                          return (
                            (n.next = 26), es(e.sessionId, e.sessionType, u)
                          );
                        case 26:
                          (m = n.sent),
                            (f = m.data),
                            (h = e.list.slice(0)),
                            f.forEach(
                              (function () {
                                var t = Ac(
                                  q.a.mark(function t(e) {
                                    var n, i;
                                    return q.a.wrap(function (t) {
                                      for (;;)
                                        switch ((t.prev = t.next)) {
                                          case 0:
                                            return (
                                              (t.next = 2),
                                              Ko.getItem(e.msg_key)
                                            );
                                          case 2:
                                            (n = t.sent),
                                              (i = h.findIndex(function (t) {
                                                return t.msg_key === e.msg_key;
                                              })),
                                              Ko.setItem(
                                                String(e.msg_key),
                                                Oc(
                                                  Oc({}, n),
                                                  {},
                                                  {
                                                    content: e.content,
                                                    verifyNoPass:
                                                      !n.verifyNoPass,
                                                  }
                                                )
                                              ),
                                              h.splice(
                                                i,
                                                1,
                                                Oc(
                                                  Oc({}, n),
                                                  {},
                                                  {
                                                    content: JSON.parse(
                                                      e.content
                                                    ),
                                                    verifyNoPass:
                                                      !n.verifyNoPass,
                                                  }
                                                )
                                              );
                                          case 6:
                                          case "end":
                                            return t.stop();
                                        }
                                    }, t);
                                  })
                                );
                                return function (e) {
                                  return t.apply(this, arguments);
                                };
                              })()
                            ),
                            (e.list = h);
                        case 31:
                          n.next = 36;
                          break;
                        case 33:
                          (n.prev = 33),
                            (n.t1 = n.catch(9)),
                            console.error(n.t1);
                        case 36:
                        case "end":
                          return n.stop();
                      }
                  },
                  n,
                  null,
                  [[9, 33]]
                );
              })
            )();
          },
          emitClearUnread: function () {
            Ui.$emit("clearUnread", {
              sessionId: this.sessionId,
              sessionType: this.sessionType,
            });
          },
          sendMessage: function (t, e) {
            var n = this;
            return Ac(
              q.a.mark(function i() {
                var s, o, r, a;
                return q.a.wrap(
                  function (i) {
                    for (;;)
                      switch ((i.prev = i.next)) {
                        case 0:
                          if (((s = t.content), (o = t.type), !n.sending)) {
                            i.next = 3;
                            break;
                          }
                          return i.abrupt("return");
                        case 3:
                          return (
                            (n.sending = !0),
                            (r = parseInt(new Date().getTime() / 1e3)) <=
                              n.lastTime && (r = n.lastTime + 0.1),
                            (n.lastTime = r),
                            (i.prev = 7),
                            (i.next = 10),
                            _r(n.uid, n.sessionId, n.sessionType, s, o)
                          );
                        case 10:
                          (a = i.sent),
                            (n.sending = !1),
                            e && e(!0),
                            Ui.$emit("Dialog:SendMessage", a),
                            n.list.push(
                              Oc(
                                Oc({}, a),
                                {},
                                { content: JSON.parse(a.content) }
                              )
                            ),
                            setTimeout(function () {
                              n.emitClearUnread();
                            }, 300),
                            (i.next = 27);
                          break;
                        case 18:
                          if (
                            ((i.prev = 18),
                            (i.t0 = i.catch(7)),
                            (n.sending = !1),
                            e && e(!1),
                            !ks(i.t0))
                          ) {
                            i.next = 26;
                            break;
                          }
                          return i.abrupt("return");
                        case 26:
                          1600001 === i.t0.code
                            ? ((n.needSMSVerify = !0),
                              (n.SMSVerifyVisible = !0))
                            : (n.$linkMsg(
                                "".concat(i.t0.msg || i.t0.message),
                                "error"
                              ),
                              console.error("sendMsg error:", i.t0));
                        case 27:
                        case "end":
                          return i.stop();
                      }
                  },
                  i,
                  null,
                  [[7, 18]]
                );
              })
            )();
          },
          confirmBlack: function () {
            (this.blackPopupShow = !1), this.addToBlackList();
          },
          cancelBlack: function () {
            this.blackPopupShow = !1;
          },
          addToBlackList: function () {
            var t,
              e,
              n = this;
            ((t = { mid: this.sessionId }),
            (e = t.mid),
            Object(P.a)({
              method: "post",
              url: "//api.bilibili.com/x/relation/modify",
              data: { fid: e, act: 5, re_src: 118, cross_domain: !0 },
            })).then(
              function () {
                n.linkMsg(n.$refs.title, "添加黑名单成功！", "success", !0),
                  n.setBlackList(Lc({}, n.sessionId, !0)),
                  n.$emit("closeViaBlack");
              },
              function (t) {
                console.error("blackUser error:", t),
                  n.linkMsg(
                    n.$refs.title,
                    "添加黑名单失败：".concat(t.msg),
                    "error",
                    !0
                  );
              }
            );
          },
          removeFromBlackList: function () {
            var t,
              e,
              n = this;
            ((t = { mid: this.sessionId }),
            (e = t.mid),
            Object(P.a)({
              method: "post",
              url: "//api.bilibili.com/x/relation/modify",
              data: { fid: e, act: 6, re_src: 118, cross_domain: !0 },
            })).then(
              function () {
                n.linkMsg(n.$refs.title, "移除黑名单成功！", "success", !0),
                  n.setBlackList(Lc({}, n.sessionId, !1));
              },
              function (t) {
                console.error("cancelBlackUser error:", t),
                  n.linkMsg(
                    n.$refs.title,
                    "移除黑名单失败：".concat(t.msg),
                    "error",
                    !0
                  );
              }
            );
          },
          getLimitStatus: function () {
            var t = this;
            (this.isLimit = !1),
              (this.limitMsg = ""),
              2 !== this.infos.session_type &&
                ls({ uid: this.sessionId, type: this.infos.session_type }).then(
                  function (e) {
                    var n;
                    (t.isLimit = Boolean(e.data.is_limit)),
                      (t.limitMsg =
                        null == e || null === (n = e.data) || void 0 === n
                          ? void 0
                          : n.limit_msg);
                  }
                );
          },
          getPushSetting: function () {
            var t,
              e = this;
            ((t = this.sessionId),
            Object(P.a)({
              addPlatInfo: !0,
              method: "get",
              url: "".concat(
                Yi,
                "/link_setting/v1/link_setting/get_session_ss"
              ),
              data: { talker_uid: t },
            }))
              .then(function (t) {
                (e.showPushSetting = Boolean(t.data.show_push_setting)),
                  (e.pushSetting = !t.data.push_setting);
              })
              .catch(console.error);
          },
          togglePushSetting: function (t) {
            var e = this;
            this.pushSetting !== t &&
              (this.stopPushConfirmVisible &&
                (this.stopPushConfirmVisible = !1),
              void 0 === t && (t = !this.pushSetting),
              sa(this.sid, this.sessionId, t)
                .then(function (n) {
                  (e.pushSetting = t), e.list.push(n);
                })
                .catch(function (t) {
                  console.error(t), e.$linkMsg("操作失败，请重试", "error");
                }));
          },
          reportIt: function (t) {
            console.log(t),
              null != t && t.msg_key
                ? (this.addBlackMsgItem = t)
                : (this.addBlackMsgItem = null),
              pa.state.amILimited
                ? this.linkMsg(
                    this.$refs.title,
                    pa.state.limitedText,
                    "error",
                    !0
                  )
                : this.isLimit
                ? this.linkMsg(
                    this.$refs.title,
                    this.limitMsg || "该用户已被封禁",
                    "info",
                    !0
                  )
                : (this.reportPopupShow = !0);
          },
          confirmReport: function (t) {
            var e = this,
              n = t.type,
              i = t.content;
            this.reportPopupShow = !1;
            var s = this.list
              .filter(function (t) {
                return t.msg_type > 0;
              })
              .slice(-10)
              .map(function (t) {
                return t.msg_key;
              });
            cs({
              talker_id: parseInt(this.sessionId),
              session_type: this.infos.session_type,
              target_id: parseInt(this.sessionId),
              reasonType: n,
              reasonDesc: i,
              keys: s,
            }).then(
              function () {
                if (
                  (e.linkMsg(
                    e.$refs.title,
                    "举报已提交",
                    "success",
                    !0,
                    !1,
                    3e3
                  ),
                  e.addBlackMsgItem)
                ) {
                  var t,
                    s,
                    o =
                      null === (t = Object(j.e)(location)) ||
                      void 0 === t ||
                      null === (s = t.params) ||
                      void 0 === s
                        ? void 0
                        : s.spm_id_from;
                  !(function (t) {
                    var e,
                      n = t.msgItem,
                      i = t.reportReasonType,
                      s = t.reportReasonDesc,
                      o = t.fromSpmId,
                      r = {
                        to_mid: n.sender_uid,
                        from_mid: n.receiver_id,
                        spm_id: "444.1.0.0",
                        from_spm_id: o || "",
                        from_scm_id: "",
                        msg_key: n.msg_key,
                        content:
                          "string" == typeof n.content
                            ? n.content
                            : (null === (e = n.content) || void 0 === e
                                ? void 0
                                : e.content) || "",
                        report_type: i,
                        report_reason: s,
                      };
                    Object(P.a)({
                      method: "post",
                      url: "//api.vc.bilibili.com/x/im/govern_svr/add_black_relation",
                      data: r,
                    });
                  })({
                    msgItem: e.addBlackMsgItem,
                    reportReasonType: n,
                    reportReasonDesc: i,
                    fromSpmId: o,
                  });
                }
                e.addBlackMsgItem = null;
              },
              function (t) {
                console.error(t),
                  e.linkMsg(
                    e.$refs.title,
                    "".concat(t.msg || t.message),
                    "error",
                    !0,
                    !1,
                    3e3
                  );
              }
            );
          },
          cancelReport: function () {
            (this.reportPopupShow = !1), (this.addBlackMsgItem = null);
          },
          confirmExitGroup: function () {
            var t,
              e,
              n = this;
            (this.exitGroupPopupShow = !1),
              ((t = { groupId: parseInt(this.sessionId) }),
              (e = t.groupId),
              Object(P.a)({
                method: "post",
                url: "//api.vc.bilibili.com/link_group/v1/member/exit",
                data: { group_id: e },
              })).then(
                function () {
                  n.linkMsg(n.$refs.title, "退出成功", "success", !0),
                    n.$emit("close");
                },
                function (t) {
                  console.error(t),
                    n.linkMsg(
                      n.$refs.title,
                      "退出失败：".concat(t.msg),
                      "error",
                      !0
                    );
                }
              );
          },
          cancelExitGroup: function () {
            this.exitGroupPopupShow = !1;
          },
          handleSMSVerifyClose: function (t) {
            var e = this;
            (this.SMSVerifyVisible = !1),
              (this.needSMSVerify = !1),
              t &&
                setTimeout(function () {
                  e.$refs.sendBox.sendIt();
                }, 1200);
          },
        },
      },
      Tc =
        (n(464),
        Object(xe.a)(
          Ec,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              { staticClass: "dialog" },
              [
                n(
                  "div",
                  { ref: "title", staticClass: "title" },
                  [
                    n(
                      "div",
                      {
                        directives: [
                          {
                            name: "show",
                            rawName: "v-show",
                            value: 1 === t.isLimit,
                            expression: "isLimit === 1",
                          },
                        ],
                        staticClass: "is-limit",
                      },
                      [
                        t._v(
                          "该" +
                            t._s(2 === t.infos.session_type ? "群" : "用户") +
                            "已被封禁～"
                        ),
                      ]
                    ),
                    n(
                      "div",
                      {
                        directives: [
                          {
                            name: "show",
                            rawName: "v-show",
                            value: t.isBlack && 1 !== t.isLimit,
                            expression: "isBlack && isLimit !== 1",
                          },
                        ],
                        staticClass: "is-black",
                      },
                      [t._v("(>﹏< )该用户已经被你加入黑名单")]
                    ),
                    n("span", [t._v(t._s(t.roomName))]),
                    t.showMoreAction
                      ? n("more-action", {
                          attrs: {
                            position: "top: 3px; right: 0",
                            menuList: t.menuList,
                          },
                        })
                      : t._e(),
                  ],
                  1
                ),
                this.sid == this.activeSid
                  ? n("message-list", {
                      attrs: {
                        rid: t.sessionId,
                        "has-tip": t.isBlack || 1 === t.isLimit,
                        group: 2 === t.infos.session_type,
                        list: t.list,
                        status: t.status,
                        hasMore: t.hasMore,
                        isLimit: t.isLimit,
                        limitMsg: t.limitMsg,
                        pushSetting: t.pushSetting,
                      },
                      on: {
                        atTop: t.loadMoreMsg,
                        atBottom: t.emitClearUnread,
                        setPush: t.togglePushSetting,
                        report: t.reportIt,
                      },
                    })
                  : t._e(),
                n(
                  "div",
                  {
                    directives: [
                      {
                        name: "show",
                        rawName: "v-show",
                        value: t.newMessageNum,
                        expression: "newMessageNum",
                      },
                    ],
                    ref: "newMessage",
                    staticClass: "new-message-tip",
                  },
                  [
                    n("div", { key: "newMessage", staticClass: "text" }, [
                      t._v("您有 " + t._s(t.newMessageNum) + " 条新消息"),
                    ]),
                  ]
                ),
                t.canSend
                  ? n("send-box", {
                      ref: "sendBox",
                      attrs: { rid: t.sessionId, "has-button": !0 },
                      on: { send: t.sendMessage },
                    })
                  : t._e(),
                n("report-popup", {
                  attrs: {
                    show: t.reportPopupShow,
                    name: t.roomName,
                    types: t.reportTypes,
                    "is-group": 2 === t.sessionType,
                  },
                  on: { onConfirm: t.confirmReport, onCancel: t.cancelReport },
                }),
                n("confirm-popup", {
                  attrs: {
                    show: t.blackPopupShow,
                    title: "黑名单",
                    content:
                      "加入黑名单后将不再收到该用户的新消息，并自动解除关注关系。",
                  },
                  on: { onConfirm: t.confirmBlack, onCancel: t.cancelBlack },
                }),
                n("confirm-popup", {
                  attrs: {
                    show: t.exitGroupPopupShow,
                    title: "退出该应援团",
                    content: "确认退出该应援团吗？",
                  },
                  on: {
                    onConfirm: t.confirmExitGroup,
                    onCancel: t.cancelExitGroup,
                  },
                }),
                n("confirm-popup", {
                  attrs: {
                    show: t.stopPushConfirmVisible,
                    title: "确认关闭内容推送吗？",
                    content:
                      "关闭后，你将不再收到该账号的内容推送，但通知类消息不受影响",
                  },
                  on: {
                    onCancel: function (e) {
                      t.stopPushConfirmVisible = !1;
                    },
                    onConfirm: function (e) {
                      return t.togglePushSetting(!1);
                    },
                  },
                }),
                t.needSMSVerify
                  ? n("SMSVerify", {
                      attrs: { show: t.SMSVerifyVisible },
                      on: { close: t.handleSMSVerifyClose },
                    })
                  : t._e(),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "7ec48866",
          null
        ).exports),
      Mc = {},
      Bc =
        (n(465),
        Object(xe.a)(
          Mc,
          function () {
            var t = this.$createElement;
            this._self._c;
            return this._m(0);
          },
          [
            function () {
              var t = this.$createElement,
                e = this._self._c || t;
              return e("div", { staticClass: "placeholder" }, [
                e("div", { staticClass: "placeholder-img is-im" }),
                e("div", { staticClass: "tip" }, [
                  this._v("没有新的未读消息呢，快找小伙伴聊天吧，"),
                ]),
              ]);
            },
          ],
          !1,
          null,
          "53a7abf7",
          null
        ).exports),
      Dc = n(309),
      Nc = n.n(Dc),
      Rc = n(310),
      $c = n.n(Rc),
      Uc = n(311),
      Vc = n.n(Uc);
    function zc(t) {
      return (zc =
        "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
          ? function (t) {
              return typeof t;
            }
          : function (t) {
              return t &&
                "function" == typeof Symbol &&
                t.constructor === Symbol &&
                t !== Symbol.prototype
                ? "symbol"
                : typeof t;
            })(t);
    }
    var Hc = {
        components: { SVGIcon: ve },
        props: {
          infos: Object,
          active: Boolean,
          top: Boolean,
          foldType: Number,
          unfollowUnread: Number,
          groupUnread: Number,
          notifyConfig: Object,
          binUnread: Number,
          dustbinPushMsg: Number,
          batchInfoUnread: Number,
        },
        data: function () {
          return { hasSelected: !1 };
        },
        mounted: function () {
          var t, e, n, i, s, o, r;
          -1 ===
            (null === (t = this.infos) || void 0 === t
              ? void 0
              : t.session_type) &&
            "bin" ===
              (null === (e = this.infos) || void 0 === e ? void 0 : e.name) &&
            S.pv({
              spmId: "444.1",
              logId: "000873",
              data: { entry_name: "bin", message_new_cnt: this.binUnread || 0 },
              event: "im.notify-message.head-entry-list.entry.show",
            }),
            this.isBinPage &&
              S.pv({
                spmId: "444.1",
                logId: "000873",
                data: {
                  message_id:
                    (null === (n = this.infos) ||
                    void 0 === n ||
                    null === (i = n.last_msg) ||
                    void 0 === i
                      ? void 0
                      : i.msg_key) || null,
                  chat_type:
                    (null === (s = this.infos) || void 0 === s
                      ? void 0
                      : s.group_type) || 0,
                  chat_id:
                    null === (o = this.infos) || void 0 === o
                      ? void 0
                      : o.talker_id,
                  message_new_cnt:
                    (null === (r = this.infos) || void 0 === r
                      ? void 0
                      : r.unread_count) || 0,
                },
                event: "im.message-bin.message-feed.message-card.show",
              });
        },
        computed: {
          isBatchNotify: function () {
            var t, e;
            return (
              !(null !== (t = this.infos) && void 0 !== t && t.unread_count) &&
              (null === (e = this.infos) || void 0 === e
                ? void 0
                : e.biz_msg_unread_count) &&
              !this.hasSelected
            );
          },
          hasVerify: function () {
            var t;
            return (
              1 === this.infos.session_type &&
              [0, 1].includes(
                null === (t = this.verifyType) || void 0 === t ? void 0 : t.type
              )
            );
          },
          uid: function () {
            return pa.state.uid || 0;
          },
          groupInfo: function () {
            return pa.state.groupInfos[this.infos.talker_id] || {};
          },
          userInfo: function () {
            return 1 === this.infos.session_type
              ? pa.state.userInfos[this.infos.talker_id] || {}
              : pa.state.userInfos[
                  this.groupInfo && this.groupInfo.owner_uid
                ] || {};
          },
          lastMsgUserInfo: function () {
            return (
              pa.state.userInfos[
                this.infos.last_msg && this.infos.last_msg.sender_uid
              ] || {}
            );
          },
          lastMsgContentDetail: function () {
            var t =
              this.infos.last_msg.content && ir(this.infos.last_msg.content);
            return 5 === (null == t ? void 0 : t.source)
              ? pa.state.videoDetails[t.id] || {}
              : (6 === (null == t ? void 0 : t.source) &&
                  pa.state.articleDetails[t.id]) ||
                  {};
          },
          name: function () {
            var t;
            switch (this.infos.session_type) {
              case 1:
                return this.infos.system_msg_type &&
                  0 !== this.infos.system_msg_type
                  ? this.infos.account_info.name || ""
                  : (null === (e = this.userInfo) || void 0 === e
                      ? void 0
                      : e.name) ||
                      (null === (n = this.userInfo) || void 0 === n
                        ? void 0
                        : n.uname);
                var e, n;
              case 2:
                return (
                  this.infos.group_name ||
                  (null === (t = this.groupInfo) || void 0 === t
                    ? void 0
                    : t.group_name)
                );
              case -1:
                return (
                  {
                    group: "我的应援团",
                    unfollow: "未关注人消息",
                    bin: "疑似不良消息",
                  }[this.infos.name] || ""
                );
              default:
                return "";
            }
          },
          verifyType: function () {
            var t, e;
            return (
              (null === (t = this.userInfo) || void 0 === t
                ? void 0
                : t.official) ||
              (null === (e = this.userInfo) || void 0 === e
                ? void 0
                : e.official_verify)
            );
          },
          groupType: function () {
            return (
              this.infos.group_type ||
              (this.groupInfo && this.groupInfo.group_type)
            );
          },
          lastWordIsUp: function () {
            return (
              2 === this.infos.session_type &&
              this.userInfo &&
              this.infos.last_msg &&
              this.infos.last_msg.sender_uid === this.userInfo.mid
            );
          },
          avatarStyle: function () {
            if (-1 === this.infos.session_type) {
              var t = { group: Nc.a, unfollow: $c.a, bin: Vc.a };
              return {
                "background-image": "url(".concat(t[this.infos.name], ")"),
              };
            }
            var e =
              1 === this.infos.session_type
                ? (this.userInfo && this.userInfo.face) ||
                  (this.infos.account_info && this.infos.account_info.pic_url)
                : this.infos.group_cover ||
                  (this.groupInfo && this.groupInfo.group_cover);
            return (
              (e = e || "//static.hdslb.com/images/member/noface.gif"),
              1 !== this.infos.session_type ||
              (this.userInfo && this.userInfo.face) ||
              !this.infos.account_info ||
              !this.infos.account_info.pic_url
                ? {
                    "background-image": "url(".concat(
                      Vi(e, 42, 42).srcUrl.replace(/^http:/, ""),
                      ")"
                    ),
                  }
                : {
                    "background-image": "url(".concat(
                      e.replace(/^http:/, ""),
                      "@80w_80h_55x55-5rc_100Q.webp)"
                    ),
                    "image-rendering": "-webkit-optimize-contrast",
                    "-ms-interpolation-mode": "nearest-neighbor",
                  }
            );
          },
          lastContent: function () {
            var t,
              e,
              n,
              i,
              s,
              o,
              r,
              a,
              c,
              l,
              u,
              d,
              p,
              m = this.infos.last_msg && ir(this.infos.last_msg.content);
            if (!this.infos.last_msg) return "";
            if (
              (m && (m.title = m.title || ""),
              1 ===
                (null === (t = this.infos) ||
                void 0 === t ||
                null === (e = t.last_msg) ||
                void 0 === e
                  ? void 0
                  : e.msg_status))
            )
              return this.infos.last_msg.sender_uid === this.uid
                ? "你撤回了一条消息"
                : 1 === this.infos.session_type
                ? "对方撤回了一条消息"
                : this.lastMsgUserInfo
                ? "".concat(
                    (null === (p = this.lastMsgUserInfo) || void 0 === p
                      ? void 0
                      : p.name) || this.lastMsgUserInfo.uname,
                    "撤回了一条消息"
                  )
                : "[消息已撤回]";
            var f,
              h,
              g =
                null === (n = this.infos) ||
                void 0 === n ||
                null === (i = n.last_msg) ||
                void 0 === i
                  ? void 0
                  : i.msg_type;
            return 0 ===
              (null === (s = this.infos) ||
              void 0 === s ||
              null === (o = s.last_msg) ||
              void 0 === o
                ? void 0
                : o.sender_uid)
              ? (null == m ? void 0 : m.content) ||
                  "收到一条系统通知，请在手机上查看"
              : 16 === g
              ? JSON.parse(
                  (null === (f = this.infos) ||
                  void 0 === f ||
                  null === (h = f.last_msg) ||
                  void 0 === h
                    ? void 0
                    : h.content) || "{}"
                ).reply_content || "[自动推送]"
              : {
                  1:
                    "object" === zc(null == m ? void 0 : m.content)
                      ? null === (r = m.content) || void 0 === r
                        ? void 0
                        : r.content
                      : null == m || null === (a = m.content) || void 0 === a
                      ? void 0
                      : a.replace(
                          /(?:bilibili:\/\/)(?:[/.$*?~=#!%@&\-\w]*)?/g,
                          "【请在移动端上打开链接】"
                        ),
                  2: "[图片]",
                  5: "[消息已撤回]",
                  6: "[自定义表情]",
                  7:
                    null != m && m.headline
                      ? "[转发]".concat(null == m ? void 0 : m.title)
                      : "[分享]".concat(
                          (null === (c = this.lastMsgContentDetail) ||
                          void 0 === c
                            ? void 0
                            : c.title) || (null == m ? void 0 : m.title)
                        ),
                  9: "收到一个小程序，请在手机上查看",
                  10: null == m ? void 0 : m.title,
                  11: "[视频]".concat(
                    (null === (l = this.lastMsgContentDetail) || void 0 === l
                      ? void 0
                      : l.title) || (null == m ? void 0 : m.title)
                  ),
                  12: "[专栏]".concat(
                    (null === (u = this.lastMsgContentDetail) || void 0 === u
                      ? void 0
                      : u.title) || (null == m ? void 0 : m.title)
                  ),
                  13: null == m ? void 0 : m.title,
                  14: "[分享]".concat(
                    (null === (d = this.lastMsgContentDetail) || void 0 === d
                      ? void 0
                      : d.title) || (null == m ? void 0 : m.title)
                  ),
                  undefined: "",
                }[g] || "不支持的消息类型";
          },
          computedLastContent: function () {
            if (-1 === this.infos.session_type) {
              if ("group" === this.infos.name) {
                var t = this.groupUnread;
                return t
                  ? "[".concat(t, "条]有新的应援团消息")
                  : ""
                      .concat(this.infos.group_name, "：")
                      .concat(this.lastContent);
              }
              if ("unfollow" === this.infos.name) {
                var e,
                  n =
                    this.unfollowUnread ||
                    (null === (e = this.infos) || void 0 === e
                      ? void 0
                      : e.unfollow_unread),
                  i =
                    (this.lastMsgUserInfo &&
                      (this.lastMsgUserInfo.name ||
                        this.lastMsgUserInfo.uname)) ||
                    "";
                return ""
                  .concat(n > 0 ? "[".concat(n, "条]") : "")
                  .concat(i, "：")
                  .concat(this.lastContent);
              }
              if ("bin" === this.infos.name)
                return this.binUnread
                  ? "有新的被拦截的消息"
                  : "暂无新的被拦截的消息";
            }
            if (this.infos.new_push_msg) return this.lastContent;
            if (
              this.infos.is_dnd ||
              (2 === this.infos.session_type && !this.lastWordIsUp)
            ) {
              var s =
                this.infos.unread_count > 0
                  ? "[".concat(this.infos.unread_count, "条] ")
                  : "";
              return "".concat(s).concat(this.lastContent);
            }
            return this.showUpStyle
              ? ""
                  .concat(
                    (this.userInfo &&
                      (this.userInfo.name || this.userInfo.uname)) ||
                      "UP",
                    ": "
                  )
                  .concat(this.lastContent)
              : this.lastContent;
          },
          isBinPage: function () {
            return "whisper-bin" === this.$route.name;
          },
          notifyClass: function () {
            var t;
            if (-1 === this.infos.session_type)
              return (
                {
                  group: this.groupUnread ? ["notify-dot"] : [],
                  unfollow:
                    this.unfollowUnread ||
                    this.batchInfoUnread ||
                    (null !== (t = this.infos) &&
                      void 0 !== t &&
                      t.unfollow_unread)
                      ? ["notify-dot"]
                      : [],
                  bin: this.binUnread ? ["notify-dot"] : [],
                }[this.infos.name] || []
              );
            var e = [];
            if (this.infos.is_dnd && !this.isBinPage) e.push("notify-mute");
            else if (2 === this.infos.session_type) e.push("notify-dot");
            else
              switch (this.notifyConfig.msg_notify) {
                case 1:
                  this.isBinPage
                    ? this.infos.unread_count && e.push("notify-number")
                    : e.push("notify-number");
                  break;
                case 2:
                  e.push("notify-dot");
                  break;
                case 3:
                  e.push("notify-none");
              }
            return e;
          },
          showUpStyle: function () {
            return (
              !this.active &&
              !this.infos.is_dnd &&
              this.lastWordIsUp &&
              this.infos.unread_count > 0
            );
          },
          showNewsNotice: function () {
            return (
              this.infos.new_push_msg ||
              (-1 === this.infos.session_type &&
                "bin" === this.infos.name &&
                this.dustbinPushMsg)
            );
          },
        },
        methods: {
          selectSession: function () {
            (this.hasSelected = !0), this.$emit("selectSession");
          },
          closeIt: function () {
            this.$emit("close");
          },
          get99num: function (t) {
            try {
              var e = Number(t || "");
              return 1 !== this.notifyConfig.msg_notify ||
                2 === this.infos.session_type ||
                this.infos.is_dnd
                ? this.isBinPage
                  ? e > 99
                    ? "99+"
                    : e || ""
                  : ""
                : e > 99
                ? "99+"
                : e || "";
            } catch (t) {
              return "";
            }
          },
        },
      },
      Fc =
        (n(466),
        Object(xe.a)(
          Hc,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              {
                staticClass: "list-item",
                class: { active: t.active, top: t.top },
                on: { click: t.selectSession },
              },
              [
                n("div", {
                  staticClass: "avatar",
                  style: t.avatarStyle,
                  attrs: { title: t.name },
                }),
                t.userInfo.face_nft_new
                  ? n("div", {
                      staticClass: "nft-icon",
                      class: { "without-verify": !t.hasVerify },
                    })
                  : t._e(),
                t.hasVerify
                  ? n("div", { staticClass: "verify-box" }, [
                      1 === this.infos.session_type &&
                      t.verifyType &&
                      0 === t.verifyType.type
                        ? n("div", { staticClass: "single" })
                        : t._e(),
                      1 === this.infos.session_type &&
                      t.verifyType &&
                      1 === t.verifyType.type
                        ? n("div", { staticClass: "company" })
                        : t._e(),
                    ])
                  : t._e(),
                n("div", { staticClass: "name-box" }, [
                  n(
                    "div",
                    {
                      staticClass: "name",
                      class: {
                        "name-loading": !t.name,
                        short: t.infos.unread_count > 0 || t.infos.is_dnd,
                      },
                      attrs: { title: t.name },
                    },
                    [t._v(t._s(t.name))]
                  ),
                  n(
                    "div",
                    {
                      directives: [
                        {
                          name: "show",
                          rawName: "v-show",
                          value: t.lastContent,
                          expression: "lastContent",
                        },
                      ],
                      staticClass: "last-word",
                      class: { "is-up": t.showUpStyle },
                      attrs: { title: t.lastContent },
                    },
                    [
                      t.showNewsNotice
                        ? n("span", { staticClass: "new-push-msg" }, [
                            t._v("[有新通知]"),
                          ])
                        : t._e(),
                      t.showUpStyle
                        ? n("span", { staticClass: "up-icon" }, [t._v("UP")])
                        : t._e(),
                      t._v(t._s(t.computedLastContent)),
                    ]
                  ),
                ]),
                t.infos.session_type >= 0
                  ? n(
                      "div",
                      {
                        staticClass: "close",
                        on: {
                          click: function (e) {
                            return (
                              e.stopPropagation(),
                              e.preventDefault(),
                              t.closeIt(e)
                            );
                          },
                        },
                      },
                      [n("SVGIcon", { attrs: { name: "group-dynamic" } })],
                      1
                    )
                  : t._e(),
                t.infos.unread_count > 0 ||
                t.infos.is_dnd ||
                t.infos.session_type < 0
                  ? n("div", { staticClass: "notify", class: t.notifyClass }, [
                      t._v(t._s(t.get99num(t.infos.unread_count))),
                    ])
                  : t.isBatchNotify
                  ? n("div", { staticClass: "red-dot-notify" })
                  : t._e(),
              ]
            );
          },
          [],
          !1,
          null,
          "5eb7422a",
          null
        ).exports),
      Gc = {
        props: {
          show: null,
          title: String,
          hideButton: Boolean,
          disabled: null,
          button: {
            type: Object,
            default: function () {
              return { confirm: "提交", cancel: "取消" };
            },
          },
        },
        components: { BpPopup: De },
        methods: {
          onConfirm: function (t) {
            this.$emit("onConfirm", t);
          },
          onCancel: function (t) {
            this.$emit("onCancel", t);
          },
        },
      };
    n(467), n(468);
    function Zc(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function qc(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? Zc(Object(n), !0).forEach(function (e) {
              Kc(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : Zc(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function Kc(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    function Wc(t) {
      return (
        (function (t) {
          if (Array.isArray(t)) return Qc(t);
        })(t) ||
        (function (t) {
          if (
            ("undefined" != typeof Symbol && null != t[Symbol.iterator]) ||
            null != t["@@iterator"]
          )
            return Array.from(t);
        })(t) ||
        Yc(t) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function Jc(t, e) {
      return (
        (function (t) {
          if (Array.isArray(t)) return t;
        })(t) ||
        (function (t, e) {
          var n =
            t &&
            (("undefined" != typeof Symbol && t[Symbol.iterator]) ||
              t["@@iterator"]);
          if (null == n) return;
          var i,
            s,
            o = [],
            r = !0,
            a = !1;
          try {
            for (
              n = n.call(t);
              !(r = (i = n.next()).done) &&
              (o.push(i.value), !e || o.length !== e);
              r = !0
            );
          } catch (t) {
            (a = !0), (s = t);
          } finally {
            try {
              r || null == n.return || n.return();
            } finally {
              if (a) throw s;
            }
          }
          return o;
        })(t, e) ||
        Yc(t, e) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function Yc(t, e) {
      if (t) {
        if ("string" == typeof t) return Qc(t, e);
        var n = Object.prototype.toString.call(t).slice(8, -1);
        return (
          "Object" === n && t.constructor && (n = t.constructor.name),
          "Map" === n || "Set" === n
            ? Array.from(t)
            : "Arguments" === n ||
              /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
            ? Qc(t, e)
            : void 0
        );
      }
    }
    function Qc(t, e) {
      (null == e || e > t.length) && (e = t.length);
      for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
      return i;
    }
    function Xc(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function tl(t) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (i, s) {
          var o = t.apply(e, n);
          function r(t) {
            Xc(o, i, s, r, a, "next", t);
          }
          function a(t) {
            Xc(o, i, s, r, a, "throw", t);
          }
          r(void 0);
        });
      };
    }
    var el = {
        components: {
          SessionListItem: Fc,
          DialogDetail: Tc,
          Placeholder: Bc,
          Spinner: So,
          ProtectPopup: Object(xe.a)(
            Gc,
            function () {
              var t = this,
                e = t.$createElement,
                n = t._self._c || e;
              return n("transition", { attrs: { name: "im-popup-fade" } }, [
                n(
                  "div",
                  {
                    directives: [
                      {
                        name: "show",
                        rawName: "v-show",
                        value: t.show,
                        expression: "show",
                      },
                    ],
                    staticClass: "im-popup",
                  },
                  [
                    t.hideButton
                      ? t._e()
                      : n(
                          "bp-popup",
                          {
                            staticClass: "im-popup-shell",
                            attrs: {
                              button: t.button,
                              show: t.show,
                              title: t.title,
                              onConfirm: t.onConfirm,
                              onCancel: t.onCancel,
                              disabled: t.disabled,
                            },
                          },
                          [
                            n(
                              "div",
                              { staticClass: "content" },
                              [t._t("default")],
                              2
                            ),
                          ]
                        ),
                    t.hideButton
                      ? n(
                          "bp-popup",
                          {
                            staticClass: "im-popup-shell hide-button",
                            staticStyle: {
                              width: "auto !important",
                              padding: "0",
                              margin: "0",
                            },
                            attrs: {
                              button: t.button,
                              show: t.show,
                              title: t.title,
                              onConfirm: t.onConfirm,
                              onCancel: t.onCancel,
                            },
                          },
                          [
                            n("div", { staticClass: "split-line" }),
                            n(
                              "div",
                              {
                                staticClass: "content",
                                staticStyle: { padding: "0" },
                              },
                              [t._t("default")],
                              2
                            ),
                          ]
                        )
                      : t._e(),
                  ],
                  1
                ),
              ]);
            },
            [],
            !1,
            null,
            "221a4ac6",
            null
          ).exports,
          ImRadio: xa,
        },
        props: {
          uid: {},
          notifyConfig: {
            default: function () {
              return { msg_notify: 1 };
            },
          },
          sysSetting: {},
          sessionType: { default: 1 },
          activeSessionKey: { default: "" },
          unreadBin: { type: Number, default: 0 },
          batchUnread: { type: Number, default: 0 },
          unfollowUnreadNum: { type: Number, default: 0 },
        },
        data: function () {
          return {
            sessionList: [],
            sessionListStatus: "initiating",
            topCount: 0,
            unfollowUnread: 0,
            binUnread: 0,
            dustbinPushMsg: 0,
            groupUnread: 0,
            batchInfoUnread: 0,
            initDialog: !1,
            hasMoreSession: !0,
            flag: !1,
            isClearing: !1,
            checkedType: null,
            show: !1,
            showSetting: !1,
            isClearHistory: !1,
            deadLine: "",
            isOpen: 0,
            infoContent: "",
            protectOptions: {},
            setBin: !1,
            hasReaded: !1,
            hasDeleted: !1,
          };
        },
        computed: {
          getUnreadBin: function () {
            return this.unreadBin || this.binUnread;
          },
          userInfos: function () {
            return pa.state.userInfos;
          },
          groupInfos: function () {
            return pa.state.groupInfos;
          },
          activeSessionId: function () {
            var t =
              (this.activeSessionKey && this.activeSessionKey.split("_")[1]) ||
              NaN;
            return Number.isSafeInteger(Number(t)) ? Number(t) : t;
          },
          activeSessionType: function () {
            return (
              Number(
                this.activeSessionKey && this.activeSessionKey.split("_")[0]
              ) || NaN
            );
          },
          activeSession: function () {
            var t = this;
            return this.sessionList.find(function (e) {
              return (
                e.talker_id == t.activeSessionId &&
                e.session_type === t.activeSessionType
              );
            });
          },
          initDialogList: function () {
            return this.initDialog ? this.sessionList : [this.activeSession];
          },
          whisperTitle: function () {
            switch (this.sessionType) {
              case 1:
                return "近期消息";
              case 2:
                return "未关注的人";
              case 3:
                return "我的应援团";
              case 5:
                return "疑似不良消息";
              default:
                return "近期消息";
            }
          },
          selectedText: function () {
            var t = this,
              e = "";
            return (
              this.protectOptions &&
                this.protectOptions.options &&
                this.protectOptions.options.length > 0 &&
                this.protectOptions.options.map(function (n) {
                  n && n.id === t.checkedType && (e = n.text);
                }),
              e
            );
          },
          isShowAlert: function () {
            try {
              return this.protectOptions.options.length > 0;
            } catch (t) {
              return !1;
            }
          },
          urlName: function () {
            return this.$route.name || "";
          },
          isBinRoute: function () {
            return "whisper-bin" === this.$route.name;
          },
        },
        watch: {
          sessionType: function (t, e) {
            t !== e &&
              ((this.$refs.sessionListContainer.scrollTop = 0),
              (this.initDialog = !1),
              this.initLoad());
          },
          activeSessionKey: function (t, e) {
            t &&
              t !== e &&
              this.clearUnread(this.activeSessionId, this.activeSessionType);
          },
          isBinRoute: function () {
            this.setBin = !1;
          },
        },
        created: function () {
          var t = this;
          (r.a.prototype.$linkMsg = function () {
            for (
              var e, n = arguments.length, i = new Array(n), s = 0;
              s < n;
              s++
            )
              i[s] = arguments[s];
            return (e = r.a.prototype).linkMsg.apply(
              e,
              [t.$refs["console-message"]].concat(i)
            );
          }),
            pa.commit("setUid", this.uid),
            pa.commit("setSysSetting", this.sysSetting),
            Object(P.a)({
              method: "get",
              url: "//api.bilibili.com/x/relation/blacks",
              data: { cross_domain: !0 },
            }).then(function (t) {
              pa.commit(
                "setBlackList",
                (t.data.list || []).reduce(function (t, e) {
                  return (t[e.mid] = e), t;
                }, {})
              );
            }),
            this.initLisenter(),
            this.initLoad(),
            this.amILimited();
        },
        mounted: function () {
          (this.scrollBar = new ae.a(this.$refs.sessionListContainer, {
            minScrollbarLength: 85,
            maxScrollbarLength: 240,
          })),
            this.fetchRegex(),
            this.$refs.sessionListContainer.addEventListener(
              "scroll",
              this.emitLoadMore,
              { captrue: !1, passive: !0 }
            ),
            this.initHarassment(),
            this.getBinUnreadCount(),
            this.getGroupUnread();
        },
        beforeDestroy: function () {
          clearInterval(this.pollingTimer),
            Ui.$off("Dialog:SendMessage", this.handleSendMessage),
            Ui.$off("clearUnread", this.handleClearUnread),
            Ui.$off("drawbackMsg", this.handleDrawbackMsg),
            Ui.$off("deleteMsgLocally", this.handleDeleteMsgLocally),
            this.$refs.sessionListContainer.removeEventListener(
              "scroll",
              this.emitLoadMore,
              { captrue: !1, passive: !0 }
            );
        },
        methods: {
          fetchRegex: function () {
            Object(P.a)({
              url: "".concat(Yi, "/x/im/client_config"),
              method: "get",
              data: { app: "web", channel: "", build: "", ver: "" },
            }).then(function (t) {
              t.code || pa.commit("setRegex", t.data.im_jump_rule);
            });
          },
          getGroupUnread: function () {
            var t = this;
            return tl(
              q.a.mark(function e() {
                return q.a.wrap(function (e) {
                  for (;;)
                    switch ((e.prev = e.next)) {
                      case 0:
                        return (
                          (e.next = 2),
                          Object(P.a)({
                            url: "".concat(
                              Yi,
                              "/session_svr/v1/session_svr/my_group_unread"
                            ),
                            method: "get",
                          }).then(function (t) {
                            var e;
                            return (
                              (null == t ||
                              null === (e = t.data) ||
                              void 0 === e
                                ? void 0
                                : e.unread_count) || 0
                            );
                          })
                        );
                      case 2:
                        t.groupUnread = e.sent;
                      case 3:
                      case "end":
                        return e.stop();
                    }
                }, e);
              })
            )();
          },
          getBinUnreadCount: function () {
            var t = this;
            (function () {
              var t =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : 0;
              return Object(P.a)({
                addPlatInfo: !0,
                url: "".concat(Yi, "/session_svr/v1/session_svr/single_unread"),
                method: "get",
                data: { unread_type: t, show_dustbin: 1 },
              }).then(function (t) {
                return (
                  (window._per_webim_get_unread_count_cost = t.cost), t.data
                );
              });
            })(3).then(function (e) {
              (t.binUnread = e.dustbin_unread || 0),
                (t.dustbinPushMsg = e.dustbin_push_msg || 0),
                (t.unfollowUnread = e.unfollow_unread || 0),
                (t.batchInfoUnread = e.biz_msg_unfollow_unread || 0);
            });
          },
          handleReadedAll: function () {
            var t,
              e = this;
            null !== (t = this.sessionList) && void 0 !== t && t.length
              ? Object(P.a)({
                  method: "post",
                  useBridgeProxy: !0,
                  urlWithCSRF: !0,
                  ajaxVersion2: !0,
                  url: "//api.vc.bilibili.com/session_svr/v1/session_svr/batch_update_dustbin_ack",
                }).then(function (t) {
                  0 === t.code &&
                    ((e.sessionList = e.sessionList.map(function (t) {
                      return (t.unread_count = 0), t;
                    })),
                    (e.hasReaded = !0));
                })
              : this.$linkMsg("暂无会话哦～", "error");
          },
          handleDeleteAll: function () {
            var t,
              e = this;
            null !== (t = this.sessionList) && void 0 !== t && t.length
              ? Object(P.a)({
                  method: "post",
                  useBridgeProxy: !0,
                  urlWithCSRF: !0,
                  ajaxVersion2: !0,
                  url: "//api.vc.bilibili.com/session_svr/v1/session_svr/batch_rm_dustbin",
                }).then(function (t) {
                  0 === t.code && ((e.sessionList = []), (e.hasDeleted = !0));
                })
              : this.$linkMsg("暂无会话哦～", "info");
          },
          handleRemoveFromBin: function (t) {
            var e = this;
            (function (t) {
              var e = t.talker_id,
                n = t.status;
              return Object(P.a)({
                method: "post",
                useBridgeProxy: !0,
                urlWithCSRF: !0,
                ajaxVersion2: !0,
                url: "//api.vc.bilibili.com/session_svr/v1/session_svr/update_intercept",
                data: { talker_id: e, status: n },
              });
            })({ talker_id: t, status: 0 })
              .then(function (n) {
                e.$linkMsg("取消拦截成功", "info"),
                  (e.sessionList = e.sessionList.filter(function (e) {
                    return e.talker_id !== t;
                  }));
              })
              .catch(function (t) {
                e.$linkMsg("取消拦截失败", "error");
              });
          },
          amILimited: function () {
            var t = this;
            return tl(
              q.a.mark(function e() {
                return q.a.wrap(function (e) {
                  for (;;)
                    switch ((e.prev = e.next)) {
                      case 0:
                        return (
                          (e.next = 2),
                          ls({ uid: t.uid, type: t.sessionType }).then(
                            function (t) {
                              var e, n;
                              (null == t ||
                              null === (e = t.data) ||
                              void 0 === e
                                ? void 0
                                : e.report_limit) &&
                                pa.commit("setMyLimitedStatus", !0);
                              var i =
                                null == t ||
                                null === (n = t.data) ||
                                void 0 === n
                                  ? void 0
                                  : n.report_limit_msg;
                              i && pa.commit("setMyLimitedText", i);
                            }
                          )
                        );
                      case 2:
                      case "end":
                        return e.stop();
                    }
                }, e);
              })
            )();
          },
          initLoad: function () {
            var t = arguments,
              e = this;
            return tl(
              q.a.mark(function n() {
                var i, s, o, r, a, c, l;
                return q.a.wrap(
                  function (n) {
                    for (;;)
                      switch ((n.prev = n.next)) {
                        case 0:
                          return (
                            t.length > 0 && void 0 !== t[0] && t[0],
                            (e.sessionList = []),
                            (e.hasMoreSession = !0),
                            void 0 !== e.pollingTimer &&
                              clearInterval(e.pollingTimer),
                            (n.next = 6),
                            ta(e.uid)
                          );
                        case 6:
                          return (
                            (i = n.sent),
                            (window._per_webim_init = i),
                            (n.prev = 8),
                            (e.receiveGroup = Number(
                              e.notifyConfig.should_receive_group
                            )),
                            (e.groupFold = Number(
                              e.notifyConfig.is_group_fold
                            )),
                            (e.unfollowFold = Number(
                              e.notifyConfig.show_unfollowed_msg
                            )),
                            (e.binFold = Number(e.notifyConfig.ai_intercept)),
                            (n.next = 15),
                            Nr(
                              e.receiveGroup,
                              e.groupFold,
                              e.unfollowFold,
                              e.sessionType,
                              e.binFold
                            )
                          );
                        case 15:
                          (s = n.sent),
                            (o = Jc(s, 2)),
                            (r = o[0]),
                            (a = o[1]),
                            (e.isClearing = a),
                            !0 === a && (e.flag = !0),
                            (c = 0),
                            (l = 0);
                        case 23:
                          if (!(l < r.length)) {
                            n.next = 32;
                            break;
                          }
                          if (!r[l].top_ts) {
                            n.next = 28;
                            break;
                          }
                          (c += 1), (n.next = 29);
                          break;
                        case 28:
                          return n.abrupt("break", 32);
                        case 29:
                          (l += 1), (n.next = 23);
                          break;
                        case 32:
                          (e.beginTs =
                            r.length <= c ? 0 : r[c].session_ts || 0),
                            (e.ackTs = r.reduce(function (t, e) {
                              return Math.max(
                                t,
                                (e.ack_ts && Number(e.ack_ts)) || 0
                              );
                            }, 0)),
                            (e.topCount = c),
                            (e.sessionList = r),
                            e.$emit("updateNotifyCount"),
                            e.activeSession &&
                              Ui.$emit("loadNewMsg", e.activeSession),
                            pa.dispatch("getSessionsExtraInfo", e.sessionList),
                            (e.sessionListStatus = "loaded"),
                            (n.next = 46);
                          break;
                        case 42:
                          (n.prev = 42),
                            (n.t0 = n.catch(8)),
                            (e.sessionListStatus = "error"),
                            console.error(n.t0);
                        case 46:
                          (e.pollingTimer = setInterval(e.syncSession, 2e4)),
                            e.activeSession ||
                              (e.activeSessionType && e.activeSessionId
                                ? e.addSession(
                                    e.activeSessionId,
                                    e.activeSessionType
                                  )
                                : e.selectFirstSession());
                        case 48:
                        case "end":
                          return n.stop();
                      }
                  },
                  n,
                  null,
                  [[8, 42]]
                );
              })
            )();
          },
          syncSession: function () {
            var t = this;
            return tl(
              q.a.mark(function e() {
                var n, i, s, o;
                return q.a.wrap(
                  function (e) {
                    for (;;)
                      switch ((e.prev = e.next)) {
                        case 0:
                          return (
                            (e.prev = 0),
                            (e.next = 3),
                            Dr(
                              t.beginTs,
                              t.ackTs,
                              t.sessionList,
                              t.topCount,
                              t.sessionType
                            )
                          );
                        case 3:
                          (n = e.sent),
                            (i = Jc(n, 3)),
                            (s = i[0]),
                            (o = i[1]),
                            i[2],
                            (t.isClearing = !1),
                            (t.beginTs = s),
                            (t.ackTs = o),
                            t.$emit("updateNotifyCount"),
                            t.activeSession &&
                              Ui.$emit("loadNewMsg", t.activeSession),
                            pa.dispatch("getSessionsExtraInfo", t.sessionList),
                            (t.sessionListStatus = "loaded"),
                            (e.next = 22);
                          break;
                        case 17:
                          (e.prev = 17),
                            (e.t0 = e.catch(0)),
                            console.error(e.t0),
                            t.$linkMsg(e.t0.msg || e.t0.message, "error"),
                            (t.sessionListStatus = "error");
                        case 22:
                        case "end":
                          return e.stop();
                      }
                  },
                  e,
                  null,
                  [[0, 17]]
                );
              })
            )();
          },
          loadMoreSession: function () {
            var t = this;
            return tl(
              q.a.mark(function e() {
                var n, i, s, o, r, a, c, l, u;
                return q.a.wrap(
                  function (e) {
                    for (;;)
                      switch ((e.prev = e.next)) {
                        case 0:
                          if (
                            "loading" !== t.sessionListStatus &&
                            t.hasMoreSession
                          ) {
                            e.next = 2;
                            break;
                          }
                          return e.abrupt("return");
                        case 2:
                          if (
                            ((t.sessionListStatus = "loading"),
                            (e.prev = 3),
                            (i = null),
                            !(s =
                              null === (n = t.sessionList) || void 0 === n
                                ? void 0
                                : n.length) || 1 !== t.sessionType)
                          ) {
                            e.next = 17;
                            break;
                          }
                          o = s - 1;
                        case 8:
                          if (!(o >= 0)) {
                            e.next = 15;
                            break;
                          }
                          if (
                            -1 ===
                            (null === (r = t.sessionList[o]) || void 0 === r
                              ? void 0
                              : r.session_type)
                          ) {
                            e.next = 12;
                            break;
                          }
                          return (
                            (i =
                              null === (a = t.sessionList[o]) || void 0 === a
                                ? void 0
                                : a.session_ts),
                            e.abrupt("break", 15)
                          );
                        case 12:
                          o--, (e.next = 8);
                          break;
                        case 15:
                          e.next = 18;
                          break;
                        case 17:
                          i = s && t.sessionList[s - 1].session_ts;
                        case 18:
                          return (e.next = 20), Rr(i, t.sessionType);
                        case 20:
                          (c = e.sent).length
                            ? ((u = c.filter(function (e) {
                                return !t.sessionList.some(function (t) {
                                  return (
                                    t.talker_id == e.talker_id &&
                                    t.session_type === e.session_type
                                  );
                                });
                              })),
                              (l = t.sessionList).push.apply(l, Wc(u)))
                            : (t.hasMoreSession = !1),
                            (t.sessionListStatus = "loaded"),
                            t.$nextTick(function () {
                              t.scrollBar.update();
                            }),
                            pa.dispatch("getSessionsExtraInfo", c),
                            (e.next = 32);
                          break;
                        case 27:
                          (e.prev = 27),
                            (e.t0 = e.catch(3)),
                            console.error(e.t0),
                            t.$linkMsg(e.t0.msg || e.t0.message, "error"),
                            (t.sessionListStatus = "error");
                        case 32:
                        case "end":
                          return e.stop();
                      }
                  },
                  e,
                  null,
                  [[3, 27]]
                );
              })
            )();
          },
          initLisenter: function () {
            var t = this;
            (this.handleSendMessage = function (e) {
              var n = t.sessionList.findIndex(function (e) {
                return (
                  e.talker_id === t.activeSessionId &&
                  e.session_type === t.activeSessionType
                );
              });
              if (n < t.topCount)
                t.$set(
                  t.sessionList,
                  n,
                  qc(qc({}, t.sessionList[n]), {}, { last_msg: e })
                );
              else {
                var i = t.sessionList.splice(n, 1)[0];
                (i.last_msg = e), t.sessionList.splice(t.topCount, 0, i);
              }
              t.$refs.sessionListContainer.scrollTop = 0;
            }),
              (this.handleClearUnread = function (e) {
                var n = e.sessionId,
                  i = e.sessionType;
                t.clearUnread(n, i);
              }),
              (this.handleDrawbackMsg = function (e) {
                var n = e.talkerId,
                  i = e.sessionType,
                  s = e.msgKey,
                  o = t.sessionList.findIndex(function (t) {
                    return t.talker_id === n && t.session_type === i;
                  });
                if (
                  t.sessionList[o].last_msg &&
                  t.sessionList[o].last_msg.msg_key === s
                ) {
                  var r = qc(
                    qc({}, t.sessionList[o]),
                    {},
                    {
                      last_msg: qc(
                        qc({}, t.sessionList[o].last_msg),
                        {},
                        { msg_status: 1 }
                      ),
                    }
                  );
                  t.$set(t.sessionList, o, r);
                }
              }),
              (this.handleDeleteMsgLocally = function (e, n, i) {
                var s = t.sessionList.findIndex(function (t) {
                  return t.talker_id === e && t.session_type === n;
                });
                ia(e, n, i, t.sessionList[s]).then(function (e) {
                  t.$set(t.sessionList, s, e);
                });
              }),
              Ui.$on("Dialog:SendMessage", this.handleSendMessage),
              Ui.$on("clearUnread", this.handleClearUnread),
              Ui.$on("drawbackMsg", this.handleDrawbackMsg),
              Ui.$on("deleteMsgLocally", this.handleDeleteMsgLocally),
              Ui.$on("DialogLoaded", function () {
                t.initDialog = !0;
              });
          },
          selectFirstSession: function () {
            var t = this.sessionList[0];
            t &&
              t.session_type > 0 &&
              this.$emit(
                "selectSession",
                "".concat(t.session_type, "_").concat(t.talker_id)
              );
          },
          addSession: function (t, e) {
            var n = this;
            return tl(
              q.a.mark(function i() {
                var s, o;
                return q.a.wrap(
                  function (i) {
                    for (;;)
                      switch ((i.prev = i.next)) {
                        case 0:
                          if (
                            ((s = (function () {
                              var i = tl(
                                q.a.mark(function i() {
                                  var s;
                                  return q.a.wrap(function (i) {
                                    for (;;)
                                      switch ((i.prev = i.next)) {
                                        case 0:
                                          return (i.next = 2), Vr(t, e, n.uid);
                                        case 2:
                                          (s = i.sent),
                                            n.sessionList.every(function (t) {
                                              return (
                                                String(t.talker_id) !==
                                                String(s.talker_id)
                                              );
                                            }) &&
                                              n.sessionList.splice(
                                                n.topCount,
                                                0,
                                                s
                                              ),
                                            pa.dispatch(
                                              "getSessionsExtraInfo",
                                              [s]
                                            );
                                        case 5:
                                        case "end":
                                          return i.stop();
                                      }
                                  }, i);
                                })
                              );
                              return function () {
                                return i.apply(this, arguments);
                              };
                            })()),
                            (i.prev = 1),
                            1 !== e)
                          ) {
                            i.next = 27;
                            break;
                          }
                          if (!n.unfollowFold) {
                            i.next = 19;
                            break;
                          }
                          return (
                            (i.next = 6),
                            (r = t),
                            Object(P.a)({
                              url: "//api.bilibili.com/x/relation",
                              method: "get",
                              data: { fid: r },
                            }).then(function (t) {
                              return (
                                t.data &&
                                [1, 2, 6].some(function (e) {
                                  return e === t.data.attribute;
                                })
                              );
                            })
                          );
                        case 6:
                          if ((o = i.sent) || 2 === n.sessionType) {
                            i.next = 11;
                            break;
                          }
                          n.$emit("changeSessionType", 2, !0), (i.next = 17);
                          break;
                        case 11:
                          if (!o || 1 === n.sessionType) {
                            i.next = 15;
                            break;
                          }
                          n.$emit("changeSessionType", 1, !0), (i.next = 17);
                          break;
                        case 15:
                          return (i.next = 17), s();
                        case 17:
                          i.next = 25;
                          break;
                        case 19:
                          if (1 === n.sessionType) {
                            i.next = 23;
                            break;
                          }
                          n.$emit("changeSessionType", 1, !0), (i.next = 25);
                          break;
                        case 23:
                          return (i.next = 25), s();
                        case 25:
                          i.next = 43;
                          break;
                        case 27:
                          if (2 !== e) {
                            i.next = 43;
                            break;
                          }
                          if (!n.groupFold) {
                            i.next = 37;
                            break;
                          }
                          if (3 === n.sessionType) {
                            i.next = 33;
                            break;
                          }
                          n.$emit("changeSessionType", 3, !0), (i.next = 35);
                          break;
                        case 33:
                          return (i.next = 35), s();
                        case 35:
                          i.next = 43;
                          break;
                        case 37:
                          if (1 === n.sessionType) {
                            i.next = 41;
                            break;
                          }
                          n.$emit("changeSessionType", 1, !0), (i.next = 43);
                          break;
                        case 41:
                          return (i.next = 43), s();
                        case 43:
                          i.next = 49;
                          break;
                        case 45:
                          (i.prev = 45),
                            (i.t0 = i.catch(1)),
                            console.error(i.t0),
                            n.$linkMsg(i.t0.msg || i.t0.message, "error");
                        case 49:
                        case "end":
                          return i.stop();
                      }
                    var r;
                  },
                  i,
                  null,
                  [[1, 45]]
                );
              })
            )();
          },
          closeSession: function (t) {
            var e =
              !(arguments.length > 1 && void 0 !== arguments[1]) ||
              arguments[1];
            (this.sessionList = this.sessionList.filter(function (e) {
              return !(
                e.talker_id === t.talker_id && e.session_type === t.session_type
              );
            })),
              e && $r(t),
              this.scrollBar.update(),
              t.talker_id === this.activeSessionId &&
                t.session_type === this.activeSessionType &&
                (this.selectFirstSession(),
                (this.$refs.sessionListContainer.scrollTop = 0));
          },
          toggleTop: function (t) {
            var e = this.sessionList.findIndex(function (e) {
              return (
                e.talker_id === t.talker_id && e.session_type === t.session_type
              );
            });
            t.top_ts
              ? ((t.top_ts = 0),
                (this.topCount -= 1),
                this.sessionList.splice(e, 1),
                this.sessionList.splice(this.topCount, 0, t))
              : ((t.top_ts = 1e3 * Date.now()),
                (this.topCount += 1),
                this.sessionList.splice(e, 1),
                this.sessionList.unshift(t));
          },
          handleSelectSession: function (t) {
            if (t.session_type > 0)
              this.$emit(
                "selectSession",
                "".concat(t.session_type, "_").concat(t.talker_id)
              );
            else if ("unfollow" === t.name) this.$emit("changeSessionType", 2);
            else if ("group" === t.name) this.$emit("changeSessionType", 3);
            else if ("bin" === t.name) {
              var e;
              this.$emit("changeSessionType", 5),
                -1 === (null == t ? void 0 : t.session_type) &&
                  "bin" === (null == t ? void 0 : t.name) &&
                  (S.click({
                    spmId: "444.1",
                    logId: "000873",
                    data: {
                      entry_name: "bin",
                      message_new_cnt: this.getUnreadBin || 0,
                    },
                    event: "im.notify-message.head-entry-list.entry.click",
                  }),
                  S.pv({
                    spmId: "444.1",
                    logId: "000873",
                    event: "im.message-bin.0.0.pv",
                  })),
                this.isBinRoute &&
                  S.click({
                    spmId: "444.1",
                    logId: "000873",
                    data: {
                      message_id:
                        (null == t || null === (e = t.last_msg) || void 0 === e
                          ? void 0
                          : e.msg_key) || null,
                      chat_type: (null == t ? void 0 : t.group_type) || 0,
                      chat_id: null == t ? void 0 : t.talker_id,
                      message_new_cnt:
                        (null == t ? void 0 : t.unread_count) || 0,
                    },
                    event: "im.message-bin.message-feed.message-card.click",
                  });
            }
          },
          clearUnread: function (t, e) {
            var n,
              i = this.sessionList.findIndex(function (n) {
                return n.talker_id == t && n.session_type === e;
              });
            if (
              i > -1 &&
              (this.sessionList[i].unread_count > 0 ||
                (null !== (n = this.sessionList[i]) &&
                  void 0 !== n &&
                  n.biz_msg_unread_count))
            ) {
              var s;
              if (1 === this.sessionType && 1 === e)
                this.$emit(
                  "clearUnread",
                  this.sessionList[i].unread_count ||
                    (null === (s = this.sessionList[i]) || void 0 === s
                      ? void 0
                      : s.biz_msg_unread_count)
                );
              this.$set(
                this.sessionList,
                i,
                qc(
                  qc({}, this.sessionList[i]),
                  {},
                  { unread_count: 0, biz_msg_unread_count: 0, new_push_msg: 0 }
                )
              ),
                Ur(this.sessionList[i]);
            }
          },
          emitLoadMore: function () {
            var t = this.$refs.sessionListContainer.scrollTop;
            this.$refs.sessionList.clientHeight -
              this.$refs.sessionListContainer.clientHeight -
              t <
              1 && this.loadMoreSession();
          },
          repair: function () {
            var t = this;
            return tl(
              q.a.mark(function e() {
                return q.a.wrap(function (e) {
                  for (;;)
                    switch ((e.prev = e.next)) {
                      case 0:
                        return (
                          (t.sessionListStatus = "initiating"),
                          (e.next = 3),
                          nr()
                        );
                      case 3:
                        return (e.next = 5), t.initLoad(!0);
                      case 5:
                      case "end":
                        return e.stop();
                    }
                }, e);
              })
            )();
          },
          initHarassment: function () {
            var t = this;
            "whisper" === this.$route.name &&
              ft(1)
                .then(function (e) {
                  e.code ||
                    null === e.data ||
                    ((t.show = !0),
                    (t.protectOptions = e.data),
                    (t.deadLine = e.data.end_time),
                    (t.show = !!e.data.need_show_dialog),
                    (t.isOpen = e.data.is_open),
                    (t.infoContent = e.data.content));
                })
                .catch(function (t) {
                  console.log("errrrrr", t);
                });
          },
          setType: function (t) {
            this.checkedType = t;
          },
          isOptionsChecked: function (t) {
            return t === this.checkedType;
          },
          confirmPop: function () {
            var t = this;
            (this.show = !1),
              (this.showSetting = !0),
              ht({ id: this.checkedType, isOpen: 1 })
                .then(function (e) {
                  e.code || (t.deadLine = e.data.end_time);
                })
                .catch(function () {});
          },
          cancelPop: function () {
            (this.show = !1),
              this.popMessage(
                "50%",
                "50%",
                "你可以在左侧的消息设置内进行防骚扰设置"
              );
          },
          popMessage: function (t, e, n) {
            var i = document.createDocumentFragment(),
              s = document.createElement("div");
            (s.innerHTML = '<span class="toast-text">'.concat(n, "</span>")),
              (s.className = "pop-message-style"),
              (s.style.left = t),
              (s.style.top = e),
              (s.style.transform = "translate(-"
                .concat(t, ", -")
                .concat(e, ")")),
              setTimeout(function () {
                (s.className += " out"),
                  setTimeout(function () {
                    s.parentNode.removeChild(s);
                  }, 350);
              }, 2e3),
              i.appendChild(s),
              document.body.appendChild(i);
          },
          toggleClearHistory: function () {
            this.isClearHistory = !this.isClearHistory;
          },
          handleSetting: function () {
            var t = this;
            this.isClearHistory &&
              Object(P.a)({
                method: "get",
                url: "".concat(
                  mt.a.API_VC,
                  "/x/im/anti_disturb/clean_disturb_session"
                ),
              })
                .then(function (e) {
                  e.code || ((t.isClearing = !0), (t.flag = !0));
                })
                .catch(function (t) {
                  console.log(t);
                }),
              (this.showSetting = !1);
          },
          handleSetBin: function () {
            this.setBin || ((this.hasDeleted = !1), (this.hasReaded = !1)),
              (this.setBin = !this.setBin);
          },
        },
      },
      nl =
        (n(469),
        n(470),
        Object(xe.a)(
          el,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              { staticClass: "bili-im" },
              [
                t.isShowAlert
                  ? n(
                      "protect-popup",
                      {
                        attrs: {
                          id: "protect-pop-warning",
                          show: t.show,
                          title: "接收异常提醒",
                          disabled: !t.checkedType,
                        },
                        on: { onConfirm: t.confirmPop, onCancel: t.cancelPop },
                      },
                      [
                        t.protectOptions
                          ? n("div", { staticClass: "popup-container" }, [
                              n("p", { staticClass: "msg-main" }, [
                                t._v(t._s(t.infoContent)),
                              ]),
                              n(
                                "div",
                                { staticClass: "config-item" },
                                t._l(t.protectOptions.options, function (e) {
                                  return n(
                                    "im-radio",
                                    {
                                      key: e.id,
                                      staticClass: "radio-selector",
                                      attrs: {
                                        checked: t.isOptionsChecked(e.id),
                                        value: e.id,
                                        name: "notify-type",
                                      },
                                      on: {
                                        click: function (n) {
                                          return t.setType(e.id);
                                        },
                                      },
                                    },
                                    [t._v(t._s(e.text))]
                                  );
                                }),
                                1
                              ),
                            ])
                          : t._e(),
                      ]
                    )
                  : t._e(),
                n(
                  "protect-popup",
                  {
                    attrs: {
                      show: t.showSetting,
                      id: "protect-pop-setting",
                      title: "设置成功",
                      button: { confirm: "确定", cancel: !1 },
                    },
                    on: {
                      onConfirm: t.handleSetting,
                      onCancel: t.handleSetting,
                    },
                  },
                  [
                    n("div", { staticClass: "popup-container" }, [
                      n("p", [t._v("私信接收范围：" + t._s(t.selectedText))]),
                      n("p", [t._v("有效期：到" + t._s(t.deadLine) + "截止")]),
                      n("p", { staticClass: "msg-main" }, [
                        t._v("说明：有效期内可前往消息设置进行修改"),
                      ]),
                      n("span", { staticClass: "checkbox-container" }, [
                        n("span", {
                          staticClass: "check-box-style",
                          class: { checked: t.isClearHistory },
                          on: {
                            click: function (e) {
                              return (
                                e.stopPropagation(), t.toggleClearHistory(e)
                              );
                            },
                          },
                        }),
                        n("input", {
                          attrs: { type: "checkbox", id: "clearHistoryBtn" },
                          domProps: { value: t.isClearHistory },
                          on: {
                            click: function (e) {
                              return (
                                e.stopPropagation(), t.toggleClearHistory(e)
                              );
                            },
                          },
                        }),
                        n("label", { attrs: { for: "clearHistoryBtn" } }, [
                          t._v("清除当前列表内不符合条件的会话"),
                        ]),
                      ]),
                    ]),
                  ]
                ),
                n("div", {
                  ref: "console-message",
                  staticClass: "console-message",
                }),
                n("div", { staticClass: "left" }, [
                  n(
                    "div",
                    {
                      staticClass: "title",
                      attrs: {
                        title:
                          "如果您的消息展示异常，请按住 alt 按键，然后单击这里进行修复",
                      },
                      on: {
                        click: function (e) {
                          return e.altKey ? t.repair(e) : null;
                        },
                      },
                    },
                    [
                      n("span", {
                        domProps: { textContent: t._s(t.whisperTitle) },
                      }),
                      ["initiating", "loading"].some(function (e) {
                        return e === t.sessionListStatus;
                      })
                        ? n("span", {
                            domProps: {
                              textContent: t._s("（同步中，请稍候）"),
                            },
                          })
                        : t._e(),
                      5 === t.sessionType
                        ? n("span", {
                            staticClass: "bin-setting",
                            domProps: {
                              textContent: t._s(t.setBin ? "完成" : "管理"),
                            },
                            on: {
                              click: function (e) {
                                return e.stopPropagation(), t.handleSetBin(e);
                              },
                            },
                          })
                        : t._e(),
                    ]
                  ),
                  n(
                    "div",
                    {
                      ref: "sessionListContainer",
                      staticClass: "list-container",
                    },
                    [
                      t.flag
                        ? n(
                            "div",
                            {
                              staticClass: "clear-harassment",
                              class: { "hide-clear": t.flag && !t.isClearing },
                            },
                            [
                              t.isClearing
                                ? n("div", { staticClass: "clear-notice" }, [
                                    n("div", { staticClass: "clear-loading" }),
                                    n("span", [
                                      t._v("正在检索并清除不符合条件的会话"),
                                    ]),
                                  ])
                                : t._e(),
                              t.flag && !t.isClearing
                                ? n("div", { staticClass: "clear-notice" }, [
                                    n("div", { staticClass: "cleared" }),
                                    n("span", [t._v("已清除相关会话")]),
                                  ])
                                : t._e(),
                            ]
                          )
                        : t._e(),
                      n(
                        "div",
                        { ref: "sessionList", staticClass: "list" },
                        [
                          t._l(t.sessionList, function (e, i) {
                            return n("SessionListItem", {
                              key: e.session_type + "_" + e.talker_id,
                              attrs: {
                                top: i < t.topCount,
                                active:
                                  t.activeSessionId == e.talker_id &&
                                  t.activeSessionType === e.session_type,
                                infos: e,
                                "set-bin": t.setBin,
                                foldType: t.sessionType,
                                unfollowUnread:
                                  t.unfollowUnread || t.unfollowUnreadNum,
                                binUnread: t.getUnreadBin,
                                dustbinPushMsg: t.dustbinPushMsg,
                                batchInfoUnread:
                                  t.batchInfoUnread || t.batchUnread,
                                groupUnread: t.groupUnread,
                                notifyConfig: t.notifyConfig,
                              },
                              on: {
                                selectSession: function (n) {
                                  return t.handleSelectSession(e);
                                },
                                close: function (n) {
                                  return t.closeSession(e);
                                },
                              },
                            });
                          }),
                          n(
                            "div",
                            {
                              directives: [
                                {
                                  name: "show",
                                  rawName: "v-show",
                                  value: "loading" === t.sessionListStatus,
                                  expression: "sessionListStatus === 'loading'",
                                },
                              ],
                              staticClass: "list-loading",
                            },
                            [n("Spinner")],
                            1
                          ),
                          n(
                            "div",
                            {
                              directives: [
                                {
                                  name: "show",
                                  rawName: "v-show",
                                  value: "error" === t.sessionListStatus,
                                  expression: "sessionListStatus === 'error'",
                                },
                              ],
                              staticClass: "list-load-error",
                            },
                            [
                              t._v("加载失败，"),
                              n("span", { on: { click: t.loadMoreSession } }, [
                                t._v("点击重试"),
                              ]),
                            ]
                          ),
                        ],
                        2
                      ),
                    ]
                  ),
                  t.isBinRoute && t.setBin
                    ? n("div", { staticClass: "bin-config" }, [
                        n("button", {
                          staticClass: "split",
                          class: { "has-readed": t.hasReaded },
                          attrs: { disabled: t.hasReaded },
                          domProps: { textContent: t._s("全部已读") },
                          on: { click: t.handleReadedAll },
                        }),
                        n("button", {
                          class: { "has-deleted": t.hasDeleted },
                          attrs: { disabled: t.hasDeleted },
                          domProps: { textContent: t._s("全部删除") },
                          on: { click: t.handleDeleteAll },
                        }),
                      ])
                    : t._e(),
                ]),
                n(
                  "div",
                  { staticClass: "right" },
                  [
                    "initiating" === t.sessionListStatus ||
                    t.activeSession ||
                    0 !== t.sessionList.length
                      ? t._e()
                      : n("Placeholder"),
                    t._l(t.initDialogList, function (e) {
                      return t.activeSession &&
                        "initiating" !== t.sessionListStatus
                        ? n("DialogDetail", {
                            directives: [
                              {
                                name: "show",
                                rawName: "v-show",
                                value:
                                  t.activeSessionId == e.talker_id &&
                                  t.activeSessionType === e.session_type,
                                expression:
                                  "activeSessionId == s.talker_id && activeSessionType === s.session_type",
                              },
                            ],
                            key: e.session_type + "_" + e.talker_id,
                            attrs: {
                              activeSid:
                                t.activeSessionType + "_" + t.activeSessionId,
                              sid: e.session_type + "_" + e.talker_id,
                              infos: e,
                              "set-bin": t.setBin,
                              "bin-session-type": t.sessionType,
                            },
                            on: {
                              toggleTop: function (n) {
                                return t.toggleTop(e);
                              },
                              toggleDnd: function (t) {
                                e.is_dnd = !e.is_dnd;
                              },
                              close: function (n) {
                                return t.closeSession(e);
                              },
                              closeViaBlack: function (n) {
                                return t.closeSession(e, !1);
                              },
                              removeFromBin: t.handleRemoveFromBin,
                            },
                          })
                        : t._e();
                    }),
                  ],
                  2
                ),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "f135e21e",
          null
        ).exports),
      il = n(312);
    r.a.use(m()), r.a.use(il.a, { error: n(471), attempt: 3 });
    var sl = r.a.component("IM", nl);
    function ol(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function rl(t) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (i, s) {
          var o = t.apply(e, n);
          function r(t) {
            ol(o, i, s, r, a, "next", t);
          }
          function a(t) {
            ol(o, i, s, r, a, "throw", t);
          }
          r(void 0);
        });
      };
    }
    function al(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function cl(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var ll = { 1: "", 2: "/unfollow", 3: "/mygroups", 5: "/bin" },
      ul = {
        components: { IM: sl },
        data: function () {
          return {
            sessionType: 1,
            loaded: !1,
            activeSessionKey: "",
            unreadBin: 0,
            unfollowUnreadNum: 0,
            batchUnread: 0,
          };
        },
        computed: (function (t) {
          for (var e = 1; e < arguments.length; e++) {
            var n = null != arguments[e] ? arguments[e] : {};
            e % 2
              ? al(Object(n), !0).forEach(function (e) {
                  cl(t, e, n[e]);
                })
              : Object.getOwnPropertyDescriptors
              ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
              : al(Object(n)).forEach(function (e) {
                  Object.defineProperty(
                    t,
                    e,
                    Object.getOwnPropertyDescriptor(n, e)
                  );
                });
          }
          return t;
        })(
          {},
          Object(L.c)([
            "uid",
            "fetchNotifyConfigPromise",
            "notifyConfig",
            "sysSetting",
          ])
        ),
        created: function () {
          var t = this;
          return rl(
            q.a.mark(function e() {
              var n, i;
              return q.a.wrap(function (e) {
                for (;;)
                  switch ((e.prev = e.next)) {
                    case 0:
                      if (
                        ((n = function (t) {
                          var e = t || "",
                            n = e && e.match(/^group|^fans/) ? 2 : 1;
                          return (e = e.replace(/^rid|^mid|^group|^fans/, ""))
                            ? "".concat(n, "_").concat(e)
                            : "";
                        }),
                        t.$watch("$route", function (e, i) {
                          if (i.name !== e.name)
                            switch (
                              ((t.activeSessionKey = n(e.params.rid) || ""),
                              e.name)
                            ) {
                              case "whisper-bin":
                                t.sessionType = 5;
                                break;
                              case "whisper-mygroups":
                                (t.sessionType = 3),
                                  (t.activeSessionKey = n(t.$route.params.rid));
                                break;
                              case "whisper-unfollow":
                                t.sessionType = 2;
                                break;
                              case "whisper":
                                t.sessionType = 1;
                            }
                          else
                            /^whisper/.test(e.name) &&
                              (t.activeSessionKey = n(t.$route.params.rid));
                        }),
                        !t.fetchNotifyConfigPromise)
                      ) {
                        e.next = 5;
                        break;
                      }
                      return (e.next = 5), t.fetchNotifyConfigPromise;
                    case 5:
                      (i = {
                        "whisper-bin": 5,
                        "whisper-mygroups": 3,
                        "whisper-unfollow": 2,
                        whisper: 1,
                      }),
                        (t.sessionType = i[t.$route.name] || 1),
                        (t.activeSessionKey = n(t.$route.params.rid)),
                        (t.loaded = !0);
                    case 9:
                    case "end":
                      return e.stop();
                  }
              }, e);
            })
          )();
        },
        methods: {
          handleSelectSession: function (t) {
            if (this.activeSessionKey !== t) {
              this.activeSessionKey = t;
              var e = this.sessionKeyToRid(t);
              this.$router.push(
                "/whisper".concat(ll[this.sessionType], "/").concat(e)
              );
            }
          },
          handleChangeSessionType: function (t, e) {
            var n = this.sessionKeyToRid(this.activeSessionKey);
            this.$router.push("/whisper".concat(ll[t], "/").concat(e ? n : ""));
          },
          handleUpdateNotifyCount: function () {
            var t = this;
            this.notifyCountsUpdated = new Promise(
              (function () {
                var e = rl(
                  q.a.mark(function e(n) {
                    var i, s, o;
                    return q.a.wrap(function (e) {
                      for (;;)
                        switch ((e.prev = e.next)) {
                          case 0:
                            return (
                              (i =
                                JSON.parse(
                                  localStorage.getItem(
                                    "imNotifyCounts".concat(t.uid)
                                  )
                                ) || {}),
                              (e.next = 3),
                              Object(P.a)({
                                addPlatInfo: !0,
                                url: "//api.vc.bilibili.com/session_svr/v1/session_svr/single_unread",
                                method: "get",
                                data: { unread_type: 0, show_dustbin: 1 },
                              }).then(function (e) {
                                var n, i, s;
                                return (
                                  (t.unreadBin =
                                    (null === (n = e.data) || void 0 === n
                                      ? void 0
                                      : n.dustbin_unread) || 0),
                                  (t.batchUnread =
                                    null === (i = e.data) || void 0 === i
                                      ? void 0
                                      : i.biz_msg_unfollow_unread),
                                  (t.unfollowUnreadNum =
                                    null === (s = e.data) || void 0 === s
                                      ? void 0
                                      : s.unfollow_unread),
                                  (window._per_webim_get_unread_count_cost =
                                    e.cost),
                                  e.data
                                );
                              })
                            );
                          case 3:
                            (s = e.sent),
                              (o = Number(t.notifyConfig.show_unfollowed_msg)),
                              (i.message = o
                                ? (null == s ? void 0 : s.follow_unread) || 0
                                : ((null == s ? void 0 : s.follow_unread) ||
                                    0) +
                                  ((null == s ? void 0 : s.unfollow_unread) ||
                                    0)),
                              (t.unfollowUnread =
                                (null == s ? void 0 : s.unfollow_unread) || 0),
                              localStorage.setItem(
                                "imNotifyCounts".concat(t.uid),
                                JSON.stringify(i)
                              ),
                              localStorage.setItem(
                                "unreadApiRequestedBy".concat(t.uid, "At"),
                                Date.now()
                              ),
                              ce.$emit("imNotifyCountsUpdate", i),
                              n(!0);
                          case 11:
                          case "end":
                            return e.stop();
                        }
                    }, e);
                  })
                );
                return function (t) {
                  return e.apply(this, arguments);
                };
              })()
            );
          },
          handleClearUnread: function (t) {
            var e = this,
              n =
                JSON.parse(
                  localStorage.getItem("imNotifyCounts".concat(this.uid))
                ) || {};
            (n.message = Math.max(0, n.message - t)),
              this.notifyCountsUpdated &&
                this.notifyCountsUpdated.then(function () {
                  localStorage.setItem(
                    "imNotifyCounts".concat(e.uid),
                    JSON.stringify(n)
                  ),
                    ce.$emit("imNotifyCountsUpdate", n);
                });
          },
          sessionKeyToRid: function (t) {
            if (!t) return "";
            var e = t.split("_");
            return "".concat({ 1: "mid", 2: "fans" }[e[0]]).concat(e[1]);
          },
        },
      },
      dl =
        (n(472),
        Object(xe.a)(
          ul,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              { staticClass: "d" },
              [
                t.loaded
                  ? n("IM", {
                      attrs: {
                        uid: t.uid,
                        notifyConfig: t.notifyConfig,
                        sysSetting: t.sysSetting,
                        sessionType: t.sessionType,
                        activeSessionKey: t.activeSessionKey,
                        unreadBin: t.unreadBin,
                        batchUnread: t.batchUnread,
                        unfollowUnreadNum: t.unfollowUnreadNum,
                      },
                      on: {
                        selectSession: t.handleSelectSession,
                        changeSessionType: t.handleChangeSessionType,
                        updateNotifyCount: t.handleUpdateNotifyCount,
                        clearUnread: t.handleClearUnread,
                      },
                    })
                  : t._e(),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "1abd495e",
          null
        ).exports),
      pl = {
        props: {
          avatar: {
            type: String,
            default: function () {
              return "//static.hdslb.com/images/member/noface.gif";
            },
          },
          lastWord: String,
          name: String,
          rid: String,
          data: Object,
          currentRid: String,
          msgCount: Number,
        },
        computed: {
          avatarStyle: function () {
            var t =
              this.avatar || "//static.hdslb.com/images/member/noface.gif";
            return {
              "background-image": "url(".concat(
                bt(t, 42, 42).srcUrl.replace(/^http:/, ""),
                ")"
              ),
            };
          },
          active: function () {
            return this.currentRid === this.rid;
          },
        },
        methods: {
          closeIt: function () {
            this.$emit("close");
          },
        },
      },
      ml =
        (n(473),
        Object(xe.a)(
          pl,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "router-link",
              {
                staticClass: "list-item",
                class: { active: t.active },
                attrs: { to: "/archive/rid" + t.rid, title: t.name },
              },
              [
                n("div", { staticClass: "avatar", style: t.avatarStyle }),
                n("div", { staticClass: "name-box" }, [
                  n("div", { staticClass: "name" }, [t._v(t._s(t.name))]),
                  n("div", { staticClass: "last-word" }, [
                    t._v(t._s(t.lastWord)),
                  ]),
                ]),
                n(
                  "div",
                  {
                    staticClass: "close",
                    on: {
                      click: function (e) {
                        return (
                          e.stopPropagation(), e.preventDefault(), t.closeIt(e)
                        );
                      },
                    },
                  },
                  [n("div", { staticClass: "close-icon" })]
                ),
              ]
            );
          },
          [],
          !1,
          null,
          "130e22a0",
          null
        ).exports),
      fl = { props: { time: [String, Number] }, components: { TimeSpan: an } },
      hl =
        (n(474),
        Object(xe.a)(
          fl,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e(
              "div",
              { staticClass: "msg-time" },
              [e("time-span", { attrs: { time: this.time } })],
              1
            );
          },
          [],
          !1,
          null,
          "116f5668",
          null
        ).exports),
      gl = {
        components: {},
        props: {
          hasHistory: { type: Boolean, default: !1 },
          hasMore: { type: Boolean, default: !1 },
          status: { type: String, default: "done" },
          text: null,
        },
        methods: {
          loadHistory: function () {
            this.$emit("loadHistory");
          },
          loadMoreMsg: function () {
            ce.$emit("loadMoreMsg");
          },
        },
      },
      vl =
        (n(475),
        Object(xe.a)(
          gl,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n("div", { staticClass: "msg-more" }, [
              n(
                "span",
                {
                  directives: [
                    {
                      name: "show",
                      rawName: "v-show",
                      value: "done" === t.status && !t.hasMore && t.hasHistory,
                      expression: "status === 'done' && !hasMore && hasHistory",
                    },
                  ],
                  staticClass: "load-more",
                  on: { click: t.loadHistory },
                },
                [
                  n("span", { staticClass: "icon" }),
                  t._v(t._s(t.text || "查看以往消息")),
                ]
              ),
              n(
                "span",
                {
                  directives: [
                    {
                      name: "show",
                      rawName: "v-show",
                      value: "done" === t.status && !t.hasMore && !t.hasHistory,
                      expression:
                        "status === 'done' && !hasMore && !hasHistory",
                    },
                  ],
                  staticClass: "no-more",
                },
                [t._v("没有更多消息了～")]
              ),
              n("span", {
                directives: [
                  {
                    name: "show",
                    rawName: "v-show",
                    value: "loading" === t.status,
                    expression: "status === 'loading'",
                  },
                ],
                staticClass: "loading",
              }),
              n(
                "span",
                {
                  directives: [
                    {
                      name: "show",
                      rawName: "v-show",
                      value: "error" === t.status,
                      expression: "status === 'error'",
                    },
                  ],
                  staticClass: "error",
                },
                [
                  t._v("消息加载失败，"),
                  n(
                    "span",
                    { staticClass: "btn", on: { click: t.loadMoreMsg } },
                    [t._v("点击重新加载")]
                  ),
                ]
              ),
            ]);
          },
          [],
          !1,
          null,
          "65963556",
          null
        ).exports),
      bl = {
        白眼: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/baiyan.png",
          step: 45,
        },
        doge: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/doge.png",
          step: 20,
        },
        坏笑: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/huaixiao.png",
          step: 31,
        },
        难过: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/nanguo.png",
          step: 28,
        },
        生气: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/shengqi.png",
          step: 11,
        },
        委屈: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/weiqu.png",
          step: 20,
        },
        斜眼笑: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/xieyanxiao.png",
          step: 8,
        },
        呆: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/fadai.png",
          step: 27,
        },
        发怒: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/fanu.png",
          step: 33,
        },
        惊吓: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/jingxia.png",
          step: 32,
        },
        呕吐: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/outu.png",
          step: 42,
        },
        思考: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/sikao.png",
          step: 27,
        },
        微笑: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/weixiao.png",
          step: 20,
        },
        疑问: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/yiwen.png",
          step: 21,
        },
        大哭: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/daku.png",
          step: 8,
        },
        鼓掌: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/guzhang.png",
          step: 17,
        },
        抠鼻: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/koubi.png",
          step: 30,
        },
        亲亲: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/qinqin.png",
          step: 7,
        },
        调皮: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/tiaopi.png",
          step: 50,
          coverStep: 23,
        },
        笑哭: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/xiaoku.png",
          step: 15,
        },
        晕: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/yun.png",
          step: 12,
        },
        点赞: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/dianzan.png",
          step: 20,
          coverStep: 18,
        },
        害羞: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/haixiu.png",
          step: 31,
        },
        睡着: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/shuizhao.png",
          step: 24,
        },
        色: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/se.png",
          step: 10,
        },
        吐血: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/tuxue.png",
          step: 8,
        },
        无奈: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/wunai.png",
          step: 23,
          coverStep: 15,
        },
        再见: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/zaijian.png",
          step: 24,
        },
        流汗: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/liuhan.png",
          step: 27,
          coverStep: 10,
        },
        偷笑: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/touxiao.png",
          step: 6,
        },
        抓狂: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/zhuakuang.png",
          step: 19,
        },
        黑人问号: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/heirenwenhao.png",
          step: 26,
        },
        困: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/kun.png",
          step: 44,
        },
        打脸: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/dalian.png",
          step: 37,
        },
        闭嘴: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/bizui.png",
          step: 31,
        },
        鄙视: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/bishi.png",
          step: 9,
        },
        腼腆: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/miantian.png",
          step: 28,
        },
        馋: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/chan.png",
          step: 40,
          coverStep: 10,
        },
        可爱: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/keai.png",
          step: 17,
        },
        发财: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/facai.png",
          step: 30,
        },
        生病: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/shengbing.png",
          step: 35,
        },
        流鼻血: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/liubixie.png",
          step: 35,
          coverStep: 10,
        },
        尴尬: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/ganga.png",
          step: 38,
        },
        大佬: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/dalao.png",
          step: 33,
        },
        流泪: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/liulei.png",
          step: 1,
        },
        冷漠: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/lengmo.png",
          step: 1,
        },
        皱眉: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/zhoumei.png",
          step: 1,
        },
        鬼脸: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/guilian.png",
          step: 1,
        },
        调侃: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/tiaokan.png",
          step: 1,
        },
        目瞪口呆: {
          img: "https://s1.hdslb.com/bfs/seed/bplus-common/emoji-assets/xiaodianshi-im/mudengkoudai.png",
          step: 1,
        },
      },
      yl = n(111),
      _l = n.n(yl),
      wl = {
        props: {
          content: {
            type: Object,
            default: function () {
              return {};
            },
          },
          isMe: [Boolean, Number],
        },
        data: function () {
          return {
            shareSource: {
              1: "小视频",
              2: "相簿",
              3: "纯文字",
              4: "直播",
              5: "投稿视频",
              6: "投稿专栏",
              7: "番剧",
              8: "音乐",
              9: "国产动画",
              10: "图片",
              11: "动态",
            },
            videoCardCoverStyle: { backgroundImage: "url(".concat(_l.a, ")") },
            cvCardCoverStyle: { backgroundImage: "url(".concat(_l.a, ")") },
            cvImages: new Array(3).fill({
              backgroundImage: "url(".concat(_l.a, ")"),
            }),
            triggerUpdate: !1,
          };
        },
        computed: {
          detail: function () {
            return {};
          },
          shareCardClass: function () {
            var t = [];
            switch ((this.isMe && t.push("is-me"), this.content.source)) {
              case 5:
                t.push("video-type");
                break;
              case 6:
                t.push("article-type");
            }
            return t;
          },
          styleString: function () {
            var t = bt(this.content.thumb, 60, 60);
            return "background-image: url(".concat(t.srcUrl, ")");
          },
          url: function () {
            var t = "",
              e = this.content.source,
              n = this.content.id;
            switch (e) {
              case 1:
                t = "//vc.bilibili.com/video/".concat(n);
                break;
              case 2:
                t = "//h.bilibili.com/".concat(n);
                break;
              case 4:
                t = "//live.bilibili.com/".concat(n);
                break;
              case 5:
                t = this.triggerUpdate ? "" : pt(n, this.content.bvid);
                break;
              case 6:
                t = "//www.bilibili.com/read/cv".concat(n);
                break;
              case 7:
                t = "//bangumi.bilibili.com/anime/".concat(n);
                break;
              case 9:
                t = this.triggerUpdate ? "" : pt(n, this.content.bvid);
                break;
              case 11:
                t = "//t.bilibili.com/".concat(n, "?tab=1");
                break;
              default:
                t = "";
            }
            return t.replace(/^javascript:/i, "");
          },
          headline: function () {
            return this.content.headline;
          },
          type: function () {
            return this.shareSource[this.content.source];
          },
        },
        watch: {
          detail: function (t) {
            var e = this;
            if ((5 === this.content.source && t.pic) || this.content.thumb) {
              var n = t.pic || this.content.thumb;
              n = bt(n, 360, 200, !0).srcUrl.replace(/^http:/, "");
              var i = new Image();
              (i.src = n),
                (i.onload = function () {
                  e.videoCardCoverStyle = {
                    backgroundImage: "url(".concat(n, ")"),
                    backgroundSize: "cover",
                  };
                });
            }
            if (6 === this.content.source)
              if (t.image_urls && t.image_urls.length < 3 && t.image_urls[0]) {
                var s = bt(t.image_urls[0], 360, 105, !0).srcUrl.replace(
                    /^http:/,
                    ""
                  ),
                  o = new Image();
                (o.src = s),
                  (o.onload = function () {
                    e.cvCardCoverStyle = {
                      backgroundImage: "url(".concat(s, ")"),
                      backgroundSize: "cover",
                    };
                  });
              } else if (t.image_urls && t.image_urls.length >= 3)
                for (
                  var r = function (t) {
                      var n = bt(
                          e.detail.image_urls[t],
                          120,
                          105,
                          !0
                        ).srcUrl.replace(/^http:/, ""),
                        i = new Image();
                      (i.src = n),
                        (i.onload = function () {
                          e.$set(e.cvImages, t, {
                            backgroundImage: "url(".concat(n, ")"),
                            backgroundSize: "cover",
                          });
                        });
                    },
                    a = 0;
                  a < 3;
                  a++
                )
                  r(a);
          },
        },
        components: { SVGIcon: ve },
        beforeCreate: function () {},
        created: function () {},
        beforeMount: function () {},
        mounted: function () {
          var t = this;
          G.$on("ShowBvConfigUpdated", function () {
            (t.triggerUpdate = !0),
              t.$nextTick(function () {
                t.triggerUpdate = !1;
              });
          });
        },
        beforeDestroy: function () {},
        destroyed: function () {},
        methods: {
          formatTime: function (t) {
            return (function (t) {
              var e,
                n,
                i,
                s,
                o = function (t) {
                  return t < 10 ? "0".concat(t) : t;
                };
              return (
                (n = Math.floor(t / 3600)),
                (i = Math.floor((t - 3600 * n) / 60)),
                (s = (t - 3600 * n) % 60),
                (e = "".concat(o(i), ":").concat(o(s))),
                n > 0 && (e = "".concat(o(n), ":").concat(e)),
                e
              );
            })(t);
          },
          formatNumber: function (t) {
            return X(t).replace(/\s+/g, "");
          },
        },
      },
      Cl =
        (n(476),
        Object(xe.a)(
          wl,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return t.triggerUpdate
              ? t._e()
              : n(
                  t.url ? "a" : "span",
                  {
                    tag: "component",
                    staticClass: "share-card",
                    class: t.shareCardClass,
                    attrs: { href: t.url, target: "_blank" },
                  },
                  [
                    [5, 6].some(function (e) {
                      return e === t.content.source;
                    })
                      ? t._e()
                      : [
                          t.headline
                            ? n("div", { staticClass: "headline" }, [
                                t._v(t._s(t.headline)),
                              ])
                            : t._e(),
                          n("div", { staticClass: "main-content" }, [
                            n(
                              "div",
                              {
                                staticClass: "img",
                                class: {
                                  video: 1 === t.content.source,
                                  photo: 2 === t.content.source,
                                },
                                style: t.styleString,
                              },
                              [
                                1 === t.content.source
                                  ? n("div", { staticClass: "video-icon" })
                                  : t._e(),
                                2 === t.content.source
                                  ? n("div", { staticClass: "photo-icon" })
                                  : t._e(),
                              ]
                            ),
                            n("div", { staticClass: "text-content" }, [
                              n(
                                "div",
                                {
                                  staticClass: "content",
                                  class: { "no-headline": !t.headline },
                                },
                                [t._v(t._s(t.content.title))]
                              ),
                              n("div", { staticClass: "type" }, [
                                t._v(t._s(t.type)),
                              ]),
                            ]),
                          ]),
                          n(
                            "div",
                            { staticClass: "up-info" },
                            [
                              n("SVGIcon", {
                                style: { width: "14px", color: "#999" },
                                attrs: { name: "up" },
                              }),
                              n("div", { staticClass: "up-name" }, [
                                t._v(t._s(t.content.author)),
                              ]),
                            ],
                            1
                          ),
                        ],
                    5 === t.content.source
                      ? [
                          n(
                            "div",
                            {
                              staticClass: "cover",
                              style: t.videoCardCoverStyle,
                            },
                            [
                              n("div", { staticClass: "snum" }),
                              n("div", { staticClass: "infos" }, [
                                n("span", {
                                  staticClass: "duration",
                                  domProps: {
                                    textContent: t._s(
                                      t.detail.duration
                                        ? t.formatTime(t.detail.duration)
                                        : "-- : --"
                                    ),
                                  },
                                }),
                                n("span", {
                                  staticClass: "play-num",
                                  domProps: {
                                    textContent: t._s(
                                      (void 0 !== t.detail.view
                                        ? t.formatNumber(t.detail.view)
                                        : "-- ") + "播放"
                                    ),
                                  },
                                }),
                                n("span", {
                                  staticClass: "danmu",
                                  domProps: {
                                    textContent: t._s(
                                      (void 0 !== t.detail.danmaku
                                        ? t.formatNumber(t.detail.danmaku)
                                        : "-- ") + "弹幕"
                                    ),
                                  },
                                }),
                              ]),
                              n("div", { staticClass: "play" }),
                            ]
                          ),
                          n("div", { staticClass: "content" }, [
                            n("span", {
                              domProps: {
                                textContent: t._s(
                                  t.detail.title || t.content.title || ""
                                ),
                              },
                            }),
                          ]),
                          n(
                            "div",
                            { staticClass: "footer" },
                            [
                              n("SVGIcon", {
                                style: { width: "14px" },
                                attrs: { name: "up" },
                              }),
                              n("div", { staticClass: "up-name" }, [
                                t._v(
                                  t._s(t.detail.up_name || t.content.author)
                                ),
                              ]),
                              n("div", {
                                staticClass: "type",
                                domProps: { textContent: t._s(t.type) },
                              }),
                            ],
                            1
                          ),
                        ]
                      : t._e(),
                    6 === t.content.source
                      ? [
                          n("div", { staticClass: "title" }, [
                            n("span", {
                              domProps: {
                                textContent: t._s(
                                  t.detail.title || t.content.title || ""
                                ),
                              },
                            }),
                          ]),
                          t.detail.image_urls && t.detail.image_urls.length >= 3
                            ? n(
                                "div",
                                { staticClass: "cv-images cv-img-3" },
                                t._l(t.cvImages, function (t, e) {
                                  return n("div", { key: e, style: t });
                                }),
                                0
                              )
                            : t._e(),
                          !t.detail.image_urls ||
                          (t.detail.image_urls &&
                            t.detail.image_urls.length < 3)
                            ? n("div", {
                                staticClass: "cv-images cv-img-single",
                                style: t.cvCardCoverStyle,
                              })
                            : t._e(),
                          n("div", { staticClass: "summary" }, [
                            n("span", {
                              domProps: {
                                textContent: t._s(
                                  t.detail.summary || t.content.summary
                                ),
                              },
                            }),
                          ]),
                          n("div", { staticClass: "infos" }, [
                            n("span", {
                              domProps: {
                                textContent: t._s(
                                  (void 0 !== t.detail.view_num
                                    ? t.formatNumber(t.detail.view_num)
                                    : "-- ") + "阅读"
                                ),
                              },
                            }),
                            n("span", {
                              domProps: {
                                textContent: t._s(
                                  (void 0 !== t.detail.like_num
                                    ? t.formatNumber(t.detail.like_num)
                                    : "-- ") + "点赞"
                                ),
                              },
                            }),
                            n("span", {
                              domProps: {
                                textContent: t._s(
                                  (void 0 !== t.detail.reply_num
                                    ? t.formatNumber(t.detail.reply_num)
                                    : "-- ") + "评论"
                                ),
                              },
                            }),
                          ]),
                          n(
                            "div",
                            { staticClass: "footer" },
                            [
                              n("SVGIcon", {
                                style: { width: "14px" },
                                attrs: { name: "up" },
                              }),
                              n("div", { staticClass: "up-name" }, [
                                t._v(
                                  t._s(t.detail.up_name || t.content.author)
                                ),
                              ]),
                              n("div", {
                                staticClass: "type",
                                domProps: { textContent: t._s(t.type) },
                              }),
                            ],
                            1
                          ),
                        ]
                      : t._e(),
                  ],
                  2
                );
          },
          [],
          !1,
          null,
          "104e8ef3",
          null
        ).exports);
    function xl(t) {
      return (
        (function (t) {
          if (Array.isArray(t)) return Il(t);
        })(t) ||
        (function (t) {
          if (
            ("undefined" != typeof Symbol && null != t[Symbol.iterator]) ||
            null != t["@@iterator"]
          )
            return Array.from(t);
        })(t) ||
        Sl(t) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function kl(t, e) {
      return (
        (function (t) {
          if (Array.isArray(t)) return t;
        })(t) ||
        (function (t, e) {
          var n =
            t &&
            (("undefined" != typeof Symbol && t[Symbol.iterator]) ||
              t["@@iterator"]);
          if (null == n) return;
          var i,
            s,
            o = [],
            r = !0,
            a = !1;
          try {
            for (
              n = n.call(t);
              !(r = (i = n.next()).done) &&
              (o.push(i.value), !e || o.length !== e);
              r = !0
            );
          } catch (t) {
            (a = !0), (s = t);
          } finally {
            try {
              r || null == n.return || n.return();
            } finally {
              if (a) throw s;
            }
          }
          return o;
        })(t, e) ||
        Sl(t, e) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function Sl(t, e) {
      if (t) {
        if ("string" == typeof t) return Il(t, e);
        var n = Object.prototype.toString.call(t).slice(8, -1);
        return (
          "Object" === n && t.constructor && (n = t.constructor.name),
          "Map" === n || "Set" === n
            ? Array.from(t)
            : "Arguments" === n ||
              /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
            ? Il(t, e)
            : void 0
        );
      }
    }
    function Il(t, e) {
      (null == e || e > t.length) && (e = t.length);
      for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
      return i;
    }
    var jl = {
        props: {
          avatar: String,
          mid: null,
          isMe: [Boolean, Number],
          name: String,
          content: null,
          type: Number,
          group: null,
          medal: {
            type: Object,
            default: function () {
              return {};
            },
          },
          text: String,
          groupType: Number,
          msgKey: String,
          time: Number,
          isLimit: Boolean,
          limitMsg: String,
          talkerId: Number,
          msgObj: Object,
        },
        data: function () {
          return {
            photoImager: null,
            image: { url: "", width: 0, height: 0 },
            targetDom: null,
            triggerUpdate: !1,
          };
        },
        computed: {
          msg: function () {
            return this.text || this.content.content || this.content || "";
          },
          avatarStyle: function () {
            var t =
              this.avatar || "//static.hdslb.com/images/member/noface.gif";
            return {
              backgroundImage: "url(".concat(
                bt(t, 30, 30).srcUrl.replace(/^http:/, ""),
                ")"
              ),
            };
          },
          msg2html: function () {
            if (!this.triggerUpdate) {
              if (2 === this.type || 6 === this.type) {
                var t =
                    this.content.url && this.content.url.replace(/^http:/, ""),
                  e = this.content.width,
                  n = this.content.height;
                e > 490 &&
                  ((e = 490),
                  (n = (this.content.height / this.content.width) * 490)),
                  n > 150 &&
                    ((n = 150),
                    (e = (this.content.width / this.content.height) * 150));
                var i =
                  (2 === this.type ? "[图片]" : "[自定义表情]") +
                  " 点击查看大图";
                (e = parseInt(e)), (n = parseInt(n));
                var s = bt(t, e, n),
                  o = pn(s.srcUrl);
                return (
                  (this.image = { url: t, width: e, height: n }),
                  '\n          <img class="im-msg-item-img" title="'
                    .concat(i, '" alt="')
                    .concat(i, '" src="')
                    .concat(o, '" style="width: ')
                    .concat(e, "px; height: ")
                    .concat(n, 'px; background: #fff">\n        ')
                );
              }
              if (1 === this.type && "string" == typeof this.msg) {
                var r = [
                    {
                      match:
                        /(?:(?:(?:http:\/\/|https:\/\/)(?:[a-zA-Z0-9_.-]+\.)*(?:bilibili|biligame)\.com(?:\/[/.$*?~=#!%@&\-\w]*)?)|(?:(?:http:\/\/|https:\/\/)(?:[a-zA-Z0-9_.-]+\.)*(?:acg|b23)\.tv(?:\/[/.$*?~=#!%@&\-\w]*)?)|(?:(?:http:\/\/|https:\/\/)dl\.(?:hdslb)\.com(?:\/[/.$*?~=#!%@&\-\w]*)?))/g,
                      replace: function (t) {
                        return '\n              <a href="'.concat(
                          t,
                          '" target="_blank" class="dynamic-link">\n                <i class="bp-icon-font icon-link"></i> 网页链接\n              </a>\n            '
                        );
                      },
                    },
                    {
                      match: /(?:bilibili:\/\/)(?:[/.$*?~=#!%@&\-\w]*)?/g,
                      replace: function (t) {
                        return '\n              <span data-href="'.concat(
                          t,
                          '">\n                【请在移动端上打开链接】\n              </span>\n            '
                        );
                      },
                    },
                    {
                      match: /\[(?:[^[\]]+)]/g,
                      replace: function (t) {
                        var e = t.slice(1, t.length - 1);
                        if (!(e in bl)) return t;
                        var n = bl[e],
                          i = "\n                background-image: url("
                            .concat(
                              n.img,
                              ");\n                animation-duration: "
                            )
                            .concat(
                              40 * n.step,
                              "ms;\n                animation-timing-function: steps("
                            )
                            .concat(n.step, ", end);\n                height: ")
                            .concat(32 * n.step, "px\n              ");
                        return '\n                <a class="emotion-item active" title="'
                          .concat(
                            e,
                            '">\n                  <div class="img" style="'
                          )
                          .concat(
                            i,
                            '"></div>\n                </a>\n              '
                          );
                      },
                    },
                  ].concat(
                    xl(
                      dt()
                        ? [
                            {
                              match: /bv1[\d\w]{9}/gi,
                              replace: function (t) {
                                return '<a href="https://www.bilibili.com/video/'
                                  .concat(
                                    t
                                      .slice(0, 2)
                                      .toLowerCase()
                                      .concat(t.slice(2)),
                                    '" target="_blank" class="dynamic-link">'
                                  )
                                  .concat(t, "</a>");
                              },
                            },
                          ]
                        : []
                    ),
                    [
                      {
                        match: /av\d+/gi,
                        replace: function (t) {
                          return '<a href="//www.bilibili.com/video/'
                            .concat(
                              t.toLowerCase(),
                              '" target="_blank" class="dynamic-link">'
                            )
                            .concat(t, "</a>");
                        },
                      },
                      {
                        match: /vc\d+/gi,
                        replace: function (t) {
                          return '<a href="//vc.bilibili.com/video/'
                            .concat(
                              t.slice(2),
                              '" target="_blank" class="dynamic-link">'
                            )
                            .concat(t, "</a>");
                        },
                      },
                      {
                        match: /cv\d+/gi,
                        replace: function (t) {
                          return '<a href="//www.bilibili.com/read/'
                            .concat(
                              t.toLowerCase(),
                              '" target="_blank" class="dynamic-link">'
                            )
                            .concat(t, "</a>");
                        },
                      },
                    ]
                  ),
                  a = this.msg
                    .replace(/</g, "&lt;")
                    .replace(/>/g, "&gt;")
                    .replace(/\n/g, "<br/>");
                return (a = (function (t, e) {
                  var n = t.map(function (t) {
                    return t.match instanceof RegExp
                      ? ((e = t.match),
                        (n = t.replace),
                        function (t) {
                          var i = t.match(e) || [],
                            s = t.split(e);
                          return [i.map(n), s];
                        })
                      : function (e) {
                          var n = kl(t.match(e), 2),
                            i = n[0],
                            s = n[1];
                          return [i.map(t.replace), s];
                        };
                    var e, n;
                  });
                  return (function t(e) {
                    return e.reduce(function (e, n) {
                      return e.concat(Array.isArray(n) ? t(n) : n);
                    }, []);
                  })(
                    (function t(e, i) {
                      var s = n[e];
                      return s
                        ? i.map(function (n) {
                            for (
                              var i = kl(s(n), 2),
                                o = i[0],
                                r = i[1],
                                a = t(e + 1, r),
                                c = [],
                                l = 0;
                              l < o.length;
                              l++
                            )
                              c.push(a[l]), c.push(o[l]);
                            return c.push(a[o.length]), c;
                          })
                        : i;
                    })(0, [e])
                  );
                })(r, a).join(""));
              }
              return '\n          <span class="not-support-icon"></span><span class="not-support-text no-select">不支持的消息类型，请使用最新版客户端查看</span>\n        ';
            }
          },
          isMusic: function () {
            return (
              this.content &&
              (8 === this.content.source ||
                /bilibili:\/\/music/.test(this.content.url))
            );
          },
        },
        components: { Medal: Lo, ShareCard: Cl },
        mounted: function () {
          var t = this;
          this.$bpreport.pv({
            spmId: "444.1",
            logId: "000873",
            event: "im_message_show",
            data: {
              msg_key: this.msgObj.msg_key,
              msg_type: this.msgObj.msg_type,
              sender_uid: this.msgObj.sender_uid,
            },
          }),
            (this.targetDom = this.$refs.message),
            G.$on("ShowBvConfigUpdated", function () {
              (t.triggerUpdate = !0),
                t.$nextTick(function () {
                  t.triggerUpdate = !1;
                });
            });
        },
        beforeDestroy: function () {
          this.photoImager && this.photoImager.destroy();
        },
        methods: {
          openPhotoImager: function (t) {
            if (this.image.url) {
              if ((t.preventDefault(), this.photoImager))
                return void this.photoImager.show();
              var e = new Eo({
                images: [this.image],
                showSupportWidget: !1,
                showFavouriteWidget: !1,
                hideBodyScroll: !0,
              });
              (this.photoImager = e), this.photoImager.show();
            }
          },
          handleClick: function (t) {
            t.target &&
              "A" === t.target.tagName &&
              this.$bpreport.click({
                spmId: "444.1",
                logId: "000873",
                event: "im_message_click",
                data: {
                  msg_key: this.msgObj.msg_key,
                  msg_type: this.msgObj.msg_type,
                  sender_uid: this.msgObj.sender_uid,
                  url: 1 === this.type ? t.target.href : void 0,
                },
              });
          },
        },
      },
      Ol =
        (n(477),
        n(478),
        n(479),
        Object(xe.a)(
          jl,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              {
                staticClass: "msg-item",
                class: {
                  "not-me": !t.isMe,
                  "is-up": t.medal.master,
                  "is-me": t.isMe,
                },
              },
              [
                n("a", {
                  staticClass: "avatar",
                  style: t.avatarStyle,
                  attrs: {
                    href: "//space.bilibili.com/" + t.mid,
                    title: t.name,
                    target: "_blank",
                  },
                }),
                t.group
                  ? n(
                      "div",
                      { staticClass: "medal-box" },
                      [
                        !t.medal.name ||
                        2 === t.groupType ||
                        t.medal.master ||
                        t.medal.admin ||
                        t.medal.system
                          ? t._e()
                          : n("medal", {
                              staticClass: "medal-normal",
                              attrs: {
                                level: t.medal.level || 1,
                                label: t.medal.name,
                              },
                            }),
                        t.medal.master && 2 !== t.groupType
                          ? n("medal", { staticClass: "medal-master" }, [
                              n("span", { staticClass: "medal-slot up" }, [
                                t._v("UP"),
                              ]),
                            ])
                          : t._e(),
                        t.medal.master && 2 === t.groupType
                          ? n("medal", { staticClass: "medal-master" }, [
                              n("span", { staticClass: "medal-slot up" }, [
                                t._v("群主"),
                              ]),
                            ])
                          : t._e(),
                        !t.medal.admin || t.medal.system || t.medal.master
                          ? t._e()
                          : n("medal", { staticClass: "medal-admin" }, [
                              n("span", { staticClass: "medal-slot admin" }, [
                                t._v("管理员"),
                              ]),
                            ]),
                        t.medal.system && 2 !== t.groupType
                          ? n("medal", { staticClass: "medal-system" }, [
                              n("span", { staticClass: "medal-slot system" }, [
                                t._v("系统"),
                              ]),
                            ])
                          : t._e(),
                        n("div", { staticClass: "name" }, [t._v(t._s(t.name))]),
                      ],
                      1
                    )
                  : t._e(),
                n(
                  "div",
                  {
                    ref: "message",
                    staticClass: "message",
                    class: {
                      group: t.group,
                      "img-padding": 2 === t.type || 6 === t.type,
                    },
                    on: { click: t.handleClick },
                  },
                  [
                    !t.triggerUpdate &&
                    (t.isMusic || (7 !== t.type && 9 !== t.type))
                      ? n("div", {
                          staticClass: "message-content",
                          class: {
                            "is-me": t.isMe,
                            "not-img": 2 !== t.type && 6 !== t.type,
                          },
                          attrs: { "data-key": t.msgKey },
                          domProps: { innerHTML: t._s(t.msg2html) },
                          on: { click: t.openPhotoImager },
                        })
                      : t._e(),
                    7 !== t.type || t.isMusic
                      ? t._e()
                      : n(
                          "div",
                          {
                            staticClass: "message-content share-type",
                            class: {
                              "is-me": t.isMe,
                              "not-img": 2 !== t.type && 6 !== t.type,
                            },
                            attrs: { "data-key": t.msgKey },
                          },
                          [
                            n("share-card", {
                              attrs: { content: t.content, "is-me": t.isMe },
                            }),
                          ],
                          1
                        ),
                    9 === t.type
                      ? n("div", {
                          staticClass: "message-content not-img",
                          class: { "is-me": t.isMe },
                          attrs: { "data-key": t.msgKey },
                          domProps: {
                            textContent: t._s("收到一个小程序，请在手机上查看"),
                          },
                        })
                      : t._e(),
                  ]
                ),
              ]
            );
          },
          [],
          !1,
          null,
          "163e6980",
          null
        ).exports);
    function Ll(t) {
      return (
        (function (t) {
          if (Array.isArray(t)) return Pl(t);
        })(t) ||
        (function (t) {
          if (
            ("undefined" != typeof Symbol && null != t[Symbol.iterator]) ||
            null != t["@@iterator"]
          )
            return Array.from(t);
        })(t) ||
        (function (t, e) {
          if (!t) return;
          if ("string" == typeof t) return Pl(t, e);
          var n = Object.prototype.toString.call(t).slice(8, -1);
          "Object" === n && t.constructor && (n = t.constructor.name);
          if ("Map" === n || "Set" === n) return Array.from(t);
          if (
            "Arguments" === n ||
            /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
          )
            return Pl(t, e);
        })(t) ||
        (function () {
          throw new TypeError(
            "Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."
          );
        })()
      );
    }
    function Pl(t, e) {
      (null == e || e > t.length) && (e = t.length);
      for (var n = 0, i = new Array(e); n < e; n++) i[n] = t[n];
      return i;
    }
    var Al = {
        props: { rid: String, show: Boolean, addStyle: Object },
        data: function () {
          return { loading: !1, hasMore: !0, msgList: [], scrollBar: null };
        },
        computed: {
          showList: function () {
            return Ll(this.msgList).reverse();
          },
        },
        watch: {
          show: function (t) {
            t && (this.msgList.length || this.getMsgList());
          },
        },
        components: { MsgTime: hl, MsgMore: vl, MsgItem: Ol },
        created: function () {
          this.getMsgList();
        },
        mounted: function () {
          this.initScroll();
        },
        methods: {
          loadMore: function () {
            var t = U(0, "cursor")(this.msgList.slice(-1));
            t && this.getMsgList(t);
          },
          ifShowTime: function (t, e) {
            function n(t) {
              return parseInt(U(t, "send_time")(e), 10);
            }
            return n(t) - n(t - 1) > 12e4;
          },
          initScroll: function () {
            this.scrollBar = new ae.a(this.$refs.messageList, {
              minScrollbarLength: 50,
              maxScrollbarLength: 120,
            });
          },
          scrollToBottom: function () {
            var t = this;
            this.$nextTick(function () {
              var e = t.$refs.messageList;
              if (e) {
                e instanceof HTMLElement || (e = e.$el);
                var n = t.$refs.messageListContent.clientHeight,
                  i = e.clientHeight;
                (e.scrollTop = n - i), t.scrollBar.update(e);
              }
            });
          },
          getMsgList: function (t) {
            var e,
              n,
              i = this;
            this.show &&
              this.hasMore &&
              ((this.loading = !0),
              t && ((e = this.$refs.messageListContent), (n = e.clientHeight)),
              (function (t) {
                var e = t.rid,
                  n = t.cursor,
                  i = t.getNewMessage;
                return E({
                  method: "get",
                  url: "//message.bilibili.com/api/msg/query.msg.list.do",
                  data: {
                    data_type: i ? 2 : 1,
                    rid: e,
                    cursor: n,
                    async: !i && void 0,
                  },
                });
              })({ rid: this.rid, cursor: t }).then(
                function (s) {
                  (i.loading = !1),
                    t
                      ? ((i.msgList = i.msgList.concat(s)),
                        i.$nextTick(function () {
                          var t = i.$refs.messageList;
                          (t.scrollTop = e.clientHeight - n),
                            i.scrollBar.update(t);
                        }))
                      : ((i.msgList = s), i.scrollToBottom()),
                    s.length || (i.hasMore = !1);
                },
                function (t) {
                  (i.loading = !1), console.error("queryMsgList error:", t);
                }
              ));
          },
        },
      },
      El =
        (n(480),
        Object(xe.a)(
          Al,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              {
                ref: "messageList",
                staticClass: "message-list",
                style: t.addStyle,
              },
              [
                n(
                  "div",
                  {
                    ref: "messageListContent",
                    staticClass: "message-list-content",
                  },
                  [
                    n("msg-more", {
                      key: "msgMore",
                      attrs: { hasMore: t.hasMore, loading: t.loading },
                      on: { loadMore: t.loadMore },
                    }),
                    t._l(t.showList, function (e, i) {
                      return [
                        t.ifShowTime(i, t.showList)
                          ? n("msg-time", {
                              key: e.id + e.send_time,
                              attrs: { time: e.send_time },
                            })
                          : t._e(),
                        n("msg-item", {
                          key: e.id,
                          attrs: {
                            avatar: e.avatar_url,
                            text: e.message,
                            name: e.uname,
                            isMe: 1 === e.is_me,
                            mid: e.mid,
                            type: 1,
                          },
                        }),
                      ];
                    }),
                  ],
                  2
                ),
              ]
            );
          },
          [],
          !1,
          null,
          "782bc784",
          null
        ).exports),
      Tl = {
        props: { rid: String, show: Boolean, roomName: String },
        components: { MessageList: El },
      },
      Ml =
        (n(481),
        Object(xe.a)(
          Tl,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e(
              "div",
              {
                directives: [
                  {
                    name: "show",
                    rawName: "v-show",
                    value: this.show,
                    expression: "show",
                  },
                ],
                staticClass: "dialog",
              },
              [
                e("div", { ref: "title", staticClass: "title" }, [
                  e("span", [this._v(this._s(this.roomName))]),
                ]),
                e("message-list", {
                  attrs: { rid: this.rid, show: this.show },
                }),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "31740c3f",
          null
        ).exports),
      Bl = {
        props: ["type"],
        methods: {
          onClick: function (t) {
            this.$emit("click", t);
          },
        },
      },
      Dl =
        (n(482),
        Object(xe.a)(
          Bl,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e(
              "div",
              { staticClass: "placeholder", on: { click: this.onClick } },
              [
                e("div", {
                  staticClass: "placeholder-img",
                  class: { "is-im": "im" === this.type },
                }),
                "im" === this.type
                  ? e("div", { staticClass: "tip" }, [
                      this._v("没有新的未读消息呢，快找小伙伴聊天吧，"),
                    ])
                  : this._e(),
              ]
            );
          },
          [],
          !1,
          null,
          "a9b3a73e",
          null
        ).exports);
    function Nl(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function Rl(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? Nl(Object(n), !0).forEach(function (e) {
              $l(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : Nl(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function $l(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var Ul = {
        data: function () {
          return {
            currentRid: null,
            currentListPage: 0,
            hasMoreRoomList: !0,
            closePopupShow: !1,
            toCloseRid: null,
            scollBar: null,
          };
        },
        computed: Rl(
          Rl({}, Object(L.c)(["roomList", "currentPage"])),
          {},
          {
            hasThisDialog: function () {
              var t = this;
              return this.roomList.some(function (e) {
                return e.rid === t.currentRid;
              });
            },
            isActive: function () {
              return /archive/.test(this.currentPage);
            },
          }
        ),
        watch: {
          "$route.params": function (t) {
            var e = t.rid;
            e && (this.currentRid = e.replace(/^rid/, ""));
          },
          isActive: function (t) {
            t && this.$bpreport.pv({ spmId: "444.5", logId: "000281" });
          },
        },
        components: {
          ListItem: ml,
          Card: Ie,
          DialogDetail: Ml,
          Placeholder: Dl,
          MyTransition: nn,
          ImPopup: Re,
        },
        created: function () {
          var t = this.$route.params.rid;
          t && (this.currentRid = t.replace(/^rid/, "")),
            this.loadMore(1),
            this.$bpreport.pv({ spmId: "444.5", logId: "000281" });
        },
        mounted: function () {
          this.initScroll(),
            this.$refs.dialogList.addEventListener(
              "scroll",
              this.emitLoadMore,
              !1
            );
        },
        beforeDestroy: function () {
          this.$refs.dialogList.removeEventListener(
            "scroll",
            this.emitLoadMore,
            !1
          );
        },
        methods: Rl(
          Rl({}, Object(L.b)(["getRoomList", "closeArchive"])),
          {},
          {
            initScroll: function () {
              this.scollBar = new ae.a(this.$refs.dialogList, {
                minScrollbarLength: 85,
                maxScrollbarLength: 240,
              });
            },
            emitLoadMore: function () {
              var t = this.$refs.dialogList,
                e = t.scrollTop || t.pageYOffset || t.scrollTop;
              this.$refs.listContentChild.$el.clientHeight -
                this.$refs.dialogList.clientHeight -
                e <
                1 && this.loadMore(1);
            },
            loadMore: function (t) {
              var e = this;
              if (this.hasMoreRoomList || 0 === t)
                return (
                  (this.currentListPage += t || 0),
                  this.getRoomList({ pageNum: this.currentListPage }).then(
                    function (n) {
                      n.length < 1 && (e.hasMoreRoomList = !1),
                        1 === t &&
                          !e.currentRid &&
                          e.roomList.length &&
                          (e.currentRid = e.roomList[0].rid);
                    }
                  )
                );
            },
            closeIt: function (t) {
              (this.closePopupShow = !0), (this.toCloseRid = t);
            },
            onConfirm: function () {
              var t = this;
              this.closeArchive({ rid: this.toCloseRid }).then(function () {
                t.toCloseRid === t.currentRid &&
                  (t.$router.replace("/archive"), (t.currentRid = null)),
                  (t.closePopupShow = !1),
                  (t.toCloseRid = null);
              });
            },
            onCancel: function () {
              (this.closePopupShow = !1), (this.toCloseRid = null);
            },
          }
        ),
      },
      Vl =
        (n(483),
        Object(xe.a)(
          Ul,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "card",
              { staticClass: "whisper" },
              [
                n(
                  "div",
                  {
                    directives: [
                      {
                        name: "show",
                        rawName: "v-show",
                        value: t.roomList.length,
                        expression: "roomList.length",
                      },
                    ],
                    staticClass: "list",
                  },
                  [
                    n("div", { staticClass: "list-title" }, [t._v("历史私信")]),
                    n(
                      "div",
                      { ref: "dialogList", staticClass: "list-content" },
                      [
                        n(
                          "my-transition",
                          {
                            ref: "listContentChild",
                            staticClass: "list-content-child",
                          },
                          t._l(t.roomList, function (e) {
                            return n("list-item", {
                              key: e.rid,
                              attrs: {
                                rid: e.rid,
                                name: e.room_name,
                                avatar: e.avatar_url,
                                "last-word": e.last_msg,
                                "current-rid": t.currentRid,
                                "msg-count": e.msg_count,
                              },
                              on: {
                                close: function (n) {
                                  return t.closeIt(e.rid);
                                },
                              },
                            });
                          }),
                          1
                        ),
                      ],
                      1
                    ),
                  ]
                ),
                n(
                  "div",
                  { staticClass: "dialog" },
                  [
                    t._l(t.roomList, function (e, i) {
                      return n("dialog-detail", {
                        key: e.rid,
                        attrs: {
                          rid: e.rid,
                          show: t.currentRid === e.rid,
                          "room-name": e.room_name,
                        },
                      });
                    }),
                    t.hasThisDialog ? t._e() : n("placeholder"),
                  ],
                  2
                ),
                n(
                  "im-popup",
                  {
                    staticClass: "report-popup",
                    attrs: { show: t.closePopupShow, title: "还是确认下吧..." },
                    on: { onConfirm: t.onConfirm, onCancel: t.onCancel },
                  },
                  [
                    n("div", { staticClass: "content-text" }, [
                      t._v("是否删除该私信"),
                    ]),
                  ]
                ),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "4664fbbe",
          null
        ).exports),
      zl = {
        props: ["checked", "value", "name"],
        data: function () {
          return {};
        },
        computed: {},
        watch: {},
        components: { SVGIcon: ve },
        beforeCreate: function () {},
        created: function () {},
        beforeMount: function () {},
        mounted: function () {},
        beforeDestroy: function () {},
        destroyed: function () {},
        methods: {
          onClick: function (t) {
            this.$emit("click", t);
          },
        },
      },
      Hl =
        (n(484),
        Object(xe.a)(
          zl,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e(
              "label",
              { staticClass: "type-selector" },
              [
                e("input", {
                  staticClass: "radio",
                  attrs: { name: this.name, type: "radio" },
                  domProps: { value: this.value, checked: this.checked },
                  on: { click: this.onClick },
                }),
                e("SVGIcon", {
                  staticClass: "radio-icon",
                  attrs: {
                    name: "radio",
                    type: this.checked ? "selected" : "",
                  },
                }),
                this._t("default"),
              ],
              2
            );
          },
          [],
          !1,
          null,
          "b13cb5f6",
          null
        ).exports);
    function Fl(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function Gl(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function Zl(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? Gl(Object(n), !0).forEach(function (e) {
              ql(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : Gl(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function ql(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var Kl = {
        data: function () {
          return {
            protect: null,
            checkedType: null,
            protectOptions: null,
            deadLine: "",
            list: [
              [
                {
                  name: "msg_notify",
                  displayName: "消息提醒",
                  tips: "（关闭后，消息将不再进行提醒）",
                  options: [
                    { name: "开启", type: 1 },
                    { name: "关闭", type: 3 },
                  ],
                },
              ],
              [
                {
                  name: "msg_protect",
                  displayName: "防骚扰设置",
                  tips: "（开启后，仅会接收到已选择的用户的消息）",
                  options: [
                    { text: "开启", btn: 1 },
                    { text: "关闭", btn: 0 },
                  ],
                },
              ],
              [
                {
                  name: "ai_intercept",
                  displayName: "私信智能拦截",
                  tips: "（开启后，将自动拦截疑似骚扰和不良的会话）",
                  options: [
                    { text: "开启", type: 1 },
                    { text: "关闭", type: 0 },
                  ],
                },
              ],
              [
                {
                  name: "set_comment",
                  displayName: "回复我的消息提醒",
                  tips: "（接受谁的评论消息提醒）",
                  options: [
                    { name: "所有人", type: 0 },
                    { name: "关注的人", type: 1 },
                    { name: "不接受任何消息提醒", type: 2 },
                  ],
                },
                {
                  name: "set_at",
                  displayName: "@我的消息提醒",
                  tips: "（接受谁的@消息提醒）",
                  options: [
                    { name: "所有人", type: 0 },
                    { name: "关注的人", type: 1 },
                    { name: "不接受任何消息提醒", type: 2 },
                  ],
                },
                {
                  name: "set_like",
                  displayName: "收到的赞消息提醒",
                  options: [
                    { name: "开启", type: 0 },
                    { name: "关闭", type: 5 },
                  ],
                },
              ],
              [
                {
                  name: "should_receive_group",
                  displayName: "接收应援团消息",
                  hide: !0,
                  options: [
                    { name: "开启", type: 1 },
                    { name: "关闭", type: 0 },
                  ],
                },
                {
                  name: "is_group_fold",
                  displayName: "收起应援团消息",
                  hide: !0,
                  tips: "（开启后，应援团消息将被折叠在我的应援团内）",
                  options: [
                    { name: "开启", type: 1 },
                    { name: "关闭", type: 0 },
                  ],
                },
              ],
              [
                {
                  name: "receive_unfollow_msg",
                  displayName: "接收未关注人消息",
                  hide: !0,
                  tips: "（若关闭此开关，你将不再收到未关注人的私信，但通知类消息不受影响）",
                  options: [
                    { name: "开启", type: 1 },
                    { name: "关闭", type: 0 },
                  ],
                },
                {
                  name: "show_unfollowed_msg",
                  displayName: "收起未关注人消息",
                  hide: !1,
                  tips: "（开启后，未关注人消息将被折叠起来）",
                  options: [
                    { name: "开启", type: 1 },
                    { name: "关闭", type: 0 },
                  ],
                },
              ],
            ],
          };
        },
        computed: Zl(
          Zl(
            {},
            Object(L.c)([
              "uid",
              "fetchNotifyConfigPromise",
              "notifyConfig",
              "sysSetting",
            ])
          ),
          {},
          {
            isWhiteList: function () {
              return 1 === this.sysSetting.is_receive_unfollow_wl;
            },
          }
        ),
        components: { ImRadio: Hl },
        created: function () {
          var t,
            e = this;
          return ((t = q.a.mark(function t() {
            var n;
            return q.a.wrap(
              function (t) {
                for (;;)
                  switch ((t.prev = t.next)) {
                    case 0:
                      if (!e.fetchNotifyConfigPromise) {
                        t.next = 3;
                        break;
                      }
                      return (t.next = 3), e.fetchNotifyConfigPromise;
                    case 3:
                      try {
                        e.isWhiteList &&
                          ((e.list[4][0].hide = !1),
                          e.notifyConfig.receive_unfollow_msg ||
                            (e.list[4][1].hide = !0));
                      } catch (t) {
                        console.error(t);
                      }
                      return (t.prev = 4), (t.next = 7), jt();
                    case 7:
                      (n = t.sent).list &&
                        n.list.length &&
                        ((e.list[3][0].hide = !1),
                        e.notifyConfig.should_receive_group &&
                          (e.list[3][1].hide = !1)),
                        (t.next = 14);
                      break;
                    case 11:
                      (t.prev = 11), (t.t0 = t.catch(4)), console.error(t.t0);
                    case 14:
                      e.$bpreport.pv({ spmId: "444.6", logId: "000281" }),
                        e.initHarassment();
                    case 16:
                    case "end":
                      return t.stop();
                  }
              },
              t,
              null,
              [[4, 11]]
            );
          })),
          function () {
            var e = this,
              n = arguments;
            return new Promise(function (i, s) {
              var o = t.apply(e, n);
              function r(t) {
                Fl(o, i, s, r, a, "next", t);
              }
              function a(t) {
                Fl(o, i, s, r, a, "throw", t);
              }
              r(void 0);
            });
          })();
        },
        watch: {
          protect: {
            handler: function (t) {
              1 === t
                ? this.list[1].push({
                    name: "msg_protect_limit",
                    displayName: "接收私信的用户范围",
                    tips: "（该设置有效期至".concat(this.deadLine, "）"),
                    options: this.protectOptions || [],
                  })
                : 0 === t && 2 === this.list[1].length && this.list[1].pop();
            },
          },
        },
        methods: Zl(
          Zl({}, Object(L.b)(["setNotifyConfig"])),
          {},
          {
            showConfigOptions: function (t) {
              return "msg_protect" === t[0].name
                ? !(
                    !this.protectOptions ||
                    !this.protectOptions.length ||
                    null === this.protect
                  ) &&
                    t.filter(function (t) {
                      return !t.hide;
                    }).length
                : t.filter(function (t) {
                    return !t.hide;
                  }).length;
            },
            initHarassment: function () {
              var t = this;
              ft(2)
                .then(function (e) {
                  e.code ||
                    null === e.data ||
                    ((t.protect = e.data.is_open),
                    (t.protectOptions = e.data.options),
                    (t.deadLine = e.data.end_time),
                    (t.checkedType = e.data.selected_id));
                })
                .catch(function (t) {
                  console.log("err3---\x3e", t);
                });
            },
            setType: function (t) {
              var e = t.name,
                n = t.num,
                i = t.id,
                s = t.protect;
              if (
                ((0 === i || i) &&
                  (this.switchCheckedType(i), (this.checkedType = i)),
                (0 === s || s) && (this.switchProtect(s), (this.protect = s)),
                this.notifyConfig[e] !== n)
              ) {
                try {
                  this.setNotifyConfig({ name: e, num: n });
                } catch (t) {
                  this.linkMsg(
                    document.getElementById("console-error"),
                    t.msg || t.message,
                    "error",
                    !0
                  );
                }
                "should_receive_group" === e && (this.list[3][1].hide = !n),
                  "receive_unfollow_msg" === e && (this.list[4][1].hide = !n);
              }
            },
            isOptionsChecked: function (t) {
              var e = t.name;
              return t.num === this.notifyConfig[e];
            },
            isChecked: function (t) {
              var e = t.id,
                n = t.protect;
              return 0 === e || e
                ? e === this.checkedType
                : !(0 !== n && !n) && n === this.protect;
            },
            checkedRadio: function (t) {
              var e = t.name,
                n = t.num,
                i = t.protect,
                s = t.id;
              return 0 === n || n
                ? this.isOptionsChecked({ name: e, num: n })
                : this.isChecked({ protect: i, id: s });
            },
            switchProtect: function (t) {
              var e = this;
              if (this.protect !== t) {
                var n = this.checkedType;
                0 === t && (this.checkedType = 0),
                  ht({ id: 0 === t ? n : this.checkedType, isOpen: t })
                    .then(function (t) {
                      t.code ||
                        (t.data &&
                          t.data.end_time &&
                          (e.deadLine = t.data.end_time));
                    })
                    .catch(function (t) {
                      console.log("err1---\x3e", t);
                    });
              }
            },
            switchCheckedType: function (t) {
              var e = this;
              this.checkedType !== t &&
                ht({ id: t, isOpen: this.protect })
                  .then(function (t) {
                    t.code ||
                      (t.data &&
                        t.data.end_time &&
                        (e.deadLine = t.data.end_time));
                  })
                  .catch(function (t) {
                    console.log("err2---\x3e", t);
                  });
            },
          }
        ),
      },
      Wl =
        (n(485),
        Object(xe.a)(
          Kl,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              t._l(t.list, function (e, i) {
                return t.showConfigOptions(e)
                  ? n(
                      "div",
                      { key: i, staticClass: "config" },
                      [
                        n(
                          "transition-group",
                          { attrs: { name: "grow", tag: "div" } },
                          t._l(e, function (e) {
                            return e.hide
                              ? t._e()
                              : n(
                                  "div",
                                  { key: e.name, staticClass: "config-item" },
                                  [
                                    n("div", { staticClass: "text" }, [
                                      n("span", {
                                        domProps: {
                                          textContent: t._s(e.displayName),
                                        },
                                      }),
                                      n("span", {
                                        staticClass: "tip",
                                        domProps: { textContent: t._s(e.tips) },
                                      }),
                                    ]),
                                    n(
                                      "div",
                                      { staticClass: "radio-list" },
                                      t._l(e.options, function (i) {
                                        return n(
                                          "im-radio",
                                          {
                                            key:
                                              (i.name || i.text) +
                                              "-" +
                                              (i.type || i.id || i.btn),
                                            staticClass: "radio-selector",
                                            attrs: {
                                              checked: t.checkedRadio({
                                                name: e.name,
                                                num: i.type,
                                                protect: i.btn,
                                                id: i.id,
                                              }),
                                              value: i.type || i.id || i.btn,
                                              name: "notify-type",
                                            },
                                            on: {
                                              click: function (n) {
                                                return t.setType({
                                                  name: e.name,
                                                  num: i.type,
                                                  id: i.id,
                                                  protect: i.btn,
                                                });
                                              },
                                            },
                                          },
                                          [t._v(t._s(i.name || i.text))]
                                        );
                                      }),
                                      1
                                    ),
                                  ]
                                );
                          }),
                          0
                        ),
                      ],
                      1
                    )
                  : t._e();
              }),
              0
            );
          },
          [],
          !1,
          null,
          "c33503c6",
          null
        ).exports),
      Jl = {
        props: ["value"],
        methods: {
          handleClick: function () {
            this.$emit("input", !this.value);
          },
        },
      },
      Yl =
        (n(486),
        Object(xe.a)(
          Jl,
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e(
              "div",
              {
                staticClass: "toggle",
                class: { active: this.value },
                on: { click: this.handleClick },
              },
              [e("div", { staticClass: "dot", class: { active: this.value } })]
            );
          },
          [],
          !1,
          null,
          "036bb81a",
          null
        ).exports),
      Ql = {
        props: ["size", "checked", "color", "maxNum", "checkNum", "square"],
        data: function () {
          return {};
        },
        computed: {
          checkboxStyle: function () {
            var t = this.color;
            return (
              this.disabled && (t = "#D0D0D0"),
              "width: "
                .concat(this.size, "px; height: ")
                .concat(this.size, "px; border-color: ")
                .concat(t, ";")
            );
          },
          disabled: function () {
            return (
              void 0 !== this.maxNum &&
              1 !== this.maxNum &&
              this.maxNum > 1 &&
              this.checkNum < this.maxNum
            );
          },
        },
        methods: {
          onClick: function () {
            this.$emit("change");
          },
        },
      };
    n(487);
    function Xl(t, e, n, i, s, o, r) {
      try {
        var a = t[o](r),
          c = a.value;
      } catch (t) {
        return void n(t);
      }
      a.done ? e(c) : Promise.resolve(c).then(i, s);
    }
    function tu(t) {
      return function () {
        var e = this,
          n = arguments;
        return new Promise(function (i, s) {
          var o = t.apply(e, n);
          function r(t) {
            Xl(o, i, s, r, a, "next", t);
          }
          function a(t) {
            Xl(o, i, s, r, a, "throw", t);
          }
          r(void 0);
        });
      };
    }
    function eu(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function nu(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? eu(Object(n), !0).forEach(function (e) {
              iu(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : eu(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function iu(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var su = {
        components: {
          Toggle: Yl,
          ConfirmPopup: Pn,
          EmojiBox: go,
          SVGIcon: ve,
          Checkbox: Object(xe.a)(
            Ql,
            function () {
              var t = this.$createElement;
              return (this._self._c || t)("div", {
                staticClass: "checkbox",
                class: { checked: this.checked, square: this.square },
                style: this.checkboxStyle,
                on: { click: this.onClick },
              });
            },
            [],
            !1,
            null,
            "03f3b8dc",
            null
          ).exports,
        },
        data: function () {
          return {
            currentTabIndex: 0,
            tabs: [
              {
                title: "被关注回复",
                desc: "开启后，粉丝关注你时将会自动通过您的账号，在私信中给TA发送你设置的内容。<br/>保存后离开该页面，设置将立即生效。",
                name: "followed_reply",
                type: 1,
                toggle: !1,
              },
              {
                title: "关键词回复",
                desc: "开启后，当用户给你发送的私信内容命中提前设定好的规则时，会自动将你设定的对应内容回复给TA。 <br/>保存后离开该页面，设置将立即生效。",
                name: "keys_reply",
                type: 2,
                toggle: !1,
              },
              {
                title: "收到消息回复",
                desc: "开启后，用户给你发送未命中关键词的私信，会将你设置的内容自动回复给该用户。 <br/>保存后离开该页面，设置将立即生效。",
                name: "recv_reply",
                type: 3,
                toggle: !1,
              },
              {
                title: "大航海上船回复",
                desc: "开启后，用户首次开通大航海时，将会自动通过你的账号，在私信中给TA发送你设置的内容。",
                name: "voyage_reply",
                type: 5,
                toggle: !1,
                hidden: !0,
              },
            ],
            textareaHeight: 200,
            confirmVisible: !1,
            confirmText: "你有内容未保存，是否继续退出？",
            emojiBoxVisible: !1,
            serverText: void 0,
            currentText: "",
            searchText: "",
            keywordList: [],
            showPush: !1,
            showHelper: !1,
            hoverTimer: null,
            isOpenPush: !1,
            isOpenPush_init: !1,
          };
        },
        computed: nu(
          nu(
            {},
            Object(L.c)([
              "uid",
              "fetchNotifyConfigPromise",
              "notifyConfig",
              "sysSetting",
            ])
          ),
          {},
          {
            saveDisabled: function () {
              return (
                !this.currentText ||
                (void 0 !== this.serverText &&
                  this.serverText === this.currentText &&
                  !this.autoReplyRecommendPushChanged)
              );
            },
            autoReplyRecommendPushChanged: function () {
              return (
                1 === this.tabs[this.currentTabIndex].type &&
                this.isOpenPush_init !== this.isOpenPush
              );
            },
            filteredList: function () {
              var t = this;
              return this.keywordList.filter(function (e) {
                return e.title && -1 !== e.title.indexOf(t.searchText);
              });
            },
            isShowAutoPush: function () {
              return (
                this.showPush &&
                1 === this.tabs[this.currentTabIndex].type &&
                this.currentText
              );
            },
          }
        ),
        watch: {
          "$route.query.tab": function (t) {
            var e = Number(t) || 0;
            e >= 0 && e < 4 && this.switchTab(e);
          },
          currentText: function (t, e) {
            !e &&
              !this.serverText &&
              t &&
              this.showPush &&
              (this.isOpenPush = !0);
          },
        },
        beforeRouteLeave: function (t, e, n) {
          var i = this;
          2 !== this.tabs[this.currentTabIndex].type &&
          this.tabs[this.currentTabIndex].toggle &&
          !this.saveDisabled
            ? ((this.confirmText = "你有内容未保存，是否继续退出？"),
              (this.confirmVisible = !0),
              (this.confirmFunc = function () {
                (i.confirmVisible = !1), n();
              }))
            : n();
        },
        created: function () {
          var t = this;
          return tu(
            q.a.mark(function e() {
              return q.a.wrap(function (e) {
                for (;;)
                  switch ((e.prev = e.next)) {
                    case 0:
                      if (
                        (1 === t.sysSetting.is_voyage &&
                          t.$set(
                            t.tabs,
                            "3",
                            nu(nu({}, t.tabs[3]), {}, { hidden: !1 })
                          ),
                        t.switchTab(Number(t.$route.query.tab) || 0, !0),
                        !t.fetchNotifyConfigPromise)
                      ) {
                        e.next = 5;
                        break;
                      }
                      return (e.next = 5), t.fetchNotifyConfigPromise;
                    case 5:
                      t.tabs.forEach(function (e, n) {
                        t.tabs[n].toggle = t.notifyConfig[e.name];
                      }),
                        (t.isOpenPush =
                          !!t.notifyConfig.recommend_followed_reply || !1),
                        (t.isOpenPush_init =
                          !!t.notifyConfig.recommend_followed_reply || !1),
                        (t.showPush =
                          !!t.sysSetting.is_auto_reply_recommend_available ||
                          !1);
                    case 9:
                    case "end":
                      return e.stop();
                  }
              }, e);
            })
          )();
        },
        methods: nu(
          nu({}, Object(L.b)(["setNotifyConfig"])),
          {},
          {
            handleTogglePush: function () {
              this.isOpenPush = !this.isOpenPush;
            },
            handleShowHelper: function () {
              var t = this;
              clearTimeout(this.hoverTimer),
                (this.hoverTimer = setTimeout(function () {
                  t.showHelper = !0;
                }, 200));
            },
            handleHideHelper: function () {
              var t = this;
              clearTimeout(this.hoverTimer),
                (this.hoverTimer = setTimeout(function () {
                  t.showHelper = !1;
                }, 200));
            },
            onEmojiBoxClose: function () {
              this.emojiBoxVisible = !1;
            },
            switchTab: function (t) {
              var e = this,
                n =
                  arguments.length > 1 &&
                  void 0 !== arguments[1] &&
                  arguments[1];
              this.tabs[t].hidden ||
                ((t !== this.currentTabIndex || n) &&
                  ((2 !== this.tabs[this.currentTabIndex].type &&
                    this.tabs[this.currentTabIndex].toggle &&
                    !this.saveDisabled) ||
                  this.autoReplyRecommendPushChanged
                    ? ((this.confirmText = "你有内容未保存，是否继续退出？"),
                      (this.confirmVisible = !0),
                      (this.confirmFunc = function () {
                        (e.currentTabIndex = t),
                          e.getCurrentTabReplyConfig(),
                          (e.confirmVisible = !1),
                          (e.isOpenPush = e.isOpenPush_init);
                      }))
                    : ((this.currentTabIndex = t),
                      this.getCurrentTabReplyConfig())));
            },
            getCurrentTabReplyConfig: function () {
              var t,
                e = this;
              ((t = {
                type: [this.tabs[this.currentTabIndex].type],
                uid: this.uid,
              }),
              E({
                method: "get",
                urlWithCSRF: !0,
                url: "//api.vc.bilibili.com/x/im/auto_reply/get_reply_text",
                data: t,
              })).then(function (t) {
                2 !== e.tabs[e.currentTabIndex].type
                  ? ((e.serverText = (t.texts && t.texts[0].reply) || ""),
                    (e.currentText = e.serverText))
                  : (e.keywordList = (t.texts || []).map(function (t) {
                      return nu({ expend: !1 }, t);
                    }));
              });
            },
            handleToggle: function (t) {
              var e = this;
              return tu(
                q.a.mark(function n() {
                  var i;
                  return q.a.wrap(
                    function (n) {
                      for (;;)
                        switch ((n.prev = n.next)) {
                          case 0:
                            return (
                              (n.prev = 0),
                              (i = !e.tabs[t].toggle),
                              (n.next = 4),
                              e.setNotifyConfig({
                                name: e.tabs[t].name,
                                num: Number(i),
                              })
                            );
                          case 4:
                            (e.tabs[t].toggle = i), (n.next = 10);
                            break;
                          case 7:
                            (n.prev = 7),
                              (n.t0 = n.catch(0)),
                              e.linkMsg(
                                document.getElementById("console-error"),
                                n.t0.msg || n.t0.message,
                                "error",
                                !0
                              );
                          case 10:
                          case "end":
                            return n.stop();
                        }
                    },
                    n,
                    null,
                    [[0, 7]]
                  );
                })
              )();
            },
            handleInput: function (t) {
              var e = t.target;
              (this.currentText = e.value.replace(/^[\r\n]*/g, "")),
                (e.style.height = 0);
              var n = e.scrollHeight;
              (e.style.height = n + "px"),
                (e.style.overflow = n > 200 ? "auto" : "hidden");
            },
            handleSave: function () {
              var t = this;
              return tu(
                q.a.mark(function e() {
                  return q.a.wrap(function (e) {
                    for (;;)
                      switch ((e.prev = e.next)) {
                        case 0:
                          if (!t.saveDisabled) {
                            e.next = 2;
                            break;
                          }
                          return e.abrupt("return");
                        case 2:
                          if (!t.autoReplyRecommendPushChanged || !t.showPush) {
                            e.next = 6;
                            break;
                          }
                          return (
                            (e.next = 5),
                            t.setNotifyConfig({
                              name: "recommend_followed_reply",
                              num: t.isOpenPush ? 1 : 0,
                            })
                          );
                        case 5:
                          t.isOpenPush_init = t.isOpenPush;
                        case 6:
                          Ot({
                            type: t.tabs[t.currentTabIndex].type,
                            reply: t.currentText,
                          })
                            .then(function () {
                              (t.serverText = t.currentText),
                                t.linkMsg(
                                  document.getElementById("console-error"),
                                  "保存成功",
                                  "success",
                                  !0
                                );
                            })
                            .catch(function (e) {
                              t.linkMsg(
                                document.getElementById("console-error"),
                                e.msg || e.message,
                                "error",
                                !0
                              );
                            });
                        case 7:
                        case "end":
                          return e.stop();
                      }
                  }, e);
                })
              )();
            },
            handleClear: function () {
              (this.$refs.textarea.value = ""), (this.currentText = "");
            },
            handleConfirm: function () {
              "function" == typeof this.confirmFunc && this.confirmFunc();
            },
            openEmojiBox: function (t) {
              var e = this;
              (this.emojiBoxVisible = !0),
                (this.handleGlobalClick = function (t) {
                  cn(t).some(function (t) {
                    return t === e.$refs.emojiBtn;
                  }) || e.closeEmojiBox();
                }),
                setTimeout(function () {
                  document.addEventListener("click", e.handleGlobalClick);
                }, 0);
            },
            closeEmojiBox: function () {
              this.emojiBoxVisible = !1;
            },
            handleEmojiInput: function (t) {
              var e = this.$refs.textarea,
                n = D(e);
              this.currentText.length + t.length > 500 ||
                (n
                  ? ((this.currentText =
                      this.currentText.slice(0, n.start) +
                      t +
                      this.currentText.slice(n.end)),
                    this.$nextTick(function () {
                      V(e, n.start + t.length);
                    }))
                  : (this.currentText += t));
            },
            kwString: function (t) {
              var e = (t.key1 ? t.key1 : t.key2 || "").split("，");
              return e.slice(0, 3).join("，") + (e.length > 3 ? "..." : "");
            },
            toggleExpend: function (t) {
              t.expend = !t.expend;
            },
            handleDeleteItem: function (t) {
              var e = this;
              (this.confirmText =
                "确定删除该条关键词回复规则吗？删除后无法恢复"),
                (this.confirmVisible = !0),
                (this.confirmFunc = function () {
                  var n;
                  ((n = { id: t.id }),
                  E({
                    method: "post",
                    urlWithCSRF: !0,
                    url: "//api.vc.bilibili.com/x/im/auto_reply/del_reply_text",
                    data: n,
                  })).then(function () {
                    var n = e.keywordList.findIndex(function (e) {
                      return e.id === t.id;
                    });
                    e.keywordList.splice(n, 1), (e.confirmVisible = !1);
                  });
                });
            },
            handleEditItem: function (t) {
              if (t)
                sessionStorage.setItem(
                  "imAutoReplyItemEditing",
                  JSON.stringify(t)
                );
              else {
                if (this.keywordList && this.keywordList.length >= 20)
                  return void this.linkMsg(
                    document.getElementById("console-error"),
                    "规则数量已达上限，请删除后新建",
                    "error",
                    !0
                  );
                sessionStorage.removeItem("imAutoReplyItemEditing");
              }
              this.$router.push("/autoreply/keyword");
            },
          }
        ),
      },
      ou =
        (n(488),
        Object(xe.a)(
          su,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n("div", { staticClass: "autoreply" }, [
              n(
                "div",
                { staticClass: "card" },
                [
                  n(
                    "div",
                    { staticClass: "header" },
                    t._l(t.tabs, function (e, i) {
                      return e.hidden
                        ? t._e()
                        : n("span", {
                            staticClass: "tab",
                            class: { active: i === t.currentTabIndex },
                            domProps: { textContent: t._s(e.title) },
                            on: {
                              click: function (e) {
                                return t.$router.push("/autoreply?tab=" + i);
                              },
                            },
                          });
                    }),
                    0
                  ),
                  n(
                    "div",
                    { staticClass: "content" },
                    [
                      n("div", { staticClass: "row" }, [
                        n("div", { staticClass: "left" }, [
                          n("div", {
                            staticClass: "title",
                            domProps: {
                              textContent: t._s(
                                t.tabs[t.currentTabIndex].title
                              ),
                            },
                          }),
                          n("div", {
                            staticClass: "desc",
                            domProps: {
                              innerHTML: t._s(t.tabs[t.currentTabIndex].desc),
                            },
                          }),
                        ]),
                        n(
                          "div",
                          { staticClass: "right" },
                          [
                            n("Toggle", {
                              attrs: {
                                value: t.tabs[t.currentTabIndex].toggle,
                              },
                              on: {
                                input: function (e) {
                                  return t.handleToggle(t.currentTabIndex);
                                },
                              },
                            }),
                          ],
                          1
                        ),
                      ]),
                      n("transition", { attrs: { name: "grow", tag: "div" } }, [
                        [1, 3, 5].some(function (e) {
                          return e === t.tabs[t.currentTabIndex].type;
                        }) && t.tabs[t.currentTabIndex].toggle
                          ? n("div", [
                              n("div", { staticClass: "input-section" }, [
                                n("textarea", {
                                  ref: "textarea",
                                  attrs: {
                                    maxlength: "500",
                                    placeholder: "输入回复内容",
                                  },
                                  domProps: { value: t.currentText },
                                  on: { input: t.handleInput },
                                }),
                                n("div", { staticClass: "row" }, [
                                  n(
                                    "span",
                                    {
                                      ref: "emojiBtn",
                                      staticClass: "emoji-btn",
                                      class: { active: t.emojiBoxVisible },
                                      on: { click: t.openEmojiBox },
                                    },
                                    [
                                      n("SVGIcon", {
                                        staticClass: "emoji-icon",
                                        attrs: { name: "emoji-face" },
                                      }),
                                      t._v("表情"),
                                      t.emojiBoxVisible
                                        ? n("emoji-box", {
                                            ref: "emojibtn",
                                            staticClass: "bp-emoji-box2",
                                            attrs: {
                                              "is-from-message": "",
                                              field: null,
                                              revert: !0,
                                              "select-handler":
                                                t.handleEmojiInput,
                                              "emoji-type": [
                                                "kaomojis",
                                                "dynamicEmojis",
                                              ],
                                              "spm-type": "MESSAGE",
                                              "pub-type": "1",
                                            },
                                            on: { close: t.onEmojiBoxClose },
                                          })
                                        : t._e(),
                                    ],
                                    1
                                  ),
                                  n("span", {
                                    staticClass: "remain",
                                    domProps: {
                                      textContent: t._s(
                                        "还可输入" +
                                          Math.max(
                                            500 - t.currentText.length,
                                            0
                                          ) +
                                          "字"
                                      ),
                                    },
                                  }),
                                ]),
                              ]),
                              [1, 3].some(function (e) {
                                return t.tabs[t.currentTabIndex].type === e;
                              })
                                ? n(
                                    "div",
                                    { staticClass: "throttle-tips-fixed" },
                                    [t._v("对同一个用户一天内仅自动回复一次")]
                                  )
                                : t._e(),
                              t.isShowAutoPush
                                ? n(
                                    "div",
                                    { staticClass: "throttle-tips" },
                                    [
                                      n("checkbox", {
                                        staticClass: "push-recommend-checkbox",
                                        attrs: {
                                          size: 14,
                                          checked: t.isOpenPush,
                                          square: !0,
                                        },
                                        nativeOn: {
                                          click: function (e) {
                                            return t.handleTogglePush(e);
                                          },
                                        },
                                      }),
                                      n("span", [
                                        t._v(
                                          "被关注后，向关注我的人推送我的往期作品"
                                        ),
                                      ]),
                                      n(
                                        "span",
                                        {
                                          staticClass: "help-icon",
                                          on: {
                                            mouseenter: t.handleShowHelper,
                                            mouseleave: t.handleHideHelper,
                                          },
                                        },
                                        [
                                          n("transition", [
                                            n(
                                              "div",
                                              {
                                                directives: [
                                                  {
                                                    name: "show",
                                                    rawName: "v-show",
                                                    value: t.showHelper,
                                                    expression: "showHelper",
                                                  },
                                                ],
                                                staticClass: "help-text",
                                              },
                                              [
                                                t._v(
                                                  "当用户关注了你，系统将额外向Ta推送你往期的精彩作品，让TA更好地了解你。"
                                                ),
                                              ]
                                            ),
                                          ]),
                                        ],
                                        1
                                      ),
                                    ],
                                    1
                                  )
                                : t._e(),
                              n("div", { staticClass: "row btnrow" }, [
                                n(
                                  "span",
                                  {
                                    staticClass: "btn save",
                                    class: { disabled: t.saveDisabled },
                                    on: { click: t.handleSave },
                                  },
                                  [t._v("保存")]
                                ),
                                n(
                                  "span",
                                  {
                                    staticClass: "btn clear",
                                    on: { click: t.handleClear },
                                  },
                                  [t._v("清除内容")]
                                ),
                              ]),
                            ])
                          : t._e(),
                      ]),
                      n("transition", { attrs: { name: "grow", tag: "div" } }, [
                        2 === t.tabs[t.currentTabIndex].type &&
                        t.tabs[t.currentTabIndex].toggle
                          ? n("div", [
                              n("hr", { staticClass: "chr" }),
                              n("div", { staticClass: "kw-search-row" }, [
                                n(
                                  "div",
                                  { staticClass: "search-section" },
                                  [
                                    n("SVGIcon", {
                                      staticClass: "search-icon",
                                      attrs: { name: "search" },
                                    }),
                                    t.searchText
                                      ? n("SVGIcon", {
                                          staticClass: "clear-icon",
                                          attrs: { name: "close-circle" },
                                          nativeOn: {
                                            click: function (e) {
                                              t.searchText = "";
                                            },
                                          },
                                        })
                                      : t._e(),
                                    n("input", {
                                      directives: [
                                        {
                                          name: "model",
                                          rawName: "v-model",
                                          value: t.searchText,
                                          expression: "searchText",
                                        },
                                      ],
                                      staticClass: "kw-search",
                                      attrs: {
                                        placeholder: "输入规则名进行搜索",
                                      },
                                      domProps: { value: t.searchText },
                                      on: {
                                        input: function (e) {
                                          e.target.composing ||
                                            (t.searchText = e.target.value);
                                        },
                                      },
                                    }),
                                  ],
                                  1
                                ),
                                n(
                                  "span",
                                  {
                                    staticClass: "create-btn",
                                    on: {
                                      click: function (e) {
                                        return t.handleEditItem();
                                      },
                                    },
                                  },
                                  [t._v("新建规则")]
                                ),
                              ]),
                              t.filteredList.length
                                ? t._e()
                                : n("div", { staticClass: "list-ph" }, [
                                    n("span", {
                                      domProps: {
                                        textContent: t._s(
                                          t.searchText
                                            ? "未搜索到任何规则"
                                            : "未设置任何规则"
                                        ),
                                      },
                                    }),
                                  ]),
                              t.filteredList.length
                                ? n(
                                    "div",
                                    { staticClass: "list" },
                                    [
                                      n("div", { staticClass: "list-header" }, [
                                        n("span", { staticClass: "name" }, [
                                          t._v("规则名称"),
                                        ]),
                                        n("span", { staticClass: "kw" }, [
                                          t._v("关键词"),
                                        ]),
                                        n("span", { staticClass: "reply" }, [
                                          t._v("回复内容"),
                                        ]),
                                        n("span", { staticClass: "options" }, [
                                          t._v("操作"),
                                        ]),
                                      ]),
                                      t._l(t.filteredList, function (e) {
                                        return [
                                          n("div", { staticClass: "item" }, [
                                            n("span", { staticClass: "name" }, [
                                              n("span", {
                                                domProps: {
                                                  textContent: t._s(e.title),
                                                },
                                              }),
                                            ]),
                                            n("span", { staticClass: "kw" }, [
                                              n("span", {
                                                domProps: {
                                                  textContent: t._s(
                                                    e.expend
                                                      ? ""
                                                      : t.kwString(e)
                                                  ),
                                                },
                                              }),
                                            ]),
                                            n(
                                              "span",
                                              { staticClass: "reply" },
                                              [
                                                n("span", {
                                                  domProps: {
                                                    textContent: t._s(
                                                      e.expend
                                                        ? ""
                                                        : e.reply || ""
                                                    ),
                                                  },
                                                }),
                                              ]
                                            ),
                                            n(
                                              "span",
                                              { staticClass: "option" },
                                              [
                                                n("span", {
                                                  domProps: {
                                                    textContent: t._s(
                                                      e.expend ? "收起" : "详情"
                                                    ),
                                                  },
                                                  on: {
                                                    click: function (n) {
                                                      return t.toggleExpend(e);
                                                    },
                                                  },
                                                }),
                                              ]
                                            ),
                                            n(
                                              "span",
                                              { staticClass: "option" },
                                              [
                                                n(
                                                  "span",
                                                  {
                                                    on: {
                                                      click: function (n) {
                                                        return t.handleEditItem(
                                                          e
                                                        );
                                                      },
                                                    },
                                                  },
                                                  [t._v("编辑")]
                                                ),
                                              ]
                                            ),
                                            n(
                                              "span",
                                              { staticClass: "option" },
                                              [
                                                n(
                                                  "span",
                                                  {
                                                    on: {
                                                      click: function (n) {
                                                        return t.handleDeleteItem(
                                                          e
                                                        );
                                                      },
                                                    },
                                                  },
                                                  [t._v("删除")]
                                                ),
                                              ]
                                            ),
                                          ]),
                                          e.expend
                                            ? n(
                                                "div",
                                                { staticClass: "item-detail" },
                                                [
                                                  n(
                                                    "div",
                                                    {
                                                      staticClass: "detail-row",
                                                    },
                                                    [
                                                      n(
                                                        "div",
                                                        {
                                                          staticClass: "title",
                                                        },
                                                        [t._v("关键词")]
                                                      ),
                                                      n(
                                                        "div",
                                                        {
                                                          staticClass:
                                                            "detail-content",
                                                        },
                                                        [
                                                          e.key1
                                                            ? n("div", {
                                                                domProps: {
                                                                  textContent:
                                                                    t._s(
                                                                      "精准匹配：" +
                                                                        e.key1
                                                                    ),
                                                                },
                                                              })
                                                            : t._e(),
                                                          e.key2
                                                            ? n("div", {
                                                                domProps: {
                                                                  textContent:
                                                                    t._s(
                                                                      "模糊匹配：" +
                                                                        e.key2
                                                                    ),
                                                                },
                                                              })
                                                            : t._e(),
                                                        ]
                                                      ),
                                                    ]
                                                  ),
                                                  n(
                                                    "div",
                                                    {
                                                      staticClass: "detail-row",
                                                    },
                                                    [
                                                      n(
                                                        "div",
                                                        {
                                                          staticClass: "title",
                                                        },
                                                        [t._v("回复内容")]
                                                      ),
                                                      n("span", {
                                                        domProps: {
                                                          textContent: t._s(
                                                            e.reply || ""
                                                          ),
                                                        },
                                                      }),
                                                    ]
                                                  ),
                                                ]
                                              )
                                            : t._e(),
                                        ];
                                      }),
                                    ],
                                    2
                                  )
                                : t._e(),
                            ])
                          : t._e(),
                      ]),
                    ],
                    1
                  ),
                  n("ConfirmPopup", {
                    attrs: { show: t.confirmVisible, content: t.confirmText },
                    on: {
                      onCancel: function (e) {
                        t.confirmVisible = !1;
                      },
                      onConfirm: t.handleConfirm,
                    },
                  }),
                ],
                1
              ),
            ]);
          },
          [],
          !1,
          null,
          "f91cf42c",
          null
        ).exports);
    function ru(t, e) {
      var n = Object.keys(t);
      if (Object.getOwnPropertySymbols) {
        var i = Object.getOwnPropertySymbols(t);
        e &&
          (i = i.filter(function (e) {
            return Object.getOwnPropertyDescriptor(t, e).enumerable;
          })),
          n.push.apply(n, i);
      }
      return n;
    }
    function au(t) {
      for (var e = 1; e < arguments.length; e++) {
        var n = null != arguments[e] ? arguments[e] : {};
        e % 2
          ? ru(Object(n), !0).forEach(function (e) {
              cu(t, e, n[e]);
            })
          : Object.getOwnPropertyDescriptors
          ? Object.defineProperties(t, Object.getOwnPropertyDescriptors(n))
          : ru(Object(n)).forEach(function (e) {
              Object.defineProperty(
                t,
                e,
                Object.getOwnPropertyDescriptor(n, e)
              );
            });
      }
      return t;
    }
    function cu(t, e, n) {
      return (
        e in t
          ? Object.defineProperty(t, e, {
              value: n,
              enumerable: !0,
              configurable: !0,
              writable: !0,
            })
          : (t[e] = n),
        t
      );
    }
    var lu = {
        components: { ConfirmPopup: Pn, EmojiBox: go, SVGIcon: ve },
        data: function () {
          return {
            serverItem: null,
            currentItem: { title: "", key1: "", key2: "", reply: "" },
            emojiBoxVisible: !1,
            confirmVisible: !1,
            saving: !1,
          };
        },
        beforeRouteLeave: function (t, e, n) {
          var i = this;
          this.saveDisabled
            ? n()
            : ((this.confirmVisible = !0),
              (this.confirmFunc = function () {
                (i.confirmVisible = !1), n();
              }));
        },
        created: function () {
          (this.serverItem = JSON.parse(
            sessionStorage.getItem("imAutoReplyItemEditing")
          )),
            (this.currentItem = au(au({}, this.currentItem), this.serverItem));
        },
        mounted: function () {},
        computed: {
          saveDisabled: function () {
            return (
              !this.currentItem.title ||
              (!this.currentItem.key1 && !this.currentItem.key2) ||
              !this.currentItem.reply ||
              (!!this.serverItem &&
                this.currentItem.title === this.serverItem.title &&
                this.currentItem.key1 === this.serverItem.key1 &&
                this.currentItem.key2 === this.serverItem.key2 &&
                this.currentItem.reply === this.serverItem.reply)
            );
          },
        },
        methods: {
          onEmojiBoxClose: function () {
            this.emojiBoxVisible = !1;
          },
          handleKWInput: function (t, e) {
            if (void 0 === t.isComposing && void 0 === t.inputType)
              this.currentItem[e] = t.target.value;
            else {
              if (
                void 0 === t.isComposing &&
                "insertCompositionText" === t.inputType
              )
                return;
              (t.target.value = t.target.value
                .split("，")
                .slice(0, 20)
                .join("，")),
                (this.currentItem[e] = t.target.value);
            }
          },
          handleInput: function (t) {
            var e = t.target;
            (this.currentItem.reply = e.value), (e.style.height = 0);
            var n = e.scrollHeight;
            (e.style.height = n + "px"),
              (e.style.overflow = n > 200 ? "auto" : "hidden");
          },
          OpenEmojiBox: function (t) {
            var e = this;
            (this.emojiBoxVisible = !0),
              (this.handleGlobalClick = function (t) {
                cn(t).some(function (t) {
                  return t === e.$refs.emojiBtn;
                }) || e.closeEmojiBox();
              }),
              setTimeout(function () {
                document.addEventListener("click", e.handleGlobalClick);
              }, 0);
          },
          closeEmojiBox: function () {
            this.emojiBoxVisible = !1;
          },
          handleEmojiInput: function (t) {
            var e = this.$refs.textarea,
              n = D(e);
            this.currentItem.reply.length + t.length > 500 ||
              (n
                ? ((this.currentItem.reply =
                    this.currentItem.reply.slice(0, n.start) +
                    t +
                    this.currentItem.reply.slice(n.end)),
                  this.$nextTick(function () {
                    V(e, n.start + t.length);
                  }))
                : (this.currentItem.reply += t));
          },
          handleSave: function () {
            var t = this;
            if (!this.saveDisabled && !this.saving) {
              this.saving = !0;
              var e = ["key1", "key2"].find(function (e) {
                return t.currentItem[e].split("，").length > 20;
              });
              e
                ? this.linkMsg(
                    document.getElementById("console-error"),
                    "".concat(
                      "key1" === e ? "精确匹配" : "模糊匹配",
                      "关键词不能超过20个"
                    ),
                    "error",
                    !0
                  )
                : Ot({
                    id: this.currentItem.id || 0,
                    type: 2,
                    title: this.currentItem.title,
                    key1: this.currentItem.key1,
                    key2: this.currentItem.key2,
                    reply: this.currentItem.reply,
                  })
                    .then(function () {
                      (t.serverItem = au({}, t.currentItem)),
                        sessionStorage.setItem(
                          "imAutoReplyItemEditing",
                          JSON.stringify(t.serverItem)
                        ),
                        t.linkMsg(t.$refs.saveBtn, "保存成功", "success"),
                        (t.saving = !1);
                    })
                    .catch(function (e) {
                      t.linkMsg(
                        document.getElementById("console-error"),
                        e.msg || e.message,
                        "error",
                        !0
                      ),
                        (t.saving = !1);
                    });
            }
          },
          handleClear: function () {
            (this.currentItem.title = ""),
              (this.currentItem.key1 = ""),
              (this.currentItem.key2 = ""),
              (this.currentItem.reply = "");
          },
          handleConfirm: function () {
            "function" == typeof this.confirmFunc && this.confirmFunc();
          },
        },
      },
      uu =
        (n(489),
        Object(xe.a)(
          lu,
          function () {
            var t = this,
              e = t.$createElement,
              n = t._self._c || e;
            return n(
              "div",
              { staticClass: "card" },
              [
                n("div", { staticClass: "title" }, [t._v("设置关键词回复")]),
                n("div", { staticClass: "label" }, [t._v("规则名称")]),
                n("input", {
                  directives: [
                    {
                      name: "model",
                      rawName: "v-model",
                      value: t.currentItem.title,
                      expression: "currentItem.title",
                    },
                  ],
                  staticClass: "name",
                  attrs: {
                    placeholder: "填写规则名称，最多30字",
                    maxlength: "30",
                  },
                  domProps: { value: t.currentItem.title },
                  on: {
                    input: function (e) {
                      e.target.composing ||
                        t.$set(t.currentItem, "title", e.target.value);
                    },
                  },
                }),
                n("div", { staticClass: "label kw" }, [t._v("关键词")]),
                n("div", { staticClass: "tips" }, [
                  t._v("精确匹配和模糊匹配至少填写其中一项"),
                ]),
                n("label", { staticClass: "input-label" }, [
                  n("span", [t._v("精确匹配")]),
                  n("input", {
                    attrs: {
                      placeholder: "多个关键词用中文逗号分隔，最多填写20个词",
                    },
                    domProps: { value: t.currentItem.key1 },
                    on: {
                      input: function (e) {
                        return t.handleKWInput(e, "key1");
                      },
                    },
                  }),
                ]),
                n("label", { staticClass: "input-label second" }, [
                  n("span", [t._v("模糊匹配")]),
                  n("input", {
                    attrs: {
                      placeholder: "多个关键词用中文逗号分隔，最多填写20个词",
                    },
                    domProps: { value: t.currentItem.key2 },
                    on: {
                      input: function (e) {
                        return t.handleKWInput(e, "key2");
                      },
                    },
                  }),
                ]),
                n("div", { staticClass: "label" }, [t._v("回复内容")]),
                n("div", { staticClass: "input-section" }, [
                  n("textarea", {
                    ref: "textarea",
                    attrs: { maxlength: "500", placeholder: "输入回复内容" },
                    domProps: { value: t.currentItem.reply },
                    on: { input: t.handleInput },
                  }),
                  n("div", { staticClass: "row" }, [
                    n(
                      "span",
                      {
                        ref: "emojiBtn",
                        staticClass: "emoji-btn",
                        class: { active: t.emojiBoxVisible },
                        on: { click: t.OpenEmojiBox },
                      },
                      [
                        n("SVGIcon", {
                          staticClass: "emoji-icon",
                          attrs: { name: "emoji-face" },
                        }),
                        t._v("表情"),
                        t.emojiBoxVisible
                          ? n("emoji-box", {
                              ref: "emojibtn",
                              staticClass: "bp-emoji-box1",
                              attrs: {
                                "is-from-message": "",
                                field: null,
                                revert: !0,
                                "select-handler": t.handleEmojiInput,
                                "emoji-type": ["kaomojis", "dynamicEmojis"],
                                "spm-type": "MESSAGE",
                                "pub-type": "1",
                              },
                              on: { close: t.onEmojiBoxClose },
                            })
                          : t._e(),
                      ],
                      1
                    ),
                    n("span", {
                      staticClass: "remain",
                      domProps: {
                        textContent: t._s(
                          "还可输入" +
                            Math.max(500 - t.currentItem.reply.length, 0) +
                            "字"
                        ),
                      },
                    }),
                  ]),
                ]),
                n("div", { staticClass: "row btnrow" }, [
                  n(
                    "span",
                    {
                      ref: "saveBtn",
                      staticClass: "btn save",
                      class: { disabled: t.saveDisabled },
                      on: { click: t.handleSave },
                    },
                    [t._v("保存")]
                  ),
                  n(
                    "span",
                    { staticClass: "btn clear", on: { click: t.handleClear } },
                    [t._v("清除内容")]
                  ),
                ]),
                n("ConfirmPopup", {
                  attrs: {
                    show: t.confirmVisible,
                    content: "你有内容未保存，是否继续退出？",
                  },
                  on: {
                    onCancel: function (e) {
                      t.confirmVisible = !1;
                    },
                    onConfirm: t.handleConfirm,
                  },
                }),
              ],
              1
            );
          },
          [],
          !1,
          null,
          "77dfdf80",
          null
        ).exports);
    r.a.use(O.a);
    var du = new O.a({
      routes: [
        {
          path: "/",
          name: "index",
          component: Xe,
          children: [
            {
              path: "reply",
              name: "reply",
              component: Fn,
              meta: { title: [{ name: "回复我的" }] },
            },
            {
              path: "at",
              name: "at",
              component: ti,
              meta: { title: [{ name: "@ 我的" }] },
            },
            {
              path: "love",
              name: "love",
              component: fi,
              meta: { title: [{ name: "收到的赞" }] },
            },
            {
              path: "love/:id",
              name: "love-detail",
              component: yi,
              meta: {
                title: [
                  { name: "收到的赞", link: "/love" },
                  { name: "点赞详情" },
                ],
              },
            },
            {
              path: "system",
              name: "system",
              component: Ti,
              meta: { title: [{ name: "系统通知" }] },
            },
            {
              path: "whisper/mygroups/:rid?",
              name: "whisper-mygroups",
              component: dl,
              meta: {
                title: [
                  { name: "我的消息", link: "/whisper" },
                  { name: "我的应援团" },
                ],
              },
            },
            {
              path: "whisper/bin/:rid?",
              name: "whisper-bin",
              component: dl,
              meta: {
                title: [
                  { name: "我的消息", link: "/whisper" },
                  { name: "疑似不良消息" },
                ],
              },
            },
            {
              path: "whisper/unfollow/:rid?",
              name: "whisper-unfollow",
              component: dl,
              meta: {
                title: [
                  { name: "我的消息", link: "/whisper" },
                  { name: "未关注的人" },
                ],
              },
            },
            {
              path: "whisper/:rid?",
              name: "whisper",
              component: dl,
              meta: { title: [{ name: "我的消息" }] },
            },
            {
              path: "archive",
              name: "archive",
              component: Vl,
              meta: { title: [{ name: "私信存档" }], keepAlive: !0 },
            },
            {
              path: "archive/:rid",
              name: "archive-detail",
              component: Vl,
              meta: { title: [{ name: "私信存档" }], keepAlive: !0 },
            },
            {
              path: "config",
              name: "config",
              component: Wl,
              meta: { title: [{ name: "消息设置" }] },
            },
            {
              path: "autoreply",
              name: "autoreply",
              component: ou,
              meta: { title: [{ name: "自动回复" }] },
              beforeEnter: function (t, e, n) {
                re.state.sysSetting &&
                re.state.sysSetting.is_auto_reply_available
                  ? n()
                  : n(e);
              },
            },
            {
              path: "autoreply/keyword",
              name: "autoreply-keyword",
              component: uu,
              meta: {
                title: [
                  { name: "自动回复", link: "/autoreply?tab=1" },
                  { name: "设置关键词回复" },
                ],
              },
              beforeEnter: function (t, e, n) {
                re.state.sysSetting &&
                re.state.sysSetting.is_auto_reply_available
                  ? n()
                  : n(e);
              },
            },
          ],
          beforeEnter: function (t, e, n) {
            re.sysSettingFetched ||
              W.a.get().then(function (t) {
                var e, i, s, o, r;
                null != t && null !== (e = t.data) && void 0 !== e && e.mid
                  ? (re.dispatch("getSysSetting").then(function () {
                      return n();
                    }),
                    re.dispatch("setDeviceId", {
                      deviceId: yt(
                        null == t || null === (i = t.data) || void 0 === i
                          ? void 0
                          : i.mid
                      ),
                    }),
                    re.dispatch("setUid", {
                      uid:
                        null == t || null === (s = t.data) || void 0 === s
                          ? void 0
                          : s.mid,
                    }),
                    re.dispatch(
                      "setUname",
                      null == t || null === (o = t.data) || void 0 === o
                        ? void 0
                        : o.uname
                    ),
                    re.dispatch(
                      "setFace",
                      null == t || null === (r = t.data) || void 0 === r
                        ? void 0
                        : r.face
                    ))
                  : (setTimeout(function () {
                      window.location.href =
                        "https://passport.bilibili.com/login";
                    }, 1e3),
                    (window.location.href =
                      "https://passport.bilibili.com/login"));
              });
          },
        },
      ],
    });
    du.afterEach(function (t) {
      "index" === t.name
        ? (du.replace("/reply"),
          re.dispatch("setTitle", [{ name: "回复我的" }]),
          re.dispatch("setCurrentPage", "reply"))
        : (re.dispatch("setTitle", t.meta.title),
          re.dispatch("setCurrentPage", t.name.split(/\/|-/g)[0]));
    });
    var pu = du,
      mu =
        (n(490),
        Object(xe.a)(
          {},
          function () {
            var t = this.$createElement,
              e = this._self._c || t;
            return e(
              "div",
              { staticClass: "container" },
              [e("router-view")],
              1
            );
          },
          [],
          !1,
          null,
          null,
          null
        ).exports),
      fu = (n(491), n(67));
    Object(fu.initEnv)({ debug: !1 }),
      r.a.use(m()),
      r.a.use(I, { click: { spmId: "444.0", logId: "000873" } }),
      (r.a.config.productionTip = !1),
      new r.a({
        router: pu,
        store: re,
        render: function (t) {
          return t(mu);
        },
      }).$mount("#link-message");
    var hu = window.location.href.indexOf("from_workshop=1") > -1,
      gu = hu
        ? "//s1.hdslb.com/bfs/live-pkg/workshop-patchouli/WorkshopPatchouli.umd.min.js"
        : "https://s1.hdslb.com/bfs/seed/laputa-entry-header/bili-entry-header.umd.js";
    s()(gu).then(function () {
      if ((hu && window.WorkshopPatchouli.mountNavbar("#home_nav"), !hu)) {
        var t = document.getElementsByClassName("z-top-container")[0];
        new BiliEntryHeader({
          config: {
            headerType: "mini",
            disableSticky: !0,
            disableChannelEntry: !1,
            tokenSupport: !0,
          },
        }).init(t);
      }
    }),
      Sentry.init({
        dsn: "https://7749194921854fb59a0a20534aa0665d@api.bilibili.com/x/traceback/20",
        release: Object({ NODE_ENV: "production", BASE_URL: "/" }).COMMIT_ID,
        sampleRate: 0.1,
        integrations: [
          new Sentry.Integrations.InboundFilters({
            ignoreErrors: [
              /Network Error/,
              /(SECURITY_ERR|SecurityError|Illegal invocation|The operation is)/,
              /网络/,
              /Error: 您没登陆，想干撒子/,
              /\$ is not a function/,
              /share_ipad/,
              /(hw-|hw_)/,
              /Invalid or unexpected/,
              /UnhandledRejection/,
              /-8888/,
              /AbortError/,
              /__bp_defaultMsgObj/,
              /extension:\/\//,
              /clear_link_bilibili/,
              /QuotaExceededError/,
              /(\$UCBrowser|postMessage|YoukuAntiAds)/,
              /Can't find variable:/,
              /(WindVaneAvailableInteractedTime|-extension)/,
              /MyAppGet/,
              /__tv_keydown/,
              /Failed to execute 'removeChild' on 'Node': The node to be removed is not a child of this node./,
              /WebViewJavascriptBridge/,
              /timeout of 0ms exceeded/,
            ],
          }),
          new Sentry.Integrations.Vue({ Vue: r.a, attachProps: !0 }),
        ],
      }),
      "function" == typeof window.onLoginInfoLoaded &&
        window.onLoginInfoLoaded(function (t) {
          if (t.isLogin)
            try {
              Sentry.configureScope(function (e) {
                e.setUser(t);
              });
            } catch (t) {}
        });
  },
]);
//# sourceMappingURL=index.918986da.js.map
